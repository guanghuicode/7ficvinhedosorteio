var Ew=t=>{throw TypeError(t)};var b1=(t,e,n)=>e.has(t)||Ew("Cannot "+n);var q=(t,e,n)=>(b1(t,e,"read from private field"),n?n.call(t):e.get(t)),Re=(t,e,n)=>e.has(t)?Ew("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),we=(t,e,n,r)=>(b1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ge=(t,e,n)=>(b1(t,e,"access private method"),n);var If=(t,e,n,r)=>({set _(i){we(t,e,i,n)},get _(){return q(t,e,r)}});function tA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nA={exports:{}},N0={},rA={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh=Symbol.for("react.element"),CR=Symbol.for("react.portal"),TR=Symbol.for("react.fragment"),IR=Symbol.for("react.strict_mode"),SR=Symbol.for("react.profiler"),bR=Symbol.for("react.provider"),RR=Symbol.for("react.context"),PR=Symbol.for("react.forward_ref"),NR=Symbol.for("react.suspense"),OR=Symbol.for("react.memo"),DR=Symbol.for("react.lazy"),_w=Symbol.iterator;function MR(t){return t===null||typeof t!="object"?null:(t=_w&&t[_w]||t["@@iterator"],typeof t=="function"?t:null)}var iA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sA=Object.assign,oA={};function Bu(t,e,n){this.props=t,this.context=e,this.refs=oA,this.updater=n||iA}Bu.prototype.isReactComponent={};Bu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aA(){}aA.prototype=Bu.prototype;function Om(t,e,n){this.props=t,this.context=e,this.refs=oA,this.updater=n||iA}var Dm=Om.prototype=new aA;Dm.constructor=Om;sA(Dm,Bu.prototype);Dm.isPureReactComponent=!0;var Aw=Array.isArray,lA=Object.prototype.hasOwnProperty,Mm={current:null},uA={key:!0,ref:!0,__self:!0,__source:!0};function cA(t,e,n){var r,i={},o=null,u=null;if(e!=null)for(r in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(o=""+e.key),e)lA.call(e,r)&&!uA.hasOwnProperty(r)&&(i[r]=e[r]);var f=arguments.length-2;if(f===1)i.children=n;else if(1<f){for(var d=Array(f),g=0;g<f;g++)d[g]=arguments[g+2];i.children=d}if(t&&t.defaultProps)for(r in f=t.defaultProps,f)i[r]===void 0&&(i[r]=f[r]);return{$$typeof:Uh,type:t,key:o,ref:u,props:i,_owner:Mm.current}}function kR(t,e){return{$$typeof:Uh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function km(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uh}function LR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cw=/\/+/g;function R1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LR(""+t.key):e.toString(36)}function td(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case Uh:case CR:u=!0}}if(u)return u=t,i=i(u),t=r===""?"."+R1(u,0):r,Aw(i)?(n="",t!=null&&(n=t.replace(Cw,"$&/")+"/"),td(i,e,n,"",function(g){return g})):i!=null&&(km(i)&&(i=kR(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(Cw,"$&/")+"/")+t)),e.push(i)),1;if(u=0,r=r===""?".":r+":",Aw(t))for(var f=0;f<t.length;f++){o=t[f];var d=r+R1(o,f);u+=td(o,e,n,d,i)}else if(d=MR(t),typeof d=="function")for(t=d.call(t),f=0;!(o=t.next()).done;)o=o.value,d=r+R1(o,f++),u+=td(o,e,n,d,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function Sf(t,e,n){if(t==null)return t;var r=[],i=0;return td(t,r,"","",function(o){return e.call(n,o,i++)}),r}function FR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dr={current:null},nd={transition:null},BR={ReactCurrentDispatcher:dr,ReactCurrentBatchConfig:nd,ReactCurrentOwner:Mm};function hA(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Sf,forEach:function(t,e,n){Sf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sf(t,function(){e++}),e},toArray:function(t){return Sf(t,function(e){return e})||[]},only:function(t){if(!km(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=Bu;Xe.Fragment=TR;Xe.Profiler=SR;Xe.PureComponent=Om;Xe.StrictMode=IR;Xe.Suspense=NR;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BR;Xe.act=hA;Xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sA({},t.props),i=t.key,o=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,u=Mm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(d in e)lA.call(e,d)&&!uA.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&f!==void 0?f[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){f=Array(d);for(var g=0;g<d;g++)f[g]=arguments[g+2];r.children=f}return{$$typeof:Uh,type:t.type,key:i,ref:o,props:r,_owner:u}};Xe.createContext=function(t){return t={$$typeof:RR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bR,_context:t},t.Consumer=t};Xe.createElement=cA;Xe.createFactory=function(t){var e=cA.bind(null,t);return e.type=t,e};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:PR,render:t}};Xe.isValidElement=km;Xe.lazy=function(t){return{$$typeof:DR,_payload:{_status:-1,_result:t},_init:FR}};Xe.memo=function(t,e){return{$$typeof:OR,type:t,compare:e===void 0?null:e}};Xe.startTransition=function(t){var e=nd.transition;nd.transition={};try{t()}finally{nd.transition=e}};Xe.unstable_act=hA;Xe.useCallback=function(t,e){return dr.current.useCallback(t,e)};Xe.useContext=function(t){return dr.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return dr.current.useDeferredValue(t)};Xe.useEffect=function(t,e){return dr.current.useEffect(t,e)};Xe.useId=function(){return dr.current.useId()};Xe.useImperativeHandle=function(t,e,n){return dr.current.useImperativeHandle(t,e,n)};Xe.useInsertionEffect=function(t,e){return dr.current.useInsertionEffect(t,e)};Xe.useLayoutEffect=function(t,e){return dr.current.useLayoutEffect(t,e)};Xe.useMemo=function(t,e){return dr.current.useMemo(t,e)};Xe.useReducer=function(t,e,n){return dr.current.useReducer(t,e,n)};Xe.useRef=function(t){return dr.current.useRef(t)};Xe.useState=function(t){return dr.current.useState(t)};Xe.useSyncExternalStore=function(t,e,n){return dr.current.useSyncExternalStore(t,e,n)};Xe.useTransition=function(){return dr.current.useTransition()};Xe.version="18.3.1";rA.exports=Xe;var Y=rA.exports;const ln=Nm(Y),VR=tA({__proto__:null,default:ln},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UR=Y,jR=Symbol.for("react.element"),zR=Symbol.for("react.fragment"),WR=Object.prototype.hasOwnProperty,HR=UR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GR={key:!0,ref:!0,__self:!0,__source:!0};function fA(t,e,n){var r,i={},o=null,u=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)WR.call(e,r)&&!GR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jR,type:t,key:o,ref:u,props:i,_owner:HR.current}}N0.Fragment=zR;N0.jsx=fA;N0.jsxs=fA;nA.exports=N0;var ae=nA.exports,bp={},dA={exports:{}},$r={},pA={exports:{}},gA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(de,Ce){var be=de.length;de.push(Ce);e:for(;0<be;){var $e=be-1>>>1,je=de[$e];if(0<i(je,Ce))de[$e]=Ce,de[be]=je,be=$e;else break e}}function n(de){return de.length===0?null:de[0]}function r(de){if(de.length===0)return null;var Ce=de[0],be=de.pop();if(be!==Ce){de[0]=be;e:for(var $e=0,je=de.length,mt=je>>>1;$e<mt;){var St=2*($e+1)-1,Pr=de[St],Se=St+1,Nr=de[Se];if(0>i(Pr,be))Se<je&&0>i(Nr,Pr)?(de[$e]=Nr,de[Se]=be,$e=Se):(de[$e]=Pr,de[St]=be,$e=St);else if(Se<je&&0>i(Nr,be))de[$e]=Nr,de[Se]=be,$e=Se;else break e}}return Ce}function i(de,Ce){var be=de.sortIndex-Ce.sortIndex;return be!==0?be:de.id-Ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var d=[],g=[],w=1,x=null,_=3,T=!1,O=!1,M=!1,B=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(de){for(var Ce=n(g);Ce!==null;){if(Ce.callback===null)r(g);else if(Ce.startTime<=de)r(g),Ce.sortIndex=Ce.expirationTime,e(d,Ce);else break;Ce=n(g)}}function z(de){if(M=!1,R(de),!O)if(n(d)!==null)O=!0,ct(Q);else{var Ce=n(g);Ce!==null&&ve(z,Ce.startTime-de)}}function Q(de,Ce){O=!1,M&&(M=!1,k(P),P=-1),T=!0;var be=_;try{for(R(Ce),x=n(d);x!==null&&(!(x.expirationTime>Ce)||de&&!K());){var $e=x.callback;if(typeof $e=="function"){x.callback=null,_=x.priorityLevel;var je=$e(x.expirationTime<=Ce);Ce=t.unstable_now(),typeof je=="function"?x.callback=je:x===n(d)&&r(d),R(Ce)}else r(d);x=n(d)}if(x!==null)var mt=!0;else{var St=n(g);St!==null&&ve(z,St.startTime-Ce),mt=!1}return mt}finally{x=null,_=be,T=!1}}var Z=!1,L=null,P=-1,F=5,j=-1;function K(){return!(t.unstable_now()-j<F)}function G(){if(L!==null){var de=t.unstable_now();j=de;var Ce=!0;try{Ce=L(!0,de)}finally{Ce?H():(Z=!1,L=null)}}else Z=!1}var H;if(typeof N=="function")H=function(){N(G)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,se=We.port2;We.port1.onmessage=G,H=function(){se.postMessage(null)}}else H=function(){B(G,0)};function ct(de){L=de,Z||(Z=!0,H())}function ve(de,Ce){P=B(function(){de(t.unstable_now())},Ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(de){de.callback=null},t.unstable_continueExecution=function(){O||T||(O=!0,ct(Q))},t.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<de?Math.floor(1e3/de):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(de){switch(_){case 1:case 2:case 3:var Ce=3;break;default:Ce=_}var be=_;_=Ce;try{return de()}finally{_=be}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(de,Ce){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var be=_;_=de;try{return Ce()}finally{_=be}},t.unstable_scheduleCallback=function(de,Ce,be){var $e=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?$e+be:$e):be=$e,de){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=be+je,de={id:w++,callback:Ce,priorityLevel:de,startTime:be,expirationTime:je,sortIndex:-1},be>$e?(de.sortIndex=be,e(g,de),n(d)===null&&de===n(g)&&(M?(k(P),P=-1):M=!0,ve(z,be-$e))):(de.sortIndex=je,e(d,de),O||T||(O=!0,ct(Q))),de},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(de){var Ce=_;return function(){var be=_;_=Ce;try{return de.apply(this,arguments)}finally{_=be}}}})(gA);pA.exports=gA;var KR=pA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qR=Y,qr=KR;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mA=new Set,Jc={};function ll(t,e){vu(t,e),vu(t+"Capture",e)}function vu(t,e){for(Jc[t]=e,t=0;t<e.length;t++)mA.add(e[t])}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rp=Object.prototype.hasOwnProperty,XR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tw={},Iw={};function $R(t){return Rp.call(Iw,t)?!0:Rp.call(Tw,t)?!1:XR.test(t)?Iw[t]=!0:(Tw[t]=!0,!1)}function QR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YR(t,e,n,r){if(e===null||typeof e>"u"||QR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pr(t,e,n,r,i,o,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=u}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new pr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new pr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new pr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new pr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new pr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new pr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new pr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new pr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new pr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lm=/[\-:]([a-z])/g;function Fm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lm,Fm);Gn[e]=new pr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lm,Fm);Gn[e]=new pr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lm,Fm);Gn[e]=new pr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new pr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new pr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bm(t,e,n,r){var i=Gn.hasOwnProperty(e)?Gn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YR(e,n,i,r)&&(n=null),r||i===null?$R(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gs=qR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bf=Symbol.for("react.element"),Rl=Symbol.for("react.portal"),Pl=Symbol.for("react.fragment"),Vm=Symbol.for("react.strict_mode"),Pp=Symbol.for("react.profiler"),yA=Symbol.for("react.provider"),wA=Symbol.for("react.context"),Um=Symbol.for("react.forward_ref"),Np=Symbol.for("react.suspense"),Op=Symbol.for("react.suspense_list"),jm=Symbol.for("react.memo"),uo=Symbol.for("react.lazy"),vA=Symbol.for("react.offscreen"),Sw=Symbol.iterator;function hc(t){return t===null||typeof t!="object"?null:(t=Sw&&t[Sw]||t["@@iterator"],typeof t=="function"?t:null)}var $t=Object.assign,P1;function Ac(t){if(P1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);P1=e&&e[1]||""}return`
`+P1+t}var N1=!1;function O1(t,e){if(!t||N1)return"";N1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var r=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){r=g}t.call(e.prototype)}else{try{throw Error()}catch(g){r=g}t()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var i=g.stack.split(`
`),o=r.stack.split(`
`),u=i.length-1,f=o.length-1;1<=u&&0<=f&&i[u]!==o[f];)f--;for(;1<=u&&0<=f;u--,f--)if(i[u]!==o[f]){if(u!==1||f!==1)do if(u--,f--,0>f||i[u]!==o[f]){var d=`
`+i[u].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=u&&0<=f);break}}}finally{N1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ac(t):""}function ZR(t){switch(t.tag){case 5:return Ac(t.type);case 16:return Ac("Lazy");case 13:return Ac("Suspense");case 19:return Ac("SuspenseList");case 0:case 2:case 15:return t=O1(t.type,!1),t;case 11:return t=O1(t.type.render,!1),t;case 1:return t=O1(t.type,!0),t;default:return""}}function Dp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pl:return"Fragment";case Rl:return"Portal";case Pp:return"Profiler";case Vm:return"StrictMode";case Np:return"Suspense";case Op:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wA:return(t.displayName||"Context")+".Consumer";case yA:return(t._context.displayName||"Context")+".Provider";case Um:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jm:return e=t.displayName||null,e!==null?e:Dp(t.type)||"Memo";case uo:e=t._payload,t=t._init;try{return Dp(t(e))}catch{}}return null}function JR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dp(e);case 8:return e===Vm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Go(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function e4(t){var e=xA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rf(t){t._valueTracker||(t._valueTracker=e4(t))}function EA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mp(t,e){var n=e.checked;return $t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Go(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _A(t,e){e=e.checked,e!=null&&Bm(t,"checked",e,!1)}function kp(t,e){_A(t,e);var n=Go(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lp(t,e.type,Go(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lp(t,e,n){(e!=="number"||bd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cc=Array.isArray;function Xl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Go(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Fp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return $t({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(Cc(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Go(n)}}function AA(t,e){var n=Go(e.value),r=Go(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Nw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pf,TA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pf=Pf||document.createElement("div"),Pf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function eh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t4=["Webkit","ms","Moz","O"];Object.keys(kc).forEach(function(t){t4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kc[e]=kc[t]})});function IA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kc.hasOwnProperty(t)&&kc[t]?(""+e).trim():e+"px"}function SA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=IA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var n4=$t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vp(t,e){if(e){if(n4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function Up(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jp=null;function zm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zp=null,$l=null,Ql=null;function Ow(t){if(t=Wh(t)){if(typeof zp!="function")throw Error(he(280));var e=t.stateNode;e&&(e=L0(e),zp(t.stateNode,t.type,e))}}function bA(t){$l?Ql?Ql.push(t):Ql=[t]:$l=t}function RA(){if($l){var t=$l,e=Ql;if(Ql=$l=null,Ow(t),e)for(t=0;t<e.length;t++)Ow(e[t])}}function PA(t,e){return t(e)}function NA(){}var D1=!1;function OA(t,e,n){if(D1)return t(e,n);D1=!0;try{return PA(t,e,n)}finally{D1=!1,($l!==null||Ql!==null)&&(NA(),RA())}}function th(t,e){var n=t.stateNode;if(n===null)return null;var r=L0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var Wp=!1;if(Ms)try{var fc={};Object.defineProperty(fc,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",fc,fc),window.removeEventListener("test",fc,fc)}catch{Wp=!1}function r4(t,e,n,r,i,o,u,f,d){var g=Array.prototype.slice.call(arguments,3);try{e.apply(n,g)}catch(w){this.onError(w)}}var Lc=!1,Rd=null,Pd=!1,Hp=null,i4={onError:function(t){Lc=!0,Rd=t}};function s4(t,e,n,r,i,o,u,f,d){Lc=!1,Rd=null,r4.apply(i4,arguments)}function o4(t,e,n,r,i,o,u,f,d){if(s4.apply(this,arguments),Lc){if(Lc){var g=Rd;Lc=!1,Rd=null}else throw Error(he(198));Pd||(Pd=!0,Hp=g)}}function ul(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dw(t){if(ul(t)!==t)throw Error(he(188))}function a4(t){var e=t.alternate;if(!e){if(e=ul(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Dw(i),t;if(o===r)return Dw(i),e;o=o.sibling}throw Error(he(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,f=i.child;f;){if(f===n){u=!0,n=i,r=o;break}if(f===r){u=!0,r=i,n=o;break}f=f.sibling}if(!u){for(f=o.child;f;){if(f===n){u=!0,n=o,r=i;break}if(f===r){u=!0,r=o,n=i;break}f=f.sibling}if(!u)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function MA(t){return t=a4(t),t!==null?kA(t):null}function kA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kA(t);if(e!==null)return e;t=t.sibling}return null}var LA=qr.unstable_scheduleCallback,Mw=qr.unstable_cancelCallback,l4=qr.unstable_shouldYield,u4=qr.unstable_requestPaint,cn=qr.unstable_now,c4=qr.unstable_getCurrentPriorityLevel,Wm=qr.unstable_ImmediatePriority,FA=qr.unstable_UserBlockingPriority,Nd=qr.unstable_NormalPriority,h4=qr.unstable_LowPriority,BA=qr.unstable_IdlePriority,O0=null,Xi=null;function f4(t){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(O0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:g4,d4=Math.log,p4=Math.LN2;function g4(t){return t>>>=0,t===0?32:31-(d4(t)/p4|0)|0}var Nf=64,Of=4194304;function Tc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Od(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,u=n&268435455;if(u!==0){var f=u&~i;f!==0?r=Tc(f):(o&=u,o!==0&&(r=Tc(o)))}else u=n&~i,u!==0?r=Tc(u):o!==0&&(r=Tc(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ti(e),i=1<<n,r|=t[n],e&=~i;return r}function m4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var u=31-Ti(o),f=1<<u,d=i[u];d===-1?(!(f&n)||f&r)&&(i[u]=m4(f,e)):d<=e&&(t.expiredLanes|=f),o&=~f}}function Gp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VA(){var t=Nf;return Nf<<=1,!(Nf&4194240)&&(Nf=64),t}function M1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function jh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ti(e),t[e]=n}function w4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ti(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Hm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ti(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var vt=0;function UA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jA,Gm,zA,WA,HA,Kp=!1,Df=[],Oo=null,Do=null,Mo=null,nh=new Map,rh=new Map,ho=[],v4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kw(t,e){switch(t){case"focusin":case"focusout":Oo=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Mo=null;break;case"pointerover":case"pointerout":nh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(e.pointerId)}}function dc(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Wh(e),e!==null&&Gm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function x4(t,e,n,r,i){switch(e){case"focusin":return Oo=dc(Oo,t,e,n,r,i),!0;case"dragenter":return Do=dc(Do,t,e,n,r,i),!0;case"mouseover":return Mo=dc(Mo,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return nh.set(o,dc(nh.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,rh.set(o,dc(rh.get(o)||null,t,e,n,r,i)),!0}return!1}function GA(t){var e=Sa(t.target);if(e!==null){var n=ul(e);if(n!==null){if(e=n.tag,e===13){if(e=DA(n),e!==null){t.blockedOn=e,HA(t.priority,function(){zA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jp=r,n.target.dispatchEvent(r),jp=null}else return e=Wh(n),e!==null&&Gm(e),t.blockedOn=n,!1;e.shift()}return!0}function Lw(t,e,n){rd(t)&&n.delete(e)}function E4(){Kp=!1,Oo!==null&&rd(Oo)&&(Oo=null),Do!==null&&rd(Do)&&(Do=null),Mo!==null&&rd(Mo)&&(Mo=null),nh.forEach(Lw),rh.forEach(Lw)}function pc(t,e){t.blockedOn===e&&(t.blockedOn=null,Kp||(Kp=!0,qr.unstable_scheduleCallback(qr.unstable_NormalPriority,E4)))}function ih(t){function e(i){return pc(i,t)}if(0<Df.length){pc(Df[0],t);for(var n=1;n<Df.length;n++){var r=Df[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Oo!==null&&pc(Oo,t),Do!==null&&pc(Do,t),Mo!==null&&pc(Mo,t),nh.forEach(e),rh.forEach(e),n=0;n<ho.length;n++)r=ho[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ho.length&&(n=ho[0],n.blockedOn===null);)GA(n),n.blockedOn===null&&ho.shift()}var Yl=Gs.ReactCurrentBatchConfig,Dd=!0;function _4(t,e,n,r){var i=vt,o=Yl.transition;Yl.transition=null;try{vt=1,Km(t,e,n,r)}finally{vt=i,Yl.transition=o}}function A4(t,e,n,r){var i=vt,o=Yl.transition;Yl.transition=null;try{vt=4,Km(t,e,n,r)}finally{vt=i,Yl.transition=o}}function Km(t,e,n,r){if(Dd){var i=qp(t,e,n,r);if(i===null)H1(t,e,r,Md,n),kw(t,r);else if(x4(i,t,e,n,r))r.stopPropagation();else if(kw(t,r),e&4&&-1<v4.indexOf(t)){for(;i!==null;){var o=Wh(i);if(o!==null&&jA(o),o=qp(t,e,n,r),o===null&&H1(t,e,r,Md,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else H1(t,e,r,null,n)}}var Md=null;function qp(t,e,n,r){if(Md=null,t=zm(r),t=Sa(t),t!==null)if(e=ul(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Md=t,null}function KA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c4()){case Wm:return 1;case FA:return 4;case Nd:case h4:return 16;case BA:return 536870912;default:return 16}default:return 16}}var bo=null,qm=null,id=null;function qA(){if(id)return id;var t,e=qm,n=e.length,r,i="value"in bo?bo.value:bo.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var u=n-t;for(r=1;r<=u&&e[n-r]===i[o-r];r++);return id=i.slice(t,1<r?1-r:void 0)}function sd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mf(){return!0}function Fw(){return!1}function Qr(t){function e(n,r,i,o,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(n=t[f],this[f]=n?n(o):o[f]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mf:Fw,this.isPropagationStopped=Fw,this}return $t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mf)},persist:function(){},isPersistent:Mf}),e}var Vu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xm=Qr(Vu),zh=$t({},Vu,{view:0,detail:0}),C4=Qr(zh),k1,L1,gc,D0=$t({},zh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$m,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gc&&(gc&&t.type==="mousemove"?(k1=t.screenX-gc.screenX,L1=t.screenY-gc.screenY):L1=k1=0,gc=t),k1)},movementY:function(t){return"movementY"in t?t.movementY:L1}}),Bw=Qr(D0),T4=$t({},D0,{dataTransfer:0}),I4=Qr(T4),S4=$t({},zh,{relatedTarget:0}),F1=Qr(S4),b4=$t({},Vu,{animationName:0,elapsedTime:0,pseudoElement:0}),R4=Qr(b4),P4=$t({},Vu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),N4=Qr(P4),O4=$t({},Vu,{data:0}),Vw=Qr(O4),D4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k4[t])?!!e[t]:!1}function $m(){return L4}var F4=$t({},zh,{key:function(t){if(t.key){var e=D4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?M4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$m,charCode:function(t){return t.type==="keypress"?sd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),B4=Qr(F4),V4=$t({},D0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uw=Qr(V4),U4=$t({},zh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$m}),j4=Qr(U4),z4=$t({},Vu,{propertyName:0,elapsedTime:0,pseudoElement:0}),W4=Qr(z4),H4=$t({},D0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G4=Qr(H4),K4=[9,13,27,32],Qm=Ms&&"CompositionEvent"in window,Fc=null;Ms&&"documentMode"in document&&(Fc=document.documentMode);var q4=Ms&&"TextEvent"in window&&!Fc,XA=Ms&&(!Qm||Fc&&8<Fc&&11>=Fc),jw=" ",zw=!1;function $A(t,e){switch(t){case"keyup":return K4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nl=!1;function X4(t,e){switch(t){case"compositionend":return QA(e);case"keypress":return e.which!==32?null:(zw=!0,jw);case"textInput":return t=e.data,t===jw&&zw?null:t;default:return null}}function $4(t,e){if(Nl)return t==="compositionend"||!Qm&&$A(t,e)?(t=qA(),id=qm=bo=null,Nl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XA&&e.locale!=="ko"?null:e.data;default:return null}}var Q4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ww(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Q4[t.type]:e==="textarea"}function YA(t,e,n,r){bA(r),e=kd(e,"onChange"),0<e.length&&(n=new Xm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bc=null,sh=null;function Y4(t){lC(t,0)}function M0(t){var e=Ml(t);if(EA(e))return t}function Z4(t,e){if(t==="change")return e}var ZA=!1;if(Ms){var B1;if(Ms){var V1="oninput"in document;if(!V1){var Hw=document.createElement("div");Hw.setAttribute("oninput","return;"),V1=typeof Hw.oninput=="function"}B1=V1}else B1=!1;ZA=B1&&(!document.documentMode||9<document.documentMode)}function Gw(){Bc&&(Bc.detachEvent("onpropertychange",JA),sh=Bc=null)}function JA(t){if(t.propertyName==="value"&&M0(sh)){var e=[];YA(e,sh,t,zm(t)),OA(Y4,e)}}function J4(t,e,n){t==="focusin"?(Gw(),Bc=e,sh=n,Bc.attachEvent("onpropertychange",JA)):t==="focusout"&&Gw()}function eP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return M0(sh)}function tP(t,e){if(t==="click")return M0(e)}function nP(t,e){if(t==="input"||t==="change")return M0(e)}function rP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bi=typeof Object.is=="function"?Object.is:rP;function oh(t,e){if(bi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rp.call(e,i)||!bi(t[i],e[i]))return!1}return!0}function Kw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qw(t,e){var n=Kw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kw(n)}}function eC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tC(){for(var t=window,e=bd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bd(t.document)}return e}function Ym(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iP(t){var e=tC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eC(n.ownerDocument.documentElement,n)){if(r!==null&&Ym(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=qw(n,o);var u=qw(n,r);i&&u&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sP=Ms&&"documentMode"in document&&11>=document.documentMode,Ol=null,Xp=null,Vc=null,$p=!1;function Xw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$p||Ol==null||Ol!==bd(r)||(r=Ol,"selectionStart"in r&&Ym(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vc&&oh(Vc,r)||(Vc=r,r=kd(Xp,"onSelect"),0<r.length&&(e=new Xm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ol)))}function kf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Dl={animationend:kf("Animation","AnimationEnd"),animationiteration:kf("Animation","AnimationIteration"),animationstart:kf("Animation","AnimationStart"),transitionend:kf("Transition","TransitionEnd")},U1={},nC={};Ms&&(nC=document.createElement("div").style,"AnimationEvent"in window||(delete Dl.animationend.animation,delete Dl.animationiteration.animation,delete Dl.animationstart.animation),"TransitionEvent"in window||delete Dl.transitionend.transition);function k0(t){if(U1[t])return U1[t];if(!Dl[t])return t;var e=Dl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nC)return U1[t]=e[n];return t}var rC=k0("animationend"),iC=k0("animationiteration"),sC=k0("animationstart"),oC=k0("transitionend"),aC=new Map,$w="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ea(t,e){aC.set(t,e),ll(e,[t])}for(var j1=0;j1<$w.length;j1++){var z1=$w[j1],oP=z1.toLowerCase(),aP=z1[0].toUpperCase()+z1.slice(1);ea(oP,"on"+aP)}ea(rC,"onAnimationEnd");ea(iC,"onAnimationIteration");ea(sC,"onAnimationStart");ea("dblclick","onDoubleClick");ea("focusin","onFocus");ea("focusout","onBlur");ea(oC,"onTransitionEnd");vu("onMouseEnter",["mouseout","mouseover"]);vu("onMouseLeave",["mouseout","mouseover"]);vu("onPointerEnter",["pointerout","pointerover"]);vu("onPointerLeave",["pointerout","pointerover"]);ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ll("onBeforeInput",["compositionend","keypress","textInput","paste"]);ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ic));function Qw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,o4(r,e,void 0,t),t.currentTarget=null}function lC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var u=r.length-1;0<=u;u--){var f=r[u],d=f.instance,g=f.currentTarget;if(f=f.listener,d!==o&&i.isPropagationStopped())break e;Qw(i,f,g),o=d}else for(u=0;u<r.length;u++){if(f=r[u],d=f.instance,g=f.currentTarget,f=f.listener,d!==o&&i.isPropagationStopped())break e;Qw(i,f,g),o=d}}}if(Pd)throw t=Hp,Pd=!1,Hp=null,t}function Dt(t,e){var n=e[eg];n===void 0&&(n=e[eg]=new Set);var r=t+"__bubble";n.has(r)||(uC(e,t,2,!1),n.add(r))}function W1(t,e,n){var r=0;e&&(r|=4),uC(n,t,r,e)}var Lf="_reactListening"+Math.random().toString(36).slice(2);function ah(t){if(!t[Lf]){t[Lf]=!0,mA.forEach(function(n){n!=="selectionchange"&&(lP.has(n)||W1(n,!1,t),W1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lf]||(e[Lf]=!0,W1("selectionchange",!1,e))}}function uC(t,e,n,r){switch(KA(e)){case 1:var i=_4;break;case 4:i=A4;break;default:i=Km}n=i.bind(null,e,n,t),i=void 0,!Wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function H1(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var f=r.stateNode.containerInfo;if(f===i||f.nodeType===8&&f.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var d=u.tag;if((d===3||d===4)&&(d=u.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;u=u.return}for(;f!==null;){if(u=Sa(f),u===null)return;if(d=u.tag,d===5||d===6){r=o=u;continue e}f=f.parentNode}}r=r.return}OA(function(){var g=o,w=zm(n),x=[];e:{var _=aC.get(t);if(_!==void 0){var T=Xm,O=t;switch(t){case"keypress":if(sd(n)===0)break e;case"keydown":case"keyup":T=B4;break;case"focusin":O="focus",T=F1;break;case"focusout":O="blur",T=F1;break;case"beforeblur":case"afterblur":T=F1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Bw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=I4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=j4;break;case rC:case iC:case sC:T=R4;break;case oC:T=W4;break;case"scroll":T=C4;break;case"wheel":T=G4;break;case"copy":case"cut":case"paste":T=N4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Uw}var M=(e&4)!==0,B=!M&&t==="scroll",k=M?_!==null?_+"Capture":null:_;M=[];for(var N=g,R;N!==null;){R=N;var z=R.stateNode;if(R.tag===5&&z!==null&&(R=z,k!==null&&(z=th(N,k),z!=null&&M.push(lh(N,z,R)))),B)break;N=N.return}0<M.length&&(_=new T(_,O,null,n,w),x.push({event:_,listeners:M}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",_&&n!==jp&&(O=n.relatedTarget||n.fromElement)&&(Sa(O)||O[ks]))break e;if((T||_)&&(_=w.window===w?w:(_=w.ownerDocument)?_.defaultView||_.parentWindow:window,T?(O=n.relatedTarget||n.toElement,T=g,O=O?Sa(O):null,O!==null&&(B=ul(O),O!==B||O.tag!==5&&O.tag!==6)&&(O=null)):(T=null,O=g),T!==O)){if(M=Bw,z="onMouseLeave",k="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(M=Uw,z="onPointerLeave",k="onPointerEnter",N="pointer"),B=T==null?_:Ml(T),R=O==null?_:Ml(O),_=new M(z,N+"leave",T,n,w),_.target=B,_.relatedTarget=R,z=null,Sa(w)===g&&(M=new M(k,N+"enter",O,n,w),M.target=R,M.relatedTarget=B,z=M),B=z,T&&O)t:{for(M=T,k=O,N=0,R=M;R;R=Il(R))N++;for(R=0,z=k;z;z=Il(z))R++;for(;0<N-R;)M=Il(M),N--;for(;0<R-N;)k=Il(k),R--;for(;N--;){if(M===k||k!==null&&M===k.alternate)break t;M=Il(M),k=Il(k)}M=null}else M=null;T!==null&&Yw(x,_,T,M,!1),O!==null&&B!==null&&Yw(x,B,O,M,!0)}}e:{if(_=g?Ml(g):window,T=_.nodeName&&_.nodeName.toLowerCase(),T==="select"||T==="input"&&_.type==="file")var Q=Z4;else if(Ww(_))if(ZA)Q=nP;else{Q=eP;var Z=J4}else(T=_.nodeName)&&T.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(Q=tP);if(Q&&(Q=Q(t,g))){YA(x,Q,n,w);break e}Z&&Z(t,_,g),t==="focusout"&&(Z=_._wrapperState)&&Z.controlled&&_.type==="number"&&Lp(_,"number",_.value)}switch(Z=g?Ml(g):window,t){case"focusin":(Ww(Z)||Z.contentEditable==="true")&&(Ol=Z,Xp=g,Vc=null);break;case"focusout":Vc=Xp=Ol=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":$p=!1,Xw(x,n,w);break;case"selectionchange":if(sP)break;case"keydown":case"keyup":Xw(x,n,w)}var L;if(Qm)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Nl?$A(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(XA&&n.locale!=="ko"&&(Nl||P!=="onCompositionStart"?P==="onCompositionEnd"&&Nl&&(L=qA()):(bo=w,qm="value"in bo?bo.value:bo.textContent,Nl=!0)),Z=kd(g,P),0<Z.length&&(P=new Vw(P,t,null,n,w),x.push({event:P,listeners:Z}),L?P.data=L:(L=QA(n),L!==null&&(P.data=L)))),(L=q4?X4(t,n):$4(t,n))&&(g=kd(g,"onBeforeInput"),0<g.length&&(w=new Vw("onBeforeInput","beforeinput",null,n,w),x.push({event:w,listeners:g}),w.data=L))}lC(x,e)})}function lh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=th(t,n),o!=null&&r.unshift(lh(t,o,i)),o=th(t,e),o!=null&&r.push(lh(t,o,i))),t=t.return}return r}function Il(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yw(t,e,n,r,i){for(var o=e._reactName,u=[];n!==null&&n!==r;){var f=n,d=f.alternate,g=f.stateNode;if(d!==null&&d===r)break;f.tag===5&&g!==null&&(f=g,i?(d=th(n,o),d!=null&&u.unshift(lh(n,d,f))):i||(d=th(n,o),d!=null&&u.push(lh(n,d,f)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var uP=/\r\n?/g,cP=/\u0000|\uFFFD/g;function Zw(t){return(typeof t=="string"?t:""+t).replace(uP,`
`).replace(cP,"")}function Ff(t,e,n){if(e=Zw(e),Zw(t)!==e&&n)throw Error(he(425))}function Ld(){}var Qp=null,Yp=null;function Zp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jp=typeof setTimeout=="function"?setTimeout:void 0,hP=typeof clearTimeout=="function"?clearTimeout:void 0,Jw=typeof Promise=="function"?Promise:void 0,fP=typeof queueMicrotask=="function"?queueMicrotask:typeof Jw<"u"?function(t){return Jw.resolve(null).then(t).catch(dP)}:Jp;function dP(t){setTimeout(function(){throw t})}function G1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ih(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ih(e)}function ko(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ev(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Uu=Math.random().toString(36).slice(2),Gi="__reactFiber$"+Uu,uh="__reactProps$"+Uu,ks="__reactContainer$"+Uu,eg="__reactEvents$"+Uu,pP="__reactListeners$"+Uu,gP="__reactHandles$"+Uu;function Sa(t){var e=t[Gi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ks]||n[Gi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ev(t);t!==null;){if(n=t[Gi])return n;t=ev(t)}return e}t=n,n=t.parentNode}return null}function Wh(t){return t=t[Gi]||t[ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ml(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function L0(t){return t[uh]||null}var tg=[],kl=-1;function ta(t){return{current:t}}function Lt(t){0>kl||(t.current=tg[kl],tg[kl]=null,kl--)}function It(t,e){kl++,tg[kl]=t.current,t.current=e}var Ko={},rr=ta(Ko),Ir=ta(!1),Xa=Ko;function xu(t,e){var n=t.type.contextTypes;if(!n)return Ko;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Sr(t){return t=t.childContextTypes,t!=null}function Fd(){Lt(Ir),Lt(rr)}function tv(t,e,n){if(rr.current!==Ko)throw Error(he(168));It(rr,e),It(Ir,n)}function cC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(he(108,JR(t)||"Unknown",i));return $t({},n,r)}function Bd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ko,Xa=rr.current,It(rr,t),It(Ir,Ir.current),!0}function nv(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=cC(t,e,Xa),r.__reactInternalMemoizedMergedChildContext=t,Lt(Ir),Lt(rr),It(rr,t)):Lt(Ir),It(Ir,n)}var ws=null,F0=!1,K1=!1;function hC(t){ws===null?ws=[t]:ws.push(t)}function mP(t){F0=!0,hC(t)}function na(){if(!K1&&ws!==null){K1=!0;var t=0,e=vt;try{var n=ws;for(vt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ws=null,F0=!1}catch(i){throw ws!==null&&(ws=ws.slice(t+1)),LA(Wm,na),i}finally{vt=e,K1=!1}}return null}var Ll=[],Fl=0,Vd=null,Ud=0,si=[],oi=0,$a=null,Cs=1,Ts="";function _a(t,e){Ll[Fl++]=Ud,Ll[Fl++]=Vd,Vd=t,Ud=e}function fC(t,e,n){si[oi++]=Cs,si[oi++]=Ts,si[oi++]=$a,$a=t;var r=Cs;t=Ts;var i=32-Ti(r)-1;r&=~(1<<i),n+=1;var o=32-Ti(e)+i;if(30<o){var u=i-i%5;o=(r&(1<<u)-1).toString(32),r>>=u,i-=u,Cs=1<<32-Ti(e)+i|n<<i|r,Ts=o+t}else Cs=1<<o|n<<i|r,Ts=t}function Zm(t){t.return!==null&&(_a(t,1),fC(t,1,0))}function Jm(t){for(;t===Vd;)Vd=Ll[--Fl],Ll[Fl]=null,Ud=Ll[--Fl],Ll[Fl]=null;for(;t===$a;)$a=si[--oi],si[oi]=null,Ts=si[--oi],si[oi]=null,Cs=si[--oi],si[oi]=null}var Gr=null,Hr=null,Ut=!1,Ai=null;function dC(t,e){var n=li(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gr=t,Hr=ko(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gr=t,Hr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$a!==null?{id:Cs,overflow:Ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=li(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gr=t,Hr=null,!0):!1;default:return!1}}function ng(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rg(t){if(Ut){var e=Hr;if(e){var n=e;if(!rv(t,e)){if(ng(t))throw Error(he(418));e=ko(n.nextSibling);var r=Gr;e&&rv(t,e)?dC(r,n):(t.flags=t.flags&-4097|2,Ut=!1,Gr=t)}}else{if(ng(t))throw Error(he(418));t.flags=t.flags&-4097|2,Ut=!1,Gr=t}}}function iv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gr=t}function Bf(t){if(t!==Gr)return!1;if(!Ut)return iv(t),Ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zp(t.type,t.memoizedProps)),e&&(e=Hr)){if(ng(t))throw pC(),Error(he(418));for(;e;)dC(t,e),e=ko(e.nextSibling)}if(iv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Hr=ko(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Hr=null}}else Hr=Gr?ko(t.stateNode.nextSibling):null;return!0}function pC(){for(var t=Hr;t;)t=ko(t.nextSibling)}function Eu(){Hr=Gr=null,Ut=!1}function ey(t){Ai===null?Ai=[t]:Ai.push(t)}var yP=Gs.ReactCurrentBatchConfig;function mc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(u){var f=i.refs;u===null?delete f[o]:f[o]=u},e._stringRef=o,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function Vf(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sv(t){var e=t._init;return e(t._payload)}function gC(t){function e(k,N){if(t){var R=k.deletions;R===null?(k.deletions=[N],k.flags|=16):R.push(N)}}function n(k,N){if(!t)return null;for(;N!==null;)e(k,N),N=N.sibling;return null}function r(k,N){for(k=new Map;N!==null;)N.key!==null?k.set(N.key,N):k.set(N.index,N),N=N.sibling;return k}function i(k,N){return k=Vo(k,N),k.index=0,k.sibling=null,k}function o(k,N,R){return k.index=R,t?(R=k.alternate,R!==null?(R=R.index,R<N?(k.flags|=2,N):R):(k.flags|=2,N)):(k.flags|=1048576,N)}function u(k){return t&&k.alternate===null&&(k.flags|=2),k}function f(k,N,R,z){return N===null||N.tag!==6?(N=J1(R,k.mode,z),N.return=k,N):(N=i(N,R),N.return=k,N)}function d(k,N,R,z){var Q=R.type;return Q===Pl?w(k,N,R.props.children,z,R.key):N!==null&&(N.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===uo&&sv(Q)===N.type)?(z=i(N,R.props),z.ref=mc(k,N,R),z.return=k,z):(z=fd(R.type,R.key,R.props,null,k.mode,z),z.ref=mc(k,N,R),z.return=k,z)}function g(k,N,R,z){return N===null||N.tag!==4||N.stateNode.containerInfo!==R.containerInfo||N.stateNode.implementation!==R.implementation?(N=ep(R,k.mode,z),N.return=k,N):(N=i(N,R.children||[]),N.return=k,N)}function w(k,N,R,z,Q){return N===null||N.tag!==7?(N=Ha(R,k.mode,z,Q),N.return=k,N):(N=i(N,R),N.return=k,N)}function x(k,N,R){if(typeof N=="string"&&N!==""||typeof N=="number")return N=J1(""+N,k.mode,R),N.return=k,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case bf:return R=fd(N.type,N.key,N.props,null,k.mode,R),R.ref=mc(k,null,N),R.return=k,R;case Rl:return N=ep(N,k.mode,R),N.return=k,N;case uo:var z=N._init;return x(k,z(N._payload),R)}if(Cc(N)||hc(N))return N=Ha(N,k.mode,R,null),N.return=k,N;Vf(k,N)}return null}function _(k,N,R,z){var Q=N!==null?N.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return Q!==null?null:f(k,N,""+R,z);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case bf:return R.key===Q?d(k,N,R,z):null;case Rl:return R.key===Q?g(k,N,R,z):null;case uo:return Q=R._init,_(k,N,Q(R._payload),z)}if(Cc(R)||hc(R))return Q!==null?null:w(k,N,R,z,null);Vf(k,R)}return null}function T(k,N,R,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number")return k=k.get(R)||null,f(N,k,""+z,Q);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case bf:return k=k.get(z.key===null?R:z.key)||null,d(N,k,z,Q);case Rl:return k=k.get(z.key===null?R:z.key)||null,g(N,k,z,Q);case uo:var Z=z._init;return T(k,N,R,Z(z._payload),Q)}if(Cc(z)||hc(z))return k=k.get(R)||null,w(N,k,z,Q,null);Vf(N,z)}return null}function O(k,N,R,z){for(var Q=null,Z=null,L=N,P=N=0,F=null;L!==null&&P<R.length;P++){L.index>P?(F=L,L=null):F=L.sibling;var j=_(k,L,R[P],z);if(j===null){L===null&&(L=F);break}t&&L&&j.alternate===null&&e(k,L),N=o(j,N,P),Z===null?Q=j:Z.sibling=j,Z=j,L=F}if(P===R.length)return n(k,L),Ut&&_a(k,P),Q;if(L===null){for(;P<R.length;P++)L=x(k,R[P],z),L!==null&&(N=o(L,N,P),Z===null?Q=L:Z.sibling=L,Z=L);return Ut&&_a(k,P),Q}for(L=r(k,L);P<R.length;P++)F=T(L,k,P,R[P],z),F!==null&&(t&&F.alternate!==null&&L.delete(F.key===null?P:F.key),N=o(F,N,P),Z===null?Q=F:Z.sibling=F,Z=F);return t&&L.forEach(function(K){return e(k,K)}),Ut&&_a(k,P),Q}function M(k,N,R,z){var Q=hc(R);if(typeof Q!="function")throw Error(he(150));if(R=Q.call(R),R==null)throw Error(he(151));for(var Z=Q=null,L=N,P=N=0,F=null,j=R.next();L!==null&&!j.done;P++,j=R.next()){L.index>P?(F=L,L=null):F=L.sibling;var K=_(k,L,j.value,z);if(K===null){L===null&&(L=F);break}t&&L&&K.alternate===null&&e(k,L),N=o(K,N,P),Z===null?Q=K:Z.sibling=K,Z=K,L=F}if(j.done)return n(k,L),Ut&&_a(k,P),Q;if(L===null){for(;!j.done;P++,j=R.next())j=x(k,j.value,z),j!==null&&(N=o(j,N,P),Z===null?Q=j:Z.sibling=j,Z=j);return Ut&&_a(k,P),Q}for(L=r(k,L);!j.done;P++,j=R.next())j=T(L,k,P,j.value,z),j!==null&&(t&&j.alternate!==null&&L.delete(j.key===null?P:j.key),N=o(j,N,P),Z===null?Q=j:Z.sibling=j,Z=j);return t&&L.forEach(function(G){return e(k,G)}),Ut&&_a(k,P),Q}function B(k,N,R,z){if(typeof R=="object"&&R!==null&&R.type===Pl&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case bf:e:{for(var Q=R.key,Z=N;Z!==null;){if(Z.key===Q){if(Q=R.type,Q===Pl){if(Z.tag===7){n(k,Z.sibling),N=i(Z,R.props.children),N.return=k,k=N;break e}}else if(Z.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===uo&&sv(Q)===Z.type){n(k,Z.sibling),N=i(Z,R.props),N.ref=mc(k,Z,R),N.return=k,k=N;break e}n(k,Z);break}else e(k,Z);Z=Z.sibling}R.type===Pl?(N=Ha(R.props.children,k.mode,z,R.key),N.return=k,k=N):(z=fd(R.type,R.key,R.props,null,k.mode,z),z.ref=mc(k,N,R),z.return=k,k=z)}return u(k);case Rl:e:{for(Z=R.key;N!==null;){if(N.key===Z)if(N.tag===4&&N.stateNode.containerInfo===R.containerInfo&&N.stateNode.implementation===R.implementation){n(k,N.sibling),N=i(N,R.children||[]),N.return=k,k=N;break e}else{n(k,N);break}else e(k,N);N=N.sibling}N=ep(R,k.mode,z),N.return=k,k=N}return u(k);case uo:return Z=R._init,B(k,N,Z(R._payload),z)}if(Cc(R))return O(k,N,R,z);if(hc(R))return M(k,N,R,z);Vf(k,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,N!==null&&N.tag===6?(n(k,N.sibling),N=i(N,R),N.return=k,k=N):(n(k,N),N=J1(R,k.mode,z),N.return=k,k=N),u(k)):n(k,N)}return B}var _u=gC(!0),mC=gC(!1),jd=ta(null),zd=null,Bl=null,ty=null;function ny(){ty=Bl=zd=null}function ry(t){var e=jd.current;Lt(jd),t._currentValue=e}function ig(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zl(t,e){zd=t,ty=Bl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tr=!0),t.firstContext=null)}function ci(t){var e=t._currentValue;if(ty!==t)if(t={context:t,memoizedValue:e,next:null},Bl===null){if(zd===null)throw Error(he(308));Bl=t,zd.dependencies={lanes:0,firstContext:t}}else Bl=Bl.next=t;return e}var ba=null;function iy(t){ba===null?ba=[t]:ba.push(t)}function yC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,iy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ls(t,r)}function Ls(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var co=!1;function sy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ls(t,n)}return i=r.interleaved,i===null?(e.next=e,iy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ls(t,n)}function od(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hm(t,n)}}function ov(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wd(t,e,n,r){var i=t.updateQueue;co=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,f=i.shared.pending;if(f!==null){i.shared.pending=null;var d=f,g=d.next;d.next=null,u===null?o=g:u.next=g,u=d;var w=t.alternate;w!==null&&(w=w.updateQueue,f=w.lastBaseUpdate,f!==u&&(f===null?w.firstBaseUpdate=g:f.next=g,w.lastBaseUpdate=d))}if(o!==null){var x=i.baseState;u=0,w=g=d=null,f=o;do{var _=f.lane,T=f.eventTime;if((r&_)===_){w!==null&&(w=w.next={eventTime:T,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var O=t,M=f;switch(_=e,T=n,M.tag){case 1:if(O=M.payload,typeof O=="function"){x=O.call(T,x,_);break e}x=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=M.payload,_=typeof O=="function"?O.call(T,x,_):O,_==null)break e;x=$t({},x,_);break e;case 2:co=!0}}f.callback!==null&&f.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[f]:_.push(f))}else T={eventTime:T,lane:_,tag:f.tag,payload:f.payload,callback:f.callback,next:null},w===null?(g=w=T,d=x):w=w.next=T,u|=_;if(f=f.next,f===null){if(f=i.shared.pending,f===null)break;_=f,f=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(w===null&&(d=x),i.baseState=d,i.firstBaseUpdate=g,i.lastBaseUpdate=w,e=i.shared.interleaved,e!==null){i=e;do u|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ya|=u,t.lanes=u,t.memoizedState=x}}function av(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(he(191,i));i.call(r)}}}var Hh={},$i=ta(Hh),ch=ta(Hh),hh=ta(Hh);function Ra(t){if(t===Hh)throw Error(he(174));return t}function oy(t,e){switch(It(hh,e),It(ch,t),It($i,Hh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bp(e,t)}Lt($i),It($i,e)}function Au(){Lt($i),Lt(ch),Lt(hh)}function vC(t){Ra(hh.current);var e=Ra($i.current),n=Bp(e,t.type);e!==n&&(It(ch,t),It($i,n))}function ay(t){ch.current===t&&(Lt($i),Lt(ch))}var Gt=ta(0);function Hd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var q1=[];function ly(){for(var t=0;t<q1.length;t++)q1[t]._workInProgressVersionPrimary=null;q1.length=0}var ad=Gs.ReactCurrentDispatcher,X1=Gs.ReactCurrentBatchConfig,Qa=0,qt=null,Cn=null,Mn=null,Gd=!1,Uc=!1,fh=0,wP=0;function $n(){throw Error(he(321))}function uy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bi(t[n],e[n]))return!1;return!0}function cy(t,e,n,r,i,o){if(Qa=o,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ad.current=t===null||t.memoizedState===null?_P:AP,t=n(r,i),Uc){o=0;do{if(Uc=!1,fh=0,25<=o)throw Error(he(301));o+=1,Mn=Cn=null,e.updateQueue=null,ad.current=CP,t=n(r,i)}while(Uc)}if(ad.current=Kd,e=Cn!==null&&Cn.next!==null,Qa=0,Mn=Cn=qt=null,Gd=!1,e)throw Error(he(300));return t}function hy(){var t=fh!==0;return fh=0,t}function ji(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?qt.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function hi(){if(Cn===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=Cn.next;var e=Mn===null?qt.memoizedState:Mn.next;if(e!==null)Mn=e,Cn=t;else{if(t===null)throw Error(he(310));Cn=t,t={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},Mn===null?qt.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function dh(t,e){return typeof e=="function"?e(t):e}function $1(t){var e=hi(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=Cn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var f=u=null,d=null,g=o;do{var w=g.lane;if((Qa&w)===w)d!==null&&(d=d.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:t(r,g.action);else{var x={lane:w,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};d===null?(f=d=x,u=r):d=d.next=x,qt.lanes|=w,Ya|=w}g=g.next}while(g!==null&&g!==o);d===null?u=r:d.next=f,bi(r,e.memoizedState)||(Tr=!0),e.memoizedState=r,e.baseState=u,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,qt.lanes|=o,Ya|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Q1(t){var e=hi(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do o=t(o,u.action),u=u.next;while(u!==i);bi(o,e.memoizedState)||(Tr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function xC(){}function EC(t,e){var n=qt,r=hi(),i=e(),o=!bi(r.memoizedState,i);if(o&&(r.memoizedState=i,Tr=!0),r=r.queue,fy(CC.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Mn!==null&&Mn.memoizedState.tag&1){if(n.flags|=2048,ph(9,AC.bind(null,n,r,i,e),void 0,null),kn===null)throw Error(he(349));Qa&30||_C(n,e,i)}return i}function _C(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AC(t,e,n,r){e.value=n,e.getSnapshot=r,TC(e)&&IC(t)}function CC(t,e,n){return n(function(){TC(e)&&IC(t)})}function TC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bi(t,n)}catch{return!0}}function IC(t){var e=Ls(t,1);e!==null&&Ii(e,t,1,-1)}function lv(t){var e=ji();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dh,lastRenderedState:t},e.queue=t,t=t.dispatch=EP.bind(null,qt,t),[e.memoizedState,t]}function ph(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function SC(){return hi().memoizedState}function ld(t,e,n,r){var i=ji();qt.flags|=t,i.memoizedState=ph(1|e,n,void 0,r===void 0?null:r)}function B0(t,e,n,r){var i=hi();r=r===void 0?null:r;var o=void 0;if(Cn!==null){var u=Cn.memoizedState;if(o=u.destroy,r!==null&&uy(r,u.deps)){i.memoizedState=ph(e,n,o,r);return}}qt.flags|=t,i.memoizedState=ph(1|e,n,o,r)}function uv(t,e){return ld(8390656,8,t,e)}function fy(t,e){return B0(2048,8,t,e)}function bC(t,e){return B0(4,2,t,e)}function RC(t,e){return B0(4,4,t,e)}function PC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NC(t,e,n){return n=n!=null?n.concat([t]):null,B0(4,4,PC.bind(null,e,t),n)}function dy(){}function OC(t,e){var n=hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function DC(t,e){var n=hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function MC(t,e,n){return Qa&21?(bi(n,e)||(n=VA(),qt.lanes|=n,Ya|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tr=!0),t.memoizedState=n)}function vP(t,e){var n=vt;vt=n!==0&&4>n?n:4,t(!0);var r=X1.transition;X1.transition={};try{t(!1),e()}finally{vt=n,X1.transition=r}}function kC(){return hi().memoizedState}function xP(t,e,n){var r=Bo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},LC(t))FC(e,n);else if(n=yC(t,e,n,r),n!==null){var i=fr();Ii(n,t,r,i),BC(n,e,r)}}function EP(t,e,n){var r=Bo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(LC(t))FC(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var u=e.lastRenderedState,f=o(u,n);if(i.hasEagerState=!0,i.eagerState=f,bi(f,u)){var d=e.interleaved;d===null?(i.next=i,iy(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=yC(t,e,i,r),n!==null&&(i=fr(),Ii(n,t,r,i),BC(n,e,r))}}function LC(t){var e=t.alternate;return t===qt||e!==null&&e===qt}function FC(t,e){Uc=Gd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function BC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hm(t,n)}}var Kd={readContext:ci,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},_P={readContext:ci,useCallback:function(t,e){return ji().memoizedState=[t,e===void 0?null:e],t},useContext:ci,useEffect:uv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ld(4194308,4,PC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ld(4194308,4,t,e)},useInsertionEffect:function(t,e){return ld(4,2,t,e)},useMemo:function(t,e){var n=ji();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ji();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xP.bind(null,qt,t),[r.memoizedState,t]},useRef:function(t){var e=ji();return t={current:t},e.memoizedState=t},useState:lv,useDebugValue:dy,useDeferredValue:function(t){return ji().memoizedState=t},useTransition:function(){var t=lv(!1),e=t[0];return t=vP.bind(null,t[1]),ji().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qt,i=ji();if(Ut){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),kn===null)throw Error(he(349));Qa&30||_C(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,uv(CC.bind(null,r,o,t),[t]),r.flags|=2048,ph(9,AC.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ji(),e=kn.identifierPrefix;if(Ut){var n=Ts,r=Cs;n=(r&~(1<<32-Ti(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AP={readContext:ci,useCallback:OC,useContext:ci,useEffect:fy,useImperativeHandle:NC,useInsertionEffect:bC,useLayoutEffect:RC,useMemo:DC,useReducer:$1,useRef:SC,useState:function(){return $1(dh)},useDebugValue:dy,useDeferredValue:function(t){var e=hi();return MC(e,Cn.memoizedState,t)},useTransition:function(){var t=$1(dh)[0],e=hi().memoizedState;return[t,e]},useMutableSource:xC,useSyncExternalStore:EC,useId:kC,unstable_isNewReconciler:!1},CP={readContext:ci,useCallback:OC,useContext:ci,useEffect:fy,useImperativeHandle:NC,useInsertionEffect:bC,useLayoutEffect:RC,useMemo:DC,useReducer:Q1,useRef:SC,useState:function(){return Q1(dh)},useDebugValue:dy,useDeferredValue:function(t){var e=hi();return Cn===null?e.memoizedState=t:MC(e,Cn.memoizedState,t)},useTransition:function(){var t=Q1(dh)[0],e=hi().memoizedState;return[t,e]},useMutableSource:xC,useSyncExternalStore:EC,useId:kC,unstable_isNewReconciler:!1};function vi(t,e){if(t&&t.defaultProps){e=$t({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$t({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var V0={isMounted:function(t){return(t=t._reactInternals)?ul(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fr(),i=Bo(t),o=Rs(r,i);o.payload=e,n!=null&&(o.callback=n),e=Lo(t,o,i),e!==null&&(Ii(e,t,i,r),od(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fr(),i=Bo(t),o=Rs(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Lo(t,o,i),e!==null&&(Ii(e,t,i,r),od(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fr(),r=Bo(t),i=Rs(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lo(t,i,r),e!==null&&(Ii(e,t,r,n),od(e,t,r))}};function cv(t,e,n,r,i,o,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,u):e.prototype&&e.prototype.isPureReactComponent?!oh(n,r)||!oh(i,o):!0}function VC(t,e,n){var r=!1,i=Ko,o=e.contextType;return typeof o=="object"&&o!==null?o=ci(o):(i=Sr(e)?Xa:rr.current,r=e.contextTypes,o=(r=r!=null)?xu(t,i):Ko),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=V0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function hv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&V0.enqueueReplaceState(e,e.state,null)}function og(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},sy(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ci(o):(o=Sr(e)?Xa:rr.current,i.context=xu(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(sg(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&V0.enqueueReplaceState(i,i.state,null),Wd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cu(t,e){try{var n="",r=e;do n+=ZR(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Y1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ag(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TP=typeof WeakMap=="function"?WeakMap:Map;function UC(t,e,n){n=Rs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xd||(Xd=!0,yg=r),ag(t,e)},n}function jC(t,e,n){n=Rs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ag(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ag(t,e),typeof r!="function"&&(Fo===null?Fo=new Set([this]):Fo.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function fv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=VP.bind(null,t,e,n),e.then(t,t))}function dv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rs(-1,1),e.tag=2,Lo(n,e,1))),n.lanes|=1),t)}var IP=Gs.ReactCurrentOwner,Tr=!1;function cr(t,e,n,r){e.child=t===null?mC(e,null,n,r):_u(e,t.child,n,r)}function gv(t,e,n,r,i){n=n.render;var o=e.ref;return Zl(e,i),r=cy(t,e,n,r,o,i),n=hy(),t!==null&&!Tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fs(t,e,i)):(Ut&&n&&Zm(e),e.flags|=1,cr(t,e,r,i),e.child)}function mv(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Ey(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,zC(t,e,o,r,i)):(t=fd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:oh,n(u,r)&&t.ref===e.ref)return Fs(t,e,i)}return e.flags|=1,t=Vo(o,r),t.ref=e.ref,t.return=e,e.child=t}function zC(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(oh(o,r)&&t.ref===e.ref)if(Tr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Tr=!0);else return e.lanes=t.lanes,Fs(t,e,i)}return lg(t,e,n,r,i)}function WC(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(Ul,zr),zr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,It(Ul,zr),zr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,It(Ul,zr),zr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,It(Ul,zr),zr|=r;return cr(t,e,i,n),e.child}function HC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lg(t,e,n,r,i){var o=Sr(n)?Xa:rr.current;return o=xu(e,o),Zl(e,i),n=cy(t,e,n,r,o,i),r=hy(),t!==null&&!Tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fs(t,e,i)):(Ut&&r&&Zm(e),e.flags|=1,cr(t,e,n,i),e.child)}function yv(t,e,n,r,i){if(Sr(n)){var o=!0;Bd(e)}else o=!1;if(Zl(e,i),e.stateNode===null)ud(t,e),VC(e,n,r),og(e,n,r,i),r=!0;else if(t===null){var u=e.stateNode,f=e.memoizedProps;u.props=f;var d=u.context,g=n.contextType;typeof g=="object"&&g!==null?g=ci(g):(g=Sr(n)?Xa:rr.current,g=xu(e,g));var w=n.getDerivedStateFromProps,x=typeof w=="function"||typeof u.getSnapshotBeforeUpdate=="function";x||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==r||d!==g)&&hv(e,u,r,g),co=!1;var _=e.memoizedState;u.state=_,Wd(e,r,u,i),d=e.memoizedState,f!==r||_!==d||Ir.current||co?(typeof w=="function"&&(sg(e,n,w,r),d=e.memoizedState),(f=co||cv(e,n,f,r,_,d,g))?(x||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),u.props=r,u.state=d,u.context=g,r=f):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{u=e.stateNode,wC(t,e),f=e.memoizedProps,g=e.type===e.elementType?f:vi(e.type,f),u.props=g,x=e.pendingProps,_=u.context,d=n.contextType,typeof d=="object"&&d!==null?d=ci(d):(d=Sr(n)?Xa:rr.current,d=xu(e,d));var T=n.getDerivedStateFromProps;(w=typeof T=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==x||_!==d)&&hv(e,u,r,d),co=!1,_=e.memoizedState,u.state=_,Wd(e,r,u,i);var O=e.memoizedState;f!==x||_!==O||Ir.current||co?(typeof T=="function"&&(sg(e,n,T,r),O=e.memoizedState),(g=co||cv(e,n,g,r,_,O,d)||!1)?(w||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,O,d),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,O,d)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=O),u.props=r,u.state=O,u.context=d,r=g):(typeof u.componentDidUpdate!="function"||f===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return ug(t,e,n,r,o,i)}function ug(t,e,n,r,i,o){HC(t,e);var u=(e.flags&128)!==0;if(!r&&!u)return i&&nv(e,n,!1),Fs(t,e,o);r=e.stateNode,IP.current=e;var f=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&u?(e.child=_u(e,t.child,null,o),e.child=_u(e,null,f,o)):cr(t,e,f,o),e.memoizedState=r.state,i&&nv(e,n,!0),e.child}function GC(t){var e=t.stateNode;e.pendingContext?tv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tv(t,e.context,!1),oy(t,e.containerInfo)}function wv(t,e,n,r,i){return Eu(),ey(i),e.flags|=256,cr(t,e,n,r),e.child}var cg={dehydrated:null,treeContext:null,retryLane:0};function hg(t){return{baseLanes:t,cachePool:null,transitions:null}}function KC(t,e,n){var r=e.pendingProps,i=Gt.current,o=!1,u=(e.flags&128)!==0,f;if((f=u)||(f=t!==null&&t.memoizedState===null?!1:(i&2)!==0),f?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),It(Gt,i&1),t===null)return rg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=r.children,t=r.fallback,o?(r=e.mode,o=e.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=z0(u,r,0,null),t=Ha(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=hg(n),e.memoizedState=cg,t):py(e,u));if(i=t.memoizedState,i!==null&&(f=i.dehydrated,f!==null))return SP(t,e,u,r,f,i,n);if(o){o=r.fallback,u=e.mode,i=t.child,f=i.sibling;var d={mode:"hidden",children:r.children};return!(u&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Vo(i,d),r.subtreeFlags=i.subtreeFlags&14680064),f!==null?o=Vo(f,o):(o=Ha(o,u,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,u=t.child.memoizedState,u=u===null?hg(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=t.childLanes&~n,e.memoizedState=cg,r}return o=t.child,t=o.sibling,r=Vo(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function py(t,e){return e=z0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uf(t,e,n,r){return r!==null&&ey(r),_u(e,t.child,null,n),t=py(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SP(t,e,n,r,i,o,u){if(n)return e.flags&256?(e.flags&=-257,r=Y1(Error(he(422))),Uf(t,e,u,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=z0({mode:"visible",children:r.children},i,0,null),o=Ha(o,i,u,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&_u(e,t.child,null,u),e.child.memoizedState=hg(u),e.memoizedState=cg,o);if(!(e.mode&1))return Uf(t,e,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var f=r.dgst;return r=f,o=Error(he(419)),r=Y1(o,r,void 0),Uf(t,e,u,r)}if(f=(u&t.childLanes)!==0,Tr||f){if(r=kn,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ls(t,i),Ii(r,t,i,-1))}return xy(),r=Y1(Error(he(421))),Uf(t,e,u,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UP.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Hr=ko(i.nextSibling),Gr=e,Ut=!0,Ai=null,t!==null&&(si[oi++]=Cs,si[oi++]=Ts,si[oi++]=$a,Cs=t.id,Ts=t.overflow,$a=e),e=py(e,r.children),e.flags|=4096,e)}function vv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ig(t.return,e,n)}function Z1(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qC(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(cr(t,e,r.children,n),r=Gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vv(t,n,e);else if(t.tag===19)vv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(It(Gt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Hd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Z1(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Z1(e,!0,n,null,o);break;case"together":Z1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ud(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ya|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=Vo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bP(t,e,n){switch(e.tag){case 3:GC(e),Eu();break;case 5:vC(e);break;case 1:Sr(e.type)&&Bd(e);break;case 4:oy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;It(jd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(It(Gt,Gt.current&1),e.flags|=128,null):n&e.child.childLanes?KC(t,e,n):(It(Gt,Gt.current&1),t=Fs(t,e,n),t!==null?t.sibling:null);It(Gt,Gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),It(Gt,Gt.current),r)break;return null;case 22:case 23:return e.lanes=0,WC(t,e,n)}return Fs(t,e,n)}var XC,fg,$C,QC;XC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fg=function(){};$C=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ra($i.current);var o=null;switch(n){case"input":i=Mp(t,i),r=Mp(t,r),o=[];break;case"select":i=$t({},i,{value:void 0}),r=$t({},r,{value:void 0}),o=[];break;case"textarea":i=Fp(t,i),r=Fp(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ld)}Vp(n,r);var u;n=null;for(g in i)if(!r.hasOwnProperty(g)&&i.hasOwnProperty(g)&&i[g]!=null)if(g==="style"){var f=i[g];for(u in f)f.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Jc.hasOwnProperty(g)?o||(o=[]):(o=o||[]).push(g,null));for(g in r){var d=r[g];if(f=i!=null?i[g]:void 0,r.hasOwnProperty(g)&&d!==f&&(d!=null||f!=null))if(g==="style")if(f){for(u in f)!f.hasOwnProperty(u)||d&&d.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in d)d.hasOwnProperty(u)&&f[u]!==d[u]&&(n||(n={}),n[u]=d[u])}else n||(o||(o=[]),o.push(g,n)),n=d;else g==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,f=f?f.__html:void 0,d!=null&&f!==d&&(o=o||[]).push(g,d)):g==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(g,""+d):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Jc.hasOwnProperty(g)?(d!=null&&g==="onScroll"&&Dt("scroll",t),o||f===d||(o=[])):(o=o||[]).push(g,d))}n&&(o=o||[]).push("style",n);var g=o;(e.updateQueue=g)&&(e.flags|=4)}};QC=function(t,e,n,r){n!==r&&(e.flags|=4)};function yc(t,e){if(!Ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RP(t,e,n){var r=e.pendingProps;switch(Jm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(e),null;case 1:return Sr(e.type)&&Fd(),Qn(e),null;case 3:return r=e.stateNode,Au(),Lt(Ir),Lt(rr),ly(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ai!==null&&(xg(Ai),Ai=null))),fg(t,e),Qn(e),null;case 5:ay(e);var i=Ra(hh.current);if(n=e.type,t!==null&&e.stateNode!=null)$C(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return Qn(e),null}if(t=Ra($i.current),Bf(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Gi]=e,r[uh]=o,t=(e.mode&1)!==0,n){case"dialog":Dt("cancel",r),Dt("close",r);break;case"iframe":case"object":case"embed":Dt("load",r);break;case"video":case"audio":for(i=0;i<Ic.length;i++)Dt(Ic[i],r);break;case"source":Dt("error",r);break;case"img":case"image":case"link":Dt("error",r),Dt("load",r);break;case"details":Dt("toggle",r);break;case"input":bw(r,o),Dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Dt("invalid",r);break;case"textarea":Pw(r,o),Dt("invalid",r)}Vp(n,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var f=o[u];u==="children"?typeof f=="string"?r.textContent!==f&&(o.suppressHydrationWarning!==!0&&Ff(r.textContent,f,t),i=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(o.suppressHydrationWarning!==!0&&Ff(r.textContent,f,t),i=["children",""+f]):Jc.hasOwnProperty(u)&&f!=null&&u==="onScroll"&&Dt("scroll",r)}switch(n){case"input":Rf(r),Rw(r,o,!0);break;case"textarea":Rf(r),Nw(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ld)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),n==="select"&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[Gi]=e,t[uh]=r,XC(t,e,!1,!1),e.stateNode=t;e:{switch(u=Up(n,r),n){case"dialog":Dt("cancel",t),Dt("close",t),i=r;break;case"iframe":case"object":case"embed":Dt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ic.length;i++)Dt(Ic[i],t);i=r;break;case"source":Dt("error",t),i=r;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),i=r;break;case"details":Dt("toggle",t),i=r;break;case"input":bw(t,r),i=Mp(t,r),Dt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=$t({},r,{value:void 0}),Dt("invalid",t);break;case"textarea":Pw(t,r),i=Fp(t,r),Dt("invalid",t);break;default:i=r}Vp(n,i),f=i;for(o in f)if(f.hasOwnProperty(o)){var d=f[o];o==="style"?SA(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&TA(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&eh(t,d):typeof d=="number"&&eh(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Jc.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Dt("scroll",t):d!=null&&Bm(t,o,d,u))}switch(n){case"input":Rf(t),Rw(t,r,!1);break;case"textarea":Rf(t),Nw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Go(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Xl(t,!!r.multiple,o,!1):r.defaultValue!=null&&Xl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ld)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qn(e),null;case 6:if(t&&e.stateNode!=null)QC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=Ra(hh.current),Ra($i.current),Bf(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gi]=e,(o=r.nodeValue!==n)&&(t=Gr,t!==null))switch(t.tag){case 3:Ff(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ff(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gi]=e,e.stateNode=r}return Qn(e),null;case 13:if(Lt(Gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ut&&Hr!==null&&e.mode&1&&!(e.flags&128))pC(),Eu(),e.flags|=98560,o=!1;else if(o=Bf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(he(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(he(317));o[Gi]=e}else Eu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qn(e),o=!1}else Ai!==null&&(xg(Ai),Ai=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gt.current&1?Sn===0&&(Sn=3):xy())),e.updateQueue!==null&&(e.flags|=4),Qn(e),null);case 4:return Au(),fg(t,e),t===null&&ah(e.stateNode.containerInfo),Qn(e),null;case 10:return ry(e.type._context),Qn(e),null;case 17:return Sr(e.type)&&Fd(),Qn(e),null;case 19:if(Lt(Gt),o=e.memoizedState,o===null)return Qn(e),null;if(r=(e.flags&128)!==0,u=o.rendering,u===null)if(r)yc(o,!1);else{if(Sn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=Hd(t),u!==null){for(e.flags|=128,yc(o,!1),r=u.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,t=u.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return It(Gt,Gt.current&1|2),e.child}t=t.sibling}o.tail!==null&&cn()>Tu&&(e.flags|=128,r=!0,yc(o,!1),e.lanes=4194304)}else{if(!r)if(t=Hd(u),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Ut)return Qn(e),null}else 2*cn()-o.renderingStartTime>Tu&&n!==1073741824&&(e.flags|=128,r=!0,yc(o,!1),e.lanes=4194304);o.isBackwards?(u.sibling=e.child,e.child=u):(n=o.last,n!==null?n.sibling=u:e.child=u,o.last=u)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=cn(),e.sibling=null,n=Gt.current,It(Gt,r?n&1|2:n&1),e):(Qn(e),null);case 22:case 23:return vy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zr&1073741824&&(Qn(e),e.subtreeFlags&6&&(e.flags|=8192)):Qn(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function PP(t,e){switch(Jm(e),e.tag){case 1:return Sr(e.type)&&Fd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Au(),Lt(Ir),Lt(rr),ly(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ay(e),null;case 13:if(Lt(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));Eu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt(Gt),null;case 4:return Au(),null;case 10:return ry(e.type._context),null;case 22:case 23:return vy(),null;case 24:return null;default:return null}}var jf=!1,er=!1,NP=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Vl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nn(t,e,r)}else n.current=null}function dg(t,e,n){try{n()}catch(r){nn(t,e,r)}}var xv=!1;function OP(t,e){if(Qp=Dd,t=tC(),Ym(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,f=-1,d=-1,g=0,w=0,x=t,_=null;t:for(;;){for(var T;x!==n||i!==0&&x.nodeType!==3||(f=u+i),x!==o||r!==0&&x.nodeType!==3||(d=u+r),x.nodeType===3&&(u+=x.nodeValue.length),(T=x.firstChild)!==null;)_=x,x=T;for(;;){if(x===t)break t;if(_===n&&++g===i&&(f=u),_===o&&++w===r&&(d=u),(T=x.nextSibling)!==null)break;x=_,_=x.parentNode}x=T}n=f===-1||d===-1?null:{start:f,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yp={focusedElem:t,selectionRange:n},Dd=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var O=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var M=O.memoizedProps,B=O.memoizedState,k=e.stateNode,N=k.getSnapshotBeforeUpdate(e.elementType===e.type?M:vi(e.type,M),B);k.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(z){nn(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return O=xv,xv=!1,O}function jc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&dg(e,n,o)}i=i.next}while(i!==r)}}function U0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function YC(t){var e=t.alternate;e!==null&&(t.alternate=null,YC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gi],delete e[uh],delete e[eg],delete e[pP],delete e[gP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZC(t){return t.tag===5||t.tag===3||t.tag===4}function Ev(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ld));else if(r!==4&&(t=t.child,t!==null))for(gg(t,e,n),t=t.sibling;t!==null;)gg(t,e,n),t=t.sibling}function mg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mg(t,e,n),t=t.sibling;t!==null;)mg(t,e,n),t=t.sibling}var Vn=null,_i=!1;function ro(t,e,n){for(n=n.child;n!==null;)JC(t,e,n),n=n.sibling}function JC(t,e,n){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(O0,n)}catch{}switch(n.tag){case 5:er||Vl(n,e);case 6:var r=Vn,i=_i;Vn=null,ro(t,e,n),Vn=r,_i=i,Vn!==null&&(_i?(t=Vn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vn.removeChild(n.stateNode));break;case 18:Vn!==null&&(_i?(t=Vn,n=n.stateNode,t.nodeType===8?G1(t.parentNode,n):t.nodeType===1&&G1(t,n),ih(t)):G1(Vn,n.stateNode));break;case 4:r=Vn,i=_i,Vn=n.stateNode.containerInfo,_i=!0,ro(t,e,n),Vn=r,_i=i;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&dg(n,e,u),i=i.next}while(i!==r)}ro(t,e,n);break;case 1:if(!er&&(Vl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){nn(n,e,f)}ro(t,e,n);break;case 21:ro(t,e,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,ro(t,e,n),er=r):ro(t,e,n);break;default:ro(t,e,n)}}function _v(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NP),e.forEach(function(r){var i=jP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,u=e,f=u;e:for(;f!==null;){switch(f.tag){case 5:Vn=f.stateNode,_i=!1;break e;case 3:Vn=f.stateNode.containerInfo,_i=!0;break e;case 4:Vn=f.stateNode.containerInfo,_i=!0;break e}f=f.return}if(Vn===null)throw Error(he(160));JC(o,u,i),Vn=null,_i=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(g){nn(i,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eT(e,t),e=e.sibling}function eT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yi(e,t),Ui(t),r&4){try{jc(3,t,t.return),U0(3,t)}catch(M){nn(t,t.return,M)}try{jc(5,t,t.return)}catch(M){nn(t,t.return,M)}}break;case 1:yi(e,t),Ui(t),r&512&&n!==null&&Vl(n,n.return);break;case 5:if(yi(e,t),Ui(t),r&512&&n!==null&&Vl(n,n.return),t.flags&32){var i=t.stateNode;try{eh(i,"")}catch(M){nn(t,t.return,M)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,u=n!==null?n.memoizedProps:o,f=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{f==="input"&&o.type==="radio"&&o.name!=null&&_A(i,o),Up(f,u);var g=Up(f,o);for(u=0;u<d.length;u+=2){var w=d[u],x=d[u+1];w==="style"?SA(i,x):w==="dangerouslySetInnerHTML"?TA(i,x):w==="children"?eh(i,x):Bm(i,w,x,g)}switch(f){case"input":kp(i,o);break;case"textarea":AA(i,o);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?Xl(i,!!o.multiple,T,!1):_!==!!o.multiple&&(o.defaultValue!=null?Xl(i,!!o.multiple,o.defaultValue,!0):Xl(i,!!o.multiple,o.multiple?[]:"",!1))}i[uh]=o}catch(M){nn(t,t.return,M)}}break;case 6:if(yi(e,t),Ui(t),r&4){if(t.stateNode===null)throw Error(he(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(M){nn(t,t.return,M)}}break;case 3:if(yi(e,t),Ui(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ih(e.containerInfo)}catch(M){nn(t,t.return,M)}break;case 4:yi(e,t),Ui(t);break;case 13:yi(e,t),Ui(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(yy=cn())),r&4&&_v(t);break;case 22:if(w=n!==null&&n.memoizedState!==null,t.mode&1?(er=(g=er)||w,yi(e,t),er=g):yi(e,t),Ui(t),r&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!w&&t.mode&1)for(Ae=t,w=t.child;w!==null;){for(x=Ae=w;Ae!==null;){switch(_=Ae,T=_.child,_.tag){case 0:case 11:case 14:case 15:jc(4,_,_.return);break;case 1:Vl(_,_.return);var O=_.stateNode;if(typeof O.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,O.props=e.memoizedProps,O.state=e.memoizedState,O.componentWillUnmount()}catch(M){nn(r,n,M)}}break;case 5:Vl(_,_.return);break;case 22:if(_.memoizedState!==null){Cv(x);continue}}T!==null?(T.return=_,Ae=T):Cv(x)}w=w.sibling}e:for(w=null,x=t;;){if(x.tag===5){if(w===null){w=x;try{i=x.stateNode,g?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(f=x.stateNode,d=x.memoizedProps.style,u=d!=null&&d.hasOwnProperty("display")?d.display:null,f.style.display=IA("display",u))}catch(M){nn(t,t.return,M)}}}else if(x.tag===6){if(w===null)try{x.stateNode.nodeValue=g?"":x.memoizedProps}catch(M){nn(t,t.return,M)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;w===x&&(w=null),x=x.return}w===x&&(w=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:yi(e,t),Ui(t),r&4&&_v(t);break;case 21:break;default:yi(e,t),Ui(t)}}function Ui(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ZC(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(eh(i,""),r.flags&=-33);var o=Ev(t);mg(t,o,i);break;case 3:case 4:var u=r.stateNode.containerInfo,f=Ev(t);gg(t,f,u);break;default:throw Error(he(161))}}catch(d){nn(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DP(t,e,n){Ae=t,tT(t)}function tT(t,e,n){for(var r=(t.mode&1)!==0;Ae!==null;){var i=Ae,o=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||jf;if(!u){var f=i.alternate,d=f!==null&&f.memoizedState!==null||er;f=jf;var g=er;if(jf=u,(er=d)&&!g)for(Ae=i;Ae!==null;)u=Ae,d=u.child,u.tag===22&&u.memoizedState!==null?Tv(i):d!==null?(d.return=u,Ae=d):Tv(i);for(;o!==null;)Ae=o,tT(o),o=o.sibling;Ae=i,jf=f,er=g}Av(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ae=o):Av(t)}}function Av(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:er||U0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!er)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&av(e,o,r);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}av(e,u,n)}break;case 5:var f=e.stateNode;if(n===null&&e.flags&4){n=f;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var w=g.memoizedState;if(w!==null){var x=w.dehydrated;x!==null&&ih(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}er||e.flags&512&&pg(e)}catch(_){nn(e,e.return,_)}}if(e===t){Ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function Cv(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function Tv(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{U0(4,e)}catch(d){nn(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){nn(e,i,d)}}var o=e.return;try{pg(e)}catch(d){nn(e,o,d)}break;case 5:var u=e.return;try{pg(e)}catch(d){nn(e,u,d)}}}catch(d){nn(e,e.return,d)}if(e===t){Ae=null;break}var f=e.sibling;if(f!==null){f.return=e.return,Ae=f;break}Ae=e.return}}var MP=Math.ceil,qd=Gs.ReactCurrentDispatcher,gy=Gs.ReactCurrentOwner,ui=Gs.ReactCurrentBatchConfig,lt=0,kn=null,pn=null,Wn=0,zr=0,Ul=ta(0),Sn=0,gh=null,Ya=0,j0=0,my=0,zc=null,Cr=null,yy=0,Tu=1/0,ys=null,Xd=!1,yg=null,Fo=null,zf=!1,Ro=null,$d=0,Wc=0,wg=null,cd=-1,hd=0;function fr(){return lt&6?cn():cd!==-1?cd:cd=cn()}function Bo(t){return t.mode&1?lt&2&&Wn!==0?Wn&-Wn:yP.transition!==null?(hd===0&&(hd=VA()),hd):(t=vt,t!==0||(t=window.event,t=t===void 0?16:KA(t.type)),t):1}function Ii(t,e,n,r){if(50<Wc)throw Wc=0,wg=null,Error(he(185));jh(t,n,r),(!(lt&2)||t!==kn)&&(t===kn&&(!(lt&2)&&(j0|=n),Sn===4&&fo(t,Wn)),br(t,r),n===1&&lt===0&&!(e.mode&1)&&(Tu=cn()+500,F0&&na()))}function br(t,e){var n=t.callbackNode;y4(t,e);var r=Od(t,t===kn?Wn:0);if(r===0)n!==null&&Mw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mw(n),e===1)t.tag===0?mP(Iv.bind(null,t)):hC(Iv.bind(null,t)),fP(function(){!(lt&6)&&na()}),n=null;else{switch(UA(r)){case 1:n=Wm;break;case 4:n=FA;break;case 16:n=Nd;break;case 536870912:n=BA;break;default:n=Nd}n=uT(n,nT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nT(t,e){if(cd=-1,hd=0,lt&6)throw Error(he(327));var n=t.callbackNode;if(Jl()&&t.callbackNode!==n)return null;var r=Od(t,t===kn?Wn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qd(t,r);else{e=r;var i=lt;lt|=2;var o=iT();(kn!==t||Wn!==e)&&(ys=null,Tu=cn()+500,Wa(t,e));do try{FP();break}catch(f){rT(t,f)}while(!0);ny(),qd.current=o,lt=i,pn!==null?e=0:(kn=null,Wn=0,e=Sn)}if(e!==0){if(e===2&&(i=Gp(t),i!==0&&(r=i,e=vg(t,i))),e===1)throw n=gh,Wa(t,0),fo(t,r),br(t,cn()),n;if(e===6)fo(t,r);else{if(i=t.current.alternate,!(r&30)&&!kP(i)&&(e=Qd(t,r),e===2&&(o=Gp(t),o!==0&&(r=o,e=vg(t,o))),e===1))throw n=gh,Wa(t,0),fo(t,r),br(t,cn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:Aa(t,Cr,ys);break;case 3:if(fo(t,r),(r&130023424)===r&&(e=yy+500-cn(),10<e)){if(Od(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){fr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jp(Aa.bind(null,t,Cr,ys),e);break}Aa(t,Cr,ys);break;case 4:if(fo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var u=31-Ti(r);o=1<<u,u=e[u],u>i&&(i=u),r&=~o}if(r=i,r=cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MP(r/1960))-r,10<r){t.timeoutHandle=Jp(Aa.bind(null,t,Cr,ys),r);break}Aa(t,Cr,ys);break;case 5:Aa(t,Cr,ys);break;default:throw Error(he(329))}}}return br(t,cn()),t.callbackNode===n?nT.bind(null,t):null}function vg(t,e){var n=zc;return t.current.memoizedState.isDehydrated&&(Wa(t,e).flags|=256),t=Qd(t,e),t!==2&&(e=Cr,Cr=n,e!==null&&xg(e)),t}function xg(t){Cr===null?Cr=t:Cr.push.apply(Cr,t)}function kP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!bi(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fo(t,e){for(e&=~my,e&=~j0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ti(e),r=1<<n;t[n]=-1,e&=~r}}function Iv(t){if(lt&6)throw Error(he(327));Jl();var e=Od(t,0);if(!(e&1))return br(t,cn()),null;var n=Qd(t,e);if(t.tag!==0&&n===2){var r=Gp(t);r!==0&&(e=r,n=vg(t,r))}if(n===1)throw n=gh,Wa(t,0),fo(t,e),br(t,cn()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Aa(t,Cr,ys),br(t,cn()),null}function wy(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(Tu=cn()+500,F0&&na())}}function Za(t){Ro!==null&&Ro.tag===0&&!(lt&6)&&Jl();var e=lt;lt|=1;var n=ui.transition,r=vt;try{if(ui.transition=null,vt=1,t)return t()}finally{vt=r,ui.transition=n,lt=e,!(lt&6)&&na()}}function vy(){zr=Ul.current,Lt(Ul)}function Wa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hP(n)),pn!==null)for(n=pn.return;n!==null;){var r=n;switch(Jm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fd();break;case 3:Au(),Lt(Ir),Lt(rr),ly();break;case 5:ay(r);break;case 4:Au();break;case 13:Lt(Gt);break;case 19:Lt(Gt);break;case 10:ry(r.type._context);break;case 22:case 23:vy()}n=n.return}if(kn=t,pn=t=Vo(t.current,null),Wn=zr=e,Sn=0,gh=null,my=j0=Ya=0,Cr=zc=null,ba!==null){for(e=0;e<ba.length;e++)if(n=ba[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=i,r.next=u}n.pending=r}ba=null}return t}function rT(t,e){do{var n=pn;try{if(ny(),ad.current=Kd,Gd){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gd=!1}if(Qa=0,Mn=Cn=qt=null,Uc=!1,fh=0,gy.current=null,n===null||n.return===null){Sn=1,gh=e,pn=null;break}e:{var o=t,u=n.return,f=n,d=e;if(e=Wn,f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var g=d,w=f,x=w.tag;if(!(w.mode&1)&&(x===0||x===11||x===15)){var _=w.alternate;_?(w.updateQueue=_.updateQueue,w.memoizedState=_.memoizedState,w.lanes=_.lanes):(w.updateQueue=null,w.memoizedState=null)}var T=dv(u);if(T!==null){T.flags&=-257,pv(T,u,f,o,e),T.mode&1&&fv(o,g,e),e=T,d=g;var O=e.updateQueue;if(O===null){var M=new Set;M.add(d),e.updateQueue=M}else O.add(d);break e}else{if(!(e&1)){fv(o,g,e),xy();break e}d=Error(he(426))}}else if(Ut&&f.mode&1){var B=dv(u);if(B!==null){!(B.flags&65536)&&(B.flags|=256),pv(B,u,f,o,e),ey(Cu(d,f));break e}}o=d=Cu(d,f),Sn!==4&&(Sn=2),zc===null?zc=[o]:zc.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=UC(o,d,e);ov(o,k);break e;case 1:f=d;var N=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof N.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Fo===null||!Fo.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var z=jC(o,f,e);ov(o,z);break e}}o=o.return}while(o!==null)}oT(n)}catch(Q){e=Q,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function iT(){var t=qd.current;return qd.current=Kd,t===null?Kd:t}function xy(){(Sn===0||Sn===3||Sn===2)&&(Sn=4),kn===null||!(Ya&268435455)&&!(j0&268435455)||fo(kn,Wn)}function Qd(t,e){var n=lt;lt|=2;var r=iT();(kn!==t||Wn!==e)&&(ys=null,Wa(t,e));do try{LP();break}catch(i){rT(t,i)}while(!0);if(ny(),lt=n,qd.current=r,pn!==null)throw Error(he(261));return kn=null,Wn=0,Sn}function LP(){for(;pn!==null;)sT(pn)}function FP(){for(;pn!==null&&!l4();)sT(pn)}function sT(t){var e=lT(t.alternate,t,zr);t.memoizedProps=t.pendingProps,e===null?oT(t):pn=e,gy.current=null}function oT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PP(n,e),n!==null){n.flags&=32767,pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Sn=6,pn=null;return}}else if(n=RP(n,e,zr),n!==null){pn=n;return}if(e=e.sibling,e!==null){pn=e;return}pn=e=t}while(e!==null);Sn===0&&(Sn=5)}function Aa(t,e,n){var r=vt,i=ui.transition;try{ui.transition=null,vt=1,BP(t,e,n,r)}finally{ui.transition=i,vt=r}return null}function BP(t,e,n,r){do Jl();while(Ro!==null);if(lt&6)throw Error(he(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(w4(t,o),t===kn&&(pn=kn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zf||(zf=!0,uT(Nd,function(){return Jl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ui.transition,ui.transition=null;var u=vt;vt=1;var f=lt;lt|=4,gy.current=null,OP(t,n),eT(n,t),iP(Yp),Dd=!!Qp,Yp=Qp=null,t.current=n,DP(n),u4(),lt=f,vt=u,ui.transition=o}else t.current=n;if(zf&&(zf=!1,Ro=t,$d=i),o=t.pendingLanes,o===0&&(Fo=null),f4(n.stateNode),br(t,cn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xd)throw Xd=!1,t=yg,yg=null,t;return $d&1&&t.tag!==0&&Jl(),o=t.pendingLanes,o&1?t===wg?Wc++:(Wc=0,wg=t):Wc=0,na(),null}function Jl(){if(Ro!==null){var t=UA($d),e=ui.transition,n=vt;try{if(ui.transition=null,vt=16>t?16:t,Ro===null)var r=!1;else{if(t=Ro,Ro=null,$d=0,lt&6)throw Error(he(331));var i=lt;for(lt|=4,Ae=t.current;Ae!==null;){var o=Ae,u=o.child;if(Ae.flags&16){var f=o.deletions;if(f!==null){for(var d=0;d<f.length;d++){var g=f[d];for(Ae=g;Ae!==null;){var w=Ae;switch(w.tag){case 0:case 11:case 15:jc(8,w,o)}var x=w.child;if(x!==null)x.return=w,Ae=x;else for(;Ae!==null;){w=Ae;var _=w.sibling,T=w.return;if(YC(w),w===g){Ae=null;break}if(_!==null){_.return=T,Ae=_;break}Ae=T}}}var O=o.alternate;if(O!==null){var M=O.child;if(M!==null){O.child=null;do{var B=M.sibling;M.sibling=null,M=B}while(M!==null)}}Ae=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,Ae=u;else e:for(;Ae!==null;){if(o=Ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:jc(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,Ae=k;break e}Ae=o.return}}var N=t.current;for(Ae=N;Ae!==null;){u=Ae;var R=u.child;if(u.subtreeFlags&2064&&R!==null)R.return=u,Ae=R;else e:for(u=N;Ae!==null;){if(f=Ae,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:U0(9,f)}}catch(Q){nn(f,f.return,Q)}if(f===u){Ae=null;break e}var z=f.sibling;if(z!==null){z.return=f.return,Ae=z;break e}Ae=f.return}}if(lt=i,na(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(O0,t)}catch{}r=!0}return r}finally{vt=n,ui.transition=e}}return!1}function Sv(t,e,n){e=Cu(n,e),e=UC(t,e,1),t=Lo(t,e,1),e=fr(),t!==null&&(jh(t,1,e),br(t,e))}function nn(t,e,n){if(t.tag===3)Sv(t,t,n);else for(;e!==null;){if(e.tag===3){Sv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fo===null||!Fo.has(r))){t=Cu(n,t),t=jC(e,t,1),e=Lo(e,t,1),t=fr(),e!==null&&(jh(e,1,t),br(e,t));break}}e=e.return}}function VP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=fr(),t.pingedLanes|=t.suspendedLanes&n,kn===t&&(Wn&n)===n&&(Sn===4||Sn===3&&(Wn&130023424)===Wn&&500>cn()-yy?Wa(t,0):my|=n),br(t,e)}function aT(t,e){e===0&&(t.mode&1?(e=Of,Of<<=1,!(Of&130023424)&&(Of=4194304)):e=1);var n=fr();t=Ls(t,e),t!==null&&(jh(t,e,n),br(t,n))}function UP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aT(t,n)}function jP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),aT(t,n)}var lT;lT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ir.current)Tr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tr=!1,bP(t,e,n);Tr=!!(t.flags&131072)}else Tr=!1,Ut&&e.flags&1048576&&fC(e,Ud,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ud(t,e),t=e.pendingProps;var i=xu(e,rr.current);Zl(e,n),i=cy(null,e,r,t,i,n);var o=hy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sr(r)?(o=!0,Bd(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,sy(e),i.updater=V0,e.stateNode=i,i._reactInternals=e,og(e,r,t,n),e=ug(null,e,r,!0,o,n)):(e.tag=0,Ut&&o&&Zm(e),cr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ud(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=WP(r),t=vi(r,t),i){case 0:e=lg(null,e,r,t,n);break e;case 1:e=yv(null,e,r,t,n);break e;case 11:e=gv(null,e,r,t,n);break e;case 14:e=mv(null,e,r,vi(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),lg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),yv(t,e,r,i,n);case 3:e:{if(GC(e),t===null)throw Error(he(387));r=e.pendingProps,o=e.memoizedState,i=o.element,wC(t,e),Wd(e,r,null,n);var u=e.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Cu(Error(he(423)),e),e=wv(t,e,r,n,i);break e}else if(r!==i){i=Cu(Error(he(424)),e),e=wv(t,e,r,n,i);break e}else for(Hr=ko(e.stateNode.containerInfo.firstChild),Gr=e,Ut=!0,Ai=null,n=mC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Eu(),r===i){e=Fs(t,e,n);break e}cr(t,e,r,n)}e=e.child}return e;case 5:return vC(e),t===null&&rg(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,u=i.children,Zp(r,i)?u=null:o!==null&&Zp(r,o)&&(e.flags|=32),HC(t,e),cr(t,e,u,n),e.child;case 6:return t===null&&rg(e),null;case 13:return KC(t,e,n);case 4:return oy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_u(e,null,r,n):cr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),gv(t,e,r,i,n);case 7:return cr(t,e,e.pendingProps,n),e.child;case 8:return cr(t,e,e.pendingProps.children,n),e.child;case 12:return cr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,u=i.value,It(jd,r._currentValue),r._currentValue=u,o!==null)if(bi(o.value,u)){if(o.children===i.children&&!Ir.current){e=Fs(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var f=o.dependencies;if(f!==null){u=o.child;for(var d=f.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=Rs(-1,n&-n),d.tag=2;var g=o.updateQueue;if(g!==null){g=g.shared;var w=g.pending;w===null?d.next=d:(d.next=w.next,w.next=d),g.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),ig(o.return,n,e),f.lanes|=n;break}d=d.next}}else if(o.tag===10)u=o.type===e.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(he(341));u.lanes|=n,f=u.alternate,f!==null&&(f.lanes|=n),ig(u,n,e),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===e){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}cr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zl(e,n),i=ci(i),r=r(i),e.flags|=1,cr(t,e,r,n),e.child;case 14:return r=e.type,i=vi(r,e.pendingProps),i=vi(r.type,i),mv(t,e,r,i,n);case 15:return zC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vi(r,i),ud(t,e),e.tag=1,Sr(r)?(t=!0,Bd(e)):t=!1,Zl(e,n),VC(e,r,i),og(e,r,i,n),ug(null,e,r,!0,t,n);case 19:return qC(t,e,n);case 22:return WC(t,e,n)}throw Error(he(156,e.tag))};function uT(t,e){return LA(t,e)}function zP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(t,e,n,r){return new zP(t,e,n,r)}function Ey(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WP(t){if(typeof t=="function")return Ey(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Um)return 11;if(t===jm)return 14}return 2}function Vo(t,e){var n=t.alternate;return n===null?(n=li(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fd(t,e,n,r,i,o){var u=2;if(r=t,typeof t=="function")Ey(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case Pl:return Ha(n.children,i,o,e);case Vm:u=8,i|=8;break;case Pp:return t=li(12,n,e,i|2),t.elementType=Pp,t.lanes=o,t;case Np:return t=li(13,n,e,i),t.elementType=Np,t.lanes=o,t;case Op:return t=li(19,n,e,i),t.elementType=Op,t.lanes=o,t;case vA:return z0(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yA:u=10;break e;case wA:u=9;break e;case Um:u=11;break e;case jm:u=14;break e;case uo:u=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=li(u,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ha(t,e,n,r){return t=li(7,t,r,e),t.lanes=n,t}function z0(t,e,n,r){return t=li(22,t,r,e),t.elementType=vA,t.lanes=n,t.stateNode={isHidden:!1},t}function J1(t,e,n){return t=li(6,t,null,e),t.lanes=n,t}function ep(t,e,n){return e=li(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=M1(0),this.expirationTimes=M1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=M1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _y(t,e,n,r,i,o,u,f,d){return t=new HP(t,e,n,f,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=li(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sy(o),t}function GP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cT(t){if(!t)return Ko;t=t._reactInternals;e:{if(ul(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(Sr(n))return cC(t,n,e)}return e}function hT(t,e,n,r,i,o,u,f,d){return t=_y(n,r,!0,t,i,o,u,f,d),t.context=cT(null),n=t.current,r=fr(),i=Bo(n),o=Rs(r,i),o.callback=e??null,Lo(n,o,i),t.current.lanes=i,jh(t,i,r),br(t,r),t}function W0(t,e,n,r){var i=e.current,o=fr(),u=Bo(i);return n=cT(n),e.context===null?e.context=n:e.pendingContext=n,e=Rs(o,u),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lo(i,e,u),t!==null&&(Ii(t,i,u,o),od(t,i,u)),u}function Yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ay(t,e){bv(t,e),(t=t.alternate)&&bv(t,e)}function KP(){return null}var fT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cy(t){this._internalRoot=t}H0.prototype.render=Cy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));W0(t,e,null,null)};H0.prototype.unmount=Cy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Za(function(){W0(null,t,null,null)}),e[ks]=null}};function H0(t){this._internalRoot=t}H0.prototype.unstable_scheduleHydration=function(t){if(t){var e=WA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ho.length&&e!==0&&e<ho[n].priority;n++);ho.splice(n,0,t),n===0&&GA(t)}};function Ty(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function G0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rv(){}function qP(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var g=Yd(u);o.call(g)}}var u=hT(e,r,t,0,null,!1,!1,"",Rv);return t._reactRootContainer=u,t[ks]=u.current,ah(t.nodeType===8?t.parentNode:t),Za(),u}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var f=r;r=function(){var g=Yd(d);f.call(g)}}var d=_y(t,0,!1,null,null,!1,!1,"",Rv);return t._reactRootContainer=d,t[ks]=d.current,ah(t.nodeType===8?t.parentNode:t),Za(function(){W0(e,d,n,r)}),d}function K0(t,e,n,r,i){var o=n._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var f=i;i=function(){var d=Yd(u);f.call(d)}}W0(e,u,t,i)}else u=qP(n,e,t,i,r);return Yd(u)}jA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Tc(e.pendingLanes);n!==0&&(Hm(e,n|1),br(e,cn()),!(lt&6)&&(Tu=cn()+500,na()))}break;case 13:Za(function(){var r=Ls(t,1);if(r!==null){var i=fr();Ii(r,t,1,i)}}),Ay(t,1)}};Gm=function(t){if(t.tag===13){var e=Ls(t,134217728);if(e!==null){var n=fr();Ii(e,t,134217728,n)}Ay(t,134217728)}};zA=function(t){if(t.tag===13){var e=Bo(t),n=Ls(t,e);if(n!==null){var r=fr();Ii(n,t,e,r)}Ay(t,e)}};WA=function(){return vt};HA=function(t,e){var n=vt;try{return vt=t,e()}finally{vt=n}};zp=function(t,e,n){switch(e){case"input":if(kp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=L0(r);if(!i)throw Error(he(90));EA(r),kp(r,i)}}}break;case"textarea":AA(t,n);break;case"select":e=n.value,e!=null&&Xl(t,!!n.multiple,e,!1)}};PA=wy;NA=Za;var XP={usingClientEntryPoint:!1,Events:[Wh,Ml,L0,bA,RA,wy]},wc={findFiberByHostInstance:Sa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$P={bundleType:wc.bundleType,version:wc.version,rendererPackageName:wc.rendererPackageName,rendererConfig:wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MA(t),t===null?null:t.stateNode},findFiberByHostInstance:wc.findFiberByHostInstance||KP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wf.isDisabled&&Wf.supportsFiber)try{O0=Wf.inject($P),Xi=Wf}catch{}}$r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XP;$r.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ty(e))throw Error(he(200));return GP(t,e,null,n)};$r.createRoot=function(t,e){if(!Ty(t))throw Error(he(299));var n=!1,r="",i=fT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_y(t,1,!1,null,null,n,!1,r,i),t[ks]=e.current,ah(t.nodeType===8?t.parentNode:t),new Cy(e)};$r.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=MA(e),t=t===null?null:t.stateNode,t};$r.flushSync=function(t){return Za(t)};$r.hydrate=function(t,e,n){if(!G0(e))throw Error(he(200));return K0(null,t,e,!0,n)};$r.hydrateRoot=function(t,e,n){if(!Ty(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",u=fT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=hT(e,null,t,1,n??null,i,!1,o,u),t[ks]=e.current,ah(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new H0(e)};$r.render=function(t,e,n){if(!G0(e))throw Error(he(200));return K0(null,t,e,!1,n)};$r.unmountComponentAtNode=function(t){if(!G0(t))throw Error(he(40));return t._reactRootContainer?(Za(function(){K0(null,null,t,!1,function(){t._reactRootContainer=null,t[ks]=null})}),!0):!1};$r.unstable_batchedUpdates=wy;$r.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!G0(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return K0(t,e,n,!1,r)};$r.version="18.3.1-next-f1338f8080-20240426";function dT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dT)}catch(t){console.error(t)}}dT(),dA.exports=$r;var QP=dA.exports,Pv=QP;bp.createRoot=Pv.createRoot,bp.hydrateRoot=Pv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mh.apply(this,arguments)}var Po;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Po||(Po={}));const Nv="popstate";function YP(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:u,hash:f}=r.location;return Eg("",{pathname:o,search:u,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:gT(i)}return JP(e,n,null,t)}function mn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZP(){return Math.random().toString(36).substr(2,8)}function Ov(t,e){return{usr:t.state,key:t.key,idx:e}}function Eg(t,e,n,r){return n===void 0&&(n=null),mh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ju(e):e,{state:n,key:e&&e.key||r||ZP()})}function gT(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ju(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function JP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,u=i.history,f=Po.Pop,d=null,g=w();g==null&&(g=0,u.replaceState(mh({},u.state,{idx:g}),""));function w(){return(u.state||{idx:null}).idx}function x(){f=Po.Pop;let B=w(),k=B==null?null:B-g;g=B,d&&d({action:f,location:M.location,delta:k})}function _(B,k){f=Po.Push;let N=Eg(M.location,B,k);g=w()+1;let R=Ov(N,g),z=M.createHref(N);try{u.pushState(R,"",z)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;i.location.assign(z)}o&&d&&d({action:f,location:M.location,delta:1})}function T(B,k){f=Po.Replace;let N=Eg(M.location,B,k);g=w();let R=Ov(N,g),z=M.createHref(N);u.replaceState(R,"",z),o&&d&&d({action:f,location:M.location,delta:0})}function O(B){let k=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof B=="string"?B:gT(B);return N=N.replace(/ $/,"%20"),mn(k,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,k)}let M={get action(){return f},get location(){return t(i,u)},listen(B){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Nv,x),d=B,()=>{i.removeEventListener(Nv,x),d=null}},createHref(B){return e(i,B)},createURL:O,encodeLocation(B){let k=O(B);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:T,go(B){return u.go(B)}};return M}var Dv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Dv||(Dv={}));function e8(t,e,n){return n===void 0&&(n="/"),t8(t,e,n)}function t8(t,e,n,r){let i=typeof e=="string"?ju(e):e,o=wT(i.pathname||"/",n);if(o==null)return null;let u=mT(t);n8(u);let f=null;for(let d=0;f==null&&d<u.length;++d){let g=p8(o);f=h8(u[d],g)}return f}function mT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,u,f)=>{let d={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};d.relativePath.startsWith("/")&&(mn(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let g=Ga([r,d.relativePath]),w=n.concat(d);o.children&&o.children.length>0&&(mn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),mT(o.children,e,w,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:u8(g,o.index),routesMeta:w})};return t.forEach((o,u)=>{var f;if(o.path===""||!((f=o.path)!=null&&f.includes("?")))i(o,u);else for(let d of yT(o.path))i(o,u,d)}),e}function yT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let u=yT(r.join("/")),f=[];return f.push(...u.map(d=>d===""?o:[o,d].join("/"))),i&&f.push(...u),f.map(d=>t.startsWith("/")&&d===""?"/":d)}function n8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:c8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const r8=/^:[\w-]+$/,i8=3,s8=2,o8=1,a8=10,l8=-2,Mv=t=>t==="*";function u8(t,e){let n=t.split("/"),r=n.length;return n.some(Mv)&&(r+=l8),e&&(r+=s8),n.filter(i=>!Mv(i)).reduce((i,o)=>i+(r8.test(o)?i8:o===""?o8:a8),r)}function c8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function h8(t,e,n){let{routesMeta:r}=t,i={},o="/",u=[];for(let f=0;f<r.length;++f){let d=r[f],g=f===r.length-1,w=o==="/"?e:e.slice(o.length)||"/",x=f8({path:d.relativePath,caseSensitive:d.caseSensitive,end:g},w),_=d.route;if(!x)return null;Object.assign(i,x.params),u.push({params:i,pathname:Ga([o,x.pathname]),pathnameBase:w8(Ga([o,x.pathnameBase])),route:_}),x.pathnameBase!=="/"&&(o=Ga([o,x.pathnameBase]))}return u}function f8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=d8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:r.reduce((g,w,x)=>{let{paramName:_,isOptional:T}=w;if(_==="*"){let M=f[x]||"";u=o.slice(0,o.length-M.length).replace(/(.)\/+$/,"$1")}const O=f[x];return T&&!O?g[_]=void 0:g[_]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:u,pattern:t}}function d8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function p8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function wT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function g8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ju(t):t;return{pathname:n?n.startsWith("/")?n:m8(n,e):e,search:v8(r),hash:x8(i)}}function m8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function tp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function y8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vT(t,e){let n=y8(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xT(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ju(t):(i=mh({},t),mn(!i.pathname||!i.pathname.includes("?"),tp("?","pathname","search",i)),mn(!i.pathname||!i.pathname.includes("#"),tp("#","pathname","hash",i)),mn(!i.search||!i.search.includes("#"),tp("#","search","hash",i)));let o=t===""||i.pathname==="",u=o?"/":i.pathname,f;if(u==null)f=n;else{let x=e.length-1;if(!r&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),x-=1;i.pathname=_.join("/")}f=x>=0?e[x]:"/"}let d=g8(i,f),g=u&&u!=="/"&&u.endsWith("/"),w=(o||u===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(g||w)&&(d.pathname+="/"),d}const Ga=t=>t.join("/").replace(/\/\/+/g,"/"),w8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),v8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,x8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function E8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ET=["post","put","patch","delete"];new Set(ET);const _8=["get",...ET];new Set(_8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yh.apply(this,arguments)}const Iy=Y.createContext(null),A8=Y.createContext(null),Gh=Y.createContext(null),q0=Y.createContext(null),cl=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),_T=Y.createContext(null);function Kh(){return Y.useContext(q0)!=null}function Sy(){return Kh()||mn(!1),Y.useContext(q0).location}function AT(t){Y.useContext(Gh).static||Y.useLayoutEffect(t)}function by(){let{isDataRoute:t}=Y.useContext(cl);return t?L8():C8()}function C8(){Kh()||mn(!1);let t=Y.useContext(Iy),{basename:e,future:n,navigator:r}=Y.useContext(Gh),{matches:i}=Y.useContext(cl),{pathname:o}=Sy(),u=JSON.stringify(vT(i,n.v7_relativeSplatPath)),f=Y.useRef(!1);return AT(()=>{f.current=!0}),Y.useCallback(function(g,w){if(w===void 0&&(w={}),!f.current)return;if(typeof g=="number"){r.go(g);return}let x=xT(g,JSON.parse(u),o,w.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Ga([e,x.pathname])),(w.replace?r.replace:r.push)(x,w.state,w)},[e,r,u,o,t])}function T8(t,e){return I8(t,e)}function I8(t,e,n,r){Kh()||mn(!1);let{navigator:i}=Y.useContext(Gh),{matches:o}=Y.useContext(cl),u=o[o.length-1],f=u?u.params:{};u&&u.pathname;let d=u?u.pathnameBase:"/";u&&u.route;let g=Sy(),w;if(e){var x;let B=typeof e=="string"?ju(e):e;d==="/"||(x=B.pathname)!=null&&x.startsWith(d)||mn(!1),w=B}else w=g;let _=w.pathname||"/",T=_;if(d!=="/"){let B=d.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(B.length).join("/")}let O=e8(t,{pathname:T}),M=N8(O&&O.map(B=>Object.assign({},B,{params:Object.assign({},f,B.params),pathname:Ga([d,i.encodeLocation?i.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?d:Ga([d,i.encodeLocation?i.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),o,n,r);return e&&M?Y.createElement(q0.Provider,{value:{location:yh({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Po.Pop}},M):M}function S8(){let t=k8(),e=E8(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:i},n):null,null)}const b8=Y.createElement(S8,null);class R8 extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Y.createElement(cl.Provider,{value:this.props.routeContext},Y.createElement(_T.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function P8(t){let{routeContext:e,match:n,children:r}=t,i=Y.useContext(Iy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Y.createElement(cl.Provider,{value:e},r)}function N8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let u=t,f=(i=n)==null?void 0:i.errors;if(f!=null){let w=u.findIndex(x=>x.route.id&&(f==null?void 0:f[x.route.id])!==void 0);w>=0||mn(!1),u=u.slice(0,Math.min(u.length,w+1))}let d=!1,g=-1;if(n&&r&&r.v7_partialHydration)for(let w=0;w<u.length;w++){let x=u[w];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=w),x.route.id){let{loaderData:_,errors:T}=n,O=x.route.loader&&_[x.route.id]===void 0&&(!T||T[x.route.id]===void 0);if(x.route.lazy||O){d=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((w,x,_)=>{let T,O=!1,M=null,B=null;n&&(T=f&&x.route.id?f[x.route.id]:void 0,M=x.route.errorElement||b8,d&&(g<0&&_===0?(F8("route-fallback"),O=!0,B=null):g===_&&(O=!0,B=x.route.hydrateFallbackElement||null)));let k=e.concat(u.slice(0,_+1)),N=()=>{let R;return T?R=M:O?R=B:x.route.Component?R=Y.createElement(x.route.Component,null):x.route.element?R=x.route.element:R=w,Y.createElement(P8,{match:x,routeContext:{outlet:w,matches:k,isDataRoute:n!=null},children:R})};return n&&(x.route.ErrorBoundary||x.route.errorElement||_===0)?Y.createElement(R8,{location:n.location,revalidation:n.revalidation,component:M,error:T,children:N(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):N()},null)}var CT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(CT||{}),TT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(TT||{});function O8(t){let e=Y.useContext(Iy);return e||mn(!1),e}function D8(t){let e=Y.useContext(A8);return e||mn(!1),e}function M8(t){let e=Y.useContext(cl);return e||mn(!1),e}function IT(t){let e=M8(),n=e.matches[e.matches.length-1];return n.route.id||mn(!1),n.route.id}function k8(){var t;let e=Y.useContext(_T),n=D8(),r=IT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function L8(){let{router:t}=O8(CT.UseNavigateStable),e=IT(TT.UseNavigateStable),n=Y.useRef(!1);return AT(()=>{n.current=!0}),Y.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,yh({fromRouteId:e},o)))},[t,e])}const kv={};function F8(t,e,n){kv[t]||(kv[t]=!0)}function B8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function V8(t){let{to:e,replace:n,state:r,relative:i}=t;Kh()||mn(!1);let{future:o,static:u}=Y.useContext(Gh),{matches:f}=Y.useContext(cl),{pathname:d}=Sy(),g=by(),w=xT(e,vT(f,o.v7_relativeSplatPath),d,i==="path"),x=JSON.stringify(w);return Y.useEffect(()=>g(JSON.parse(x),{replace:n,state:r,relative:i}),[g,x,i,n,r]),null}function dd(t){mn(!1)}function U8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Po.Pop,navigator:o,static:u=!1,future:f}=t;Kh()&&mn(!1);let d=e.replace(/^\/*/,"/"),g=Y.useMemo(()=>({basename:d,navigator:o,static:u,future:yh({v7_relativeSplatPath:!1},f)}),[d,f,o,u]);typeof r=="string"&&(r=ju(r));let{pathname:w="/",search:x="",hash:_="",state:T=null,key:O="default"}=r,M=Y.useMemo(()=>{let B=wT(w,d);return B==null?null:{location:{pathname:B,search:x,hash:_,state:T,key:O},navigationType:i}},[d,w,x,_,T,O,i]);return M==null?null:Y.createElement(Gh.Provider,{value:g},Y.createElement(q0.Provider,{children:n,value:M}))}function j8(t){let{children:e,location:n}=t;return T8(_g(e),n)}new Promise(()=>{});function _g(t,e){e===void 0&&(e=[]);let n=[];return Y.Children.forEach(t,(r,i)=>{if(!Y.isValidElement(r))return;let o=[...e,i];if(r.type===Y.Fragment){n.push.apply(n,_g(r.props.children,o));return}r.type!==dd&&mn(!1),!r.props.index||!r.props.children||mn(!1);let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=_g(r.props.children,o)),n.push(u)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const z8="6";try{window.__reactRouterVersion=z8}catch{}const W8="startTransition",Lv=VR[W8];function H8(t){let{basename:e,children:n,future:r,window:i}=t,o=Y.useRef();o.current==null&&(o.current=YP({window:i,v5Compat:!0}));let u=o.current,[f,d]=Y.useState({action:u.action,location:u.location}),{v7_startTransition:g}=r||{},w=Y.useCallback(x=>{g&&Lv?Lv(()=>d(x)):d(x)},[d,g]);return Y.useLayoutEffect(()=>u.listen(w),[u,w]),Y.useEffect(()=>B8(r),[r]),Y.createElement(U8,{basename:e,children:n,location:f.location,navigationType:f.action,navigator:u,future:r})}var Fv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fv||(Fv={}));var Bv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Bv||(Bv={}));var Vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},G8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],u=t[n++],f=t[n++],d=((i&7)<<18|(o&63)<<12|(u&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|u&63)}}return e.join("")},bT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],u=i+1<t.length,f=u?t[i+1]:0,d=i+2<t.length,g=d?t[i+2]:0,w=o>>2,x=(o&3)<<4|f>>4;let _=(f&15)<<2|g>>6,T=g&63;d||(T=64,u||(_=64)),r.push(n[w],n[x],n[_],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ST(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):G8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],f=i<t.length?n[t.charAt(i)]:0;++i;const g=i<t.length?n[t.charAt(i)]:64;++i;const x=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||f==null||g==null||x==null)throw new K8;const _=o<<2|f>>4;if(r.push(_),g!==64){const T=f<<4&240|g>>2;if(r.push(T),x!==64){const O=g<<6&192|x;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class K8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q8=function(t){const e=ST(t);return bT.encodeByteArray(e,!0)},Zd=function(t){return q8(t).replace(/\./g,"")},RT=function(t){try{return bT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8=()=>X8().__FIREBASE_DEFAULTS__,Q8=()=>{if(typeof process>"u"||typeof Vv>"u")return;const t=Vv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Y8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RT(t[1]);return e&&JSON.parse(e)},X0=()=>{try{return $8()||Q8()||Y8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},PT=t=>{var e,n;return(n=(e=X0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},NT=t=>{const e=PT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},OT=()=>{var t;return(t=X0())===null||t===void 0?void 0:t.config},DT=t=>{var e;return(e=X0())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zd(JSON.stringify(n)),Zd(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ir())}function tN(){var t;const e=(t=X0())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function iN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sN(){const t=ir();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oN(){return!tN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aN(){try{return typeof indexedDB=="object"}catch{return!1}}function lN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="FirebaseError";class os extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uN,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qh.prototype.create)}}class qh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],u=o?cN(o,r):"Error",f=`${this.serviceName}: ${u} (${i}).`;return new os(i,f,r)}}function cN(t,e){return t.replace(hN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const hN=/\{\$([^}]+)}/g;function fN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],u=e[i];if(Uv(o)&&Uv(u)){if(!Jd(o,u))return!1}else if(o!==u)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Uv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dN(t,e){const n=new pN(t,e);return n.subscribe.bind(n)}class pN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=np),i.error===void 0&&(i.error=np),i.complete===void 0&&(i.complete=np);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t){return t&&t._delegate?t._delegate:t}class qo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Z8;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wN(e))try{this.getOrInitializeService({instanceIdentifier:Ca})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ca){return this.instances.has(e)}getOptions(e=Ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(o);r===f&&u.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ca){return this.component?this.component.multipleInstances?e:Ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yN(t){return t===Ca?void 0:t}function wN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const xN={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},EN=nt.INFO,_N={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},AN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_N[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ry{constructor(e){this.name=e,this._logLevel=EN,this._logHandler=AN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const CN=(t,e)=>e.some(n=>t instanceof n);let jv,zv;function TN(){return jv||(jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IN(){return zv||(zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MT=new WeakMap,Ag=new WeakMap,kT=new WeakMap,rp=new WeakMap,Py=new WeakMap;function SN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(Uo(t.result)),i()},u=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&MT.set(n,t)}).catch(()=>{}),Py.set(e,t),e}function bN(t){if(Ag.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),i()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});Ag.set(t,e)}let Cg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ag.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RN(t){Cg=t(Cg)}function PN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ip(this),e,...n);return kT.set(r,e.sort?e.sort():[e]),Uo(r)}:IN().includes(t)?function(...e){return t.apply(ip(this),e),Uo(MT.get(this))}:function(...e){return Uo(t.apply(ip(this),e))}}function NN(t){return typeof t=="function"?PN(t):(t instanceof IDBTransaction&&bN(t),CN(t,TN())?new Proxy(t,Cg):t)}function Uo(t){if(t instanceof IDBRequest)return SN(t);if(rp.has(t))return rp.get(t);const e=NN(t);return e!==t&&(rp.set(t,e),Py.set(e,t)),e}const ip=t=>Py.get(t);function ON(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(t,e),f=Uo(u);return r&&u.addEventListener("upgradeneeded",d=>{r(Uo(u.result),d.oldVersion,d.newVersion,Uo(u.transaction),d)}),n&&u.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),f.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const DN=["get","getKey","getAll","getAllKeys","count"],MN=["put","add","delete","clear"],sp=new Map;function Wv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sp.get(e))return sp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=MN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DN.includes(n)))return;const o=async function(u,...f){const d=this.transaction(u,i?"readwrite":"readonly");let g=d.store;return r&&(g=g.index(f.shift())),(await Promise.all([g[n](...f),i&&d.done]))[0]};return sp.set(e,o),o}RN(t=>({...t,get:(e,n,r)=>Wv(e,n)||t.get(e,n,r),has:(e,n)=>!!Wv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tg="@firebase/app",Hv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Ry("@firebase/app"),FN="@firebase/app-compat",BN="@firebase/analytics-compat",VN="@firebase/analytics",UN="@firebase/app-check-compat",jN="@firebase/app-check",zN="@firebase/auth",WN="@firebase/auth-compat",HN="@firebase/database",GN="@firebase/data-connect",KN="@firebase/database-compat",qN="@firebase/functions",XN="@firebase/functions-compat",$N="@firebase/installations",QN="@firebase/installations-compat",YN="@firebase/messaging",ZN="@firebase/messaging-compat",JN="@firebase/performance",e6="@firebase/performance-compat",t6="@firebase/remote-config",n6="@firebase/remote-config-compat",r6="@firebase/storage",i6="@firebase/storage-compat",s6="@firebase/firestore",o6="@firebase/vertexai-preview",a6="@firebase/firestore-compat",l6="firebase",u6="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="[DEFAULT]",c6={[Tg]:"fire-core",[FN]:"fire-core-compat",[VN]:"fire-analytics",[BN]:"fire-analytics-compat",[jN]:"fire-app-check",[UN]:"fire-app-check-compat",[zN]:"fire-auth",[WN]:"fire-auth-compat",[HN]:"fire-rtdb",[GN]:"fire-data-connect",[KN]:"fire-rtdb-compat",[qN]:"fire-fn",[XN]:"fire-fn-compat",[$N]:"fire-iid",[QN]:"fire-iid-compat",[YN]:"fire-fcm",[ZN]:"fire-fcm-compat",[JN]:"fire-perf",[e6]:"fire-perf-compat",[t6]:"fire-rc",[n6]:"fire-rc-compat",[r6]:"fire-gcs",[i6]:"fire-gcs-compat",[s6]:"fire-fst",[a6]:"fire-fst-compat",[o6]:"fire-vertex","fire-js":"fire-js",[l6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new Map,h6=new Map,Sg=new Map;function Gv(t,e){try{t.container.addComponent(e)}catch(n){Bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ja(t){const e=t.name;if(Sg.has(e))return Bs.debug(`There were multiple attempts to register component ${e}.`),!1;Sg.set(e,t);for(const n of e0.values())Gv(n,t);for(const n of h6.values())Gv(n,t);return!0}function $0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ki(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jo=new qh("app","Firebase",f6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=u6;function LT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ig,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jo.create("bad-app-name",{appName:String(i)});if(n||(n=OT()),!n)throw jo.create("no-options");const o=e0.get(i);if(o){if(Jd(n,o.options)&&Jd(r,o.config))return o;throw jo.create("duplicate-app",{appName:i})}const u=new vN(i);for(const d of Sg.values())u.addComponent(d);const f=new d6(n,r,u);return e0.set(i,f),f}function Ny(t=Ig){const e=e0.get(t);if(!e&&t===Ig&&OT())return LT();if(!e)throw jo.create("no-app",{appName:t});return e}function Qi(t,e,n){var r;let i=(r=c6[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${i}" with version "${e}":`];o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bs.warn(f.join(" "));return}Ja(new qo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="firebase-heartbeat-database",g6=1,wh="firebase-heartbeat-store";let op=null;function FT(){return op||(op=ON(p6,g6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wh)}catch(n){console.warn(n)}}}}).catch(t=>{throw jo.create("idb-open",{originalErrorMessage:t.message})})),op}async function m6(t){try{const n=(await FT()).transaction(wh),r=await n.objectStore(wh).get(BT(t));return await n.done,r}catch(e){if(e instanceof os)Bs.warn(e.message);else{const n=jo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bs.warn(n.message)}}}async function Kv(t,e){try{const r=(await FT()).transaction(wh,"readwrite");await r.objectStore(wh).put(e,BT(t)),await r.done}catch(n){if(n instanceof os)Bs.warn(n.message);else{const r=jo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bs.warn(r.message)}}}function BT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=1024,w6=30*24*60*60*1e3;class v6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new E6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=qv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const f=new Date(u.date).valueOf();return Date.now()-f<=w6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Bs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qv(),{heartbeatsToSend:r,unsentEntries:i}=x6(this._heartbeatsCache.heartbeats),o=Zd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Bs.warn(n),""}}}function qv(){return new Date().toISOString().substring(0,10)}function x6(t,e=y6){const n=[];let r=t.slice();for(const i of t){const o=n.find(u=>u.agent===i.agent);if(o){if(o.dates.push(i.date),Xv(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Xv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class E6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aN()?lN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await m6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xv(t){return Zd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(t){Ja(new qo("platform-logger",e=>new kN(e),"PRIVATE")),Ja(new qo("heartbeat",e=>new v6(e),"PRIVATE")),Qi(Tg,Hv,t),Qi(Tg,Hv,"esm2017"),Qi("fire-js","")}_6("");function Oy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function VT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const A6=VT,UT=new qh("auth","Firebase",VT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Ry("@firebase/auth");function C6(t,...e){t0.logLevel<=nt.WARN&&t0.warn(`Auth (${zu}): ${t}`,...e)}function pd(t,...e){t0.logLevel<=nt.ERROR&&t0.error(`Auth (${zu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,...e){throw My(t,...e)}function Si(t,...e){return My(t,...e)}function Dy(t,e,n){const r=Object.assign(Object.assign({},A6()),{[e]:n});return new qh("auth","Firebase",r).create(e,{appName:t.name})}function zo(t){return Dy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function T6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&is(t,"argument-error"),Dy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function My(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UT.create(t,...e)}function Le(t,e,...n){if(!t)throw My(e,...n)}function Is(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pd(e),new Error(e)}function Vs(t,e){t||Is(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function I6(){return $v()==="http:"||$v()==="https:"}function $v(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I6()||rN()||"connection"in navigator)?navigator.onLine:!0}function b6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vs(n>e,"Short delay should be less than long delay!"),this.isMobile=eN()||iN()}get(){return S6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t,e){Vs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=new $h(3e4,6e4);function Q0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Wu(t,e,n,r,i={}){return zT(t,i,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const f=Xh(Object.assign({key:t.config.apiKey},u)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const g=Object.assign({method:e,headers:d},o);return nN()||(g.referrerPolicy="no-referrer"),jT.fetch()(HT(t,t.config.apiHost,n,f),g)})}async function zT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},R6),e);try{const i=new N6(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Hf(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const f=o.ok?u.errorMessage:u.error.message,[d,g]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hf(t,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Hf(t,"email-already-in-use",u);if(d==="USER_DISABLED")throw Hf(t,"user-disabled",u);const w=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Dy(t,w,g);is(t,w)}}catch(i){if(i instanceof os)throw i;is(t,"network-request-failed",{message:String(i)})}}async function WT(t,e,n,r,i={}){const o=await Wu(t,e,n,r,i);return"mfaPendingCredential"in o&&is(t,"multi-factor-auth-required",{_serverResponse:o}),o}function HT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ky(t.config,i):`${t.config.apiScheme}://${i}`}class N6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),P6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Si(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6(t,e){return Wu(t,"POST","/v1/accounts:delete",e)}async function GT(t,e){return Wu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function D6(t,e=!1){const n=Kn(t),r=await n.getIdToken(e),i=Ly(r);Le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Hc(ap(i.auth_time)),issuedAtTime:Hc(ap(i.iat)),expirationTime:Hc(ap(i.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ap(t){return Number(t)*1e3}function Ly(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pd("JWT malformed, contained fewer than 3 sections"),null;try{const i=RT(n);return i?JSON.parse(i):(pd("Failed to decode base64 JWT payload"),null)}catch(i){return pd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Qv(t){const e=Ly(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof os&&M6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function M6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hc(this.lastLoginAt),this.creationTime=Hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n0(t){var e;const n=t.auth,r=await t.getIdToken(),i=await vh(t,GT(n,{idToken:r}));Le(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?KT(o.providerUserInfo):[],f=F6(t.providerData,u),d=t.isAnonymous,g=!(t.email&&o.passwordHash)&&!(f!=null&&f.length),w=d?g:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Rg(o.createdAt,o.lastLoginAt),isAnonymous:w};Object.assign(t,x)}async function L6(t){const e=Kn(t);await n0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function F6(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KT(t){return t.map(e=>{var{providerId:n}=e,r=Oy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B6(t,e){const n=await zT(t,{},async()=>{const r=Xh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,u=HT(t,i,"/v1/token",`key=${o}`),f=await t._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",jT.fetch()(u,{method:"POST",headers:f,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function V6(t,e){return Wu(t,"POST","/v2/accounts:revokeToken",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const n=Qv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await B6(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,u=new eu;return r&&(Le(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(Le(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),o&&(Le(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eu,this.toJSON())}_performRefresh(){return Is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ss{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Oy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await vh(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return D6(this,e)}reload(){return L6(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await n0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ki(this.auth.app))return Promise.reject(zo(this.auth));const e=await this.getIdToken();return await vh(this,O6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,u,f,d,g,w;const x=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(i=n.email)!==null&&i!==void 0?i:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,O=(u=n.photoURL)!==null&&u!==void 0?u:void 0,M=(f=n.tenantId)!==null&&f!==void 0?f:void 0,B=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,k=(g=n.createdAt)!==null&&g!==void 0?g:void 0,N=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:R,emailVerified:z,isAnonymous:Q,providerData:Z,stsTokenManager:L}=n;Le(R&&L,e,"internal-error");const P=eu.fromJSON(this.name,L);Le(typeof R=="string",e,"internal-error"),io(x,e.name),io(_,e.name),Le(typeof z=="boolean",e,"internal-error"),Le(typeof Q=="boolean",e,"internal-error"),io(T,e.name),io(O,e.name),io(M,e.name),io(B,e.name),io(k,e.name),io(N,e.name);const F=new Ss({uid:R,auth:e,email:_,emailVerified:z,displayName:x,isAnonymous:Q,photoURL:O,phoneNumber:T,tenantId:M,stsTokenManager:P,createdAt:k,lastLoginAt:N});return Z&&Array.isArray(Z)&&(F.providerData=Z.map(j=>Object.assign({},j))),B&&(F._redirectEventId=B),F}static async _fromIdTokenResponse(e,n,r=!1){const i=new eu;i.updateFromServerResponse(n);const o=new Ss({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await n0(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Le(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?KT(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),f=new eu;f.updateFromIdToken(r);const d=new Ss({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:u}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Rg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,g),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new Map;function bs(t){Vs(t instanceof Function,"Expected a class definition");let e=Yv.get(t);return e?(Vs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qT.type="NONE";const Zv=qT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t,e,n){return`firebase:${t}:${e}:${n}`}class tu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=gd(this.userKey,i.apiKey,o),this.fullPersistenceKey=gd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ss._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tu(bs(Zv),e,r);const i=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=i[0]||bs(Zv);const u=gd(r,e.config.apiKey,e.name);let f=null;for(const g of n)try{const w=await g._get(u);if(w){const x=Ss._fromJSON(e,w);g!==o&&(f=x),o=g;break}}catch{}const d=i.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new tu(o,e,r):(o=d[0],f&&await o._set(u,f.toJSON()),await Promise.all(n.map(async g=>{if(g!==o)try{await g._remove(u)}catch{}})),new tu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JT(e))return"Blackberry";if(eI(e))return"Webos";if($T(e))return"Safari";if((e.includes("chrome/")||QT(e))&&!e.includes("edge/"))return"Chrome";if(ZT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XT(t=ir()){return/firefox\//i.test(t)}function $T(t=ir()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QT(t=ir()){return/crios\//i.test(t)}function YT(t=ir()){return/iemobile/i.test(t)}function ZT(t=ir()){return/android/i.test(t)}function JT(t=ir()){return/blackberry/i.test(t)}function eI(t=ir()){return/webos/i.test(t)}function Fy(t=ir()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function U6(t=ir()){var e;return Fy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function j6(){return sN()&&document.documentMode===10}function tI(t=ir()){return Fy(t)||ZT(t)||eI(t)||JT(t)||/windows phone/i.test(t)||YT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t,e=[]){let n;switch(t){case"Browser":n=Jv(ir());break;case"Worker":n=`${Jv(ir())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,f)=>{try{const d=e(o);u(d)}catch(d){f(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6(t,e={}){return Wu(t,"GET","/v2/passwordPolicy",Q0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=6;class G6{constructor(e){var n,r,i,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:H6,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,u,f;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(f=d.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ex(this),this.idTokenSubscription=new ex(this),this.beforeStateQueue=new z6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bs(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await tu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await GT(this,{idToken:e}),r=await Ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ki(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===f)&&(d!=null&&d.user)&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await n0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ki(this.app))return Promise.reject(zo(this));const n=e?Kn(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ki(this.app)?Promise.reject(zo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ki(this.app)?Promise.reject(zo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W6(this),n=new G6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await V6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bs(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await tu.create(this,[bs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(f,this,"internal-error"),f.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{u=!0,d()}}else{const d=e.addObserver(n);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&C6(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qh(t){return Kn(t)}class ex{constructor(e){this.auth=e,this.observer=null,this.addObserver=dN(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let By={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q6(t){By=t}function X6(t){return By.loadJS(t)}function $6(){return By.gapiScript}function Q6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t,e){const n=$0(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Jd(o,e??{}))return i;is(i,"already-initialized")}return n.initialize({options:e})}function Z6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function J6(t,e,n){const r=Qh(t);Le(r._canInitEmulator,r,"emulator-config-failed"),Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=rI(e),{host:u,port:f}=eO(e),d=f===null?"":`:${f}`;r.config.emulator={url:`${o}//${u}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:f,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),tO()}function rI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eO(t){const e=rI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:tx(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:tx(u)}}}function tx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Is("not implemented")}_getIdTokenResponse(e){return Is("not implemented")}_linkToIdToken(e,n){return Is("not implemented")}_getReauthenticationResolver(e){return Is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t,e){return WT(t,"POST","/v1/accounts:signInWithIdp",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="http://localhost";class el extends iI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):is("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Oy(n,["providerId","signInMethod"]);if(!r||!i)return null;const u=new el(r,i);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return nu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nu(e,n)}buildRequest(){const e={requestUri:nO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends Vy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends Yh{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.FACEBOOK_SIGN_IN_METHOD="facebook.com";po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Yh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return el._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return As.credential(n,r)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends Yh{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.GITHUB_SIGN_IN_METHOD="github.com";go.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Yh{constructor(){super("twitter.com")}static credential(e,n){return el._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return mo.credential(n,r)}catch{return null}}}mo.TWITTER_SIGN_IN_METHOD="twitter.com";mo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t,e){return WT(t,"POST","/v1/accounts:signUp",Q0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Ss._fromIdTokenResponse(e,r,i),u=nx(r);return new Xo({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=nx(r);return new Xo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function nx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(t){var e;if(Ki(t.app))return Promise.reject(zo(t));const n=Qh(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Xo({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await rO(n,{returnSecureToken:!0}),i=await Xo._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends os{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,r0.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new r0(e,n,r,i)}}function sI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?r0._fromErrorAndOperation(t,o,e,r):o})}async function sO(t,e,n=!1){const r=await vh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(t,e,n=!1){const{auth:r}=t;if(Ki(r.app))return Promise.reject(zo(r));const i="reauthenticate";try{const o=await vh(t,sI(r,i,e,t),n);Le(o.idToken,r,"internal-error");const u=Ly(o.idToken);Le(u,r,"internal-error");const{sub:f}=u;return Le(t.uid===f,r,"user-mismatch"),Xo._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&is(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(t,e,n=!1){if(Ki(t.app))return Promise.reject(zo(t));const r="signIn",i=await sI(t,r,e),o=await Xo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function lO(t,e,n,r){return Kn(t).onIdTokenChanged(e,n,r)}function uO(t,e,n){return Kn(t).beforeAuthStateChanged(e,n)}function oI(t,e,n,r){return Kn(t).onAuthStateChanged(e,n,r)}function cO(t){return Kn(t).signOut()}const i0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(i0,"1"),this.storage.removeItem(i0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=1e3,fO=10;class lI extends aI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,f,d)=>{this.notifyListeners(u,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);j6()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lI.type="LOCAL";const dO=lI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI extends aI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uI.type="SESSION";const cI=uI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Y0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,u=this.handlersMap[i];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const f=Array.from(u).map(async g=>g(n.origin,o)),d=await pO(f);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Y0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,u;return new Promise((f,d)=>{const g=Uy("",20);i.port1.start();const w=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(x){const _=x;if(_.data.eventId===g)switch(_.data.status){case"ack":clearTimeout(w),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),f(_.data.response);break;default:clearTimeout(w),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(){return window}function mO(t){Yi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(){return typeof Yi().WorkerGlobalScope<"u"&&typeof Yi().importScripts=="function"}async function yO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function vO(){return hI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firebaseLocalStorageDb",xO=1,s0="firebaseLocalStorage",dI="fbase_key";class Zh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Z0(t,e){return t.transaction([s0],e?"readwrite":"readonly").objectStore(s0)}function EO(){const t=indexedDB.deleteDatabase(fI);return new Zh(t).toPromise()}function Pg(){const t=indexedDB.open(fI,xO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(s0,{keyPath:dI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(s0)?e(r):(r.close(),await EO(),e(await Pg()))})})}async function rx(t,e,n){const r=Z0(t,!0).put({[dI]:e,value:n});return new Zh(r).toPromise()}async function _O(t,e){const n=Z0(t,!1).get(e),r=await new Zh(n).toPromise();return r===void 0?null:r.value}function ix(t,e){const n=Z0(t,!0).delete(e);return new Zh(n).toPromise()}const AO=800,CO=3;class pI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>CO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Y0._getInstance(vO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await yO(),!this.activeServiceWorker)return;this.sender=new gO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pg();return await rx(e,i0,"1"),await ix(e,i0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_O(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ix(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Z0(i,!1).getAll();return new Zh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pI.type="LOCAL";const TO=pI;new $h(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t,e){return e?bs(e):(Le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy extends iI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IO(t){return aO(t.auth,new jy(t),t.bypassAuthState)}function SO(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),oO(n,new jy(t),t.bypassAuthState)}async function bO(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),sO(n,new jy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:u,type:f}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IO;case"linkViaPopup":case"linkViaRedirect":return bO;case"reauthViaPopup":case"reauthViaRedirect":return SO;default:is(this.auth,"internal-error")}}resolve(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=new $h(2e3,1e4);async function PO(t,e,n){if(Ki(t.app))return Promise.reject(Si(t,"operation-not-supported-in-this-environment"));const r=Qh(t);T6(t,e,Vy);const i=gI(r,n);return new Pa(r,"signInViaPopup",e,i).executeNotNull()}class Pa extends mI{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");const e=Uy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RO.get())};e()}}Pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="pendingRedirect",md=new Map;class OO extends mI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=md.get(this.auth._key());if(!e){try{const r=await DO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}md.set(this.auth._key(),e)}return this.bypassAuthState||md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DO(t,e){const n=LO(e),r=kO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function MO(t,e){md.set(t._key(),e)}function kO(t){return bs(t._redirectPersistence)}function LO(t){return gd(NO,t.config.apiKey,t.name)}async function FO(t,e,n=!1){if(Ki(t.app))return Promise.reject(zo(t));const r=Qh(t),i=gI(r,e),u=await new OO(r,i,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=10*60*1e3;class VO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BO&&this.cachedEventUids.clear(),this.cachedEventUids.has(sx(e))}saveEventToCache(e){this.cachedEventUids.add(sx(e)),this.lastProcessedEventTime=Date.now()}}function sx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,e={}){return Wu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WO=/^https?/;async function HO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jO(t);for(const n of e)try{if(GO(n))return}catch{}is(t,"unauthorized-domain")}function GO(t){const e=bg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!WO.test(n))return!1;if(zO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=new $h(3e4,6e4);function ox(){const t=Yi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qO(t){return new Promise((e,n)=>{var r,i,o;function u(){ox(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ox(),n(Si(t,"network-request-failed"))},timeout:KO.get()})}if(!((i=(r=Yi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Yi().gapi)===null||o===void 0)&&o.load)u();else{const f=Q6("iframefcb");return Yi()[f]=()=>{gapi.load?u():n(Si(t,"network-request-failed"))},X6(`${$6()}?onload=${f}`).catch(d=>n(d))}}).catch(e=>{throw yd=null,e})}let yd=null;function XO(t){return yd=yd||qO(t),yd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new $h(5e3,15e3),QO="__/auth/iframe",YO="emulator/auth/iframe",ZO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eD(t){const e=t.config;Le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ky(e,YO):`https://${t.config.authDomain}/${QO}`,r={apiKey:e.apiKey,appName:t.name,v:zu},i=JO.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Xh(r).slice(1)}`}async function tD(t){const e=await XO(t),n=Yi().gapi;return Le(n,t,"internal-error"),e.open({where:document.body,url:eD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZO,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const u=Si(t,"network-request-failed"),f=Yi().setTimeout(()=>{o(u)},$O.get());function d(){Yi().clearTimeout(f),i(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rD=500,iD=600,sD="_blank",oD="http://localhost";class ax{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aD(t,e,n,r=rD,i=iD){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d=Object.assign(Object.assign({},nD),{width:r.toString(),height:i.toString(),top:o,left:u}),g=ir().toLowerCase();n&&(f=QT(g)?sD:n),XT(g)&&(e=e||oD,d.scrollbars="yes");const w=Object.entries(d).reduce((_,[T,O])=>`${_}${T}=${O},`,"");if(U6(g)&&f!=="_self")return lD(e||"",f),new ax(null);const x=window.open(e||"",f,w);Le(x,t,"popup-blocked");try{x.focus()}catch{}return new ax(x)}function lD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="__/auth/handler",cD="emulator/auth/handler",hD=encodeURIComponent("fac");async function lx(t,e,n,r,i,o){Le(t.config.authDomain,t,"auth-domain-config-required"),Le(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zu,eventId:i};if(e instanceof Vy){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",fN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,x]of Object.entries({}))u[w]=x}if(e instanceof Yh){const w=e.getScopes().filter(x=>x!=="");w.length>0&&(u.scopes=w.join(","))}t.tenantId&&(u.tid=t.tenantId);const f=u;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const d=await t._getAppCheckToken(),g=d?`#${hD}=${encodeURIComponent(d)}`:"";return`${fD(t)}?${Xh(f).slice(1)}${g}`}function fD({config:t}){return t.emulator?ky(t,cD):`https://${t.authDomain}/${uD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="webStorageSupport";class dD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cI,this._completeRedirectFn=FO,this._overrideRedirectResult=MO}async _openPopup(e,n,r,i){var o;Vs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await lx(e,n,r,bg(),i);return aD(e,u,Uy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await lx(e,n,r,bg(),i);return mO(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Vs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tD(e),r=new VO(e);return n.register("authEvent",i=>(Le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lp,{type:lp},i=>{var o;const u=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[lp];u!==void 0&&n(!!u),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tI()||$T()||Fy()}}const pD=dD;var ux="@firebase/auth",cx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yD(t){Ja(new qo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=r.options;Le(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nI(t)},g=new K6(r,i,o,d);return Z6(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ja(new qo("auth-internal",e=>{const n=Qh(e.getProvider("auth").getImmediate());return(r=>new gD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(ux,cx,mD(t)),Qi(ux,cx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=5*60,vD=DT("authIdTokenMaxAge")||wD;let hx=null;const xD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>vD)return;const i=n==null?void 0:n.token;hx!==i&&(hx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ED(t=Ny()){const e=$0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Y6(t,{popupRedirectResolver:pD,persistence:[TO,dO,cI]}),r=DT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=xD(o.toString());uO(n,u,()=>u(n.currentUser)),lO(n,f=>u(f))}}const i=PT("auth");return i&&J6(n,`http://${i}`),n}function _D(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}q6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Si("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",_D().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yD("Browser");var AD="firebase",CD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(AD,CD,"app");var fx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ka,wI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,P){function F(){}F.prototype=P.prototype,L.D=P.prototype,L.prototype=new F,L.prototype.constructor=L,L.C=function(j,K,G){for(var H=Array(arguments.length-2),We=2;We<arguments.length;We++)H[We-2]=arguments[We];return P.prototype[K].apply(j,H)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,P,F){F||(F=0);var j=Array(16);if(typeof P=="string")for(var K=0;16>K;++K)j[K]=P.charCodeAt(F++)|P.charCodeAt(F++)<<8|P.charCodeAt(F++)<<16|P.charCodeAt(F++)<<24;else for(K=0;16>K;++K)j[K]=P[F++]|P[F++]<<8|P[F++]<<16|P[F++]<<24;P=L.g[0],F=L.g[1],K=L.g[2];var G=L.g[3],H=P+(G^F&(K^G))+j[0]+3614090360&4294967295;P=F+(H<<7&4294967295|H>>>25),H=G+(K^P&(F^K))+j[1]+3905402710&4294967295,G=P+(H<<12&4294967295|H>>>20),H=K+(F^G&(P^F))+j[2]+606105819&4294967295,K=G+(H<<17&4294967295|H>>>15),H=F+(P^K&(G^P))+j[3]+3250441966&4294967295,F=K+(H<<22&4294967295|H>>>10),H=P+(G^F&(K^G))+j[4]+4118548399&4294967295,P=F+(H<<7&4294967295|H>>>25),H=G+(K^P&(F^K))+j[5]+1200080426&4294967295,G=P+(H<<12&4294967295|H>>>20),H=K+(F^G&(P^F))+j[6]+2821735955&4294967295,K=G+(H<<17&4294967295|H>>>15),H=F+(P^K&(G^P))+j[7]+4249261313&4294967295,F=K+(H<<22&4294967295|H>>>10),H=P+(G^F&(K^G))+j[8]+1770035416&4294967295,P=F+(H<<7&4294967295|H>>>25),H=G+(K^P&(F^K))+j[9]+2336552879&4294967295,G=P+(H<<12&4294967295|H>>>20),H=K+(F^G&(P^F))+j[10]+4294925233&4294967295,K=G+(H<<17&4294967295|H>>>15),H=F+(P^K&(G^P))+j[11]+2304563134&4294967295,F=K+(H<<22&4294967295|H>>>10),H=P+(G^F&(K^G))+j[12]+1804603682&4294967295,P=F+(H<<7&4294967295|H>>>25),H=G+(K^P&(F^K))+j[13]+4254626195&4294967295,G=P+(H<<12&4294967295|H>>>20),H=K+(F^G&(P^F))+j[14]+2792965006&4294967295,K=G+(H<<17&4294967295|H>>>15),H=F+(P^K&(G^P))+j[15]+1236535329&4294967295,F=K+(H<<22&4294967295|H>>>10),H=P+(K^G&(F^K))+j[1]+4129170786&4294967295,P=F+(H<<5&4294967295|H>>>27),H=G+(F^K&(P^F))+j[6]+3225465664&4294967295,G=P+(H<<9&4294967295|H>>>23),H=K+(P^F&(G^P))+j[11]+643717713&4294967295,K=G+(H<<14&4294967295|H>>>18),H=F+(G^P&(K^G))+j[0]+3921069994&4294967295,F=K+(H<<20&4294967295|H>>>12),H=P+(K^G&(F^K))+j[5]+3593408605&4294967295,P=F+(H<<5&4294967295|H>>>27),H=G+(F^K&(P^F))+j[10]+38016083&4294967295,G=P+(H<<9&4294967295|H>>>23),H=K+(P^F&(G^P))+j[15]+3634488961&4294967295,K=G+(H<<14&4294967295|H>>>18),H=F+(G^P&(K^G))+j[4]+3889429448&4294967295,F=K+(H<<20&4294967295|H>>>12),H=P+(K^G&(F^K))+j[9]+568446438&4294967295,P=F+(H<<5&4294967295|H>>>27),H=G+(F^K&(P^F))+j[14]+3275163606&4294967295,G=P+(H<<9&4294967295|H>>>23),H=K+(P^F&(G^P))+j[3]+4107603335&4294967295,K=G+(H<<14&4294967295|H>>>18),H=F+(G^P&(K^G))+j[8]+1163531501&4294967295,F=K+(H<<20&4294967295|H>>>12),H=P+(K^G&(F^K))+j[13]+2850285829&4294967295,P=F+(H<<5&4294967295|H>>>27),H=G+(F^K&(P^F))+j[2]+4243563512&4294967295,G=P+(H<<9&4294967295|H>>>23),H=K+(P^F&(G^P))+j[7]+1735328473&4294967295,K=G+(H<<14&4294967295|H>>>18),H=F+(G^P&(K^G))+j[12]+2368359562&4294967295,F=K+(H<<20&4294967295|H>>>12),H=P+(F^K^G)+j[5]+4294588738&4294967295,P=F+(H<<4&4294967295|H>>>28),H=G+(P^F^K)+j[8]+2272392833&4294967295,G=P+(H<<11&4294967295|H>>>21),H=K+(G^P^F)+j[11]+1839030562&4294967295,K=G+(H<<16&4294967295|H>>>16),H=F+(K^G^P)+j[14]+4259657740&4294967295,F=K+(H<<23&4294967295|H>>>9),H=P+(F^K^G)+j[1]+2763975236&4294967295,P=F+(H<<4&4294967295|H>>>28),H=G+(P^F^K)+j[4]+1272893353&4294967295,G=P+(H<<11&4294967295|H>>>21),H=K+(G^P^F)+j[7]+4139469664&4294967295,K=G+(H<<16&4294967295|H>>>16),H=F+(K^G^P)+j[10]+3200236656&4294967295,F=K+(H<<23&4294967295|H>>>9),H=P+(F^K^G)+j[13]+681279174&4294967295,P=F+(H<<4&4294967295|H>>>28),H=G+(P^F^K)+j[0]+3936430074&4294967295,G=P+(H<<11&4294967295|H>>>21),H=K+(G^P^F)+j[3]+3572445317&4294967295,K=G+(H<<16&4294967295|H>>>16),H=F+(K^G^P)+j[6]+76029189&4294967295,F=K+(H<<23&4294967295|H>>>9),H=P+(F^K^G)+j[9]+3654602809&4294967295,P=F+(H<<4&4294967295|H>>>28),H=G+(P^F^K)+j[12]+3873151461&4294967295,G=P+(H<<11&4294967295|H>>>21),H=K+(G^P^F)+j[15]+530742520&4294967295,K=G+(H<<16&4294967295|H>>>16),H=F+(K^G^P)+j[2]+3299628645&4294967295,F=K+(H<<23&4294967295|H>>>9),H=P+(K^(F|~G))+j[0]+4096336452&4294967295,P=F+(H<<6&4294967295|H>>>26),H=G+(F^(P|~K))+j[7]+1126891415&4294967295,G=P+(H<<10&4294967295|H>>>22),H=K+(P^(G|~F))+j[14]+2878612391&4294967295,K=G+(H<<15&4294967295|H>>>17),H=F+(G^(K|~P))+j[5]+4237533241&4294967295,F=K+(H<<21&4294967295|H>>>11),H=P+(K^(F|~G))+j[12]+1700485571&4294967295,P=F+(H<<6&4294967295|H>>>26),H=G+(F^(P|~K))+j[3]+2399980690&4294967295,G=P+(H<<10&4294967295|H>>>22),H=K+(P^(G|~F))+j[10]+4293915773&4294967295,K=G+(H<<15&4294967295|H>>>17),H=F+(G^(K|~P))+j[1]+2240044497&4294967295,F=K+(H<<21&4294967295|H>>>11),H=P+(K^(F|~G))+j[8]+1873313359&4294967295,P=F+(H<<6&4294967295|H>>>26),H=G+(F^(P|~K))+j[15]+4264355552&4294967295,G=P+(H<<10&4294967295|H>>>22),H=K+(P^(G|~F))+j[6]+2734768916&4294967295,K=G+(H<<15&4294967295|H>>>17),H=F+(G^(K|~P))+j[13]+1309151649&4294967295,F=K+(H<<21&4294967295|H>>>11),H=P+(K^(F|~G))+j[4]+4149444226&4294967295,P=F+(H<<6&4294967295|H>>>26),H=G+(F^(P|~K))+j[11]+3174756917&4294967295,G=P+(H<<10&4294967295|H>>>22),H=K+(P^(G|~F))+j[2]+718787259&4294967295,K=G+(H<<15&4294967295|H>>>17),H=F+(G^(K|~P))+j[9]+3951481745&4294967295,L.g[0]=L.g[0]+P&4294967295,L.g[1]=L.g[1]+(K+(H<<21&4294967295|H>>>11))&4294967295,L.g[2]=L.g[2]+K&4294967295,L.g[3]=L.g[3]+G&4294967295}r.prototype.u=function(L,P){P===void 0&&(P=L.length);for(var F=P-this.blockSize,j=this.B,K=this.h,G=0;G<P;){if(K==0)for(;G<=F;)i(this,L,G),G+=this.blockSize;if(typeof L=="string"){for(;G<P;)if(j[K++]=L.charCodeAt(G++),K==this.blockSize){i(this,j),K=0;break}}else for(;G<P;)if(j[K++]=L[G++],K==this.blockSize){i(this,j),K=0;break}}this.h=K,this.o+=P},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var P=1;P<L.length-8;++P)L[P]=0;var F=8*this.o;for(P=L.length-8;P<L.length;++P)L[P]=F&255,F/=256;for(this.u(L),L=Array(16),P=F=0;4>P;++P)for(var j=0;32>j;j+=8)L[F++]=this.g[P]>>>j&255;return L};function o(L,P){var F=f;return Object.prototype.hasOwnProperty.call(F,L)?F[L]:F[L]=P(L)}function u(L,P){this.h=P;for(var F=[],j=!0,K=L.length-1;0<=K;K--){var G=L[K]|0;j&&G==P||(F[K]=G,j=!1)}this.g=F}var f={};function d(L){return-128<=L&&128>L?o(L,function(P){return new u([P|0],0>P?-1:0)}):new u([L|0],0>L?-1:0)}function g(L){if(isNaN(L)||!isFinite(L))return x;if(0>L)return B(g(-L));for(var P=[],F=1,j=0;L>=F;j++)P[j]=L/F|0,F*=4294967296;return new u(P,0)}function w(L,P){if(L.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(L.charAt(0)=="-")return B(w(L.substring(1),P));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=g(Math.pow(P,8)),j=x,K=0;K<L.length;K+=8){var G=Math.min(8,L.length-K),H=parseInt(L.substring(K,K+G),P);8>G?(G=g(Math.pow(P,G)),j=j.j(G).add(g(H))):(j=j.j(F),j=j.add(g(H)))}return j}var x=d(0),_=d(1),T=d(16777216);t=u.prototype,t.m=function(){if(M(this))return-B(this).m();for(var L=0,P=1,F=0;F<this.g.length;F++){var j=this.i(F);L+=(0<=j?j:4294967296+j)*P,P*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(O(this))return"0";if(M(this))return"-"+B(this).toString(L);for(var P=g(Math.pow(L,6)),F=this,j="";;){var K=z(F,P).g;F=k(F,K.j(P));var G=((0<F.g.length?F.g[0]:F.h)>>>0).toString(L);if(F=K,O(F))return G+j;for(;6>G.length;)G="0"+G;j=G+j}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function O(L){if(L.h!=0)return!1;for(var P=0;P<L.g.length;P++)if(L.g[P]!=0)return!1;return!0}function M(L){return L.h==-1}t.l=function(L){return L=k(this,L),M(L)?-1:O(L)?0:1};function B(L){for(var P=L.g.length,F=[],j=0;j<P;j++)F[j]=~L.g[j];return new u(F,~L.h).add(_)}t.abs=function(){return M(this)?B(this):this},t.add=function(L){for(var P=Math.max(this.g.length,L.g.length),F=[],j=0,K=0;K<=P;K++){var G=j+(this.i(K)&65535)+(L.i(K)&65535),H=(G>>>16)+(this.i(K)>>>16)+(L.i(K)>>>16);j=H>>>16,G&=65535,H&=65535,F[K]=H<<16|G}return new u(F,F[F.length-1]&-2147483648?-1:0)};function k(L,P){return L.add(B(P))}t.j=function(L){if(O(this)||O(L))return x;if(M(this))return M(L)?B(this).j(B(L)):B(B(this).j(L));if(M(L))return B(this.j(B(L)));if(0>this.l(T)&&0>L.l(T))return g(this.m()*L.m());for(var P=this.g.length+L.g.length,F=[],j=0;j<2*P;j++)F[j]=0;for(j=0;j<this.g.length;j++)for(var K=0;K<L.g.length;K++){var G=this.i(j)>>>16,H=this.i(j)&65535,We=L.i(K)>>>16,se=L.i(K)&65535;F[2*j+2*K]+=H*se,N(F,2*j+2*K),F[2*j+2*K+1]+=G*se,N(F,2*j+2*K+1),F[2*j+2*K+1]+=H*We,N(F,2*j+2*K+1),F[2*j+2*K+2]+=G*We,N(F,2*j+2*K+2)}for(j=0;j<P;j++)F[j]=F[2*j+1]<<16|F[2*j];for(j=P;j<2*P;j++)F[j]=0;return new u(F,0)};function N(L,P){for(;(L[P]&65535)!=L[P];)L[P+1]+=L[P]>>>16,L[P]&=65535,P++}function R(L,P){this.g=L,this.h=P}function z(L,P){if(O(P))throw Error("division by zero");if(O(L))return new R(x,x);if(M(L))return P=z(B(L),P),new R(B(P.g),B(P.h));if(M(P))return P=z(L,B(P)),new R(B(P.g),P.h);if(30<L.g.length){if(M(L)||M(P))throw Error("slowDivide_ only works with positive integers.");for(var F=_,j=P;0>=j.l(L);)F=Q(F),j=Q(j);var K=Z(F,1),G=Z(j,1);for(j=Z(j,2),F=Z(F,2);!O(j);){var H=G.add(j);0>=H.l(L)&&(K=K.add(F),G=H),j=Z(j,1),F=Z(F,1)}return P=k(L,K.j(P)),new R(K,P)}for(K=x;0<=L.l(P);){for(F=Math.max(1,Math.floor(L.m()/P.m())),j=Math.ceil(Math.log(F)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),G=g(F),H=G.j(P);M(H)||0<H.l(L);)F-=j,G=g(F),H=G.j(P);O(G)&&(G=_),K=K.add(G),L=k(L,H)}return new R(K,L)}t.A=function(L){return z(this,L).h},t.and=function(L){for(var P=Math.max(this.g.length,L.g.length),F=[],j=0;j<P;j++)F[j]=this.i(j)&L.i(j);return new u(F,this.h&L.h)},t.or=function(L){for(var P=Math.max(this.g.length,L.g.length),F=[],j=0;j<P;j++)F[j]=this.i(j)|L.i(j);return new u(F,this.h|L.h)},t.xor=function(L){for(var P=Math.max(this.g.length,L.g.length),F=[],j=0;j<P;j++)F[j]=this.i(j)^L.i(j);return new u(F,this.h^L.h)};function Q(L){for(var P=L.g.length+1,F=[],j=0;j<P;j++)F[j]=L.i(j)<<1|L.i(j-1)>>>31;return new u(F,L.h)}function Z(L,P){var F=P>>5;P%=32;for(var j=L.g.length-F,K=[],G=0;G<j;G++)K[G]=0<P?L.i(G+F)>>>P|L.i(G+F+1)<<32-P:L.i(G+F);return new u(K,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wI=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=w,Ka=u}).apply(typeof fx<"u"?fx:typeof self<"u"?self:typeof window<"u"?window:{});var Gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vI,Sc,xI,wd,Ng,EI,_I,AI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,A,I){return y==Array.prototype||y==Object.prototype||(y[A]=I.value),y};function n(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gf=="object"&&Gf];for(var A=0;A<y.length;++A){var I=y[A];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(y,A){if(A)e:{var I=r;y=y.split(".");for(var V=0;V<y.length-1;V++){var J=y[V];if(!(J in I))break e;I=I[J]}y=y[y.length-1],V=I[y],A=A(V),A!=V&&A!=null&&e(I,y,{configurable:!0,writable:!0,value:A})}}function o(y,A){y instanceof String&&(y+="");var I=0,V=!1,J={next:function(){if(!V&&I<y.length){var re=I++;return{value:A(re,y[re]),done:!1}}return V=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(y){return y||function(){return o(this,function(A,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function d(y){var A=typeof y;return A=A!="object"?A:y?Array.isArray(y)?"array":A:"null",A=="array"||A=="object"&&typeof y.length=="number"}function g(y){var A=typeof y;return A=="object"&&y!=null||A=="function"}function w(y,A,I){return y.call.apply(y.bind,arguments)}function x(y,A,I){if(!y)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,V),y.apply(A,J)}}return function(){return y.apply(A,arguments)}}function _(y,A,I){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:x,_.apply(null,arguments)}function T(y,A){var I=Array.prototype.slice.call(arguments,1);return function(){var V=I.slice();return V.push.apply(V,arguments),y.apply(this,V)}}function O(y,A){function I(){}I.prototype=A.prototype,y.aa=A.prototype,y.prototype=new I,y.prototype.constructor=y,y.Qb=function(V,J,re){for(var ge=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)ge[wt-2]=arguments[wt];return A.prototype[J].apply(V,ge)}}function M(y){const A=y.length;if(0<A){const I=Array(A);for(let V=0;V<A;V++)I[V]=y[V];return I}return[]}function B(y,A){for(let I=1;I<arguments.length;I++){const V=arguments[I];if(d(V)){const J=y.length||0,re=V.length||0;y.length=J+re;for(let ge=0;ge<re;ge++)y[J+ge]=V[ge]}else y.push(V)}}class k{constructor(A,I){this.i=A,this.j=I,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function N(y){return/^[\s\xa0]*$/.test(y)}function R(){var y=f.navigator;return y&&(y=y.userAgent)?y:""}function z(y){return z[" "](y),y}z[" "]=function(){};var Q=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function Z(y,A,I){for(const V in y)A.call(I,y[V],V,y)}function L(y,A){for(const I in y)A.call(void 0,y[I],I,y)}function P(y){const A={};for(const I in y)A[I]=y[I];return A}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(y,A){let I,V;for(let J=1;J<arguments.length;J++){V=arguments[J];for(I in V)y[I]=V[I];for(let re=0;re<F.length;re++)I=F[re],Object.prototype.hasOwnProperty.call(V,I)&&(y[I]=V[I])}}function K(y){var A=1;y=y.split(":");const I=[];for(;0<A&&y.length;)I.push(y.shift()),A--;return y.length&&I.push(y.join(":")),I}function G(y){f.setTimeout(()=>{throw y},0)}function H(){var y=Ce;let A=null;return y.g&&(A=y.g,y.g=y.g.next,y.g||(y.h=null),A.next=null),A}class We{constructor(){this.h=this.g=null}add(A,I){const V=se.get();V.set(A,I),this.h?this.h.next=V:this.g=V,this.h=V}}var se=new k(()=>new ct,y=>y.reset());class ct{constructor(){this.next=this.g=this.h=null}set(A,I){this.h=A,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,de=!1,Ce=new We,be=()=>{const y=f.Promise.resolve(void 0);ve=()=>{y.then($e)}};var $e=()=>{for(var y;y=H();){try{y.h.call(y.g)}catch(I){G(I)}var A=se;A.j(y),100>A.h&&(A.h++,y.next=A.g,A.g=y)}de=!1};function je(){this.s=this.s,this.C=this.C}je.prototype.s=!1,je.prototype.ma=function(){this.s||(this.s=!0,this.N())},je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function mt(y,A){this.type=y,this.g=this.target=A,this.defaultPrevented=!1}mt.prototype.h=function(){this.defaultPrevented=!0};var St=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var y=!1,A=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const I=()=>{};f.addEventListener("test",I,A),f.removeEventListener("test",I,A)}catch{}return y}();function Pr(y,A){if(mt.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var I=this.type=y.type,V=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=A,A=y.relatedTarget){if(Q){e:{try{z(A.nodeName);var J=!0;break e}catch{}J=!1}J||(A=null)}}else I=="mouseover"?A=y.fromElement:I=="mouseout"&&(A=y.toElement);this.relatedTarget=A,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Se[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&Pr.aa.h.call(this)}}O(Pr,mt);var Se={2:"touch",3:"pen",4:"mouse"};Pr.prototype.h=function(){Pr.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Nr="closure_listenable_"+(1e6*Math.random()|0),hn=0;function sa(y,A,I,V,J){this.listener=y,this.proxy=null,this.src=A,this.type=I,this.capture=!!V,this.ha=J,this.key=++hn,this.da=this.fa=!1}function Pi(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function yn(y){this.src=y,this.g={},this.h=0}yn.prototype.add=function(y,A,I,V,J){var re=y.toString();y=this.g[re],y||(y=this.g[re]=[],this.h++);var ge=et(y,A,V,J);return-1<ge?(A=y[ge],I||(A.fa=!1)):(A=new sa(A,this.src,re,!!V,J),A.fa=I,y.push(A)),A};function Ks(y,A){var I=A.type;if(I in y.g){var V=y.g[I],J=Array.prototype.indexOf.call(V,A,void 0),re;(re=0<=J)&&Array.prototype.splice.call(V,J,1),re&&(Pi(A),y.g[I].length==0&&(delete y.g[I],y.h--))}}function et(y,A,I,V){for(var J=0;J<y.length;++J){var re=y[J];if(!re.da&&re.listener==A&&re.capture==!!I&&re.ha==V)return J}return-1}var Ni="closure_lm_"+(1e6*Math.random()|0),gr={};function qs(y,A,I,V,J){if(Array.isArray(A)){for(var re=0;re<A.length;re++)qs(y,A[re],I,V,J);return null}return I=ml(I),y&&y[Nr]?y.K(A,I,g(V)?!!V.capture:!1,J):wn(y,A,I,!1,V,J)}function wn(y,A,I,V,J,re){if(!A)throw Error("Invalid event type");var ge=g(J)?!!J.capture:!!J,wt=gl(y);if(wt||(y[Ni]=wt=new yn(y)),I=wt.add(A,I,V,ge,re),I.proxy)return I;if(V=xt(),I.proxy=V,V.src=y,V.listener=I,y.addEventListener)St||(J=ge),J===void 0&&(J=!1),y.addEventListener(A.toString(),V,J);else if(y.attachEvent)y.attachEvent(Te(A.toString()),V);else if(y.addListener&&y.removeListener)y.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return I}function xt(){function y(I){return A.call(y.src,y.listener,I)}const A=pl;return y}function Qe(y,A,I,V,J){if(Array.isArray(A))for(var re=0;re<A.length;re++)Qe(y,A[re],I,V,J);else V=g(V)?!!V.capture:!!V,I=ml(I),y&&y[Nr]?(y=y.i,A=String(A).toString(),A in y.g&&(re=y.g[A],I=et(re,I,V,J),-1<I&&(Pi(re[I]),Array.prototype.splice.call(re,I,1),re.length==0&&(delete y.g[A],y.h--)))):y&&(y=gl(y))&&(A=y.g[A.toString()],y=-1,A&&(y=et(A,I,V,J)),(I=-1<y?A[y]:null)&&Xs(I))}function Xs(y){if(typeof y!="number"&&y&&!y.da){var A=y.src;if(A&&A[Nr])Ks(A.i,y);else{var I=y.type,V=y.proxy;A.removeEventListener?A.removeEventListener(I,V,y.capture):A.detachEvent?A.detachEvent(Te(I),V):A.addListener&&A.removeListener&&A.removeListener(V),(I=gl(A))?(Ks(I,y),I.h==0&&(I.src=null,A[Ni]=null)):Pi(y)}}}function Te(y){return y in gr?gr[y]:gr[y]="on"+y}function pl(y,A){if(y.da)y=!0;else{A=new Pr(A,this);var I=y.listener,V=y.ha||y.src;y.fa&&Xs(y),y=I.call(V,A)}return y}function gl(y){return y=y[Ni],y instanceof yn?y:null}var Or="__closure_events_fn_"+(1e9*Math.random()>>>0);function ml(y){return typeof y=="function"?y:(y[Or]||(y[Or]=function(A){return y.handleEvent(A)}),y[Or])}function Et(){je.call(this),this.i=new yn(this),this.M=this,this.F=null}O(Et,je),Et.prototype[Nr]=!0,Et.prototype.removeEventListener=function(y,A,I,V){Qe(this,y,A,I,V)};function bn(y,A){var I,V=y.F;if(V)for(I=[];V;V=V.F)I.push(V);if(y=y.M,V=A.type||A,typeof A=="string")A=new mt(A,y);else if(A instanceof mt)A.target=A.target||y;else{var J=A;A=new mt(V,y),j(A,J)}if(J=!0,I)for(var re=I.length-1;0<=re;re--){var ge=A.g=I[re];J=Dr(ge,V,!0,A)&&J}if(ge=A.g=y,J=Dr(ge,V,!0,A)&&J,J=Dr(ge,V,!1,A)&&J,I)for(re=0;re<I.length;re++)ge=A.g=I[re],J=Dr(ge,V,!1,A)&&J}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var y=this.i,A;for(A in y.g){for(var I=y.g[A],V=0;V<I.length;V++)Pi(I[V]);delete y.g[A],y.h--}}this.F=null},Et.prototype.K=function(y,A,I,V){return this.i.add(String(y),A,!1,I,V)},Et.prototype.L=function(y,A,I,V){return this.i.add(String(y),A,!0,I,V)};function Dr(y,A,I,V){if(A=y.i.g[String(A)],!A)return!0;A=A.concat();for(var J=!0,re=0;re<A.length;++re){var ge=A[re];if(ge&&!ge.da&&ge.capture==I){var wt=ge.listener,Ht=ge.ha||ge.src;ge.fa&&Ks(y.i,ge),J=wt.call(Ht,V)!==!1&&J}}return J&&!V.defaultPrevented}function Rn(y,A,I){if(typeof y=="function")I&&(y=_(y,I));else if(y&&typeof y.handleEvent=="function")y=_(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:f.setTimeout(y,A||0)}function tc(y){y.g=Rn(()=>{y.g=null,y.i&&(y.i=!1,tc(y))},y.l);const A=y.h;y.h=null,y.m.apply(null,A)}class yl extends je{constructor(A,I){super(),this.m=A,this.l=I,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:tc(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oa(y){je.call(this),this.h=y,this.g={}}O(oa,je);var jt=[];function me(y){Z(y.g,function(A,I){this.g.hasOwnProperty(I)&&Xs(A)},y),y.g={}}oa.prototype.N=function(){oa.aa.N.call(this),me(this)},oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zt=f.JSON.stringify,yt=f.JSON.parse,Bt=class{stringify(y){return f.JSON.stringify(y,void 0)}parse(y){return f.JSON.parse(y,void 0)}};function as(){}as.prototype.h=null;function wl(y){return y.h||(y.h=y.i())}function nc(){}var qe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fi(){mt.call(this,"d")}O(fi,mt);function vl(){mt.call(this,"c")}O(vl,mt);var Oi={},mr=null;function $s(){return mr=mr||new Et}Oi.La="serverreachability";function vn(y){mt.call(this,Oi.La,y)}O(vn,mt);function Yr(y){const A=$s();bn(A,new vn(A))}Oi.STAT_EVENT="statevent";function aa(y,A){mt.call(this,Oi.STAT_EVENT,y),this.stat=A}O(aa,mt);function Tt(y){const A=$s();bn(A,new aa(A,y))}Oi.Ma="timingevent";function pf(y,A){mt.call(this,Oi.Ma,y),this.size=A}O(pf,mt);function Mr(y,A){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){y()},A)}function ls(){this.g=!0}ls.prototype.xa=function(){this.g=!1};function Xn(y,A,I,V,J,re){y.info(function(){if(y.g)if(re)for(var ge="",wt=re.split("&"),Ht=0;Ht<wt.length;Ht++){var it=wt[Ht].split("=");if(1<it.length){var Nt=it[0];it=it[1];var on=Nt.split("_");ge=2<=on.length&&on[1]=="type"?ge+(Nt+"="+it+"&"):ge+(Nt+"=redacted&")}}else ge=null;else ge=re;return"XMLHTTP REQ ("+V+") [attempt "+J+"]: "+A+`
`+I+`
`+ge})}function us(y,A,I,V,J,re,ge){y.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+J+"]: "+A+`
`+I+`
`+re+" "+ge})}function xn(y,A,I,V){y.info(function(){return"XMLHTTP TEXT ("+A+"): "+Qs(y,I)+(V?" "+V:"")})}function xe(y,A){y.info(function(){return"TIMEOUT: "+A})}ls.prototype.info=function(){};function Qs(y,A){if(!y.g)return A;if(!A)return null;try{var I=JSON.parse(A);if(I){for(y=0;y<I.length;y++)if(Array.isArray(I[y])){var V=I[y];if(!(2>V.length)){var J=V[1];if(Array.isArray(J)&&!(1>J.length)){var re=J[0];if(re!="noop"&&re!="stop"&&re!="close")for(var ge=1;ge<J.length;ge++)J[ge]=""}}}}return zt(I)}catch{return A}}var Ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ln={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Di;function cs(){}O(cs,as),cs.prototype.g=function(){return new XMLHttpRequest},cs.prototype.i=function(){return{}},Di=new cs;function kr(y,A,I,V){this.j=y,this.i=A,this.l=I,this.R=V||1,this.U=new oa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lr}function Lr(){this.i=null,this.g="",this.h=!1}var gf={},rc={};function yr(y,A,I){y.L=1,y.v=Wt(Ye(A)),y.m=I,y.P=!0,Pn(y,null)}function Pn(y,A){y.F=Date.now(),Fr(y),y.A=Ye(y.v);var I=y.A,V=y.R;Array.isArray(V)||(V=[String(V)]),sn(I.i,"t",V),y.C=0,I=y.j.J,y.h=new Lr,y.g=Af(y.j,I?A:null,!y.m),0<y.O&&(y.M=new yl(_(y.Y,y,y.g),y.O)),A=y.U,I=y.g,V=y.ca;var J="readystatechange";Array.isArray(J)||(J&&(jt[0]=J.toString()),J=jt);for(var re=0;re<J.length;re++){var ge=qs(I,J[re],V||A.handleEvent,!1,A.h||A);if(!ge)break;A.g[ge.key]=ge}A=y.H?P(y.H):{},y.m?(y.u||(y.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,A)):(y.u="GET",y.g.ea(y.A,y.u,null,A)),Yr(),Xn(y.i,y.u,y.A,y.l,y.R,y.m)}kr.prototype.ca=function(y){y=y.target;const A=this.M;A&&gi(y)==3?A.j():this.Y(y)},kr.prototype.Y=function(y){try{if(y==this.g)e:{const on=gi(this.g);var A=this.g.Ba();const An=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||xf(this.g)))){this.J||on!=4||A==7||(A==8||0>=An?Yr(3):Yr(2)),oe(this);var I=this.g.Z();this.X=I;t:if(At(this)){var V=xf(this.g);y="";var J=V.length,re=gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ht(this),la(this);var ge="";break t}this.h.i=new f.TextDecoder}for(A=0;A<J;A++)this.h.h=!0,y+=this.h.i.decode(V[A],{stream:!(re&&A==J-1)});V.length=0,this.h.g+=y,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=I==200,us(this.i,this.u,this.A,this.l,this.R,on,I),this.o){if(this.T&&!this.K){t:{if(this.g){var wt,Ht=this.g;if((wt=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(wt)){var it=wt;break t}}it=null}if(I=it)xn(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,I);else{this.o=!1,this.s=3,Tt(12),ht(this),la(this);break e}}if(this.P){I=!0;let vr;for(;!this.J&&this.C<ge.length;)if(vr=mf(this,ge),vr==rc){on==4&&(this.s=4,Tt(14),I=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==gf){this.s=4,Tt(15),xn(this.i,this.l,ge,"[Invalid Chunk]"),I=!1;break}else xn(this.i,this.l,vr,null),Mi(this,vr);if(At(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||ge.length!=0||this.h.h||(this.s=1,Tt(16),I=!1),this.o=this.o&&I,!I)xn(this.i,this.l,ge,"[Invalid Chunked Response]"),ht(this),la(this);else if(0<ge.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),va(Nt),Nt.M=!0,Tt(11))}}else xn(this.i,this.l,ge,null),Mi(this,ge);on==4&&ht(this),this.o&&!this.J&&(on==4?Pt(this.j,this):(this.o=!1,Fr(this)))}else ft(this.g),I==400&&0<ge.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),ht(this),la(this)}}}catch{}finally{}};function At(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function mf(y,A){var I=y.C,V=A.indexOf(`
`,I);return V==-1?rc:(I=Number(A.substring(I,V)),isNaN(I)?gf:(V+=1,V+I>A.length?rc:(A=A.slice(V,V+I),y.C=V+I,A)))}kr.prototype.cancel=function(){this.J=!0,ht(this)};function Fr(y){y.S=Date.now()+y.I,xl(y,y.I)}function xl(y,A){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Mr(_(y.ba,y),A)}function oe(y){y.B&&(f.clearTimeout(y.B),y.B=null)}kr.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(xe(this.i,this.A),this.L!=2&&(Yr(),Tt(17)),ht(this),this.s=2,la(this)):xl(this,this.S-y)};function la(y){y.j.G==0||y.J||Pt(y.j,y)}function ht(y){oe(y);var A=y.M;A&&typeof A.ma=="function"&&A.ma(),y.M=null,me(y.U),y.g&&(A=y.g,y.g=null,A.abort(),A.ma())}function Mi(y,A){try{var I=y.j;if(I.G!=0&&(I.g==y||ua(I.h,y))){if(!y.K&&ua(I.h,y)&&I.G==3){try{var V=I.Da.g.parse(A)}catch{V=null}if(Array.isArray(V)&&V.length==3){var J=V;if(J[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<y.F)no(I),Al(I);else break e;ac(I),Tt(18)}}else I.za=J[1],0<I.za-I.T&&37500>J[2]&&I.F&&I.v==0&&!I.C&&(I.C=Mr(_(I.Za,I),6e3));if(1>=Ke(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else or(I,11)}else if((y.K||I.g==y)&&no(I),!N(A))for(J=I.Da.g.parse(A),A=0;A<J.length;A++){let it=J[A];if(I.T=it[0],it=it[1],I.G==2)if(it[0]=="c"){I.K=it[1],I.ia=it[2];const Nt=it[3];Nt!=null&&(I.la=Nt,I.j.info("VER="+I.la));const on=it[4];on!=null&&(I.Aa=on,I.j.info("SVER="+I.Aa));const An=it[5];An!=null&&typeof An=="number"&&0<An&&(V=1.5*An,I.L=V,I.j.info("backChannelRequestTimeoutMs_="+V)),V=I;const vr=y.g;if(vr){const ar=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ar){var re=V.h;re.g||ar.indexOf("spdy")==-1&&ar.indexOf("quic")==-1&&ar.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(ca(re,re.h),re.h=null))}if(V.D){const lc=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;lc&&(V.ya=lc,ye(V.I,V.D,lc))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-y.F,I.j.info("Handshake RTT: "+I.R+"ms")),V=I;var ge=y;if(V.qa=Ne(V,V.J?V.ia:null,V.W),ge.K){El(V.h,ge);var wt=ge,Ht=V.L;Ht&&(wt.I=Ht),wt.B&&(oe(wt),Fr(wt)),V.g=ge}else _f(V);0<I.i.length&&Ve(I)}else it[0]!="stop"&&it[0]!="close"||or(I,7);else I.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?or(I,7):Jr(I):it[0]!="noop"&&I.l&&I.l.ta(it),I.v=0)}}Yr(4)}catch{}}var x1=class{constructor(y,A){this.g=y,this.map=A}};function ot(y){this.l=y||10,f.PerformanceNavigationTiming?(y=f.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rt(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Ke(y){return y.h?1:y.g?y.g.size:0}function ua(y,A){return y.h?y.h==A:y.g?y.g.has(A):!1}function ca(y,A){y.g?y.g.add(A):y.h=A}function El(y,A){y.h&&y.h==A?y.h=null:y.g&&y.g.has(A)&&y.g.delete(A)}ot.prototype.cancel=function(){if(this.i=Yt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Yt(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let A=y.i;for(const I of y.g.values())A=A.concat(I.D);return A}return M(y.i)}function ki(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(d(y)){for(var A=[],I=y.length,V=0;V<I;V++)A.push(y[V]);return A}A=[],I=0;for(V in y)A[I++]=y[V];return A}function E1(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(d(y)||typeof y=="string"){var A=[];y=y.length;for(var I=0;I<y;I++)A.push(I);return A}A=[],I=0;for(const V in y)A[I++]=V;return A}}}function Vt(y,A){if(y.forEach&&typeof y.forEach=="function")y.forEach(A,void 0);else if(d(y)||typeof y=="string")Array.prototype.forEach.call(y,A,void 0);else for(var I=E1(y),V=ki(y),J=V.length,re=0;re<J;re++)A.call(void 0,V[re],I&&I[re],y)}var di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _1(y,A){if(y){y=y.split("&");for(var I=0;I<y.length;I++){var V=y[I].indexOf("="),J=null;if(0<=V){var re=y[I].substring(0,V);J=y[I].substring(V+1)}else re=y[I];A(re,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function wr(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof wr){this.h=y.h,rn(this,y.j),this.o=y.o,this.g=y.g,ee(this,y.s),this.l=y.l;var A=y.i,I=new hs;I.i=A.i,A.g&&(I.g=new Map(A.g),I.h=A.h),U(this,I),this.m=y.m}else y&&(A=String(y).match(di))?(this.h=!1,rn(this,A[1]||"",!0),this.o=Nn(A[2]||""),this.g=Nn(A[3]||"",!0),ee(this,A[4]),this.l=Nn(A[5]||"",!0),U(this,A[6]||"",!0),this.m=Nn(A[7]||"")):(this.h=!1,this.i=new hs(null,this.h))}wr.prototype.toString=function(){var y=[],A=this.j;A&&y.push(ha(A,sr,!0),":");var I=this.g;return(I||A=="file")&&(y.push("//"),(A=this.o)&&y.push(ha(A,sr,!0),"@"),y.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&y.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&y.push("/"),y.push(ha(I,I.charAt(0)=="/"?bt:Pe,!0))),(I=this.i.toString())&&y.push("?",I),(I=this.m)&&y.push("#",ha(I,A1)),y.join("")};function Ye(y){return new wr(y)}function rn(y,A,I){y.j=I?Nn(A,!0):A,y.j&&(y.j=y.j.replace(/:$/,""))}function ee(y,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);y.s=A}else y.s=null}function U(y,A,I){A instanceof hs?(y.i=A,Li(y.i,y.h)):(I||(A=ha(A,yf)),y.i=new hs(A,y.h))}function ye(y,A,I){y.i.set(A,I)}function Wt(y){return ye(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Nn(y,A){return y?A?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function ha(y,A,I){return typeof y=="string"?(y=encodeURI(y).replace(A,ic),I&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function ic(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var sr=/[#\/\?@]/g,Pe=/[#\?:]/g,bt=/[#\?]/g,yf=/[#\?@]/g,A1=/#/g;function hs(y,A){this.h=this.g=null,this.i=y||null,this.j=!!A}function Br(y){y.g||(y.g=new Map,y.h=0,y.i&&_1(y.i,function(A,I){y.add(decodeURIComponent(A.replace(/\+/g," ")),I)}))}t=hs.prototype,t.add=function(y,A){Br(this),this.i=null,y=Zr(this,y);var I=this.g.get(y);return I||this.g.set(y,I=[]),I.push(A),this.h+=1,this};function _l(y,A){Br(y),A=Zr(y,A),y.g.has(A)&&(y.i=null,y.h-=y.g.get(A).length,y.g.delete(A))}function wf(y,A){return Br(y),A=Zr(y,A),y.g.has(A)}t.forEach=function(y,A){Br(this),this.g.forEach(function(I,V){I.forEach(function(J){y.call(A,J,V,this)},this)},this)},t.na=function(){Br(this);const y=Array.from(this.g.values()),A=Array.from(this.g.keys()),I=[];for(let V=0;V<A.length;V++){const J=y[V];for(let re=0;re<J.length;re++)I.push(A[V])}return I},t.V=function(y){Br(this);let A=[];if(typeof y=="string")wf(this,y)&&(A=A.concat(this.g.get(Zr(this,y))));else{y=Array.from(this.g.values());for(let I=0;I<y.length;I++)A=A.concat(y[I])}return A},t.set=function(y,A){return Br(this),this.i=null,y=Zr(this,y),wf(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[A]),this.h+=1,this},t.get=function(y,A){return y?(y=this.V(y),0<y.length?String(y[0]):A):A};function sn(y,A,I){_l(y,A),0<I.length&&(y.i=null,y.g.set(Zr(y,A),M(I)),y.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],A=Array.from(this.g.keys());for(var I=0;I<A.length;I++){var V=A[I];const re=encodeURIComponent(String(V)),ge=this.V(V);for(V=0;V<ge.length;V++){var J=re;ge[V]!==""&&(J+="="+encodeURIComponent(String(ge[V]))),y.push(J)}}return this.i=y.join("&")};function Zr(y,A){return A=String(A),y.j&&(A=A.toLowerCase()),A}function Li(y,A){A&&!y.j&&(Br(y),y.i=null,y.g.forEach(function(I,V){var J=V.toLowerCase();V!=J&&(_l(this,V),sn(this,J,I))},y)),y.j=A}function De(y,A){const I=new ls;if(f.Image){const V=new Image;V.onload=T(ke,I,"TestLoadImage: loaded",!0,A,V),V.onerror=T(ke,I,"TestLoadImage: error",!1,A,V),V.onabort=T(ke,I,"TestLoadImage: abort",!1,A,V),V.ontimeout=T(ke,I,"TestLoadImage: timeout",!1,A,V),f.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=y}else A(!1)}function C1(y,A){const I=new ls,V=new AbortController,J=setTimeout(()=>{V.abort(),ke(I,"TestPingServer: timeout",!1,A)},1e4);fetch(y,{signal:V.signal}).then(re=>{clearTimeout(J),re.ok?ke(I,"TestPingServer: ok",!0,A):ke(I,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(J),ke(I,"TestPingServer: error",!1,A)})}function ke(y,A,I,V,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),V(I)}catch{}}function En(){this.g=new Bt}function T1(y,A,I){const V=I||"";try{Vt(y,function(J,re){let ge=J;g(J)&&(ge=zt(J)),A.push(V+re+"="+encodeURIComponent(ge))})}catch(J){throw A.push(V+"type="+encodeURIComponent("_badmap")),J}}function Zs(y){this.l=y.Ub||null,this.j=y.eb||!1}O(Zs,as),Zs.prototype.g=function(){return new fa(this.l,this.j)},Zs.prototype.i=function(y){return function(){return y}}({});function fa(y,A){Et.call(this),this.D=y,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(fa,Et),t=fa.prototype,t.open=function(y,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=A,this.readyState=1,pi(this)},t.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(A.body=y),(this.D||f).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,da(this)),this.readyState=0},t.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fi(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fi(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}t.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var A=y.value?y.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!y.done}))&&(this.response=this.responseText+=A)}y.done?da(this):pi(this),this.readyState==3&&Fi(this)}},t.Ra=function(y){this.g&&(this.response=this.responseText=y,da(this))},t.Qa=function(y){this.g&&(this.response=y,da(this))},t.ga=function(){this.g&&da(this)};function da(y){y.readyState=4,y.l=null,y.j=null,y.v=null,pi(y)}t.setRequestHeader=function(y,A){this.u.append(y,A)},t.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],A=this.h.entries();for(var I=A.next();!I.done;)I=I.value,y.push(I[0]+": "+I[1]),I=A.next();return y.join(`\r
`)};function pi(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function Js(y){let A="";return Z(y,function(I,V){A+=V,A+=":",A+=I,A+=`\r
`}),A}function fs(y,A,I){e:{for(V in I){var V=!1;break e}V=!0}V||(I=Js(I),typeof y=="string"?I!=null&&encodeURIComponent(String(I)):ye(y,A,I))}function Rt(y){Et.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Rt,Et);var pa=/^https?$/i,ga=["POST","PUT"];t=Rt.prototype,t.Ha=function(y){this.J=y},t.ea=function(y,A,I,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);A=A?A.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Di.g(),this.v=this.o?wl(this.o):wl(Di),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(A,String(y),!0),this.B=!1}catch(re){Fn(this,re);return}if(y=I||"",I=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var J in V)I.set(J,V[J]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const re of V.keys())I.set(re,V.get(re));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(I.keys()).find(re=>re.toLowerCase()=="content-type"),J=f.FormData&&y instanceof f.FormData,!(0<=Array.prototype.indexOf.call(ga,A,void 0))||V||J||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ge]of I)this.g.setRequestHeader(re,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vf(this),this.u=!0,this.g.send(y),this.u=!1}catch(re){Fn(this,re)}};function Fn(y,A){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=A,y.m=5,sc(y),ma(y)}function sc(y){y.A||(y.A=!0,bn(y,"complete"),bn(y,"error"))}t.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,bn(this,"complete"),bn(this,"abort"),ma(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ma(this,!0)),Rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?oc(this):this.bb())},t.bb=function(){oc(this)};function oc(y){if(y.h&&typeof u<"u"&&(!y.v[1]||gi(y)!=4||y.Z()!=2)){if(y.u&&gi(y)==4)Rn(y.Ea,0,y);else if(bn(y,"readystatechange"),gi(y)==4){y.h=!1;try{const ge=y.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var I;if(!(I=A)){var V;if(V=ge===0){var J=String(y.D).match(di)[1]||null;!J&&f.self&&f.self.location&&(J=f.self.location.protocol.slice(0,-1)),V=!pa.test(J?J.toLowerCase():"")}I=V}if(I)bn(y,"complete"),bn(y,"success");else{y.m=6;try{var re=2<gi(y)?y.g.statusText:""}catch{re=""}y.l=re+" ["+y.Z()+"]",sc(y)}}finally{ma(y)}}}}function ma(y,A){if(y.g){vf(y);const I=y.g,V=y.v[0]?()=>{}:null;y.g=null,y.v=null,A||bn(y,"ready");try{I.onreadystatechange=V}catch{}}}function vf(y){y.I&&(f.clearTimeout(y.I),y.I=null)}t.isActive=function(){return!!this.g};function gi(y){return y.g?y.g.readyState:0}t.Z=function(){try{return 2<gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(y){if(this.g){var A=this.g.responseText;return y&&A.indexOf(y)==0&&(A=A.substring(y.length)),yt(A)}};function xf(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function ft(y){const A={};y=(y.g&&2<=gi(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<y.length;V++){if(N(y[V]))continue;var I=K(y[V]);const J=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const re=A[J]||[];A[J]=re,re.push(I)}L(A,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eo(y,A,I){return I&&I.internalChannelParams&&I.internalChannelParams[y]||A}function ya(y){this.Aa=0,this.i=[],this.j=new ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eo("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eo("baseRetryDelayMs",5e3,y),this.cb=eo("retryDelaySeedMs",1e4,y),this.Wa=eo("forwardChannelMaxRetries",2,y),this.wa=eo("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new ot(y&&y.concurrentRequestLimit),this.Da=new En,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ya.prototype,t.la=8,t.G=1,t.connect=function(y,A,I,V){Tt(0),this.W=y,this.H=A||{},I&&V!==void 0&&(this.H.OSID=I,this.H.OAID=V),this.F=this.X,this.I=Ne(this,null,this.W),Ve(this)};function Jr(y){if(ne(y),y.G==3){var A=y.U++,I=Ye(y.I);if(ye(I,"SID",y.K),ye(I,"RID",A),ye(I,"TYPE","terminate"),to(y,I),A=new kr(y,y.j,A),A.L=2,A.v=Wt(Ye(I)),I=!1,f.navigator&&f.navigator.sendBeacon)try{I=f.navigator.sendBeacon(A.v.toString(),"")}catch{}!I&&f.Image&&(new Image().src=A.v,I=!0),I||(A.g=Af(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Fr(A)}dt(y)}function Al(y){y.g&&(va(y),y.g.cancel(),y.g=null)}function ne(y){Al(y),y.u&&(f.clearTimeout(y.u),y.u=null),no(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&f.clearTimeout(y.s),y.s=null)}function Ve(y){if(!rt(y.h)&&!y.s){y.s=!0;var A=y.Ga;ve||be(),de||(ve(),de=!0),Ce.add(A,y),y.B=0}}function _n(y,A){return Ke(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=A.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Mr(_(y.Ga,y,A),xa(y,y.B)),y.B++,!0)}t.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const J=new kr(this,this.j,y);let re=this.o;if(this.S&&(re?(re=P(re),j(re,this.S)):re=this.S),this.m!==null||this.O||(J.H=re,re=null),this.P)e:{for(var A=0,I=0;I<this.i.length;I++){t:{var V=this.i[I];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(A+=V,4096<A){A=I;break e}if(A===4096||I===this.i.length-1){A=I+1;break e}}A=1e3}else A=1e3;A=Ef(this,J,A),I=Ye(this.I),ye(I,"RID",y),ye(I,"CVER",22),this.D&&ye(I,"X-HTTP-Session-Id",this.D),to(this,I),re&&(this.O?A="headers="+encodeURIComponent(String(Js(re)))+"&"+A:this.m&&fs(I,this.m,re)),ca(this.h,J),this.Ua&&ye(I,"TYPE","init"),this.P?(ye(I,"$req",A),ye(I,"SID","null"),J.T=!0,yr(J,I,null)):yr(J,I,A),this.G=2}}else this.G==3&&(y?wa(this,y):this.i.length==0||rt(this.h)||wa(this))};function wa(y,A){var I;A?I=A.l:I=y.U++;const V=Ye(y.I);ye(V,"SID",y.K),ye(V,"RID",I),ye(V,"AID",y.T),to(y,V),y.m&&y.o&&fs(V,y.m,y.o),I=new kr(y,y.j,I,y.B+1),y.m===null&&(I.H=y.o),A&&(y.i=A.D.concat(y.i)),A=Ef(y,I,1e3),I.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),ca(y.h,I),yr(I,V,A)}function to(y,A){y.H&&Z(y.H,function(I,V){ye(A,V,I)}),y.l&&Vt({},function(I,V){ye(A,V,I)})}function Ef(y,A,I){I=Math.min(y.i.length,I);var V=y.l?_(y.l.Na,y.l,y):null;e:{var J=y.i;let re=-1;for(;;){const ge=["count="+I];re==-1?0<I?(re=J[0].g,ge.push("ofs="+re)):re=0:ge.push("ofs="+re);let wt=!0;for(let Ht=0;Ht<I;Ht++){let it=J[Ht].g;const Nt=J[Ht].map;if(it-=re,0>it)re=Math.max(0,J[Ht].g-100),wt=!1;else try{T1(Nt,ge,"req"+it+"_")}catch{V&&V(Nt)}}if(wt){V=ge.join("&");break e}}}return y=y.i.splice(0,I),A.D=y,V}function _f(y){if(!y.g&&!y.u){y.Y=1;var A=y.Fa;ve||be(),de||(ve(),de=!0),Ce.add(A,y),y.v=0}}function ac(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Mr(_(y.Fa,y),xa(y,y.v)),y.v++,!0)}t.Fa=function(){if(this.u=null,Zt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Mr(_(this.ab,this),y)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),Al(this),Zt(this))};function va(y){y.A!=null&&(f.clearTimeout(y.A),y.A=null)}function Zt(y){y.g=new kr(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var A=Ye(y.qa);ye(A,"RID","rpc"),ye(A,"SID",y.K),ye(A,"AID",y.T),ye(A,"CI",y.F?"0":"1"),!y.F&&y.ja&&ye(A,"TO",y.ja),ye(A,"TYPE","xmlhttp"),to(y,A),y.m&&y.o&&fs(A,y.m,y.o),y.L&&(y.g.I=y.L);var I=y.g;y=y.ia,I.L=1,I.v=Wt(Ye(A)),I.m=null,I.P=!0,Pn(I,y)}t.Za=function(){this.C!=null&&(this.C=null,Al(this),ac(this),Tt(19))};function no(y){y.C!=null&&(f.clearTimeout(y.C),y.C=null)}function Pt(y,A){var I=null;if(y.g==A){no(y),va(y),y.g=null;var V=2}else if(ua(y.h,A))I=A.D,El(y.h,A),V=1;else return;if(y.G!=0){if(A.o)if(V==1){I=A.m?A.m.length:0,A=Date.now()-A.F;var J=y.B;V=$s(),bn(V,new pf(V,I)),Ve(y)}else _f(y);else if(J=A.s,J==3||J==0&&0<A.X||!(V==1&&_n(y,A)||V==2&&ac(y)))switch(I&&0<I.length&&(A=y.h,A.i=A.i.concat(I)),J){case 1:or(y,5);break;case 4:or(y,10);break;case 3:or(y,6);break;default:or(y,2)}}}function xa(y,A){let I=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(I*=2),I*A}function or(y,A){if(y.j.info("Error code "+A),A==2){var I=_(y.fb,y),V=y.Xa;const J=!V;V=new wr(V||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||rn(V,"https"),Wt(V),J?De(V.toString(),I):C1(V.toString(),I)}else Tt(2);y.G=0,y.l&&y.l.sa(A),dt(y),ne(y)}t.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function dt(y){if(y.G=0,y.ka=[],y.l){const A=Yt(y.h);(A.length!=0||y.i.length!=0)&&(B(y.ka,A),B(y.ka,y.i),y.h.i.length=0,M(y.i),y.i.length=0),y.l.ra()}}function Ne(y,A,I){var V=I instanceof wr?Ye(I):new wr(I);if(V.g!="")A&&(V.g=A+"."+V.g),ee(V,V.s);else{var J=f.location;V=J.protocol,A=A?A+"."+J.hostname:J.hostname,J=+J.port;var re=new wr(null);V&&rn(re,V),A&&(re.g=A),J&&ee(re,J),I&&(re.l=I),V=re}return I=y.D,A=y.ya,I&&A&&ye(V,I,A),ye(V,"VER",y.la),to(y,V),V}function Af(y,A,I){if(A&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=y.Ca&&!y.pa?new Rt(new Zs({eb:I})):new Rt(y.pa),A.Ha(y.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _t(){}t=_t.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ei(){}ei.prototype.g=function(y,A){return new fn(y,A)};function fn(y,A){Et.call(this),this.g=new ya(A),this.l=y,this.h=A&&A.messageUrlParams||null,y=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(y?y["X-WebChannel-Content-Type"]=A.messageContentType:y={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(y?y["X-WebChannel-Client-Profile"]=A.va:y={"X-WebChannel-Client-Profile":A.va}),this.g.S=y,(y=A&&A.Sb)&&!N(y)&&(this.g.m=y),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!N(A)&&(this.g.D=A,y=this.h,y!==null&&A in y&&(y=this.h,A in y&&delete y[A])),this.j=new Bi(this)}O(fn,Et),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Jr(this.g)},fn.prototype.o=function(y){var A=this.g;if(typeof y=="string"){var I={};I.__data__=y,y=I}else this.u&&(I={},I.__data__=zt(y),y=I);A.i.push(new x1(A.Ya++,y)),A.G==3&&Ve(A)},fn.prototype.N=function(){this.g.l=null,delete this.j,Jr(this.g),delete this.g,fn.aa.N.call(this)};function Cf(y){fi.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var A=y.__sm__;if(A){e:{for(const I in A){y=I;break e}y=void 0}(this.i=y)&&(y=this.i,A=A!==null&&y in A?A[y]:void 0),this.data=A}else this.data=y}O(Cf,fi);function Vr(){vl.call(this),this.status=1}O(Vr,vl);function Bi(y){this.g=y}O(Bi,_t),Bi.prototype.ua=function(){bn(this.g,"a")},Bi.prototype.ta=function(y){bn(this.g,new Cf(y))},Bi.prototype.sa=function(y){bn(this.g,new Vr)},Bi.prototype.ra=function(){bn(this.g,"b")},ei.prototype.createWebChannel=ei.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,AI=function(){return new ei},_I=function(){return $s()},EI=Oi,Ng={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ys.NO_ERROR=0,Ys.TIMEOUT=8,Ys.HTTP_ERROR=6,wd=Ys,Ln.COMPLETE="complete",xI=Ln,nc.EventType=qe,qe.OPEN="a",qe.CLOSE="b",qe.ERROR="c",qe.MESSAGE="d",Et.prototype.listen=Et.prototype.K,Sc=nc,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,vI=Rt}).apply(typeof Gf<"u"?Gf:typeof self<"u"?self:typeof window<"u"?window:{});const dx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Ry("@firebase/firestore");function vc(){return tl.logLevel}function Ie(t,...e){if(tl.logLevel<=nt.DEBUG){const n=e.map(zy);tl.debug(`Firestore (${Hu}): ${t}`,...n)}}function Us(t,...e){if(tl.logLevel<=nt.ERROR){const n=e.map(zy);tl.error(`Firestore (${Hu}): ${t}`,...n)}}function Iu(t,...e){if(tl.logLevel<=nt.WARN){const n=e.map(zy);tl.warn(`Firestore (${Hu}): ${t}`,...n)}}function zy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t="Unexpected state"){const e=`FIRESTORE (${Hu}) INTERNAL ASSERTION FAILED: `+t;throw Us(e),new Error(e)}function gt(t,e){t||Fe()}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jn.UNAUTHENTICATED))}shutdown(){}}class ID{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SD{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gt(this.o===void 0);let r=this.i;const i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zi,e.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},f=d=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>f(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zi)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string"),new CI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string"),new Jn(e)}}class bD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new bD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ND{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){gt(this.o===void 0);const r=o=>{o.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,Ie("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(gt(typeof n.token=="string"),this.R=n.token,new PD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=OD(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function ut(t,e){return t<e?-1:t>e?1:0}function Su(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Xt(0,0))}static max(){return new Ue(new Xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r){n===void 0?n=0:n>e.length&&Fe(),r===void 0?r=e.length-n:r>e.length-n&&Fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),u=n.get(i);if(o<u)return-1;if(o>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class kt extends xh{construct(e,n,r){return new kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new kt(n)}static emptyPath(){return new kt([])}}const DD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends xh{construct(e,n,r){return new zn(e,n,r)}static isValidIdentifier(e){return DD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new _e(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new _e(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new _e(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else f==="`"?(u=!u,i++):f!=="."||u?(r+=f,i++):(o(),i++)}if(o(),u)throw new _e(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(n)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(kt.fromString(e))}static fromName(e){return new Oe(kt.fromString(e).popFirst(5))}static empty(){return new Oe(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new kt(e.slice()))}}function MD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(r===1e9?new Xt(n+1,0):new Xt(n,r));return new $o(i,Oe.empty(),e)}function kD(t){return new $o(t.readTime,t.key,-1)}class $o{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $o(Ue.min(),Oe.empty(),-1)}static max(){return new $o(Ue.max(),Oe.empty(),-1)}}function LD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Oe.comparator(t.documentKey,e.documentKey),n!==0?n:ut(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jh(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==FD)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.reject(n)}static resolve(e){return new ce((n,r)=>{n(e)})}static reject(e){return new ce((n,r)=>{r(e)})}static waitFor(e){return new ce((n,r)=>{let i=0,o=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++o,u&&o===i&&n()},d=>r(d))}),u=!0,o===i&&n()})}static or(e){let n=ce.resolve(!1);for(const r of e)n=n.next(i=>i?ce.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new ce((r,i)=>{const o=e.length,u=new Array(o);let f=0;for(let d=0;d<o;d++){const g=d;n(e[g]).next(w=>{u[g]=w,++f,f===o&&r(u)},w=>i(w))}})}static doWhile(e,n){return new ce((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function VD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ef(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wy.oe=-1;function J0(t){return t==null}function o0(t){return t===0&&1/t==-1/0}function UD(t){return typeof t=="number"&&Number.isInteger(t)&&!o0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jD(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function II(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.comparator=e,this.root=n||jn.EMPTY}insert(e,n){return new Qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kf(this.root,e,this.comparator,!0)}}class Kf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??jn.RED,this.left=i??jn.EMPTY,this.right=o??jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new jn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fe();const e=this.left.check();if(e!==this.right.check())throw Fe();return e+(this.isRed()?0:1)}}jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe()}get value(){throw Fe()}get color(){throw Fe()}get left(){throw Fe()}get right(){throw Fe()}copy(e,n,r,i,o){return this}insert(e,n,r){return new jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gx(this.data.getIterator())}getIteratorFrom(e){return new gx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Hn(this.comparator);return n.data=e,n}}class gx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Ci([])}unionWith(e){let n=new Hn(zn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ci(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Su(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new SI("Invalid base64 string: "+o):o}}(e);return new qn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let u=0;u<i.length;++u)o+=String.fromCharCode(i[u]);return o}(e);return new qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const zD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(t){if(gt(!!t),typeof t=="string"){let e=0;const n=zD.exec(t);if(gt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:un(t.seconds),nanos:un(t.nanos)}}function un(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function nl(t){return typeof t=="string"?qn.fromBase64String(t):qn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gy(t){const e=t.mapValue.fields.__previous_value__;return Hy(e)?Gy(e):e}function Eh(t){const e=Qo(t.mapValue.fields.__local_write_time__.timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n,r,i,o,u,f,d,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=g}}class _h{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _h("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _h&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf={mapValue:{}};function rl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hy(t)?4:GD(t)?9007199254740991:HD(t)?10:11:Fe()}function ss(t,e){if(t===e)return!0;const n=rl(t);if(n!==rl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Eh(t).isEqual(Eh(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const u=Qo(i.timestampValue),f=Qo(o.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return nl(i.bytesValue).isEqual(nl(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return un(i.geoPointValue.latitude)===un(o.geoPointValue.latitude)&&un(i.geoPointValue.longitude)===un(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return un(i.integerValue)===un(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const u=un(i.doubleValue),f=un(o.doubleValue);return u===f?o0(u)===o0(f):isNaN(u)&&isNaN(f)}return!1}(t,e);case 9:return Su(t.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return function(i,o){const u=i.mapValue.fields||{},f=o.mapValue.fields||{};if(px(u)!==px(f))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(f[d]===void 0||!ss(u[d],f[d])))return!1;return!0}(t,e);default:return Fe()}}function Ah(t,e){return(t.values||[]).find(n=>ss(n,e))!==void 0}function bu(t,e){if(t===e)return 0;const n=rl(t),r=rl(e);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(t.booleanValue,e.booleanValue);case 2:return function(o,u){const f=un(o.integerValue||o.doubleValue),d=un(u.integerValue||u.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1}(t,e);case 3:return mx(t.timestampValue,e.timestampValue);case 4:return mx(Eh(t),Eh(e));case 5:return ut(t.stringValue,e.stringValue);case 6:return function(o,u){const f=nl(o),d=nl(u);return f.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,u){const f=o.split("/"),d=u.split("/");for(let g=0;g<f.length&&g<d.length;g++){const w=ut(f[g],d[g]);if(w!==0)return w}return ut(f.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,u){const f=ut(un(o.latitude),un(u.latitude));return f!==0?f:ut(un(o.longitude),un(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yx(t.arrayValue,e.arrayValue);case 10:return function(o,u){var f,d,g,w;const x=o.fields||{},_=u.fields||{},T=(f=x.value)===null||f===void 0?void 0:f.arrayValue,O=(d=_.value)===null||d===void 0?void 0:d.arrayValue,M=ut(((g=T==null?void 0:T.values)===null||g===void 0?void 0:g.length)||0,((w=O==null?void 0:O.values)===null||w===void 0?void 0:w.length)||0);return M!==0?M:yx(T,O)}(t.mapValue,e.mapValue);case 11:return function(o,u){if(o===qf.mapValue&&u===qf.mapValue)return 0;if(o===qf.mapValue)return 1;if(u===qf.mapValue)return-1;const f=o.fields||{},d=Object.keys(f),g=u.fields||{},w=Object.keys(g);d.sort(),w.sort();for(let x=0;x<d.length&&x<w.length;++x){const _=ut(d[x],w[x]);if(_!==0)return _;const T=bu(f[d[x]],g[w[x]]);if(T!==0)return T}return ut(d.length,w.length)}(t.mapValue,e.mapValue);default:throw Fe()}}function mx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ut(t,e);const n=Qo(t),r=Qo(e),i=ut(n.seconds,r.seconds);return i!==0?i:ut(n.nanos,r.nanos)}function yx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=bu(n[i],r[i]);if(o)return o}return ut(n.length,r.length)}function Ru(t){return Og(t)}function Og(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return nl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Og(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const u of r)o?o=!1:i+=",",i+=`${u}:${Og(n.fields[u])}`;return i+"}"}(t.mapValue):Fe()}function wx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dg(t){return!!t&&"integerValue"in t}function Ky(t){return!!t&&"arrayValue"in t}function vx(t){return!!t&&"nullValue"in t}function xx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vd(t){return!!t&&"mapValue"in t}function HD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Gc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Gc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gc(n)}setAll(e){let n=zn.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!n.isImmediateParentOf(f)){const d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=f.popLast()}u?r[f.lastSegment()]=Gc(u):i.push(f.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());vd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gu(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new ai(Gc(this.value))}}function bI(t){const e=[];return Gu(t.fields,(n,r)=>{const i=new zn([n]);if(vd(r)){const o=bI(r.mapValue).fields;if(o.length===0)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)}),new Ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n,r,i,o,u,f){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=f}static newInvalidDocument(e){return new tr(e,0,Ue.min(),Ue.min(),Ue.min(),ai.empty(),0)}static newFoundDocument(e,n,r,i){return new tr(e,1,n,Ue.min(),r,i,0)}static newNoDocument(e,n){return new tr(e,2,n,Ue.min(),Ue.min(),ai.empty(),0)}static newUnknownDocument(e,n){return new tr(e,3,n,Ue.min(),Ue.min(),ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n){this.position=e,this.inclusive=n}}function Ex(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],u=t.position[i];if(o.field.isKeyField()?r=Oe.comparator(Oe.fromName(u.referenceValue),n.key):r=bu(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _x(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ss(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n="asc"){this.field=e,this.dir=n}}function KD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{}class gn extends RI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XD(e,n,r):n==="array-contains"?new YD(e,r):n==="in"?new ZD(e,r):n==="not-in"?new JD(e,r):n==="array-contains-any"?new eM(e,r):new gn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $D(e,r):new QD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(bu(n,this.value)):n!==null&&rl(this.value)===rl(n)&&this.matchesComparison(bu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ri extends RI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ri(e,n)}matches(e){return PI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function PI(t){return t.op==="and"}function NI(t){return qD(t)&&PI(t)}function qD(t){for(const e of t.filters)if(e instanceof Ri)return!1;return!0}function Mg(t){if(t instanceof gn)return t.field.canonicalString()+t.op.toString()+Ru(t.value);if(NI(t))return t.filters.map(e=>Mg(e)).join(",");{const e=t.filters.map(n=>Mg(n)).join(",");return`${t.op}(${e})`}}function OI(t,e){return t instanceof gn?function(r,i){return i instanceof gn&&r.op===i.op&&r.field.isEqual(i.field)&&ss(r.value,i.value)}(t,e):t instanceof Ri?function(r,i){return i instanceof Ri&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,u,f)=>o&&OI(u,i.filters[f]),!0):!1}(t,e):void Fe()}function DI(t){return t instanceof gn?function(n){return`${n.field.canonicalString()} ${n.op} ${Ru(n.value)}`}(t):t instanceof Ri?function(n){return n.op.toString()+" {"+n.getFilters().map(DI).join(" ,")+"}"}(t):"Filter"}class XD extends gn{constructor(e,n,r){super(e,n,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const n=Oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class $D extends gn{constructor(e,n){super(e,"in",n),this.keys=MI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QD extends gn{constructor(e,n){super(e,"not-in",n),this.keys=MI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function MI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class YD extends gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ky(n)&&Ah(n.arrayValue,this.value)}}class ZD extends gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ah(this.value.arrayValue,n)}}class JD extends gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ah(this.value.arrayValue,n)}}class eM extends gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ky(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ah(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n=null,r=[],i=[],o=null,u=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=f,this.ue=null}}function Ax(t,e=null,n=[],r=[],i=null,o=null,u=null){return new tM(t,e,n,r,i,o,u)}function qy(t){const e=Be(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),J0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ru(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ru(r)).join(",")),e.ue=n}return e.ue}function Xy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_x(t.startAt,e.startAt)&&_x(t.endAt,e.endAt)}function kg(t){return Oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n=null,r=[],i=[],o=null,u="F",f=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=f,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nM(t,e,n,r,i,o,u,f){return new Ku(t,e,n,r,i,o,u,f)}function $y(t){return new Ku(t)}function Cx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kI(t){return t.collectionGroup!==null}function Kc(t){const e=Be(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Hn(zn.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(g=>{g.isInequality()&&(f=f.add(g.field))})}),f})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ch(o,r))}),n.has(zn.keyField().canonicalString())||e.ce.push(new Ch(zn.keyField(),r))}return e.ce}function Ji(t){const e=Be(t);return e.le||(e.le=LI(e,Kc(t))),e.le}function rM(t){const e=Be(t);return e.he||(e.he=LI(e,t.explicitOrderBy)),e.he}function LI(t,e){if(t.limitType==="F")return Ax(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ch(i.field,o)});const n=t.endAt?new a0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new a0(t.startAt.position,t.startAt.inclusive):null;return Ax(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lg(t,e){const n=t.filters.concat([e]);return new Ku(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fg(t,e,n){return new Ku(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function e1(t,e){return Xy(Ji(t),Ji(e))&&t.limitType===e.limitType}function FI(t){return`${qy(Ji(t))}|lt:${t.limitType}`}function Sl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>DI(i)).join(", ")}]`),J0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ru(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ru(i)).join(",")),`Target(${r})`}(Ji(t))}; limitType=${t.limitType})`}function t1(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Kc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(u,f,d){const g=Ex(u,f,d);return u.inclusive?g<=0:g<0}(r.startAt,Kc(r),i)||r.endAt&&!function(u,f,d){const g=Ex(u,f,d);return u.inclusive?g>=0:g>0}(r.endAt,Kc(r),i))}(t,e)}function iM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BI(t){return(e,n)=>{let r=!1;for(const i of Kc(t)){const o=sM(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function sM(t,e,n){const r=t.field.isKeyField()?Oe.comparator(e.key,n.key):function(o,u,f){const d=u.data.field(o),g=f.data.field(o);return d!==null&&g!==null?bu(d,g):Fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gu(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return II(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new Qt(Oe.comparator);function js(){return oM}const VI=new Qt(Oe.comparator);function bc(...t){let e=VI;for(const n of t)e=e.insert(n.key,n);return e}function UI(t){let e=VI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Na(){return qc()}function jI(){return qc()}function qc(){return new qu(t=>t.toString(),(t,e)=>t.isEqual(e))}const aM=new Qt(Oe.comparator),lM=new Hn(Oe.comparator);function Je(...t){let e=lM;for(const n of t)e=e.add(n);return e}const uM=new Hn(ut);function cM(){return uM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:o0(e)?"-0":e}}function zI(t){return{integerValue:""+t}}function hM(t,e){return UD(e)?zI(e):Qy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this._=void 0}}function fM(t,e,n){return t instanceof l0?function(i,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Hy(o)&&(o=Gy(o)),o&&(u.fields.__previous_value__=o),{mapValue:u}}(n,e):t instanceof Th?HI(t,e):t instanceof Ih?GI(t,e):function(i,o){const u=WI(i,o),f=Tx(u)+Tx(i.Pe);return Dg(u)&&Dg(i.Pe)?zI(f):Qy(i.serializer,f)}(t,e)}function dM(t,e,n){return t instanceof Th?HI(t,e):t instanceof Ih?GI(t,e):n}function WI(t,e){return t instanceof u0?function(r){return Dg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class l0 extends n1{}class Th extends n1{constructor(e){super(),this.elements=e}}function HI(t,e){const n=KI(e);for(const r of t.elements)n.some(i=>ss(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ih extends n1{constructor(e){super(),this.elements=e}}function GI(t,e){let n=KI(e);for(const r of t.elements)n=n.filter(i=>!ss(i,r));return{arrayValue:{values:n}}}class u0 extends n1{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Tx(t){return un(t.integerValue||t.doubleValue)}function KI(t){return Ky(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Th&&i instanceof Th||r instanceof Ih&&i instanceof Ih?Su(r.elements,i.elements,ss):r instanceof u0&&i instanceof u0?ss(r.Pe,i.Pe):r instanceof l0&&i instanceof l0}(t.transform,e.transform)}class gM{constructor(e,n){this.version=e,this.transformResults=n}}class es{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new es}static exists(e){return new es(void 0,e)}static updateTime(e){return new es(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let r1=class{};function qI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $I(t.key,es.none()):new tf(t.key,t.data,es.none());{const n=t.data,r=ai.empty();let i=new Hn(zn.comparator);for(let o of e.fields)if(!i.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),i=i.add(o)}return new hl(t.key,r,new Ci(i.toArray()),es.none())}}function mM(t,e,n){t instanceof tf?function(i,o,u){const f=i.value.clone(),d=Sx(i.fieldTransforms,o,u.transformResults);f.setAll(d),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(t,e,n):t instanceof hl?function(i,o,u){if(!xd(i.precondition,o))return void o.convertToUnknownDocument(u.version);const f=Sx(i.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(XI(i)),d.setAll(f),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(t,e,n):function(i,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Xc(t,e,n,r){return t instanceof tf?function(o,u,f,d){if(!xd(o.precondition,u))return f;const g=o.value.clone(),w=bx(o.fieldTransforms,d,u);return g.setAll(w),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null}(t,e,n,r):t instanceof hl?function(o,u,f,d){if(!xd(o.precondition,u))return f;const g=bx(o.fieldTransforms,d,u),w=u.data;return w.setAll(XI(o)),w.setAll(g),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),f===null?null:f.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(x=>x.field))}(t,e,n,r):function(o,u,f){return xd(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f}(t,e,n)}function yM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=WI(r.transform,i||null);o!=null&&(n===null&&(n=ai.empty()),n.set(r.field,o))}return n||null}function Ix(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Su(r,i,(o,u)=>pM(o,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tf extends r1{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hl extends r1{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function XI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sx(t,e,n){const r=new Map;gt(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],u=o.transform,f=e.data.field(o.field);r.set(o.field,dM(u,f,n[i]))}return r}function bx(t,e,n){const r=new Map;for(const i of t){const o=i.transform,u=n.data.field(i.field);r.set(i.field,fM(o,u,e))}return r}class $I extends r1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wM extends r1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&mM(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jI();return this.mutations.forEach(i=>{const o=e.get(i.key),u=o.overlayedDocument;let f=this.applyToLocalView(u,o.mutatedFields);f=n.has(i.key)?null:f;const d=qI(u,f);d!==null&&r.set(i.key,d),u.isValidDocument()||u.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&Su(this.mutations,e.mutations,(n,r)=>Ix(n,r))&&Su(this.baseMutations,e.baseMutations,(n,r)=>Ix(n,r))}}class Yy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){gt(e.mutations.length===r.length);let i=function(){return aM}();const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new Yy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,st;function AM(t){switch(t){default:return Fe();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function QI(t){if(t===void 0)return Us("GRPC error has no .code"),le.UNKNOWN;switch(t){case dn.OK:return le.OK;case dn.CANCELLED:return le.CANCELLED;case dn.UNKNOWN:return le.UNKNOWN;case dn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case dn.INTERNAL:return le.INTERNAL;case dn.UNAVAILABLE:return le.UNAVAILABLE;case dn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case dn.NOT_FOUND:return le.NOT_FOUND;case dn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case dn.ABORTED:return le.ABORTED;case dn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case dn.DATA_LOSS:return le.DATA_LOSS;default:return Fe()}}(st=dn||(dn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=new Ka([4294967295,4294967295],0);function Rx(t){const e=CM().encode(t),n=new wI;return n.update(e),new Uint8Array(n.digest())}function Px(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ka([n,r],0),new Ka([i,o],0)]}class Zy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rc(`Invalid padding: ${n}`);if(r<0)throw new Rc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ka.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ka.fromNumber(r)));return i.compare(TM)===1&&(i=new Ka([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Rx(e),[r,i]=Px(n);for(let o=0;o<this.hashCount;o++){const u=this.Ee(r,i,o);if(!this.de(u))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Zy(o,i,n);return r.forEach(f=>u.insert(f)),u}insert(e){if(this.Ie===0)return;const n=Rx(e),[r,i]=Px(n);for(let o=0;o<this.hashCount;o++){const u=this.Ee(r,i,o);this.Ae(u)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,nf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new i1(Ue.min(),i,new Qt(ut),js(),Je())}}class nf{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nf(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class YI{constructor(e,n){this.targetId=e,this.me=n}}class ZI{constructor(e,n,r=qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Nx{constructor(){this.fe=0,this.ge=Dx(),this.pe=qn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),n=Je(),r=Je();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Fe()}}),new nf(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Dx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,gt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class IM{constructor(e){this.Le=e,this.Be=new Map,this.ke=js(),this.qe=Ox(),this.Qe=new Qt(ut)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(kg(o))if(r===0){const u=new Oe(o.path);this.Ue(n,u,tr.newNoDocument(u,Ue.min()))}else gt(r===1);else{const u=this.Ye(n);if(u!==r){const f=this.Ze(e),d=f?this.Xe(f,e,u):1;if(d!==0){this.je(n);const g=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,g)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let u,f;try{u=nl(r).toUint8Array()}catch(d){if(d instanceof SI)return Iu("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new Zy(u,i,o)}catch(d){return Iu(d instanceof Rc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.Ie===0?null:f}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const u=this.Le.tt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(f)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,u)=>{const f=this.Je(u);if(f){if(o.current&&kg(f.target)){const d=new Oe(f.target.path);this.ke.get(d)!==null||this.it(u,d)||this.Ue(u,d,tr.newNoDocument(d,e))}o.be&&(n.set(u,o.ve()),o.Ce())}});let r=Je();this.qe.forEach((o,u)=>{let f=!0;u.forEachWhile(d=>{const g=this.Je(d);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(r=r.add(o))}),this.ke.forEach((o,u)=>u.setReadTime(e));const i=new i1(e,n,this.Qe,this.ke,r);return this.ke=js(),this.qe=Ox(),this.Qe=new Qt(ut),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Nx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Hn(ut),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Nx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ox(){return new Qt(Oe.comparator)}function Dx(){return new Qt(Oe.comparator)}const SM={asc:"ASCENDING",desc:"DESCENDING"},bM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RM={and:"AND",or:"OR"};class PM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bg(t,e){return t.useProto3Json||J0(e)?e:{value:e}}function c0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NM(t,e){return c0(t,e.toTimestamp())}function ts(t){return gt(!!t),Ue.fromTimestamp(function(n){const r=Qo(n);return new Xt(r.seconds,r.nanos)}(t))}function Jy(t,e){return Vg(t,e).canonicalString()}function Vg(t,e){const n=function(i){return new kt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function eS(t){const e=kt.fromString(t);return gt(oS(e)),e}function Ug(t,e){return Jy(t.databaseId,e.path)}function up(t,e){const n=eS(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Oe(nS(n))}function tS(t,e){return Jy(t.databaseId,e)}function OM(t){const e=eS(t);return e.length===4?kt.emptyPath():nS(e)}function jg(t){return new kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nS(t){return gt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Mx(t,e,n){return{name:Ug(t,e),fields:n.value.mapValue.fields}}function DM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(g,w){return g.useProto3Json?(gt(w===void 0||typeof w=="string"),qn.fromBase64String(w||"")):(gt(w===void 0||w instanceof Buffer||w instanceof Uint8Array),qn.fromUint8Array(w||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(g){const w=g.code===void 0?le.UNKNOWN:QI(g.code);return new _e(w,g.message||"")}(u);n=new ZI(r,i,o,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=up(t,r.document.name),o=ts(r.document.updateTime),u=r.document.createTime?ts(r.document.createTime):Ue.min(),f=new ai({mapValue:{fields:r.document.fields}}),d=tr.newFoundDocument(i,o,u,f),g=r.targetIds||[],w=r.removedTargetIds||[];n=new Ed(g,w,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=up(t,r.document),o=r.readTime?ts(r.readTime):Ue.min(),u=tr.newNoDocument(i,o),f=r.removedTargetIds||[];n=new Ed([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=up(t,r.document),o=r.removedTargetIds||[];n=new Ed([],o,i,null)}else{if(!("filter"in e))return Fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,u=new _M(i,o),f=r.targetId;n=new YI(f,u)}}return n}function MM(t,e){let n;if(e instanceof tf)n={update:Mx(t,e.key,e.value)};else if(e instanceof $I)n={delete:Ug(t,e.key)};else if(e instanceof hl)n={update:Mx(t,e.key,e.data),updateMask:WM(e.fieldMask)};else{if(!(e instanceof wM))return Fe();n={verify:Ug(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const f=u.transform;if(f instanceof l0)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Th)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ih)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof u0)return{fieldPath:u.field.canonicalString(),increment:f.Pe};throw Fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:NM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Fe()}(t,e.precondition)),n}function kM(t,e){return t&&t.length>0?(gt(e!==void 0),t.map(n=>function(i,o){let u=i.updateTime?ts(i.updateTime):ts(o);return u.isEqual(Ue.min())&&(u=ts(o)),new gM(u,i.transformResults||[])}(n,e))):[]}function LM(t,e){return{documents:[tS(t,e.path)]}}function rS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tS(t,i);const o=function(g){if(g.length!==0)return sS(Ri.create(g,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const u=function(g){if(g.length!==0)return g.map(w=>function(_){return{field:yo(_.field),direction:UM(_.dir)}}(w))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const f=Bg(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{_t:n,parent:i}}function FM(t,e,n,r){const{_t:i,parent:o}=rS(t,e),u={},f=[];let d=0;return n.forEach(g=>{const w="aggregate_"+d++;u[w]=g.alias,g.aggregateType==="count"?f.push({alias:w,count:{}}):g.aggregateType==="avg"?f.push({alias:w,avg:{field:yo(g.fieldPath)}}):g.aggregateType==="sum"&&f.push({alias:w,sum:{field:yo(g.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:i.structuredQuery},parent:i.parent},ut:u,parent:o}}function BM(t){let e=OM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){gt(r===1);const w=n.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let o=[];n.where&&(o=function(x){const _=iS(x);return _ instanceof Ri&&NI(_)?_.getFilters():[_]}(n.where));let u=[];n.orderBy&&(u=function(x){return x.map(_=>function(O){return new Ch(bl(O.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(_))}(n.orderBy));let f=null;n.limit&&(f=function(x){let _;return _=typeof x=="object"?x.value:x,J0(_)?null:_}(n.limit));let d=null;n.startAt&&(d=function(x){const _=!!x.before,T=x.values||[];return new a0(T,_)}(n.startAt));let g=null;return n.endAt&&(g=function(x){const _=!x.before,T=x.values||[];return new a0(T,_)}(n.endAt)),nM(e,i,u,o,f,"F",d,g)}function VM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bl(n.unaryFilter.field);return gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bl(n.unaryFilter.field);return gn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=bl(n.unaryFilter.field);return gn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=bl(n.unaryFilter.field);return gn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Fe()}}(t):t.fieldFilter!==void 0?function(n){return gn.create(bl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ri.create(n.compositeFilter.filters.map(r=>iS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe()}}(n.compositeFilter.op))}(t):Fe()}function UM(t){return SM[t]}function jM(t){return bM[t]}function zM(t){return RM[t]}function yo(t){return{fieldPath:t.canonicalString()}}function bl(t){return zn.fromServerFormat(t.fieldPath)}function sS(t){return t instanceof gn?function(n){if(n.op==="=="){if(xx(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NAN"}};if(vx(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xx(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NOT_NAN"}};if(vx(n.value))return{unaryFilter:{field:yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(n.field),op:jM(n.op),value:n.value}}}(t):t instanceof Ri?function(n){const r=n.getFilters().map(i=>sS(i));return r.length===1?r[0]:{compositeFilter:{op:zM(n.op),filters:r}}}(t):Fe()}function WM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,r,i,o=Ue.min(),u=Ue.min(),f=qn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new No(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new No(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.ct=e}}function GM(t){const e=BM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.un=new qM}addToCollectionParentIndex(e,n){return this.un.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve($o.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve($o.min())}updateCollectionGroup(e,n,r){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class qM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Hn(kt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Pu(0)}static kn(){return new Pu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.changes=new qu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xc(r.mutation,i,Ci.empty(),Xt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const i=Na();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let u=bc();return o.forEach((f,d)=>{u=u.insert(f,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const r=Na();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((u,f)=>{n.set(u,f)})})}computeViews(e,n,r,i){let o=js();const u=qc(),f=function(){return qc()}();return n.forEach((d,g)=>{const w=r.get(g.key);i.has(g.key)&&(w===void 0||w.mutation instanceof hl)?o=o.insert(g.key,g):w!==void 0?(u.set(g.key,w.mutation.getFieldMask()),Xc(w.mutation,g,w.mutation.getFieldMask(),Xt.now())):u.set(g.key,Ci.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((g,w)=>u.set(g,w)),n.forEach((g,w)=>{var x;return f.set(g,new $M(w,(x=u.get(g))!==null&&x!==void 0?x:null))}),f))}recalculateAndSaveOverlays(e,n){const r=qc();let i=new Qt((u,f)=>u-f),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const f of u)f.keys().forEach(d=>{const g=n.get(d);if(g===null)return;let w=r.get(d)||Ci.empty();w=f.applyToLocalView(g,w),r.set(d,w);const x=(i.get(f.batchId)||Je()).add(d);i=i.insert(f.batchId,x)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),g=d.key,w=d.value,x=jI();w.forEach(_=>{if(!o.has(_)){const T=qI(n.get(_),r.get(_));T!==null&&x.set(_,T),o=o.add(_)}}),u.push(this.documentOverlayCache.saveOverlays(e,g,x))}return ce.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(u){return Oe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):ce.resolve(Na());let f=-1,d=o;return u.next(g=>ce.forEach(g,(w,x)=>(f<x.largestBatchId&&(f=x.largestBatchId),o.get(w)?ce.resolve():this.remoteDocumentCache.getEntry(e,w).next(_=>{d=d.insert(w,_)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,d,g,Je())).next(w=>({batchId:f,changes:UI(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Oe(n)).next(r=>{let i=bc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let u=bc();return this.indexManager.getCollectionParents(e,o).next(f=>ce.forEach(f,d=>{const g=function(x,_){return new Ku(_,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(w=>{w.forEach((x,_)=>{u=u.insert(x,_)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(u=>{o.forEach((d,g)=>{const w=g.getKey();u.get(w)===null&&(u=u.insert(w,tr.newInvalidDocument(w)))});let f=bc();return u.forEach((d,g)=>{const w=o.get(d);w!==void 0&&Xc(w.mutation,g,Ci.empty(),Xt.now()),t1(n,g)&&(f=f.insert(d,g))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ce.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ts(i.createTime)}}(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:GM(i.bundledQuery),readTime:ts(i.readTime)}}(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.overlays=new Qt(Oe.comparator),this.Ir=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Na();return ce.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),ce.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),ce.resolve()}getOverlaysForCollection(e,n,r){const i=Na(),o=n.length+1,u=new Oe(n.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const d=f.getNext().value,g=d.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Qt((g,w)=>g-w);const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let w=o.get(g.largestBatchId);w===null&&(w=Na(),o=o.insert(g.largestBatchId,w)),w.set(g.getKey(),g)}}const f=Na(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((g,w)=>f.set(g,w)),!(f.size()>=i)););return ce.resolve(f)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new xM(n,r));let o=this.Ir.get(n);o===void 0&&(o=Je(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.Tr=new Hn(Dn.Er),this.dr=new Hn(Dn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Dn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Dn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Oe(new kt([])),r=new Dn(n,e),i=new Dn(n,e+1),o=[];return this.dr.forEachInRange([r,i],u=>{this.Vr(u),o.push(u.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Oe(new kt([])),r=new Dn(n,e),i=new Dn(n,e+1);let o=Je();return this.dr.forEachInRange([r,i],u=>{o=o.add(u.key)}),o}containsKey(e){const n=new Dn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Oe.comparator(e.key,n.key)||ut(e.wr,n.wr)}static Ar(e,n){return ut(e.wr,n.wr)||Oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Hn(Dn.Er)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new vM(o,n,r,i);this.mutationQueue.push(u);for(const f of i)this.br=this.br.add(new Dn(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,n){return ce.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return ce.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dn(n,0),i=new Dn(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],u=>{const f=this.Dr(u.wr);o.push(f)}),ce.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hn(ut);return n.forEach(i=>{const o=new Dn(i,0),u=new Dn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,u],f=>{r=r.add(f.wr)})}),ce.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Oe.isDocumentKey(o)||(o=o.child(""));const u=new Dn(new Oe(o),0);let f=new Hn(ut);return this.br.forEachWhile(d=>{const g=d.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(f=f.add(d.wr)),!0)},u),ce.resolve(this.Cr(f))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){gt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ce.forEach(n.mutations,i=>{const o=new Dn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Dn(n,0),i=this.br.firstAfterOrEqual(r);return ce.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.Mr=e,this.docs=function(){return new Qt(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,u=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ce.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(n))}getEntries(e,n){let r=js();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tr.newInvalidDocument(i))}),ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=js();const u=n.path,f=new Oe(u.child("")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:g,value:{document:w}}=d.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||LD(kD(w),r)<=0||(i.has(w.key)||t1(n,w))&&(o=o.insert(w.key,w.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Fe()}Or(e,n){return ce.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nk(this)}getSize(e){return ce.resolve(this.size)}}class nk extends XM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ce.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.persistence=e,this.Nr=new qu(n=>qy(n),Xy),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new e2,this.targetCount=0,this.kr=Pu.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Pu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Kn(n),ce.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((u,f)=>{f.sequenceNumber<=n&&r.get(f.targetId)===null&&(this.Nr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ce.waitFor(o).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ce.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ce.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(u=>{o.push(i.markPotentiallyOrphaned(e,u))}),ce.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ce.resolve(r)}containsKey(e,n){return ce.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Wy(0),this.Kr=!1,this.Kr=!0,this.$r=new JM,this.referenceDelegate=e(this),this.Ur=new rk(this),this.indexManager=new KM,this.remoteDocumentCache=function(i){return new tk(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new HM(n),this.Gr=new YM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ek(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ie("MemoryPersistence","Starting transaction:",e);const i=new sk(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return ce.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class sk extends BD{constructor(e){super(),this.currentSequenceNumber=e}}class t2{constructor(e){this.persistence=e,this.Jr=new e2,this.Yr=null}static Zr(e){return new t2(e)}get Xr(){if(this.Yr)return this.Yr;throw Fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ce.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,r=>{const i=Oe.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,Ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ce.or([()=>ce.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Je(),i=Je();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n2(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return oN()?8:VD(ir())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new ok;return this.Xi(e,n,u).next(f=>{if(o.result=f,this.zi)return this.es(e,n,u,f.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(vc()<=nt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Sl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):(vc()<=nt.DEBUG&&Ie("QueryEngine","Query:",Sl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(vc()<=nt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Sl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(n))):ce.resolve())}Yi(e,n){if(Cx(n))return ce.resolve(null);let r=Ji(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Fg(n,null,"F"),r=Ji(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=Je(...o);return this.Ji.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(d=>{const g=this.ts(n,f);return this.ns(n,g,u,d.readTime)?this.Yi(e,Fg(n,null,"F")):this.rs(e,g,n,d)}))})))}Zi(e,n,r,i){return Cx(n)||i.isEqual(Ue.min())?ce.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const u=this.ts(n,o);return this.ns(n,u,r,i)?ce.resolve(null):(vc()<=nt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sl(n)),this.rs(e,u,n,MD(i,-1)).next(f=>f))})}ts(e,n){let r=new Hn(BI(e));return n.forEach((i,o)=>{t1(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return vc()<=nt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Sl(n)),this.Ji.getDocumentsMatchingQuery(e,n,$o.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Qt(ut),this._s=new qu(o=>qy(o),Xy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function uk(t,e,n,r){return new lk(t,e,n,r)}async function aS(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],f=[];let d=Je();for(const g of i){u.push(g.batchId);for(const w of g.mutations)d=d.add(w.key)}for(const g of o){f.push(g.batchId);for(const w of g.mutations)d=d.add(w.key)}return n.localDocuments.getDocuments(r,d).next(g=>({hs:g,removedBatchIds:u,addedBatchIds:f}))})})}function ck(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(f,d,g,w){const x=g.batch,_=x.keys();let T=ce.resolve();return _.forEach(O=>{T=T.next(()=>w.getEntry(d,O)).next(M=>{const B=g.docVersions.get(O);gt(B!==null),M.version.compareTo(B)<0&&(x.applyToRemoteDocument(M,g),M.isValidDocument()&&(M.setReadTime(g.commitVersion),w.addEntry(M)))})}),T.next(()=>f.mutationQueue.removeMutationBatch(d,x))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(f){let d=Je();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(d=d.add(f.batch.mutations[g].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lS(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function hk(t,e){const n=Be(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const f=[];e.targetChanges.forEach((w,x)=>{const _=i.get(x);if(!_)return;f.push(n.Ur.removeMatchingKeys(o,w.removedDocuments,x).next(()=>n.Ur.addMatchingKeys(o,w.addedDocuments,x)));let T=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?T=T.withResumeToken(qn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):w.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(w.resumeToken,r)),i=i.insert(x,T),function(M,B,k){return M.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(_,T,w)&&f.push(n.Ur.updateTargetData(o,T))});let d=js(),g=Je();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(o,w))}),f.push(fk(o,u,e.documentUpdates).next(w=>{d=w.Ps,g=w.Is})),!r.isEqual(Ue.min())){const w=n.Ur.getLastRemoteSnapshotVersion(o).next(x=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));f.push(w)}return ce.waitFor(f).next(()=>u.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,g)).next(()=>d)}).then(o=>(n.os=i,o))}function fk(t,e,n){let r=Je(),i=Je();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let u=js();return n.forEach((f,d)=>{const g=o.get(f);d.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(f)),d.isNoDocument()&&d.version.isEqual(Ue.min())?(e.removeEntry(f,d.readTime),u=u.insert(f,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||d.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(d),u=u.insert(f,d)):Ie("LocalStore","Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",d.version)}),{Ps:u,Is:i}})}function dk(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pk(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,ce.resolve(i)):n.Ur.allocateTargetId(r).next(u=>(i=new No(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function zg(t,e,n){const r=Be(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!ef(u))throw u;Ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function kx(t,e,n){const r=Be(t);let i=Ue.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,g,w){const x=Be(d),_=x._s.get(w);return _!==void 0?ce.resolve(x.os.get(_)):x.Ur.getTargetData(g,w)}(r,u,Ji(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,f.targetId).next(d=>{o=d})}).next(()=>r.ss.getDocumentsMatchingQuery(u,e,n?i:Ue.min(),n?o:Je())).next(f=>(gk(r,iM(e),f),{documents:f,Ts:o})))}function gk(t,e,n){let r=t.us.get(e)||Ue.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class Lx{constructor(){this.activeTargetIds=cM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mk{constructor(){this.so=new Lx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Lx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf=null;function cp(){return Xf===null?Xf=function(){return 268435456+Math.round(2147483648*Math.random())}():Xf++,"0x"+Xf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="WebChannelConnection";class xk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,u){const f=cp(),d=this.xo(n,r.toUriEncodedString());Ie("RestConnection",`Sending RPC '${n}' ${f}:`,d,i);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,o,u),this.No(n,d,g,i).then(w=>(Ie("RestConnection",`Received RPC '${n}' ${f}: `,w),w),w=>{throw Iu("RestConnection",`RPC '${n}' ${f} failed with error: `,w,"url: ",d,"request:",i),w})}Lo(n,r,i,o,u,f){return this.Mo(n,r,i,o,u)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,u)=>n[u]=o),i&&i.headers.forEach((o,u)=>n[u]=o)}xo(n,r){const i=wk[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=cp();return new Promise((u,f)=>{const d=new vI;d.setWithCredentials(!0),d.listenOnce(xI.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case wd.NO_ERROR:const w=d.getResponseJson();Ie(Yn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(w)),u(w);break;case wd.TIMEOUT:Ie(Yn,`RPC '${e}' ${o} timed out`),f(new _e(le.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const x=d.getStatus();if(Ie(Yn,`RPC '${e}' ${o} failed with status:`,x,"response text:",d.getResponseText()),x>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const T=_==null?void 0:_.error;if(T&&T.status&&T.message){const O=function(B){const k=B.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(k)>=0?k:le.UNKNOWN}(T.status);f(new _e(O,T.message))}else f(new _e(le.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new _e(le.UNAVAILABLE,"Connection failed."));break;default:Fe()}}finally{Ie(Yn,`RPC '${e}' ${o} completed.`)}});const g=JSON.stringify(i);Ie(Yn,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",g,r,15)})}Bo(e,n,r){const i=cp(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=AI(),f=_I(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(d.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const w=o.join("");Ie(Yn,`Creating RPC '${e}' stream ${i}: ${w}`,d);const x=u.createWebChannel(w,d);let _=!1,T=!1;const O=new vk({Io:B=>{T?Ie(Yn,`Not sending because RPC '${e}' stream ${i} is closed:`,B):(_||(Ie(Yn,`Opening RPC '${e}' stream ${i} transport.`),x.open(),_=!0),Ie(Yn,`RPC '${e}' stream ${i} sending:`,B),x.send(B))},To:()=>x.close()}),M=(B,k,N)=>{B.listen(k,R=>{try{N(R)}catch(z){setTimeout(()=>{throw z},0)}})};return M(x,Sc.EventType.OPEN,()=>{T||(Ie(Yn,`RPC '${e}' stream ${i} transport opened.`),O.yo())}),M(x,Sc.EventType.CLOSE,()=>{T||(T=!0,Ie(Yn,`RPC '${e}' stream ${i} transport closed`),O.So())}),M(x,Sc.EventType.ERROR,B=>{T||(T=!0,Iu(Yn,`RPC '${e}' stream ${i} transport errored:`,B),O.So(new _e(le.UNAVAILABLE,"The operation could not be completed")))}),M(x,Sc.EventType.MESSAGE,B=>{var k;if(!T){const N=B.data[0];gt(!!N);const R=N,z=R.error||((k=R[0])===null||k===void 0?void 0:k.error);if(z){Ie(Yn,`RPC '${e}' stream ${i} received error:`,z);const Q=z.status;let Z=function(F){const j=dn[F];if(j!==void 0)return QI(j)}(Q),L=z.message;Z===void 0&&(Z=le.INTERNAL,L="Unknown error status: "+Q+" with message "+z.message),T=!0,O.So(new _e(Z,L)),x.close()}else Ie(Yn,`RPC '${e}' stream ${i} received:`,N),O.bo(N)}}),M(f,EI.STAT_EVENT,B=>{B.stat===Ng.PROXY?Ie(Yn,`RPC '${e}' stream ${i} detected buffering proxy`):B.stat===Ng.NOPROXY&&Ie(Yn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{O.wo()},0),O}}function hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){return new PM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,r,i,o,u,f,d){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Us(n.toString()),Us("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new _e(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ek extends cS{constructor(e,n,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,u),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=DM(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ue.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?ts(u.readTime):Ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=jg(this.serializer),n.addTarget=function(o,u){let f;const d=u.target;if(f=kg(d)?{documents:LM(o,d)}:{query:rS(o,d)._t},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=JI(o,u.resumeToken);const g=Bg(o,u.expectedCount);g!==null&&(f.expectedCount=g)}else if(u.snapshotVersion.compareTo(Ue.min())>0){f.readTime=c0(o,u.snapshotVersion.toTimestamp());const g=Bg(o,u.expectedCount);g!==null&&(f.expectedCount=g)}return f}(this.serializer,e);const r=VM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=jg(this.serializer),n.removeTarget=e,this.a_(n)}}class _k extends cS{constructor(e,n,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,u),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return gt(!!e.streamToken),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=kM(e.writeResults,e.commitTime),r=ts(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=jg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>MM(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Mo(e,Vg(n,r),i,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(le.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Lo(e,Vg(n,r),i,u,f,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(le.UNKNOWN,u.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ck{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Us(n),this.D_=!1):Ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(u=>{r.enqueueAndForget(async()=>{fl(this)&&(Ie("RemoteStore","Restarting streams for network reachability change."),await async function(d){const g=Be(d);g.L_.add(4),await rf(g),g.q_.set("Unknown"),g.L_.delete(4),await o1(g)}(this))})}),this.q_=new Ck(r,i)}}async function o1(t){if(fl(t))for(const e of t.B_)await e(!0)}async function rf(t){for(const e of t.B_)await e(!1)}function hS(t,e){const n=Be(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),o2(n)?s2(n):Xu(n).r_()&&i2(n,e))}function r2(t,e){const n=Be(t),r=Xu(n);n.N_.delete(e),r.r_()&&fS(n,e),n.N_.size===0&&(r.r_()?r.o_():fl(n)&&n.q_.set("Unknown"))}function i2(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xu(t).A_(e)}function fS(t,e){t.Q_.xe(e),Xu(t).R_(e)}function s2(t){t.Q_=new IM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xu(t).start(),t.q_.v_()}function o2(t){return fl(t)&&!Xu(t).n_()&&t.N_.size>0}function fl(t){return Be(t).L_.size===0}function dS(t){t.Q_=void 0}async function Ik(t){t.q_.set("Online")}async function Sk(t){t.N_.forEach((e,n)=>{i2(t,e)})}async function bk(t,e){dS(t),o2(t)?(t.q_.M_(e),s2(t)):t.q_.set("Unknown")}async function Rk(t,e,n){if(t.q_.set("Online"),e instanceof ZI&&e.state===2&&e.cause)try{await async function(i,o){const u=o.cause;for(const f of o.targetIds)i.N_.has(f)&&(await i.remoteSyncer.rejectListen(f,u),i.N_.delete(f),i.Q_.removeTarget(f))}(t,e)}catch(r){Ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await h0(t,r)}else if(e instanceof Ed?t.Q_.Ke(e):e instanceof YI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ue.min()))try{const r=await lS(t.localStore);n.compareTo(r)>=0&&await function(o,u){const f=o.Q_.rt(u);return f.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const w=o.N_.get(g);w&&o.N_.set(g,w.withResumeToken(d.resumeToken,u))}}),f.targetMismatches.forEach((d,g)=>{const w=o.N_.get(d);if(!w)return;o.N_.set(d,w.withResumeToken(qn.EMPTY_BYTE_STRING,w.snapshotVersion)),fS(o,d);const x=new No(w.target,d,g,w.sequenceNumber);i2(o,x)}),o.remoteSyncer.applyRemoteEvent(f)}(t,n)}catch(r){Ie("RemoteStore","Failed to raise snapshot:",r),await h0(t,r)}}async function h0(t,e,n){if(!ef(e))throw e;t.L_.add(1),await rf(t),t.q_.set("Offline"),n||(n=()=>lS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await o1(t)})}function pS(t,e){return e().catch(n=>h0(t,n,e))}async function a1(t){const e=Be(t),n=Yo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Pk(e);)try{const i=await dk(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Nk(e,i)}catch(i){await h0(e,i)}gS(e)&&mS(e)}function Pk(t){return fl(t)&&t.O_.length<10}function Nk(t,e){t.O_.push(e);const n=Yo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function gS(t){return fl(t)&&!Yo(t).n_()&&t.O_.length>0}function mS(t){Yo(t).start()}async function Ok(t){Yo(t).p_()}async function Dk(t){const e=Yo(t);for(const n of t.O_)e.m_(n.mutations)}async function Mk(t,e,n){const r=t.O_.shift(),i=Yy.from(r,e,n);await pS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await a1(t)}async function kk(t,e){e&&Yo(t).V_&&await async function(r,i){if(function(u){return AM(u)&&u!==le.ABORTED}(i.code)){const o=r.O_.shift();Yo(r).s_(),await pS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await a1(r)}}(t,e),gS(t)&&mS(t)}async function Bx(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),Ie("RemoteStore","RemoteStore received new credentials");const r=fl(n);n.L_.add(3),await rf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await o1(n)}async function Lk(t,e){const n=Be(t);e?(n.L_.delete(2),await o1(n)):e||(n.L_.add(2),await rf(n),n.q_.set("Unknown"))}function Xu(t){return t.K_||(t.K_=function(n,r,i){const o=Be(n);return o.w_(),new Ek(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Ik.bind(null,t),Ro:Sk.bind(null,t),mo:bk.bind(null,t),d_:Rk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),o2(t)?s2(t):t.q_.set("Unknown")):(await t.K_.stop(),dS(t))})),t.K_}function Yo(t){return t.U_||(t.U_=function(n,r,i){const o=Be(n);return o.w_(),new _k(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Ok.bind(null,t),mo:kk.bind(null,t),f_:Dk.bind(null,t),g_:Mk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await a1(t)):(await t.U_.stop(),t.O_.length>0&&(Ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const u=Date.now()+r,f=new a2(e,n,u,i,o);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function l2(t,e){if(Us("AsyncQueue",`${e}: ${t}`),ef(t))return new _e(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Oe.comparator(n.key,r.key):(n,r)=>Oe.comparator(n.key,r.key),this.keyedMap=bc(),this.sortedSet=new Qt(this.comparator)}static emptySet(e){return new ru(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ru)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ru;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.W_=new Qt(Oe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nu{constructor(e,n,r,i,o,u,f,d,g){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=g}static fromInitialDocuments(e,n,r,i,o){const u=[];return n.forEach(f=>{u.push({type:0,doc:f})}),new Nu(e,n,ru.emptySet(n),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&e1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Bk{constructor(){this.queries=Ux(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Be(n),o=i.queries;i.queries=Ux(),o.forEach((u,f)=>{for(const d of f.j_)d.onError(r)})})(this,new _e(le.ABORTED,"Firestore shutting down"))}}function Ux(){return new qu(t=>FI(t),e1)}async function yS(t,e){const n=Be(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Fk,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(u){const f=l2(u,`Initialization of query '${Sl(e.query)}' failed`);return void e.onError(f)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&u2(n)}async function wS(t,e){const n=Be(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const u=o.j_.indexOf(e);u>=0&&(o.j_.splice(u,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Vk(t,e){const n=Be(t);let r=!1;for(const i of e){const o=i.query,u=n.queries.get(o);if(u){for(const f of u.j_)f.X_(i)&&(r=!0);u.z_=i}}r&&u2(n)}function Uk(t,e,n){const r=Be(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function u2(t){t.Y_.forEach(e=>{e.next()})}var Wg,jx;(jx=Wg||(Wg={})).ea="default",jx.Cache="cache";class vS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Nu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.key=e}}class ES{constructor(e){this.key=e}}class jk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=BI(e),this.Ra=new ru(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Vx,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,u=i,f=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,x)=>{const _=i.get(w),T=t1(this.query,x)?x:null,O=!!_&&this.mutatedKeys.has(_.key),M=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let B=!1;_&&T?_.data.isEqual(T.data)?O!==M&&(r.track({type:3,doc:T}),B=!0):this.ga(_,T)||(r.track({type:2,doc:T}),B=!0,(d&&this.Aa(T,d)>0||g&&this.Aa(T,g)<0)&&(f=!0)):!_&&T?(r.track({type:0,doc:T}),B=!0):_&&!T&&(r.track({type:1,doc:_}),B=!0,(d||g)&&(f=!0)),B&&(T?(u=u.add(T),o=M?o.add(w):o.delete(w)):(u=u.delete(w),o=o.delete(w)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const w=this.query.limitType==="F"?u.last():u.first();u=u.delete(w.key),o=o.delete(w.key),r.track({type:1,doc:w})}return{Ra:u,fa:r,ns:f,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort((w,x)=>function(T,O){const M=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe()}};return M(T)-M(O)}(w.type,x.type)||this.Aa(w.doc,x.doc)),this.pa(r),i=i!=null&&i;const f=n&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,g=d!==this.Ea;return this.Ea=d,u.length!==0||g?{snapshot:new Nu(this.query,e.Ra,o,u,e.mutatedKeys,d===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ES(r))}),this.da.forEach(r=>{e.has(r)||n.push(new xS(r))}),n}ba(e){this.Ta=e.Ts,this.da=Je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Nu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class zk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Wk{constructor(e){this.key=e,this.va=!1}}class Hk{constructor(e,n,r,i,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new qu(f=>FI(f),e1),this.Ma=new Map,this.xa=new Set,this.Oa=new Qt(Oe.comparator),this.Na=new Map,this.La=new e2,this.Ba={},this.ka=new Map,this.qa=Pu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Gk(t,e,n=!0){const r=SS(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await _S(r,e,n,!0),i}async function Kk(t,e){const n=SS(t);await _S(n,e,!0,!1)}async function _S(t,e,n,r){const i=await pk(t.localStore,Ji(e)),o=i.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let f;return r&&(f=await qk(t,e,o,u==="current",i.resumeToken)),t.isPrimaryClient&&n&&hS(t.remoteStore,i),f}async function qk(t,e,n,r,i){t.Ka=(x,_,T)=>async function(M,B,k,N){let R=B.view.ma(k);R.ns&&(R=await kx(M.localStore,B.query,!1).then(({documents:L})=>B.view.ma(L,R)));const z=N&&N.targetChanges.get(B.targetId),Q=N&&N.targetMismatches.get(B.targetId)!=null,Z=B.view.applyChanges(R,M.isPrimaryClient,z,Q);return Wx(M,B.targetId,Z.wa),Z.snapshot}(t,x,_,T);const o=await kx(t.localStore,e,!0),u=new jk(e,o.Ts),f=u.ma(o.documents),d=nf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),g=u.applyChanges(f,t.isPrimaryClient,d);Wx(t,n,g.wa);const w=new zk(e,n,u);return t.Fa.set(e,w),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),g.snapshot}async function Xk(t,e,n){const r=Be(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(u=>!e1(u,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&r2(r.remoteStore,i.targetId),Hg(r,i.targetId)}).catch(Jh)):(Hg(r,i.targetId),await zg(r.localStore,i.targetId,!0))}async function $k(t,e){const n=Be(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),r2(n.remoteStore,r.targetId))}async function Qk(t,e,n){const r=r5(t);try{const i=await function(u,f){const d=Be(u),g=Xt.now(),w=f.reduce((T,O)=>T.add(O.key),Je());let x,_;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let O=js(),M=Je();return d.cs.getEntries(T,w).next(B=>{O=B,O.forEach((k,N)=>{N.isValidDocument()||(M=M.add(k))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,O)).next(B=>{x=B;const k=[];for(const N of f){const R=yM(N,x.get(N.key).overlayedDocument);R!=null&&k.push(new hl(N.key,R,bI(R.value.mapValue),es.exists(!0)))}return d.mutationQueue.addMutationBatch(T,g,k,f)}).next(B=>{_=B;const k=B.applyToLocalDocumentSet(x,M);return d.documentOverlayCache.saveOverlays(T,B.batchId,k)})}).then(()=>({batchId:_.batchId,changes:UI(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,f,d){let g=u.Ba[u.currentUser.toKey()];g||(g=new Qt(ut)),g=g.insert(f,d),u.Ba[u.currentUser.toKey()]=g}(r,i.batchId,n),await sf(r,i.changes),await a1(r.remoteStore)}catch(i){const o=l2(i,"Failed to persist write");n.reject(o)}}async function AS(t,e){const n=Be(t);try{const r=await hk(n.localStore,e);e.targetChanges.forEach((i,o)=>{const u=n.Na.get(o);u&&(gt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.va=!0:i.modifiedDocuments.size>0?gt(u.va):i.removedDocuments.size>0&&(gt(u.va),u.va=!1))}),await sf(n,r,e)}catch(r){await Jh(r)}}function zx(t,e,n){const r=Be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,u)=>{const f=u.view.Z_(e);f.snapshot&&i.push(f.snapshot)}),function(u,f){const d=Be(u);d.onlineState=f;let g=!1;d.queries.forEach((w,x)=>{for(const _ of x.j_)_.Z_(f)&&(g=!0)}),g&&u2(d)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yk(t,e,n){const r=Be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let u=new Qt(Oe.comparator);u=u.insert(o,tr.newNoDocument(o,Ue.min()));const f=Je().add(o),d=new i1(Ue.min(),new Map,new Qt(ut),u,f);await AS(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),c2(r)}else await zg(r.localStore,e,!1).then(()=>Hg(r,e,n)).catch(Jh)}async function Zk(t,e){const n=Be(t),r=e.batch.batchId;try{const i=await ck(n.localStore,e);TS(n,r,null),CS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sf(n,i)}catch(i){await Jh(i)}}async function Jk(t,e,n){const r=Be(t);try{const i=await function(u,f){const d=Be(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let w;return d.mutationQueue.lookupMutationBatch(g,f).next(x=>(gt(x!==null),w=x.keys(),d.mutationQueue.removeMutationBatch(g,x))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,w,f)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,w)).next(()=>d.localDocuments.getDocuments(g,w))})}(r.localStore,e);TS(r,e,n),CS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sf(r,i)}catch(i){await Jh(i)}}function CS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function TS(t,e,n){const r=Be(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Hg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||IS(t,r)})}function IS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(r2(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),c2(t))}function Wx(t,e,n){for(const r of n)r instanceof xS?(t.La.addReference(r.key,e),e5(t,r)):r instanceof ES?(Ie("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||IS(t,r.key)):Fe()}function e5(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ie("SyncEngine","New document in limbo: "+n),t.xa.add(r),c2(t))}function c2(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Oe(kt.fromString(e)),r=t.qa.next();t.Na.set(r,new Wk(n)),t.Oa=t.Oa.insert(n,r),hS(t.remoteStore,new No(Ji($y(n.path)),r,"TargetPurposeLimboResolution",Wy.oe))}}async function sf(t,e,n){const r=Be(t),i=[],o=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach((f,d)=>{u.push(r.Ka(d,e,n).then(g=>{var w;if((g||n)&&r.isPrimaryClient){const x=g?!g.fromCache:(w=n==null?void 0:n.targetChanges.get(d.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(d.targetId,x?"current":"not-current")}if(g){i.push(g);const x=n2.Wi(d.targetId,g);o.push(x)}}))}),await Promise.all(u),r.Ca.d_(i),await async function(d,g){const w=Be(d);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ce.forEach(g,_=>ce.forEach(_.$i,T=>w.persistence.referenceDelegate.addReference(x,_.targetId,T)).next(()=>ce.forEach(_.Ui,T=>w.persistence.referenceDelegate.removeReference(x,_.targetId,T)))))}catch(x){if(!ef(x))throw x;Ie("LocalStore","Failed to update sequence numbers: "+x)}for(const x of g){const _=x.targetId;if(!x.fromCache){const T=w.os.get(_),O=T.snapshotVersion,M=T.withLastLimboFreeSnapshotVersion(O);w.os=w.os.insert(_,M)}}}(r.localStore,o))}async function t5(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){Ie("SyncEngine","User change. New user:",e.toKey());const r=await aS(n.localStore,e);n.currentUser=e,function(o,u){o.ka.forEach(f=>{f.forEach(d=>{d.reject(new _e(le.CANCELLED,u))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sf(n,r.hs)}}function n5(t,e){const n=Be(t),r=n.Na.get(e);if(r&&r.va)return Je().add(r.key);{let i=Je();const o=n.Ma.get(e);if(!o)return i;for(const u of o){const f=n.Fa.get(u);i=i.unionWith(f.view.Va)}return i}}function SS(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yk.bind(null,e),e.Ca.d_=Vk.bind(null,e.eventManager),e.Ca.$a=Uk.bind(null,e.eventManager),e}function r5(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jk.bind(null,e),e}class f0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=s1(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return uk(this.persistence,new ak,e.initialUser,this.serializer)}Ga(e){return new ik(t2.Zr,this.serializer)}Wa(e){return new mk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}f0.provider={build:()=>new f0};class Gg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=t5.bind(null,this.syncEngine),await Lk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Bk}()}createDatastore(e){const n=s1(e.databaseInfo.databaseId),r=function(o){return new xk(o)}(e.databaseInfo);return function(o,u,f,d){return new Ak(o,u,f,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,u,f){return new Tk(r,i,o,u,f)}(this.localStore,this.datastore,e.asyncQueue,n=>zx(this.syncEngine,n,0),function(){return Fx.D()?new Fx:new yk}())}createSyncEngine(e,n){return function(i,o,u,f,d,g,w){const x=new Hk(i,o,u,f,d,g);return w&&(x.Qa=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Be(i);Ie("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await rf(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gg.provider={build:()=>new Gg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Us("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Jn.UNAUTHENTICATED,this.clientId=TI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{Ie("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(Ie("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=l2(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function fp(t,e){t.asyncQueue.verifyOperationInProgress(),Ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await aS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await s5(t);Ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Bx(e.remoteStore,i)),t._onlineComponents=e}async function s5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await fp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===le.FAILED_PRECONDITION||i.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Iu("Error using user provided cache. Falling back to memory cache: "+n),await fp(t,new f0)}}else Ie("FirestoreClient","Using default OfflineComponentProvider"),await fp(t,new f0);return t._offlineComponents}async function h2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie("FirestoreClient","Using user provided OnlineComponentProvider"),await Hx(t,t._uninitializedComponentsProvider._online)):(Ie("FirestoreClient","Using default OnlineComponentProvider"),await Hx(t,new Gg))),t._onlineComponents}function o5(t){return h2(t).then(e=>e.syncEngine)}function a5(t){return h2(t).then(e=>e.datastore)}async function RS(t){const e=await h2(t),n=e.eventManager;return n.onListen=Gk.bind(null,e.syncEngine),n.onUnlisten=Xk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Kk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$k.bind(null,e.syncEngine),n}function l5(t,e,n={}){const r=new Zi;return t.asyncQueue.enqueueAndForget(async()=>function(o,u,f,d,g){const w=new bS({next:_=>{w.Za(),u.enqueueAndForget(()=>wS(o,x));const T=_.docs.has(f);!T&&_.fromCache?g.reject(new _e(le.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&_.fromCache&&d&&d.source==="server"?g.reject(new _e(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(_)},error:_=>g.reject(_)}),x=new vS($y(f.path),w,{includeMetadataChanges:!0,_a:!0});return yS(o,x)}(await RS(t),t.asyncQueue,e,n,r)),r.promise}function u5(t,e,n={}){const r=new Zi;return t.asyncQueue.enqueueAndForget(async()=>function(o,u,f,d,g){const w=new bS({next:_=>{w.Za(),u.enqueueAndForget(()=>wS(o,x)),_.fromCache&&d.source==="server"?g.reject(new _e(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(_)},error:_=>g.reject(_)}),x=new vS(f,w,{includeMetadataChanges:!0,_a:!0});return yS(o,x)}(await RS(t),t.asyncQueue,e,n,r)),r.promise}function c5(t,e,n){const r=new Zi;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await a5(t);r.resolve(async function(u,f,d){var g;const w=Be(u),{request:x,ut:_,parent:T}=FM(w.serializer,rM(f),d);w.connection.Fo||delete x.parent;const O=(await w.Lo("RunAggregationQuery",w.serializer.databaseId,T,x,1)).filter(B=>!!B.result);gt(O.length===1);const M=(g=O[0].result)===null||g===void 0?void 0:g.aggregateFields;return Object.keys(M).reduce((B,k)=>(B[_[k]]=M[k],B),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t,e,n){if(!n)throw new _e(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function h5(t,e,n,r){if(e===!0&&r===!0)throw new _e(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Kx(t){if(!Oe.isDocumentKey(t))throw new _e(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qx(t){if(Oe.isDocumentKey(t))throw new _e(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function l1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe()}function zs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=l1(t);throw new _e(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _e(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class u1{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TD;switch(r.type){case"firstParty":return new RD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gx.get(n);r&&(Ie("ComponentProvider","Removing Datastore"),Gx.delete(n),r.terminate())}(this),Promise.resolve()}}function f5(t,e,n,r={}){var i;const o=(t=zs(t,u1))._getSettings(),u=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==u&&Iu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:u,ssl:!1})),r.mockUserToken){let f,d;if(typeof r.mockUserToken=="string")f=r.mockUserToken,d=Jn.MOCK_USER;else{f=J8(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new _e(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Jn(g)}t._authCredentials=new ID(new CI(f,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of=class OS{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new OS(this.firestore,e,this._query)}};class Rr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}}class Wo extends of{constructor(e,n,r){super(e,n,$y(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new Oe(e))}withConverter(e){return new Wo(this.firestore,e,this._path)}}function f2(t,e,...n){if(t=Kn(t),NS("collection","path",e),t instanceof u1){const r=kt.fromString(e,...n);return qx(r),new Wo(t,null,r)}{if(!(t instanceof Rr||t instanceof Wo))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return qx(r),new Wo(t.firestore,null,r)}}function il(t,e,...n){if(t=Kn(t),arguments.length===1&&(e=TI.newId()),NS("doc","path",e),t instanceof u1){const r=kt.fromString(e,...n);return Kx(r),new Rr(t,null,new Oe(r))}{if(!(t instanceof Rr||t instanceof Wo))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return Kx(r),new Rr(t.firestore,t instanceof Wo?t.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new uS(this,"async_queue_retry"),this.Vu=()=>{const r=hp();r&&Ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=hp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=hp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Zi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ef(e))throw e;Ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(u){let f=u.message||"";return u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),f}(r);throw Us("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=a2.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class $u extends u1{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $x,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $x(e),this._firestoreClient=void 0,await e}}}function d5(t,e){const n=typeof t=="object"?t:Ny(),r=typeof t=="string"?t:"(default)",i=$0(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=NT("firestore");o&&f5(i,...o)}return i}function c1(t){if(t._terminated)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||p5(t),t._firestoreClient}function p5(t){var e,n,r;const i=t._freezeSettings(),o=function(f,d,g,w){return new WD(f,d,g,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,PS(w.experimentalLongPollingOptions),w.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new i5(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(f){const d=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class m5{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ou(qn.fromBase64String(e))}catch(n){throw new _e(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ou(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=/^__.*__$/;class w5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hl(e,this.data,this.fieldMask,n,this.fieldTransforms):new tf(e,this.data,n,this.fieldTransforms)}}function MS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe()}}class m2{constructor(e,n,r,i,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new m2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return d0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(MS(this.Cu)&&y5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class v5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||s1(e)}Qu(e,n,r,i=!1){return new m2({Cu:e,methodName:n,qu:r,path:zn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function y2(t){const e=t._freezeSettings(),n=s1(t._databaseId);return new v5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kS(t,e,n,r,i,o={}){const u=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);BS("Data must be an object, but it was:",u,r);const f=LS(r,u);let d,g;if(o.merge)d=new Ci(u.fieldMask),g=u.fieldTransforms;else if(o.mergeFields){const w=[];for(const x of o.mergeFields){const _=E5(e,x,n);if(!u.contains(_))throw new _e(le.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);A5(w,_)||w.push(_)}d=new Ci(w),g=u.fieldTransforms.filter(x=>d.covers(x.field))}else d=null,g=u.fieldTransforms;return new w5(new ai(f),d,g)}function x5(t,e,n,r=!1){return w2(n,t.Qu(r?4:3,e))}function w2(t,e){if(FS(t=Kn(t)))return BS("Unsupported field value:",e,t),LS(t,e);if(t instanceof DS)return function(r,i){if(!MS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let u=0;for(const f of r){let d=w2(f,i.Lu(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Kn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Xt.fromDate(r);return{timestampValue:c0(i.serializer,o)}}if(r instanceof Xt){const o=new Xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:c0(i.serializer,o)}}if(r instanceof p2)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ou)return{bytesValue:JI(i.serializer,r._byteString)};if(r instanceof Rr){const o=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw i.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof g2)return function(u,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(d=>{if(typeof d!="number")throw f.Bu("VectorValues must only contain numeric values.");return Qy(f.serializer,d)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${l1(r)}`)}(t,e)}function LS(t,e){const n={};return II(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gu(t,(r,i)=>{const o=w2(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function FS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xt||t instanceof p2||t instanceof Ou||t instanceof Rr||t instanceof DS||t instanceof g2)}function BS(t,e,n){if(!FS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=l1(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function E5(t,e,n){if((e=Kn(e))instanceof d2)return e._internalPath;if(typeof e=="string")return VS(t,e);throw d0("Field path arguments must be of type string or ",t,!1,void 0,n)}const _5=new RegExp("[~\\*/\\[\\]]");function VS(t,e,n){if(e.search(_5)>=0)throw d0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new d2(...e.split("."))._internalPath}catch{throw d0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function d0(t,e,n,r,i){const o=r&&!r.isEmpty(),u=i!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${i}`),d+=")"),new _e(le.INVALID_ARGUMENT,f+t+d)}function A5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new C5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(v2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class C5 extends US{data(){return super.data()}}function v2(t,e){return typeof e=="string"?VS(t,e):e instanceof d2?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class x2{}class jS extends x2{}function I5(t,e,...n){let r=[];e instanceof x2&&r.push(e),r=r.concat(n),function(o){const u=o.filter(d=>d instanceof _2).length,f=o.filter(d=>d instanceof E2).length;if(u>1||u>0&&f>0)throw new _e(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class E2 extends jS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new E2(e,n,r)}_apply(e){const n=this._parse(e);return zS(e._query,n),new of(e.firestore,e.converter,Lg(e._query,n))}_parse(e){const n=y2(e.firestore);return function(o,u,f,d,g,w,x){let _;if(g.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new _e(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Yx(x,w);const T=[];for(const O of x)T.push(Qx(d,o,O));_={arrayValue:{values:T}}}else _=Qx(d,o,x)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Yx(x,w),_=x5(f,u,x,w==="in"||w==="not-in");return gn.create(g,w,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class _2 extends x2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ri.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let u=i;const f=o.getFlattenedFilters();for(const d of f)zS(u,d),u=Lg(u,d)}(e._query,n),new of(e.firestore,e.converter,Lg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class A2 extends jS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new A2(e,n)}_apply(e){const n=function(i,o,u){if(i.startAt!==null)throw new _e(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _e(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ch(o,u)}(e._query,this._field,this._direction);return new of(e.firestore,e.converter,function(i,o){const u=i.explicitOrderBy.concat([o]);return new Ku(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function S5(t,e="asc"){const n=e,r=v2("orderBy",t);return A2._create(r,n)}function Qx(t,e,n){if(typeof(n=Kn(n))=="string"){if(n==="")throw new _e(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kI(e)&&n.indexOf("/")!==-1)throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(kt.fromString(n));if(!Oe.isDocumentKey(r))throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wx(t,new Oe(r))}if(n instanceof Rr)return wx(t,n._key);throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${l1(n)}.`)}function Yx(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zS(t,e){const n=function(i,o){for(const u of i)for(const f of u.getFlattenedFilters())if(o.indexOf(f.op)>=0)return f.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _e(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class b5{convertValue(e,n="none"){switch(rl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(nl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gu(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(u=>un(u.doubleValue));return new g2(o)}convertGeoPoint(e){return new p2(un(e.latitude),un(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Eh(e));default:return null}}convertTimestamp(e){const n=Qo(e);return new Xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=kt.fromString(e);gt(oS(r));const i=new _h(r.get(1),r.get(3)),o=new Oe(r.popFirst(5));return i.isEqual(n)||Us(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function R5(){return new g5("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class HS extends US{constructor(e,n,r,i,o,u){super(e,n,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(v2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _d extends HS{data(e={}){return super.data(e)}}class P5{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _d(this._firestore,this._userDataWriter,r.key,r,new Pc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(f=>{const d=new _d(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Pc(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(f=>o||f.type!==3).map(f=>{const d=new _d(i._firestore,i._userDataWriter,f.doc.key,f.doc,new Pc(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,w=-1;return f.type!==0&&(g=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),w=u.indexOf(f.doc.key)),{type:N5(f.type),doc:d,oldIndex:g,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function N5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){t=zs(t,Rr);const e=zs(t.firestore,$u);return l5(c1(e),t._key).then(n=>M5(e,t,n))}class C2 extends b5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,n)}}function O5(t){t=zs(t,of);const e=zs(t.firestore,$u),n=c1(e),r=new C2(e);return T5(t._query),u5(n,t._query).then(i=>new P5(e,r,t,i))}function GS(t,e,n){t=zs(t,Rr);const r=zs(t.firestore,$u),i=WS(t.converter,e);return KS(r,[kS(y2(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,es.none())])}function D5(t,e){const n=zs(t.firestore,$u),r=il(t),i=WS(t.converter,e);return KS(n,[kS(y2(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,es.exists(!1))]).then(()=>r)}function KS(t,e){return function(r,i){const o=new Zi;return r.asyncQueue.enqueueAndForget(async()=>Qk(await o5(r),i,o)),o.promise}(c1(t),e)}function M5(t,e,n){const r=n.docs.get(e._key),i=new C2(t);return new HS(t,i,e._key,r,new Pc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t){return L5(t,{count:R5()})}function L5(t,e){const n=zs(t.firestore,$u),r=c1(n),i=jD(e,(o,u)=>new EM(u,o.aggregateType,o._internalFieldPath));return c5(r,t._query,i).then(o=>function(f,d,g){const w=new C2(f);return new m5(d,w,g)}(n,t,o))}(function(e,n=!0){(function(i){Hu=i})(zu),Ja(new qo("firestore",(r,{instanceIdentifier:i,options:o})=>{const u=r.getProvider("app").getImmediate(),f=new $u(new SD(r.getProvider("auth-internal")),new ND(r.getProvider("app-check-internal")),function(g,w){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new _e(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _h(g.options.projectId,w)}(u,i),u);return o=Object.assign({useFetchStreams:n},o),f._setSettings(o),f},"PUBLIC").setMultipleInstances(!0)),Qi(dx,"4.7.3",e),Qi(dx,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="type.googleapis.com/google.protobuf.Int64Value",B5="type.googleapis.com/google.protobuf.UInt64Value";function qS(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Kg(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Kg(e));if(typeof t=="function"||typeof t=="object")return qS(t,e=>Kg(e));throw new Error("Data cannot be encoded in JSON: "+t)}function p0(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case F5:case B5:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>p0(e)):typeof t=="function"||typeof t=="object"?qS(t,e=>p0(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class iu extends os{constructor(e,n,r){super(`${T2}/${e}`,n||""),this.details=r}}function V5(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function U5(t,e){let n=V5(t),r=n,i;try{const o=e&&e.error;if(o){const u=o.status;if(typeof u=="string"){if(!Zx[u])return new iu("internal","internal");n=Zx[u],r=u}const f=o.message;typeof f=="string"&&(r=f),i=o.details,i!==void 0&&(i=p0(i))}}catch{}return n==="ok"?null:new iu(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="us-central1";function z5(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new iu("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class W5{constructor(e,n,r,i,o=qg,u){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new j5(n,r,i),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(o);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=qg}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function H5(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function G5(t,e,n){return r=>q5(t,e,r,{})}async function K5(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}function q5(t,e,n,r){const i=t._url(e);return X5(t,i,n,r)}async function X5(t,e,n,r){n=Kg(n);const i={data:n},o={},u=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);u.authToken&&(o.Authorization="Bearer "+u.authToken),u.messagingToken&&(o["Firebase-Instance-ID-Token"]=u.messagingToken),u.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=u.appCheckToken);const f=r.timeout||7e4,d=z5(f),g=await Promise.race([K5(e,i,o,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!g)throw new iu("cancelled","Firebase Functions instance was deleted.");const w=U5(g.status,g.json);if(w)throw w;if(!g.json)throw new iu("internal","Response is not valid JSON object.");let x=g.json.data;if(typeof x>"u"&&(x=g.json.result),typeof x>"u")throw new iu("internal","Response is missing data field.");return{data:p0(x)}}const Jx="@firebase/functions",eE="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="auth-internal",Q5="app-check-internal",Y5="messaging-internal";function Z5(t,e){const n=(r,{instanceIdentifier:i})=>{const o=r.getProvider("app").getImmediate(),u=r.getProvider($5),f=r.getProvider(Y5),d=r.getProvider(Q5);return new W5(o,u,f,d,i,t)};Ja(new qo(T2,n,"PUBLIC").setMultipleInstances(!0)),Qi(Jx,eE,e),Qi(Jx,eE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(t=Ny(),e=qg){const r=$0(Kn(t),T2).getImmediate({identifier:e}),i=NT("functions");return i&&e9(r,...i),r}function e9(t,e,n){H5(Kn(t),e,n)}function t9(t,e,n){return G5(Kn(t),e)}Z5(fetch.bind(self));const n9={apiKey:"AIzaSyCq3T71I77Rdw7SF8sg-X-zPbDf3AbO2ME",authDomain:"fic-2025-sorteio.firebaseapp.com",projectId:"fic-2025-sorteio",storageBucket:"fic-2025-sorteio.firebasestorage.app",messagingSenderId:"678204221121",appId:"1:678204221121:web:ce4d79f0e4d90b75905640"},I2=LT(n9),af=ED(I2),Ps=d5(I2),r9=J5(I2),i9=new As,XS=({children:t})=>ae.jsxs("div",{className:"min-h-screen bg-secondary text-gray-800 flex flex-col items-center p-4",children:[ae.jsx("header",{className:"w-full max-w-md mb-8 text-center",children:ae.jsx("h1",{className:"text-4xl font-bold text-primary",children:"Fair Passport"})}),ae.jsx("main",{className:"w-full max-w-md",children:t})]});function $S(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=$S(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function s9(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=$S(t))&&(r&&(r+=" "),r+=e);return r}const S2="-",o9=t=>{const e=l9(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:u=>{const f=u.split(S2);return f[0]===""&&f.length!==1&&f.shift(),QS(f,e)||a9(u)},getConflictingClassGroupIds:(u,f)=>{const d=n[u]||[];return f&&r[u]?[...d,...r[u]]:d}}},QS=(t,e)=>{var u;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?QS(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(S2);return(u=e.validators.find(({validator:f})=>f(o)))==null?void 0:u.classGroupId},tE=/^\[(.+)\]$/,a9=t=>{if(tE.test(t)){const e=tE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},l9=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return c9(Object.entries(t.classGroups),n).forEach(([o,u])=>{Xg(u,r,o,e)}),r},Xg=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:nE(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(u9(i)){Xg(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,u])=>{Xg(u,nE(e,o),n,r)})})},nE=(t,e)=>{let n=t;return e.split(S2).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},u9=t=>t.isThemeGetter,c9=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([u,f])=>[e+u,f])):o);return[n,i]}):t,h9=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,u)=>{n.set(o,u),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let u=n.get(o);if(u!==void 0)return u;if((u=r.get(o))!==void 0)return i(o,u),u},set(o,u){n.has(o)?n.set(o,u):i(o,u)}}},YS="!",f9=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,u=f=>{const d=[];let g=0,w=0,x;for(let B=0;B<f.length;B++){let k=f[B];if(g===0){if(k===i&&(r||f.slice(B,B+o)===e)){d.push(f.slice(w,B)),w=B+o;continue}if(k==="/"){x=B;continue}}k==="["?g++:k==="]"&&g--}const _=d.length===0?f:f.substring(w),T=_.startsWith(YS),O=T?_.substring(1):_,M=x&&x>w?x-w:void 0;return{modifiers:d,hasImportantModifier:T,baseClassName:O,maybePostfixModifierPosition:M}};return n?f=>n({className:f,parseClassName:u}):u},d9=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},p9=t=>({cache:h9(t.cacheSize),parseClassName:f9(t),...o9(t)}),g9=/\s+/,m9=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],u=t.trim().split(g9);let f="";for(let d=u.length-1;d>=0;d-=1){const g=u[d],{modifiers:w,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:T}=n(g);let O=!!T,M=r(O?_.substring(0,T):_);if(!M){if(!O){f=g+(f.length>0?" "+f:f);continue}if(M=r(_),!M){f=g+(f.length>0?" "+f:f);continue}O=!1}const B=d9(w).join(":"),k=x?B+YS:B,N=k+M;if(o.includes(N))continue;o.push(N);const R=i(M,O);for(let z=0;z<R.length;++z){const Q=R[z];o.push(k+Q)}f=g+(f.length>0?" "+f:f)}return f};function y9(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ZS(e))&&(r&&(r+=" "),r+=n);return r}const ZS=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ZS(t[r]))&&(n&&(n+=" "),n+=e);return n};function w9(t,...e){let n,r,i,o=u;function u(d){const g=e.reduce((w,x)=>x(w),t());return n=p9(g),r=n.cache.get,i=n.cache.set,o=f,f(d)}function f(d){const g=r(d);if(g)return g;const w=m9(d,n);return i(d,w),w}return function(){return o(y9.apply(null,arguments))}}const Ot=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},JS=/^\[(?:([a-z-]+):)?(.+)\]$/i,v9=/^\d+\/\d+$/,x9=new Set(["px","full","screen"]),E9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,A9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ds=t=>su(t)||x9.has(t)||v9.test(t),so=t=>Qu(t,"length",D9),su=t=>!!t&&!Number.isNaN(Number(t)),dp=t=>Qu(t,"number",su),xc=t=>!!t&&Number.isInteger(Number(t)),I9=t=>t.endsWith("%")&&su(t.slice(0,-1)),He=t=>JS.test(t),oo=t=>E9.test(t),S9=new Set(["length","size","percentage"]),b9=t=>Qu(t,S9,e3),R9=t=>Qu(t,"position",e3),P9=new Set(["image","url"]),N9=t=>Qu(t,P9,k9),O9=t=>Qu(t,"",M9),Ec=()=>!0,Qu=(t,e,n)=>{const r=JS.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},D9=t=>_9.test(t)&&!A9.test(t),e3=()=>!1,M9=t=>C9.test(t),k9=t=>T9.test(t),L9=()=>{const t=Ot("colors"),e=Ot("spacing"),n=Ot("blur"),r=Ot("brightness"),i=Ot("borderColor"),o=Ot("borderRadius"),u=Ot("borderSpacing"),f=Ot("borderWidth"),d=Ot("contrast"),g=Ot("grayscale"),w=Ot("hueRotate"),x=Ot("invert"),_=Ot("gap"),T=Ot("gradientColorStops"),O=Ot("gradientColorStopPositions"),M=Ot("inset"),B=Ot("margin"),k=Ot("opacity"),N=Ot("padding"),R=Ot("saturate"),z=Ot("scale"),Q=Ot("sepia"),Z=Ot("skew"),L=Ot("space"),P=Ot("translate"),F=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto",He,e],G=()=>[He,e],H=()=>["",ds,so],We=()=>["auto",su,He],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ct=()=>["solid","dashed","dotted","double","none"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],de=()=>["start","end","center","between","around","evenly","stretch"],Ce=()=>["","0",He],be=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$e=()=>[su,He];return{cacheSize:500,separator:":",theme:{colors:[Ec],spacing:[ds,so],blur:["none","",oo,He],brightness:$e(),borderColor:[t],borderRadius:["none","","full",oo,He],borderSpacing:G(),borderWidth:H(),contrast:$e(),grayscale:Ce(),hueRotate:$e(),invert:Ce(),gap:G(),gradientColorStops:[t],gradientColorStopPositions:[I9,so],inset:K(),margin:K(),opacity:$e(),padding:G(),saturate:$e(),scale:$e(),sepia:Ce(),skew:$e(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[oo]}],"break-after":[{"break-after":be()}],"break-before":[{"break-before":be()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),He]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[M]}],"inset-x":[{"inset-x":[M]}],"inset-y":[{"inset-y":[M]}],start:[{start:[M]}],end:[{end:[M]}],top:[{top:[M]}],right:[{right:[M]}],bottom:[{bottom:[M]}],left:[{left:[M]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xc,He]}],basis:[{basis:K()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:Ce()}],shrink:[{shrink:Ce()}],order:[{order:["first","last","none",xc,He]}],"grid-cols":[{"grid-cols":[Ec]}],"col-start-end":[{col:["auto",{span:["full",xc,He]},He]}],"col-start":[{"col-start":We()}],"col-end":[{"col-end":We()}],"grid-rows":[{"grid-rows":[Ec]}],"row-start-end":[{row:["auto",{span:[xc,He]},He]}],"row-start":[{"row-start":We()}],"row-end":[{"row-end":We()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[_]}],"gap-x":[{"gap-x":[_]}],"gap-y":[{"gap-y":[_]}],"justify-content":[{justify:["normal",...de()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...de(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...de(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[B]}],mx:[{mx:[B]}],my:[{my:[B]}],ms:[{ms:[B]}],me:[{me:[B]}],mt:[{mt:[B]}],mr:[{mr:[B]}],mb:[{mb:[B]}],ml:[{ml:[B]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,e]}],"min-w":[{"min-w":[He,e,"min","max","fit"]}],"max-w":[{"max-w":[He,e,"none","full","min","max","fit","prose",{screen:[oo]},oo]}],h:[{h:[He,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,e,"auto","min","max","fit"]}],"font-size":[{text:["base",oo,so]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dp]}],"font-family":[{font:[Ec]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",su,dp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ds,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ct(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ds,so]}],"underline-offset":[{"underline-offset":["auto",ds,He]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),R9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",b9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},N9]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[O]}],"gradient-via-pos":[{via:[O]}],"gradient-to-pos":[{to:[O]}],"gradient-from":[{from:[T]}],"gradient-via":[{via:[T]}],"gradient-to":[{to:[T]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[f]}],"border-w-x":[{"border-x":[f]}],"border-w-y":[{"border-y":[f]}],"border-w-s":[{"border-s":[f]}],"border-w-e":[{"border-e":[f]}],"border-w-t":[{"border-t":[f]}],"border-w-r":[{"border-r":[f]}],"border-w-b":[{"border-b":[f]}],"border-w-l":[{"border-l":[f]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...ct(),"hidden"]}],"divide-x":[{"divide-x":[f]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[f]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:ct()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ct()]}],"outline-offset":[{"outline-offset":[ds,He]}],"outline-w":[{outline:[ds,so]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[ds,so]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",oo,O9]}],"shadow-color":[{shadow:[Ec]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...ve(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ve()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",oo,He]}],grayscale:[{grayscale:[g]}],"hue-rotate":[{"hue-rotate":[w]}],invert:[{invert:[x]}],saturate:[{saturate:[R]}],sepia:[{sepia:[Q]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[g]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[w]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[Q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[u]}],"border-spacing-x":[{"border-spacing-x":[u]}],"border-spacing-y":[{"border-spacing-y":[u]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:$e()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:$e()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[z]}],"scale-x":[{"scale-x":[z]}],"scale-y":[{"scale-y":[z]}],rotate:[{rotate:[xc,He]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[Z]}],"skew-y":[{"skew-y":[Z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ds,so,dp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},F9=w9(L9);function b2(...t){return F9(s9(t))}const ou=({className:t,children:e,...n})=>ae.jsx("div",{className:b2("bg-white rounded-lg shadow-md p-6",t),...n,children:e}),$g=ln.forwardRef(({className:t,...e},n)=>ae.jsx("input",{ref:n,className:b2("w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent",t),...e})),R2=Y.createContext({});function P2(t){const e=Y.useRef(null);return e.current===null&&(e.current=t()),e.current}const h1=Y.createContext(null),N2=Y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class B9 extends Y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function V9({children:t,isPresent:e}){const n=Y.useId(),r=Y.useRef(null),i=Y.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=Y.useContext(N2);return Y.useInsertionEffect(()=>{const{width:u,height:f,top:d,left:g}=i.current;if(e||!r.current||!u||!f)return;r.current.dataset.motionPopId=n;const w=document.createElement("style");return o&&(w.nonce=o),document.head.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            top: ${d}px !important;
            left: ${g}px !important;
          }
        `),()=>{document.head.removeChild(w)}},[e]),ae.jsx(B9,{isPresent:e,childRef:r,sizeRef:i,children:Y.cloneElement(t,{ref:r})})}const U9=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:u})=>{const f=P2(j9),d=Y.useId(),g=Y.useCallback(x=>{f.set(x,!0);for(const _ of f.values())if(!_)return;r&&r()},[f,r]),w=Y.useMemo(()=>({id:d,initial:e,isPresent:n,custom:i,onExitComplete:g,register:x=>(f.set(x,!1),()=>f.delete(x))}),o?[Math.random(),g]:[n,g]);return Y.useMemo(()=>{f.forEach((x,_)=>f.set(_,!1))},[n]),Y.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),u==="popLayout"&&(t=ae.jsx(V9,{isPresent:n,children:t})),ae.jsx(h1.Provider,{value:w,children:t})};function j9(){return new Map}function t3(t=!0){const e=Y.useContext(h1);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=Y.useId();Y.useEffect(()=>{t&&i(o)},[t]);const u=Y.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,u]:[!0]}const $f=t=>t.key||"";function rE(t){const e=[];return Y.Children.forEach(t,n=>{Y.isValidElement(n)&&e.push(n)}),e}const O2=typeof window<"u",n3=O2?Y.useLayoutEffect:Y.useEffect,z9=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:u=!1})=>{const[f,d]=t3(u),g=Y.useMemo(()=>rE(t),[t]),w=u&&!f?[]:g.map($f),x=Y.useRef(!0),_=Y.useRef(g),T=P2(()=>new Map),[O,M]=Y.useState(g),[B,k]=Y.useState(g);n3(()=>{x.current=!1,_.current=g;for(let z=0;z<B.length;z++){const Q=$f(B[z]);w.includes(Q)?T.delete(Q):T.get(Q)!==!0&&T.set(Q,!1)}},[B,w.length,w.join("-")]);const N=[];if(g!==O){let z=[...g];for(let Q=0;Q<B.length;Q++){const Z=B[Q],L=$f(Z);w.includes(L)||(z.splice(Q,0,Z),N.push(Z))}o==="wait"&&N.length&&(z=N),k(rE(z)),M(g);return}const{forceRender:R}=Y.useContext(R2);return ae.jsx(ae.Fragment,{children:B.map(z=>{const Q=$f(z),Z=u&&!f?!1:g===B||w.includes(Q),L=()=>{if(T.has(Q))T.set(Q,!0);else return;let P=!0;T.forEach(F=>{F||(P=!1)}),P&&(R==null||R(),k(_.current),u&&(d==null||d()),r&&r())};return ae.jsx(U9,{isPresent:Z,initial:!x.current||n?void 0:!1,custom:Z?void 0:e,presenceAffectsLayout:i,mode:o,onExitComplete:Z?void 0:L,children:z},Q)})})},Kr=t=>t;let r3=Kr;function D2(t){let e;return()=>(e===void 0&&(e=t()),e)}const Du=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Ns=t=>t*1e3,Os=t=>t/1e3,W9={useManualTiming:!1};function H9(t){let e=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function f(g){o.has(g)&&(d.schedule(g),t()),g(u)}const d={schedule:(g,w=!1,x=!1)=>{const T=x&&r?e:n;return w&&o.add(g),T.has(g)||T.add(g),g},cancel:g=>{n.delete(g),o.delete(g)},process:g=>{if(u=g,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(f),e.clear(),r=!1,i&&(i=!1,d.process(g))}};return d}const Qf=["read","resolveKeyframes","update","preRender","render","postRender"],G9=40;function i3(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,u=Qf.reduce((k,N)=>(k[N]=H9(o),k),{}),{read:f,resolveKeyframes:d,update:g,preRender:w,render:x,postRender:_}=u,T=()=>{const k=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,G9),1),i.timestamp=k,i.isProcessing=!0,f.process(i),d.process(i),g.process(i),w.process(i),x.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(T))},O=()=>{n=!0,r=!0,i.isProcessing||t(T)};return{schedule:Qf.reduce((k,N)=>{const R=u[N];return k[N]=(z,Q=!1,Z=!1)=>(n||O(),R.schedule(z,Q,Z)),k},{}),cancel:k=>{for(let N=0;N<Qf.length;N++)u[Qf[N]].cancel(k)},state:i,steps:u}}const{schedule:Ft,cancel:Zo,state:Un,steps:pp}=i3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Kr,!0),s3=Y.createContext({strict:!1}),iE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Mu={};for(const t in iE)Mu[t]={isEnabled:e=>iE[t].some(n=>!!e[n])};function K9(t){for(const e in t)Mu[e]={...Mu[e],...t[e]}}const q9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function g0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||q9.has(t)}let o3=t=>!g0(t);function X9(t){t&&(o3=e=>e.startsWith("on")?!g0(e):t(e))}try{X9(require("@emotion/is-prop-valid").default)}catch{}function $9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(o3(i)||n===!0&&g0(i)||!e&&!g0(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Q9(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const f1=Y.createContext({});function bh(t){return typeof t=="string"||Array.isArray(t)}function d1(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const M2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],k2=["initial",...M2];function p1(t){return d1(t.animate)||k2.some(e=>bh(t[e]))}function a3(t){return!!(p1(t)||t.variants)}function Y9(t,e){if(p1(t)){const{initial:n,animate:r}=t;return{initial:n===!1||bh(n)?n:void 0,animate:bh(r)?r:void 0}}return t.inherit!==!1?e:{}}function Z9(t){const{initial:e,animate:n}=Y9(t,Y.useContext(f1));return Y.useMemo(()=>({initial:e,animate:n}),[sE(e),sE(n)])}function sE(t){return Array.isArray(t)?t.join(" "):t}const J9=Symbol.for("motionComponentSymbol");function jl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function e7(t,e,n){return Y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):jl(n)&&(n.current=r))},[e])}const L2=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),t7="framerAppearId",l3="data-"+L2(t7),{schedule:F2}=i3(queueMicrotask,!1),u3=Y.createContext({});function n7(t,e,n,r,i){var o,u;const{visualElement:f}=Y.useContext(f1),d=Y.useContext(s3),g=Y.useContext(h1),w=Y.useContext(N2).reducedMotion,x=Y.useRef(null);r=r||d.renderer,!x.current&&r&&(x.current=r(t,{visualState:e,parent:f,props:n,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:w}));const _=x.current,T=Y.useContext(u3);_&&!_.projection&&i&&(_.type==="html"||_.type==="svg")&&r7(x.current,n,i,T);const O=Y.useRef(!1);Y.useInsertionEffect(()=>{_&&O.current&&_.update(n,g)});const M=n[l3],B=Y.useRef(!!M&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,M))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,M)));return n3(()=>{_&&(O.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),F2.render(_.render),B.current&&_.animationState&&_.animationState.animateChanges())}),Y.useEffect(()=>{_&&(!B.current&&_.animationState&&_.animationState.animateChanges(),B.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,M)}),B.current=!1))}),_}function r7(t,e,n,r){const{layoutId:i,layout:o,drag:u,dragConstraints:f,layoutScroll:d,layoutRoot:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:c3(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!u||f&&jl(f),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:g})}function c3(t){if(t)return t.options.allowProjection!==!1?t.projection:c3(t.parent)}function i7({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var o,u;t&&K9(t);function f(g,w){let x;const _={...Y.useContext(N2),...g,layoutId:s7(g)},{isStatic:T}=_,O=Z9(g),M=r(g,T);if(!T&&O2){o7();const B=a7(_);x=B.MeasureLayout,O.visualElement=n7(i,M,_,e,B.ProjectionNode)}return ae.jsxs(f1.Provider,{value:O,children:[x&&O.visualElement?ae.jsx(x,{visualElement:O.visualElement,..._}):null,n(i,g,e7(M,O.visualElement,w),M,T,O.visualElement)]})}f.displayName=`motion.${typeof i=="string"?i:`create(${(u=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&u!==void 0?u:""})`}`;const d=Y.forwardRef(f);return d[J9]=i,d}function s7({layoutId:t}){const e=Y.useContext(R2).id;return e&&t!==void 0?e+"-"+t:t}function o7(t,e){Y.useContext(s3).strict}function a7(t){const{drag:e,layout:n}=Mu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const l7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function B2(t){return typeof t!="string"||t.includes("-")?!1:!!(l7.indexOf(t)>-1||/[A-Z]/u.test(t))}function oE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function V2(t,e,n,r){if(typeof e=="function"){const[i,o]=oE(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=oE(r);e=e(n!==void 0?n:t.custom,i,o)}return e}const Qg=t=>Array.isArray(t),u7=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),c7=t=>Qg(t)?t[t.length-1]||0:t,nr=t=>!!(t&&t.getVelocity);function Ad(t){const e=nr(t)?t.get():t;return u7(e)?e.toValue():e}function h7({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,o){const u={latestValues:f7(r,i,o,t),renderState:e()};return n&&(u.onMount=f=>n({props:r,current:f,...u}),u.onUpdate=f=>n(f)),u}const h3=t=>(e,n)=>{const r=Y.useContext(f1),i=Y.useContext(h1),o=()=>h7(t,e,r,i);return n?o():P2(o)};function f7(t,e,n,r){const i={},o=r(t,{});for(const _ in o)i[_]=Ad(o[_]);let{initial:u,animate:f}=t;const d=p1(t),g=a3(t);e&&g&&!d&&t.inherit!==!1&&(u===void 0&&(u=e.initial),f===void 0&&(f=e.animate));let w=n?n.initial===!1:!1;w=w||u===!1;const x=w?f:u;if(x&&typeof x!="boolean"&&!d1(x)){const _=Array.isArray(x)?x:[x];for(let T=0;T<_.length;T++){const O=V2(t,_[T]);if(O){const{transitionEnd:M,transition:B,...k}=O;for(const N in k){let R=k[N];if(Array.isArray(R)){const z=w?R.length-1:0;R=R[z]}R!==null&&(i[N]=R)}for(const N in M)i[N]=M[N]}}}return i}const Yu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dl=new Set(Yu),f3=t=>e=>typeof e=="string"&&e.startsWith(t),d3=f3("--"),d7=f3("var(--"),U2=t=>d7(t)?p7.test(t.split("/*")[0].trim()):!1,p7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,p3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ws=(t,e,n)=>n>e?e:n<t?t:n,Zu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Rh={...Zu,transform:t=>Ws(0,1,t)},Yf={...Zu,default:1},lf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ao=lf("deg"),ns=lf("%"),Me=lf("px"),g7=lf("vh"),m7=lf("vw"),aE={...ns,parse:t=>ns.parse(t)/100,transform:t=>ns.transform(t*100)},y7={borderWidth:Me,borderTopWidth:Me,borderRightWidth:Me,borderBottomWidth:Me,borderLeftWidth:Me,borderRadius:Me,radius:Me,borderTopLeftRadius:Me,borderTopRightRadius:Me,borderBottomRightRadius:Me,borderBottomLeftRadius:Me,width:Me,maxWidth:Me,height:Me,maxHeight:Me,top:Me,right:Me,bottom:Me,left:Me,padding:Me,paddingTop:Me,paddingRight:Me,paddingBottom:Me,paddingLeft:Me,margin:Me,marginTop:Me,marginRight:Me,marginBottom:Me,marginLeft:Me,backgroundPositionX:Me,backgroundPositionY:Me},w7={rotate:ao,rotateX:ao,rotateY:ao,rotateZ:ao,scale:Yf,scaleX:Yf,scaleY:Yf,scaleZ:Yf,skew:ao,skewX:ao,skewY:ao,distance:Me,translateX:Me,translateY:Me,translateZ:Me,x:Me,y:Me,z:Me,perspective:Me,transformPerspective:Me,opacity:Rh,originX:aE,originY:aE,originZ:Me},lE={...Zu,transform:Math.round},j2={...y7,...w7,zIndex:lE,size:Me,fillOpacity:Rh,strokeOpacity:Rh,numOctaves:lE},v7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},x7=Yu.length;function E7(t,e,n){let r="",i=!0;for(let o=0;o<x7;o++){const u=Yu[o],f=t[u];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(u.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||n){const g=p3(f,j2[u]);if(!d){i=!1;const w=v7[u]||u;r+=`${w}(${g}) `}n&&(e[u]=g)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function z2(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let u=!1,f=!1;for(const d in e){const g=e[d];if(dl.has(d)){u=!0;continue}else if(d3(d)){i[d]=g;continue}else{const w=p3(g,j2[d]);d.startsWith("origin")?(f=!0,o[d]=w):r[d]=w}}if(e.transform||(u||n?r.transform=E7(e,t.transform,n):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:g="50%",originZ:w=0}=o;r.transformOrigin=`${d} ${g} ${w}`}}const _7={offset:"stroke-dashoffset",array:"stroke-dasharray"},A7={offset:"strokeDashoffset",array:"strokeDasharray"};function C7(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?_7:A7;t[o.offset]=Me.transform(-r);const u=Me.transform(e),f=Me.transform(n);t[o.array]=`${u} ${f}`}function uE(t,e,n){return typeof t=="string"?t:Me.transform(e+n*t)}function T7(t,e,n){const r=uE(e,t.x,t.width),i=uE(n,t.y,t.height);return`${r} ${i}`}function W2(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:u,pathSpacing:f=1,pathOffset:d=0,...g},w,x){if(z2(t,g,x),w){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:T,dimensions:O}=t;_.transform&&(O&&(T.transform=_.transform),delete _.transform),O&&(i!==void 0||o!==void 0||T.transform)&&(T.transformOrigin=T7(O,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),r!==void 0&&(_.scale=r),u!==void 0&&C7(_,u,f,d,!1)}const H2=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),g3=()=>({...H2(),attrs:{}}),G2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function m3(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const y3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function w3(t,e,n,r){m3(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(y3.has(i)?i:L2(i),e.attrs[i])}const m0={};function I7(t){Object.assign(m0,t)}function v3(t,{layout:e,layoutId:n}){return dl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!m0[t]||t==="opacity")}function K2(t,e,n){var r;const{style:i}=t,o={};for(const u in i)(nr(i[u])||e.style&&nr(e.style[u])||v3(u,t)||((r=n==null?void 0:n.getValue(u))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[u]=i[u]);return o}function x3(t,e,n){const r=K2(t,e,n);for(const i in t)if(nr(t[i])||nr(e[i])){const o=Yu.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function S7(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const cE=["x","y","width","height","cx","cy","r"],b7={useVisualState:h3({scrapeMotionValuesFromProps:x3,createRenderState:g3,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let o=!!t.drag;if(!o){for(const f in i)if(dl.has(f)){o=!0;break}}if(!o)return;let u=!e;if(e)for(let f=0;f<cE.length;f++){const d=cE[f];t[d]!==e[d]&&(u=!0)}u&&Ft.read(()=>{S7(n,r),Ft.render(()=>{W2(r,i,G2(n.tagName),t.transformTemplate),w3(n,r)})})}})},R7={useVisualState:h3({scrapeMotionValuesFromProps:K2,createRenderState:H2})};function E3(t,e,n){for(const r in e)!nr(e[r])&&!v3(r,n)&&(t[r]=e[r])}function P7({transformTemplate:t},e){return Y.useMemo(()=>{const n=H2();return z2(n,e,t),Object.assign({},n.vars,n.style)},[e])}function N7(t,e){const n=t.style||{},r={};return E3(r,n,t),Object.assign(r,P7(t,e)),r}function O7(t,e){const n={},r=N7(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function D7(t,e,n,r){const i=Y.useMemo(()=>{const o=g3();return W2(o,e,G2(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};E3(o,t.style,t),i.style={...o,...i.style}}return i}function M7(t=!1){return(n,r,i,{latestValues:o},u)=>{const d=(B2(n)?D7:O7)(r,o,u,n),g=$9(r,typeof n=="string",t),w=n!==Y.Fragment?{...g,...d,ref:i}:{},{children:x}=r,_=Y.useMemo(()=>nr(x)?x.get():x,[x]);return Y.createElement(n,{...w,children:_})}}function k7(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const u={...B2(r)?b7:R7,preloadedFeatures:t,useRender:M7(i),createVisualElement:e,Component:r};return i7(u)}}function _3(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function g1(t,e,n){const r=t.getProps();return V2(r,e,n!==void 0?n:r.custom,t)}const L7=D2(()=>window.ScrollTimeline!==void 0);class F7{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(L7()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class B7 extends F7{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function q2(t,e){return t?t[e]||t.default||t:void 0}const Yg=2e4;function A3(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Yg;)e+=n,r=t.next(e);return e>=Yg?1/0:e}function X2(t){return typeof t=="function"}function hE(t,e){t.timeline=e,t.onfinish=null}const $2=t=>Array.isArray(t)&&typeof t[0]=="number",V7={linearEasing:void 0};function U7(t,e){const n=D2(t);return()=>{var r;return(r=V7[e])!==null&&r!==void 0?r:n()}}const y0=U7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),C3=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=t(Du(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function T3(t){return!!(typeof t=="function"&&y0()||!t||typeof t=="string"&&(t in Zg||y0())||$2(t)||Array.isArray(t)&&t.every(T3))}const Nc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Zg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nc([0,.65,.55,1]),circOut:Nc([.55,0,1,.45]),backIn:Nc([.31,.01,.66,-.59]),backOut:Nc([.33,1.53,.69,.99])};function I3(t,e){if(t)return typeof t=="function"&&y0()?C3(t,e):$2(t)?Nc(t):Array.isArray(t)?t.map(n=>I3(n,e)||Zg.easeOut):Zg[t]}const wi={x:!1,y:!1};function S3(){return wi.x||wi.y}function j7(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const o=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function b3(t,e){const n=j7(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function fE(t){return e=>{e.pointerType==="touch"||S3()||t(e)}}function z7(t,e,n={}){const[r,i,o]=b3(t,n),u=fE(f=>{const{target:d}=f,g=e(f);if(typeof g!="function"||!d)return;const w=fE(x=>{g(x),d.removeEventListener("pointerleave",w)});d.addEventListener("pointerleave",w,i)});return r.forEach(f=>{f.addEventListener("pointerenter",u,i)}),o}const R3=(t,e)=>e?t===e?!0:R3(t,e.parentElement):!1,Q2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,W7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function H7(t){return W7.has(t.tagName)||t.tabIndex!==-1}const Oc=new WeakSet;function dE(t){return e=>{e.key==="Enter"&&t(e)}}function gp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const G7=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=dE(()=>{if(Oc.has(n))return;gp(n,"down");const i=dE(()=>{gp(n,"up")}),o=()=>gp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function pE(t){return Q2(t)&&!S3()}function K7(t,e,n={}){const[r,i,o]=b3(t,n),u=f=>{const d=f.currentTarget;if(!pE(f)||Oc.has(d))return;Oc.add(d);const g=e(f),w=(T,O)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",_),!(!pE(T)||!Oc.has(d))&&(Oc.delete(d),typeof g=="function"&&g(T,{success:O}))},x=T=>{w(T,n.useGlobalTarget||R3(d,T.target))},_=T=>{w(T,!1)};window.addEventListener("pointerup",x,i),window.addEventListener("pointercancel",_,i)};return r.forEach(f=>{!H7(f)&&f.getAttribute("tabindex")===null&&(f.tabIndex=0),(n.useGlobalTarget?window:f).addEventListener("pointerdown",u,i),f.addEventListener("focus",g=>G7(g,i),i)}),o}function q7(t){return t==="x"||t==="y"?wi[t]?null:(wi[t]=!0,()=>{wi[t]=!1}):wi.x||wi.y?null:(wi.x=wi.y=!0,()=>{wi.x=wi.y=!1})}const P3=new Set(["width","height","top","left","right","bottom",...Yu]);let Cd;function X7(){Cd=void 0}const rs={now:()=>(Cd===void 0&&rs.set(Un.isProcessing||W9.useManualTiming?Un.timestamp:performance.now()),Cd),set:t=>{Cd=t,queueMicrotask(X7)}};function Y2(t,e){t.indexOf(e)===-1&&t.push(e)}function Z2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class J2{constructor(){this.subscriptions=[]}add(e){return Y2(this.subscriptions,e),()=>Z2(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function N3(t,e){return e?t*(1e3/e):0}const gE=30,$7=t=>!isNaN(parseFloat(t));class Q7{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=rs.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=rs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new J2);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ft.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=rs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,gE);return N3(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ph(t,e){return new Q7(t,e)}function Y7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ph(n))}function Z7(t,e){const n=g1(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const u in o){const f=c7(o[u]);Y7(t,u,f)}}function J7(t){return!!(nr(t)&&t.add)}function Jg(t,e){const n=t.getValue("willChange");if(J7(n))return n.add(e)}function O3(t){return t.props[l3]}const D3=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,eL=1e-7,tL=12;function nL(t,e,n,r,i){let o,u,f=0;do u=e+(n-e)/2,o=D3(u,r,i)-t,o>0?n=u:e=u;while(Math.abs(o)>eL&&++f<tL);return u}function uf(t,e,n,r){if(t===e&&n===r)return Kr;const i=o=>nL(o,0,1,t,n);return o=>o===0||o===1?o:D3(i(o),e,r)}const M3=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,k3=t=>e=>1-t(1-e),L3=uf(.33,1.53,.69,.99),ew=k3(L3),F3=M3(ew),B3=t=>(t*=2)<1?.5*ew(t):.5*(2-Math.pow(2,-10*(t-1))),tw=t=>1-Math.sin(Math.acos(t)),V3=k3(tw),U3=M3(tw),j3=t=>/^0[^.\s]+$/u.test(t);function rL(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||j3(t):!0}const $c=t=>Math.round(t*1e5)/1e5,nw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iL(t){return t==null}const sL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rw=(t,e)=>n=>!!(typeof n=="string"&&sL.test(n)&&n.startsWith(t)||e&&!iL(n)&&Object.prototype.hasOwnProperty.call(n,e)),z3=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,u,f]=r.match(nw);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(u),alpha:f!==void 0?parseFloat(f):1}},oL=t=>Ws(0,255,t),mp={...Zu,transform:t=>Math.round(oL(t))},Oa={test:rw("rgb","red"),parse:z3("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+mp.transform(t)+", "+mp.transform(e)+", "+mp.transform(n)+", "+$c(Rh.transform(r))+")"};function aL(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const em={test:rw("#"),parse:aL,transform:Oa.transform},zl={test:rw("hsl","hue"),parse:z3("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ns.transform($c(e))+", "+ns.transform($c(n))+", "+$c(Rh.transform(r))+")"},Zn={test:t=>Oa.test(t)||em.test(t)||zl.test(t),parse:t=>Oa.test(t)?Oa.parse(t):zl.test(t)?zl.parse(t):em.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Oa.transform(t):zl.transform(t)},lL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uL(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(nw))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(lL))===null||n===void 0?void 0:n.length)||0)>0}const W3="number",H3="color",cL="var",hL="var(",mE="${}",fL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const f=e.replace(fL,d=>(Zn.test(d)?(r.color.push(o),i.push(H3),n.push(Zn.parse(d))):d.startsWith(hL)?(r.var.push(o),i.push(cL),n.push(d)):(r.number.push(o),i.push(W3),n.push(parseFloat(d))),++o,mE)).split(mE);return{values:n,split:f,indexes:r,types:i}}function G3(t){return Nh(t).values}function K3(t){const{split:e,types:n}=Nh(t),r=e.length;return i=>{let o="";for(let u=0;u<r;u++)if(o+=e[u],i[u]!==void 0){const f=n[u];f===W3?o+=$c(i[u]):f===H3?o+=Zn.transform(i[u]):o+=i[u]}return o}}const dL=t=>typeof t=="number"?0:t;function pL(t){const e=G3(t);return K3(t)(e.map(dL))}const Jo={test:uL,parse:G3,createTransformer:K3,getAnimatableNone:pL},gL=new Set(["brightness","contrast","saturate","opacity"]);function mL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(nw)||[];if(!r)return t;const i=n.replace(r,"");let o=gL.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const yL=/\b([a-z-]*)\(.*?\)/gu,tm={...Jo,getAnimatableNone:t=>{const e=t.match(yL);return e?e.map(mL).join(" "):t}},wL={...j2,color:Zn,backgroundColor:Zn,outlineColor:Zn,fill:Zn,stroke:Zn,borderColor:Zn,borderTopColor:Zn,borderRightColor:Zn,borderBottomColor:Zn,borderLeftColor:Zn,filter:tm,WebkitFilter:tm},iw=t=>wL[t];function q3(t,e){let n=iw(t);return n!==tm&&(n=Jo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const vL=new Set(["auto","none","0"]);function xL(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!vL.has(o)&&Nh(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=q3(n,i)}const yE=t=>t===Zu||t===Me,wE=(t,e)=>parseFloat(t.split(", ")[e]),vE=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return wE(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?wE(o[1],t):0}},EL=new Set(["x","y","z"]),_L=Yu.filter(t=>!EL.has(t));function AL(t){const e=[];return _L.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ku={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:vE(4,13),y:vE(5,14)};ku.translateX=ku.x;ku.translateY=ku.y;const qa=new Set;let nm=!1,rm=!1;function X3(){if(rm){const t=Array.from(qa).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=AL(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,u])=>{var f;(f=r.getValue(o))===null||f===void 0||f.set(u)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}rm=!1,nm=!1,qa.forEach(t=>t.complete()),qa.clear()}function $3(){qa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(rm=!0)})}function CL(){$3(),X3()}class sw{constructor(e,n,r,i,o,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(qa.add(this),nm||(nm=!0,Ft.read($3),Ft.resolveKeyframes(X3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const u=i==null?void 0:i.get(),f=e[e.length-1];if(u!==void 0)e[0]=u;else if(r&&n){const d=r.readValue(n,f);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=f),i&&u===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),qa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,qa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Q3=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),TL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function IL(t){const e=TL.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Y3(t,e,n=1){const[r,i]=IL(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return Q3(u)?parseFloat(u):u}return U2(i)?Y3(i,e,n+1):i}const Z3=t=>e=>e.test(t),SL={test:t=>t==="auto",parse:t=>t},J3=[Zu,Me,ns,ao,m7,g7,SL],xE=t=>J3.find(Z3(t));class eb extends sw{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let g=e[d];if(typeof g=="string"&&(g=g.trim(),U2(g))){const w=Y3(g,n.current);w!==void 0&&(e[d]=w),d===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!P3.has(r)||e.length!==2)return;const[i,o]=e,u=xE(i),f=xE(o);if(u!==f)if(yE(u)&&yE(f))for(let d=0;d<e.length;d++){const g=e[d];typeof g=="string"&&(e[d]=parseFloat(g))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)rL(e[i])&&r.push(i);r.length&&xL(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ku[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const u=i.length-1,f=i[u];i[u]=ku[r](n.measureViewportBox(),window.getComputedStyle(n.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,g])=>{n.getValue(d).set(g)}),this.resolveNoneKeyframes()}}const EE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Jo.test(t)||t==="0")&&!t.startsWith("url("));function bL(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function RL(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],u=EE(i,e),f=EE(o,e);return!u||!f?!1:bL(t)||(n==="spring"||X2(n))&&r}const PL=t=>t!==null;function m1(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(PL),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const NL=40;class tb{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:u="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=rs.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:u,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>NL?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&CL(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=rs.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:u,onComplete:f,onUpdate:d,isGenerator:g}=this.options;if(!g&&!RL(e,r,i,o))if(u)this.options.duration=0;else{d&&d(m1(e,this.options,n)),f&&f(),this.resolveFinishedPromise();return}const w=this.initPlayback(e,n);w!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...w},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Kt=(t,e,n)=>t+(e-t)*n;function yp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function OL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,u=0;if(!e)i=o=u=n;else{const f=n<.5?n*(1+e):n+e-n*e,d=2*n-f;i=yp(d,f,t+1/3),o=yp(d,f,t),u=yp(d,f,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}function w0(t,e){return n=>n>0?e:t}const wp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},DL=[em,Oa,zl],ML=t=>DL.find(e=>e.test(t));function _E(t){const e=ML(t);if(!e)return!1;let n=e.parse(t);return e===zl&&(n=OL(n)),n}const AE=(t,e)=>{const n=_E(t),r=_E(e);if(!n||!r)return w0(t,e);const i={...n};return o=>(i.red=wp(n.red,r.red,o),i.green=wp(n.green,r.green,o),i.blue=wp(n.blue,r.blue,o),i.alpha=Kt(n.alpha,r.alpha,o),Oa.transform(i))},kL=(t,e)=>n=>e(t(n)),cf=(...t)=>t.reduce(kL),im=new Set(["none","hidden"]);function LL(t,e){return im.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function FL(t,e){return n=>Kt(t,e,n)}function ow(t){return typeof t=="number"?FL:typeof t=="string"?U2(t)?w0:Zn.test(t)?AE:UL:Array.isArray(t)?nb:typeof t=="object"?Zn.test(t)?AE:BL:w0}function nb(t,e){const n=[...t],r=n.length,i=t.map((o,u)=>ow(o)(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=i[u](o);return n}}function BL(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ow(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function VL(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const u=e.types[o],f=t.indexes[u][i[u]],d=(n=t.values[f])!==null&&n!==void 0?n:0;r[o]=d,i[u]++}return r}const UL=(t,e)=>{const n=Jo.createTransformer(e),r=Nh(t),i=Nh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?im.has(t)&&!i.values.length||im.has(e)&&!r.values.length?LL(t,e):cf(nb(VL(r,i),i.values),n):w0(t,e)};function rb(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Kt(t,e,n):ow(t)(t,e)}const jL=5;function ib(t,e,n){const r=Math.max(e-jL,0);return N3(n-t(r),e-r)}const tn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vp=.001;function zL({duration:t=tn.duration,bounce:e=tn.bounce,velocity:n=tn.velocity,mass:r=tn.mass}){let i,o,u=1-e;u=Ws(tn.minDamping,tn.maxDamping,u),t=Ws(tn.minDuration,tn.maxDuration,Os(t)),u<1?(i=g=>{const w=g*u,x=w*t,_=w-n,T=sm(g,u),O=Math.exp(-x);return vp-_/T*O},o=g=>{const x=g*u*t,_=x*n+n,T=Math.pow(u,2)*Math.pow(g,2)*t,O=Math.exp(-x),M=sm(Math.pow(g,2),u);return(-i(g)+vp>0?-1:1)*((_-T)*O)/M}):(i=g=>{const w=Math.exp(-g*t),x=(g-n)*t+1;return-vp+w*x},o=g=>{const w=Math.exp(-g*t),x=(n-g)*(t*t);return w*x});const f=5/t,d=HL(i,o,f);if(t=Ns(t),isNaN(d))return{stiffness:tn.stiffness,damping:tn.damping,duration:t};{const g=Math.pow(d,2)*r;return{stiffness:g,damping:u*2*Math.sqrt(r*g),duration:t}}}const WL=12;function HL(t,e,n){let r=n;for(let i=1;i<WL;i++)r=r-t(r)/e(r);return r}function sm(t,e){return t*Math.sqrt(1-e*e)}const GL=["duration","bounce"],KL=["stiffness","damping","mass"];function CE(t,e){return e.some(n=>t[n]!==void 0)}function qL(t){let e={velocity:tn.velocity,stiffness:tn.stiffness,damping:tn.damping,mass:tn.mass,isResolvedFromDuration:!1,...t};if(!CE(t,KL)&&CE(t,GL))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*Ws(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:tn.mass,stiffness:i,damping:o}}else{const n=zL(t);e={...e,...n,mass:tn.mass},e.isResolvedFromDuration=!0}return e}function sb(t=tn.visualDuration,e=tn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],f={done:!1,value:o},{stiffness:d,damping:g,mass:w,duration:x,velocity:_,isResolvedFromDuration:T}=qL({...n,velocity:-Os(n.velocity||0)}),O=_||0,M=g/(2*Math.sqrt(d*w)),B=u-o,k=Os(Math.sqrt(d/w)),N=Math.abs(B)<5;r||(r=N?tn.restSpeed.granular:tn.restSpeed.default),i||(i=N?tn.restDelta.granular:tn.restDelta.default);let R;if(M<1){const Q=sm(k,M);R=Z=>{const L=Math.exp(-M*k*Z);return u-L*((O+M*k*B)/Q*Math.sin(Q*Z)+B*Math.cos(Q*Z))}}else if(M===1)R=Q=>u-Math.exp(-k*Q)*(B+(O+k*B)*Q);else{const Q=k*Math.sqrt(M*M-1);R=Z=>{const L=Math.exp(-M*k*Z),P=Math.min(Q*Z,300);return u-L*((O+M*k*B)*Math.sinh(P)+Q*B*Math.cosh(P))/Q}}const z={calculatedDuration:T&&x||null,next:Q=>{const Z=R(Q);if(T)f.done=Q>=x;else{let L=0;M<1&&(L=Q===0?Ns(O):ib(R,Q,Z));const P=Math.abs(L)<=r,F=Math.abs(u-Z)<=i;f.done=P&&F}return f.value=f.done?u:Z,f},toString:()=>{const Q=Math.min(A3(z),Yg),Z=C3(L=>z.next(Q*L).value,Q,30);return Q+"ms "+Z}};return z}function TE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:u,min:f,max:d,restDelta:g=.5,restSpeed:w}){const x=t[0],_={done:!1,value:x},T=P=>f!==void 0&&P<f||d!==void 0&&P>d,O=P=>f===void 0?d:d===void 0||Math.abs(f-P)<Math.abs(d-P)?f:d;let M=n*e;const B=x+M,k=u===void 0?B:u(B);k!==B&&(M=k-x);const N=P=>-M*Math.exp(-P/r),R=P=>k+N(P),z=P=>{const F=N(P),j=R(P);_.done=Math.abs(F)<=g,_.value=_.done?k:j};let Q,Z;const L=P=>{T(_.value)&&(Q=P,Z=sb({keyframes:[_.value,O(_.value)],velocity:ib(R,P,_.value),damping:i,stiffness:o,restDelta:g,restSpeed:w}))};return L(0),{calculatedDuration:null,next:P=>{let F=!1;return!Z&&Q===void 0&&(F=!0,z(P),L(P)),Q!==void 0&&P>=Q?Z.next(P-Q):(!F&&z(P),_)}}}const XL=uf(.42,0,1,1),$L=uf(0,0,.58,1),ob=uf(.42,0,.58,1),QL=t=>Array.isArray(t)&&typeof t[0]!="number",YL={linear:Kr,easeIn:XL,easeInOut:ob,easeOut:$L,circIn:tw,circInOut:U3,circOut:V3,backIn:ew,backInOut:F3,backOut:L3,anticipate:B3},IE=t=>{if($2(t)){r3(t.length===4);const[e,n,r,i]=t;return uf(e,n,r,i)}else if(typeof t=="string")return YL[t];return t};function ZL(t,e,n){const r=[],i=n||rb,o=t.length-1;for(let u=0;u<o;u++){let f=i(t[u],t[u+1]);if(e){const d=Array.isArray(e)?e[u]||Kr:e;f=cf(d,f)}r.push(f)}return r}function JL(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(r3(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const f=ZL(e,r,i),d=f.length,g=w=>{if(u&&w<t[0])return e[0];let x=0;if(d>1)for(;x<t.length-2&&!(w<t[x+1]);x++);const _=Du(t[x],t[x+1],w);return f[x](_)};return n?w=>g(Ws(t[0],t[o-1],w)):g}function eF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Du(0,e,r);t.push(Kt(n,1,i))}}function tF(t){const e=[0];return eF(e,t.length-1),e}function nF(t,e){return t.map(n=>n*e)}function rF(t,e){return t.map(()=>e||ob).splice(0,t.length-1)}function v0({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=QL(r)?r.map(IE):IE(r),o={done:!1,value:e[0]},u=nF(n&&n.length===e.length?n:tF(e),t),f=JL(u,e,{ease:Array.isArray(i)?i:rF(e,i)});return{calculatedDuration:t,next:d=>(o.value=f(d),o.done=d>=t,o)}}const iF=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ft.update(e,!0),stop:()=>Zo(e),now:()=>Un.isProcessing?Un.timestamp:rs.now()}},sF={decay:TE,inertia:TE,tween:v0,keyframes:v0,spring:sb},oF=t=>t/100;class aw extends tb{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,u=(i==null?void 0:i.KeyframeResolver)||sw,f=(d,g)=>this.onKeyframesResolved(d,g);this.resolver=new u(o,f,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:u=0}=this.options,f=X2(n)?n:sF[n]||v0;let d,g;f!==v0&&typeof e[0]!="number"&&(d=cf(oF,rb(e[0],e[1])),e=[0,100]);const w=f({...this.options,keyframes:e});o==="mirror"&&(g=f({...this.options,keyframes:[...e].reverse(),velocity:-u})),w.calculatedDuration===null&&(w.calculatedDuration=A3(w));const{calculatedDuration:x}=w,_=x+i,T=_*(r+1)-i;return{generator:w,mirroredGenerator:g,mapPercentToKeyframes:d,calculatedDuration:x,resolvedDuration:_,totalDuration:T}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:u,mapPercentToKeyframes:f,keyframes:d,calculatedDuration:g,totalDuration:w,resolvedDuration:x}=r;if(this.startTime===null)return o.next(0);const{delay:_,repeat:T,repeatType:O,repeatDelay:M,onUpdate:B}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-w/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const k=this.currentTime-_*(this.speed>=0?1:-1),N=this.speed>=0?k<0:k>w;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=w);let R=this.currentTime,z=o;if(T){const P=Math.min(this.currentTime,w)/x;let F=Math.floor(P),j=P%1;!j&&P>=1&&(j=1),j===1&&F--,F=Math.min(F,T+1),!!(F%2)&&(O==="reverse"?(j=1-j,M&&(j-=M/x)):O==="mirror"&&(z=u)),R=Ws(0,1,j)*x}const Q=N?{done:!1,value:d[0]}:z.next(R);f&&(Q.value=f(Q.value));let{done:Z}=Q;!N&&g!==null&&(Z=this.speed>=0?this.currentTime>=w:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return L&&i!==void 0&&(Q.value=m1(d,this.options,i)),B&&B(Q.value),L&&this.finish(),Q}get duration(){const{resolved:e}=this;return e?Os(e.calculatedDuration):0}get time(){return Os(this.currentTime)}set time(e){e=Ns(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Os(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=iF,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const aF=new Set(["opacity","clipPath","filter","transform"]);function lF(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:u="loop",ease:f="easeInOut",times:d}={}){const g={[e]:n};d&&(g.offset=d);const w=I3(f,i);return Array.isArray(w)&&(g.easing=w),t.animate(g,{delay:r,duration:i,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}const uF=D2(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),x0=10,cF=2e4;function hF(t){return X2(t.type)||t.type==="spring"||!T3(t.ease)}function fF(t,e){const n=new aw({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<cF;)r=n.sample(o),i.push(r.value),o+=x0;return{times:void 0,keyframes:i,duration:o-x0,ease:"linear"}}const ab={anticipate:B3,backInOut:F3,circInOut:U3};function dF(t){return t in ab}class SE extends tb{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new eb(o,(u,f)=>this.onKeyframesResolved(u,f),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:o,type:u,motionValue:f,name:d,startTime:g}=this.options;if(!f.owner||!f.owner.current)return!1;if(typeof o=="string"&&y0()&&dF(o)&&(o=ab[o]),hF(this.options)){const{onComplete:x,onUpdate:_,motionValue:T,element:O,...M}=this.options,B=fF(e,M);e=B.keyframes,e.length===1&&(e[1]=e[0]),r=B.duration,i=B.times,o=B.ease,u="keyframes"}const w=lF(f.owner.current,d,e,{...this.options,duration:r,times:i,ease:o});return w.startTime=g??this.calcStartTime(),this.pendingTimeline?(hE(w,this.pendingTimeline),this.pendingTimeline=void 0):w.onfinish=()=>{const{onComplete:x}=this.options;f.set(m1(e,this.options,n)),x&&x(),this.cancel(),this.resolveFinishedPromise()},{animation:w,duration:r,times:i,type:u,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Os(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Os(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ns(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Kr;const{animation:r}=n;hE(r,e)}return Kr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:u,times:f}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:g,onUpdate:w,onComplete:x,element:_,...T}=this.options,O=new aw({...T,keyframes:r,duration:i,type:o,ease:u,times:f,isGenerator:!0}),M=Ns(this.time);g.setWithVelocity(O.sample(M-x0).value,O.sample(M).value,x0)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:u,type:f}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:g}=n.owner.getProps();return uF()&&r&&aF.has(r)&&!d&&!g&&!i&&o!=="mirror"&&u!==0&&f!=="inertia"}}const pF={type:"spring",stiffness:500,damping:25,restSpeed:10},gF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),mF={type:"keyframes",duration:.8},yF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wF=(t,{keyframes:e})=>e.length>2?mF:dl.has(t)?t.startsWith("scale")?gF(e[1]):pF:yF;function vF({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:u,repeatDelay:f,from:d,elapsed:g,...w}){return!!Object.keys(w).length}const lw=(t,e,n,r={},i,o)=>u=>{const f=q2(r,t)||{},d=f.delay||r.delay||0;let{elapsed:g=0}=r;g=g-Ns(d);let w={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-g,onUpdate:_=>{e.set(_),f.onUpdate&&f.onUpdate(_)},onComplete:()=>{u(),f.onComplete&&f.onComplete()},name:t,motionValue:e,element:o?void 0:i};vF(f)||(w={...w,...wF(t,w)}),w.duration&&(w.duration=Ns(w.duration)),w.repeatDelay&&(w.repeatDelay=Ns(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let x=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(w.duration=0,w.delay===0&&(x=!0)),x&&!o&&e.get()!==void 0){const _=m1(w.keyframes,f);if(_!==void 0)return Ft.update(()=>{w.onUpdate(_),w.onComplete()}),new B7([])}return!o&&SE.supports(w)?new SE(w):new aw(w)};function xF({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function lb(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:u=t.getDefaultTransition(),transitionEnd:f,...d}=e;r&&(u=r);const g=[],w=i&&t.animationState&&t.animationState.getState()[i];for(const x in d){const _=t.getValue(x,(o=t.latestValues[x])!==null&&o!==void 0?o:null),T=d[x];if(T===void 0||w&&xF(w,x))continue;const O={delay:n,...q2(u||{},x)};let M=!1;if(window.MotionHandoffAnimation){const k=O3(t);if(k){const N=window.MotionHandoffAnimation(k,x,Ft);N!==null&&(O.startTime=N,M=!0)}}Jg(t,x),_.start(lw(x,_,T,t.shouldReduceMotion&&P3.has(x)?{type:!1}:O,t,M));const B=_.animation;B&&g.push(B)}return f&&Promise.all(g).then(()=>{Ft.update(()=>{f&&Z7(t,f)})}),g}function om(t,e,n={}){var r;const i=g1(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const u=i?()=>Promise.all(lb(t,i,n)):()=>Promise.resolve(),f=t.variantChildren&&t.variantChildren.size?(g=0)=>{const{delayChildren:w=0,staggerChildren:x,staggerDirection:_}=o;return EF(t,e,w+g,x,_,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[g,w]=d==="beforeChildren"?[u,f]:[f,u];return g().then(()=>w())}else return Promise.all([u(),f(n.delay)])}function EF(t,e,n=0,r=0,i=1,o){const u=[],f=(t.variantChildren.size-1)*r,d=i===1?(g=0)=>g*r:(g=0)=>f-g*r;return Array.from(t.variantChildren).sort(_F).forEach((g,w)=>{g.notify("AnimationStart",e),u.push(om(g,e,{...o,delay:n+d(w)}).then(()=>g.notify("AnimationComplete",e)))}),Promise.all(u)}function _F(t,e){return t.sortNodePosition(e)}function AF(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>om(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=om(t,e,n);else{const i=typeof e=="function"?g1(t,e,n.custom):e;r=Promise.all(lb(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const CF=k2.length;function ub(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?ub(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<CF;n++){const r=k2[n],i=t.props[r];(bh(i)||i===!1)&&(e[r]=i)}return e}const TF=[...M2].reverse(),IF=M2.length;function SF(t){return e=>Promise.all(e.map(({animation:n,options:r})=>AF(t,n,r)))}function bF(t){let e=SF(t),n=bE(),r=!0;const i=d=>(g,w)=>{var x;const _=g1(t,w,d==="exit"?(x=t.presenceContext)===null||x===void 0?void 0:x.custom:void 0);if(_){const{transition:T,transitionEnd:O,...M}=_;g={...g,...M,...O}}return g};function o(d){e=d(t)}function u(d){const{props:g}=t,w=ub(t.parent)||{},x=[],_=new Set;let T={},O=1/0;for(let B=0;B<IF;B++){const k=TF[B],N=n[k],R=g[k]!==void 0?g[k]:w[k],z=bh(R),Q=k===d?N.isActive:null;Q===!1&&(O=B);let Z=R===w[k]&&R!==g[k]&&z;if(Z&&r&&t.manuallyAnimateOnMount&&(Z=!1),N.protectedKeys={...T},!N.isActive&&Q===null||!R&&!N.prevProp||d1(R)||typeof R=="boolean")continue;const L=RF(N.prevProp,R);let P=L||k===d&&N.isActive&&!Z&&z||B>O&&z,F=!1;const j=Array.isArray(R)?R:[R];let K=j.reduce(i(k),{});Q===!1&&(K={});const{prevResolvedValues:G={}}=N,H={...G,...K},We=ve=>{P=!0,_.has(ve)&&(F=!0,_.delete(ve)),N.needsAnimating[ve]=!0;const de=t.getValue(ve);de&&(de.liveStyle=!1)};for(const ve in H){const de=K[ve],Ce=G[ve];if(T.hasOwnProperty(ve))continue;let be=!1;Qg(de)&&Qg(Ce)?be=!_3(de,Ce):be=de!==Ce,be?de!=null?We(ve):_.add(ve):de!==void 0&&_.has(ve)?We(ve):N.protectedKeys[ve]=!0}N.prevProp=R,N.prevResolvedValues=K,N.isActive&&(T={...T,...K}),r&&t.blockInitialAnimation&&(P=!1),P&&(!(Z&&L)||F)&&x.push(...j.map(ve=>({animation:ve,options:{type:k}})))}if(_.size){const B={};_.forEach(k=>{const N=t.getBaseTarget(k),R=t.getValue(k);R&&(R.liveStyle=!0),B[k]=N??null}),x.push({animation:B})}let M=!!x.length;return r&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(M=!1),r=!1,M?e(x):Promise.resolve()}function f(d,g){var w;if(n[d].isActive===g)return Promise.resolve();(w=t.variantChildren)===null||w===void 0||w.forEach(_=>{var T;return(T=_.animationState)===null||T===void 0?void 0:T.setActive(d,g)}),n[d].isActive=g;const x=u(d);for(const _ in n)n[_].protectedKeys={};return x}return{animateChanges:u,setActive:f,setAnimateFunction:o,getState:()=>n,reset:()=>{n=bE(),r=!0}}}function RF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_3(e,t):!1}function Ea(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bE(){return{animate:Ea(!0),whileInView:Ea(),whileHover:Ea(),whileTap:Ea(),whileDrag:Ea(),whileFocus:Ea(),exit:Ea()}}class ra{constructor(e){this.isMounted=!1,this.node=e}update(){}}class PF extends ra{constructor(e){super(e),e.animationState||(e.animationState=bF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();d1(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let NF=0;class OF extends ra{constructor(){super(...arguments),this.id=NF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const DF={animation:{Feature:PF},exit:{Feature:OF}};function Oh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function hf(t){return{point:{x:t.pageX,y:t.pageY}}}const MF=t=>e=>Q2(e)&&t(e,hf(e));function Qc(t,e,n,r){return Oh(t,e,MF(n),r)}const RE=(t,e)=>Math.abs(t-e);function kF(t,e){const n=RE(t.x,e.x),r=RE(t.y,e.y);return Math.sqrt(n**2+r**2)}class cb{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ep(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,T=kF(x.offset,{x:0,y:0})>=3;if(!_&&!T)return;const{point:O}=x,{timestamp:M}=Un;this.history.push({...O,timestamp:M});const{onStart:B,onMove:k}=this.handlers;_||(B&&B(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,x)},this.handlePointerMove=(x,_)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=xp(_,this.transformPagePoint),Ft.update(this.updatePoint,!0)},this.handlePointerUp=(x,_)=>{this.end();const{onEnd:T,onSessionEnd:O,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=Ep(x.type==="pointercancel"?this.lastMoveEventInfo:xp(_,this.transformPagePoint),this.history);this.startEvent&&T&&T(x,B),O&&O(x,B)},!Q2(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const u=hf(e),f=xp(u,this.transformPagePoint),{point:d}=f,{timestamp:g}=Un;this.history=[{...d,timestamp:g}];const{onSessionStart:w}=n;w&&w(e,Ep(f,this.history)),this.removeListeners=cf(Qc(this.contextWindow,"pointermove",this.handlePointerMove),Qc(this.contextWindow,"pointerup",this.handlePointerUp),Qc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Zo(this.updatePoint)}}function xp(t,e){return e?{point:e(t.point)}:t}function PE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ep({point:t},e){return{point:t,delta:PE(t,hb(e)),offset:PE(t,LF(e)),velocity:FF(e,.1)}}function LF(t){return t[0]}function hb(t){return t[t.length-1]}function FF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=hb(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ns(e)));)n--;if(!r)return{x:0,y:0};const o=Os(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const fb=1e-4,BF=1-fb,VF=1+fb,db=.01,UF=0-db,jF=0+db;function Xr(t){return t.max-t.min}function zF(t,e,n){return Math.abs(t-e)<=n}function NE(t,e,n,r=.5){t.origin=r,t.originPoint=Kt(e.min,e.max,t.origin),t.scale=Xr(n)/Xr(e),t.translate=Kt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=BF&&t.scale<=VF||isNaN(t.scale))&&(t.scale=1),(t.translate>=UF&&t.translate<=jF||isNaN(t.translate))&&(t.translate=0)}function Yc(t,e,n,r){NE(t.x,e.x,n.x,r?r.originX:void 0),NE(t.y,e.y,n.y,r?r.originY:void 0)}function OE(t,e,n){t.min=n.min+e.min,t.max=t.min+Xr(e)}function WF(t,e,n){OE(t.x,e.x,n.x),OE(t.y,e.y,n.y)}function DE(t,e,n){t.min=e.min-n.min,t.max=t.min+Xr(e)}function Zc(t,e,n){DE(t.x,e.x,n.x),DE(t.y,e.y,n.y)}function HF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Kt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Kt(n,t,r.max):Math.min(t,n)),t}function ME(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function GF(t,{top:e,left:n,bottom:r,right:i}){return{x:ME(t.x,n,i),y:ME(t.y,e,r)}}function kE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function KF(t,e){return{x:kE(t.x,e.x),y:kE(t.y,e.y)}}function qF(t,e){let n=.5;const r=Xr(t),i=Xr(e);return i>r?n=Du(e.min,e.max-r,t.min):r>i&&(n=Du(t.min,t.max-i,e.min)),Ws(0,1,n)}function XF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const am=.35;function $F(t=am){return t===!1?t=0:t===!0&&(t=am),{x:LE(t,"left","right"),y:LE(t,"top","bottom")}}function LE(t,e,n){return{min:FE(t,e),max:FE(t,n)}}function FE(t,e){return typeof t=="number"?t:t[e]||0}const BE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wl=()=>({x:BE(),y:BE()}),VE=()=>({min:0,max:0}),an=()=>({x:VE(),y:VE()});function ni(t){return[t("x"),t("y")]}function pb({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function QF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function YF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function _p(t){return t===void 0||t===1}function lm({scale:t,scaleX:e,scaleY:n}){return!_p(t)||!_p(e)||!_p(n)}function Ta(t){return lm(t)||gb(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gb(t){return UE(t.x)||UE(t.y)}function UE(t){return t&&t!=="0%"}function E0(t,e,n){const r=t-n,i=e*r;return n+i}function jE(t,e,n,r,i){return i!==void 0&&(t=E0(t,i,r)),E0(t,n,r)+e}function um(t,e=0,n=1,r,i){t.min=jE(t.min,e,n,r,i),t.max=jE(t.max,e,n,r,i)}function mb(t,{x:e,y:n}){um(t.x,e.translate,e.scale,e.originPoint),um(t.y,n.translate,n.scale,n.originPoint)}const zE=.999999999999,WE=1.0000000000001;function ZF(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,u;for(let f=0;f<i;f++){o=n[f],u=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Gl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,mb(t,u)),r&&Ta(o.latestValues)&&Gl(t,o.latestValues))}e.x<WE&&e.x>zE&&(e.x=1),e.y<WE&&e.y>zE&&(e.y=1)}function Hl(t,e){t.min=t.min+e,t.max=t.max+e}function HE(t,e,n,r,i=.5){const o=Kt(t.min,t.max,i);um(t,e,n,o,r)}function Gl(t,e){HE(t.x,e.x,e.scaleX,e.scale,e.originX),HE(t.y,e.y,e.scaleY,e.scale,e.originY)}function yb(t,e){return pb(YF(t.getBoundingClientRect(),e))}function JF(t,e,n){const r=yb(t,n),{scroll:i}=e;return i&&(Hl(r.x,i.offset.x),Hl(r.y,i.offset.y)),r}const wb=({current:t})=>t?t.ownerDocument.defaultView:null,eB=new WeakMap;class tB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=an(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=w=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(hf(w).point)},o=(w,x)=>{const{drag:_,dragPropagation:T,onDragStart:O}=this.getProps();if(_&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=q7(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ni(B=>{let k=this.getAxisMotionValue(B).get()||0;if(ns.test(k)){const{projection:N}=this.visualElement;if(N&&N.layout){const R=N.layout.layoutBox[B];R&&(k=Xr(R)*(parseFloat(k)/100))}}this.originPoint[B]=k}),O&&Ft.postRender(()=>O(w,x)),Jg(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},u=(w,x)=>{const{dragPropagation:_,dragDirectionLock:T,onDirectionLock:O,onDrag:M}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:B}=x;if(T&&this.currentDirection===null){this.currentDirection=nB(B),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",x.point,B),this.updateAxis("y",x.point,B),this.visualElement.render(),M&&M(w,x)},f=(w,x)=>this.stop(w,x),d=()=>ni(w=>{var x;return this.getAnimationState(w)==="paused"&&((x=this.getAxisMotionValue(w).animation)===null||x===void 0?void 0:x.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new cb(e,{onSessionStart:i,onStart:o,onMove:u,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,contextWindow:wb(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Ft.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Zf(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=HF(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&jl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=GF(i.layoutBox,n):this.constraints=!1,this.elastic=$F(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ni(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=XF(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!jl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=JF(r,i.root,this.visualElement.getTransformPagePoint());let u=KF(i.layout.layoutBox,o);if(n){const f=n(QF(u));this.hasMutatedConstraints=!!f,f&&(u=pb(f))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},g=ni(w=>{if(!Zf(w,n,this.currentDirection))return;let x=d&&d[w]||{};u&&(x={min:0,max:0});const _=i?200:1e6,T=i?40:1e7,O={type:"inertia",velocity:r?e[w]:0,bounceStiffness:_,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...x};return this.startAxisValueAnimation(w,O)});return Promise.all(g).then(f)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Jg(this.visualElement,e),r.start(lw(e,r,0,n,this.visualElement,!1))}stopAnimation(){ni(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ni(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ni(n=>{const{drag:r}=this.getProps();if(!Zf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:u,max:f}=i.layout.layoutBox[n];o.set(e[n]-Kt(u,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!jl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ni(u=>{const f=this.getAxisMotionValue(u);if(f&&this.constraints!==!1){const d=f.get();i[u]=qF({min:d,max:d},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ni(u=>{if(!Zf(u,e,null))return;const f=this.getAxisMotionValue(u),{min:d,max:g}=this.constraints[u];f.set(Kt(d,g,i[u]))})}addListeners(){if(!this.visualElement.current)return;eB.set(this.visualElement,this);const e=this.visualElement.current,n=Qc(e,"pointerdown",d=>{const{drag:g,dragListener:w=!0}=this.getProps();g&&w&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();jl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ft.read(r);const u=Oh(window,"resize",()=>this.scalePositionWithinConstraints()),f=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g})=>{this.isDragging&&g&&(ni(w=>{const x=this.getAxisMotionValue(w);x&&(this.originPoint[w]+=d[w].translate,x.set(x.get()+d[w].translate))}),this.visualElement.render())});return()=>{u(),n(),o(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:u=am,dragMomentum:f=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:u,dragMomentum:f}}}function Zf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function nB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class rB extends ra{constructor(e){super(e),this.removeGroupControls=Kr,this.removeListeners=Kr,this.controls=new tB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kr}unmount(){this.removeGroupControls(),this.removeListeners()}}const GE=t=>(e,n)=>{t&&Ft.postRender(()=>t(e,n))};class iB extends ra{constructor(){super(...arguments),this.removePointerDownListener=Kr}onPointerDown(e){this.session=new cb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:GE(e),onStart:GE(n),onMove:r,onEnd:(o,u)=>{delete this.session,i&&Ft.postRender(()=>i(o,u))}}}mount(){this.removePointerDownListener=Qc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Td={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function KE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const _c={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Me.test(t))t=parseFloat(t);else return t;const n=KE(t,e.target.x),r=KE(t,e.target.y);return`${n}% ${r}%`}},sB={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Jo.parse(t);if(i.length>5)return r;const o=Jo.createTransformer(t),u=typeof i[0]!="number"?1:0,f=n.x.scale*e.x,d=n.y.scale*e.y;i[0+u]/=f,i[1+u]/=d;const g=Kt(f,d,.5);return typeof i[2+u]=="number"&&(i[2+u]/=g),typeof i[3+u]=="number"&&(i[3+u]/=g),o(i)}};class oB extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;I7(aB),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Td.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,u=r.projection;return u&&(u.isPresent=o,i||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Ft.postRender(()=>{const f=u.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),F2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vb(t){const[e,n]=t3(),r=Y.useContext(R2);return ae.jsx(oB,{...t,layoutGroup:r,switchLayoutGroup:Y.useContext(u3),isPresent:e,safeToRemove:n})}const aB={borderRadius:{..._c,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_c,borderTopRightRadius:_c,borderBottomLeftRadius:_c,borderBottomRightRadius:_c,boxShadow:sB};function lB(t,e,n){const r=nr(t)?t:Ph(t);return r.start(lw("",r,e,n)),r.animation}function uB(t){return t instanceof SVGElement&&t.tagName!=="svg"}const cB=(t,e)=>t.depth-e.depth;class hB{constructor(){this.children=[],this.isDirty=!1}add(e){Y2(this.children,e),this.isDirty=!0}remove(e){Z2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cB),this.isDirty=!1,this.children.forEach(e)}}function fB(t,e){const n=rs.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Zo(r),t(o-e))};return Ft.read(r,!0),()=>Zo(r)}const xb=["TopLeft","TopRight","BottomLeft","BottomRight"],dB=xb.length,qE=t=>typeof t=="string"?parseFloat(t):t,XE=t=>typeof t=="number"||Me.test(t);function pB(t,e,n,r,i,o){i?(t.opacity=Kt(0,n.opacity!==void 0?n.opacity:1,gB(r)),t.opacityExit=Kt(e.opacity!==void 0?e.opacity:1,0,mB(r))):o&&(t.opacity=Kt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<dB;u++){const f=`border${xb[u]}Radius`;let d=$E(e,f),g=$E(n,f);if(d===void 0&&g===void 0)continue;d||(d=0),g||(g=0),d===0||g===0||XE(d)===XE(g)?(t[f]=Math.max(Kt(qE(d),qE(g),r),0),(ns.test(g)||ns.test(d))&&(t[f]+="%")):t[f]=g}(e.rotate||n.rotate)&&(t.rotate=Kt(e.rotate||0,n.rotate||0,r))}function $E(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const gB=Eb(0,.5,V3),mB=Eb(.5,.95,Kr);function Eb(t,e,n){return r=>r<t?0:r>e?1:n(Du(t,e,r))}function QE(t,e){t.min=e.min,t.max=e.max}function ti(t,e){QE(t.x,e.x),QE(t.y,e.y)}function YE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ZE(t,e,n,r,i){return t-=e,t=E0(t,1/n,r),i!==void 0&&(t=E0(t,1/i,r)),t}function yB(t,e=0,n=1,r=.5,i,o=t,u=t){if(ns.test(e)&&(e=parseFloat(e),e=Kt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let f=Kt(o.min,o.max,r);t===o&&(f-=e),t.min=ZE(t.min,e,n,f,i),t.max=ZE(t.max,e,n,f,i)}function JE(t,e,[n,r,i],o,u){yB(t,e[n],e[r],e[i],e.scale,o,u)}const wB=["x","scaleX","originX"],vB=["y","scaleY","originY"];function e_(t,e,n,r){JE(t.x,e,wB,n?n.x:void 0,r?r.x:void 0),JE(t.y,e,vB,n?n.y:void 0,r?r.y:void 0)}function t_(t){return t.translate===0&&t.scale===1}function _b(t){return t_(t.x)&&t_(t.y)}function n_(t,e){return t.min===e.min&&t.max===e.max}function xB(t,e){return n_(t.x,e.x)&&n_(t.y,e.y)}function r_(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Ab(t,e){return r_(t.x,e.x)&&r_(t.y,e.y)}function i_(t){return Xr(t.x)/Xr(t.y)}function s_(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class EB{constructor(){this.members=[]}add(e){Y2(this.members,e),e.scheduleRender()}remove(e){if(Z2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _B(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((i||o||u)&&(r=`translate3d(${i}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:g,rotate:w,rotateX:x,rotateY:_,skewX:T,skewY:O}=n;g&&(r=`perspective(${g}px) ${r}`),w&&(r+=`rotate(${w}deg) `),x&&(r+=`rotateX(${x}deg) `),_&&(r+=`rotateY(${_}deg) `),T&&(r+=`skewX(${T}deg) `),O&&(r+=`skewY(${O}deg) `)}const f=t.x.scale*e.x,d=t.y.scale*e.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const Ia={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Dc=typeof window<"u"&&window.MotionDebug!==void 0,Ap=["","X","Y","Z"],AB={visibility:"hidden"},o_=1e3;let CB=0;function Cp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Cb(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=O3(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ft,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Cb(r)}function Tb({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(u={},f=e==null?void 0:e()){this.id=CB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Dc&&(Ia.totalNodes=Ia.resolvedTargetDeltas=Ia.recalculatedProjection=0),this.nodes.forEach(SB),this.nodes.forEach(OB),this.nodes.forEach(DB),this.nodes.forEach(bB),Dc&&window.MotionDebug.record(Ia)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new hB)}addEventListener(u,f){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new J2),this.eventHandlers.get(u).add(f)}notifyListeners(u,...f){const d=this.eventHandlers.get(u);d&&d.notify(...f)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=uB(u),this.instance=u;const{layoutId:d,layout:g,visualElement:w}=this.options;if(w&&!w.current&&w.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(g||d)&&(this.isLayoutDirty=!0),t){let x;const _=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,x&&x(),x=fB(_,250),Td.hasAnimatedSinceResize&&(Td.hasAnimatedSinceResize=!1,this.nodes.forEach(l_))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&w&&(d||g)&&this.addEventListener("didUpdate",({delta:x,hasLayoutChanged:_,hasRelativeTargetChanged:T,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||w.getDefaultTransition()||BB,{onLayoutAnimationStart:B,onLayoutAnimationComplete:k}=w.getProps(),N=!this.targetLayout||!Ab(this.targetLayout,O)||T,R=!_&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||R||_&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(x,R);const z={...q2(M,"layout"),onPlay:B,onComplete:k};(w.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else _||l_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(MB),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Cb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const x=this.path[w];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(a_);return}this.isUpdating||this.nodes.forEach(PB),this.isUpdating=!1,this.nodes.forEach(NB),this.nodes.forEach(TB),this.nodes.forEach(IB),this.clearAllSnapshots();const f=rs.now();Un.delta=Ws(0,1e3/60,f-Un.timestamp),Un.timestamp=f,Un.isProcessing=!0,pp.update.process(Un),pp.preRender.process(Un),pp.render.process(Un),Un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,F2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(RB),this.sharedNodes.forEach(kB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=an(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(f=!1),f){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!_b(this.projectionDelta),d=this.getTransformTemplate(),g=d?d(this.latestValues,""):void 0,w=g!==this.prevTransformTemplateValue;u&&(f||Ta(this.latestValues)||w)&&(i(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return u&&(d=this.removeTransform(d)),VB(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:f}=this.options;if(!f)return an();const d=f.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(UB))){const{scroll:w}=this.root;w&&(Hl(d.x,w.offset.x),Hl(d.y,w.offset.y))}return d}removeElementScroll(u){var f;const d=an();if(ti(d,u),!((f=this.scroll)===null||f===void 0)&&f.wasRoot)return d;for(let g=0;g<this.path.length;g++){const w=this.path[g],{scroll:x,options:_}=w;w!==this.root&&x&&_.layoutScroll&&(x.wasRoot&&ti(d,u),Hl(d.x,x.offset.x),Hl(d.y,x.offset.y))}return d}applyTransform(u,f=!1){const d=an();ti(d,u);for(let g=0;g<this.path.length;g++){const w=this.path[g];!f&&w.options.layoutScroll&&w.scroll&&w!==w.root&&Gl(d,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),Ta(w.latestValues)&&Gl(d,w.latestValues)}return Ta(this.latestValues)&&Gl(d,this.latestValues),d}removeTransform(u){const f=an();ti(f,u);for(let d=0;d<this.path.length;d++){const g=this.path[d];if(!g.instance||!Ta(g.latestValues))continue;lm(g.latestValues)&&g.updateSnapshot();const w=an(),x=g.measurePageBox();ti(w,x),e_(f,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,w)}return Ta(this.latestValues)&&e_(f,this.latestValues),f}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var f;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==d;if(!(u||g&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:x,layoutId:_}=this.options;if(!(!this.layout||!(x||_))){if(this.resolvedRelativeTargetAt=Un.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=an(),this.relativeTargetOrigin=an(),Zc(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=an(),this.targetWithTransforms=an()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ti(this.target,this.layout.layoutBox),mb(this.target,this.targetDelta)):ti(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=an(),this.relativeTargetOrigin=an(),Zc(this.relativeTargetOrigin,this.target,T.target),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Dc&&Ia.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||lm(this.parent.latestValues)||gb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const f=this.getLead(),d=!!this.resumingFrom||this!==f;let g=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(g=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Un.timestamp&&(g=!1),g)return;const{layout:w,layoutId:x}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(w||x))return;ti(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,T=this.treeScale.y;ZF(this.layoutCorrected,this.treeScale,this.path,d),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=an());const{target:O}=f;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YE(this.prevProjectionDelta.x,this.projectionDelta.x),YE(this.prevProjectionDelta.y,this.projectionDelta.y)),Yc(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==T||!s_(this.projectionDelta.x,this.prevProjectionDelta.x)||!s_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O)),Dc&&Ia.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var f;if((f=this.options.visualElement)===null||f===void 0||f.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wl(),this.projectionDelta=Wl(),this.projectionDeltaWithTransform=Wl()}setAnimationOrigin(u,f=!1){const d=this.snapshot,g=d?d.latestValues:{},w={...this.latestValues},x=Wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const _=an(),T=d?d.source:void 0,O=this.layout?this.layout.source:void 0,M=T!==O,B=this.getStack(),k=!B||B.members.length<=1,N=!!(M&&!k&&this.options.crossfade===!0&&!this.path.some(FB));this.animationProgress=0;let R;this.mixTargetDelta=z=>{const Q=z/1e3;u_(x.x,u.x,Q),u_(x.y,u.y,Q),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zc(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LB(this.relativeTarget,this.relativeTargetOrigin,_,Q),R&&xB(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=an()),ti(R,this.relativeTarget)),M&&(this.animationValues=w,pB(w,g,this.latestValues,Q,N,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ft.update(()=>{Td.hasAnimatedSinceResize=!0,this.currentAnimation=lB(0,o_,{...u,onUpdate:f=>{this.mixTargetDelta(f),u.onUpdate&&u.onUpdate(f)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(o_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:f,target:d,layout:g,latestValues:w}=u;if(!(!f||!d||!g)){if(this!==u&&this.layout&&g&&Ib(this.options.animationType,this.layout.layoutBox,g.layoutBox)){d=this.target||an();const x=Xr(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+x;const _=Xr(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+_}ti(f,d),Gl(f,w),Yc(this.projectionDeltaWithTransform,this.layoutCorrected,f,w)}}registerSharedNode(u,f){this.sharedNodes.has(u)||this.sharedNodes.set(u,new EB),this.sharedNodes.get(u).add(f);const g=f.options.initialPromotionConfig;f.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(f):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:f}=this.options;return f?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:f}=this.options;return f?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:f,preserveFollowOpacity:d}={}){const g=this.getStack();g&&g.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let f=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const g={};d.z&&Cp("z",u,g,this.animationValues);for(let w=0;w<Ap.length;w++)Cp(`rotate${Ap[w]}`,u,g,this.animationValues),Cp(`skew${Ap[w]}`,u,g,this.animationValues);u.render();for(const w in g)u.setStaticValue(w,g[w]),this.animationValues&&(this.animationValues[w]=g[w]);u.scheduleRender()}getProjectionStyles(u){var f,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return AB;const g={visibility:""},w=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=Ad(u==null?void 0:u.pointerEvents)||"",g.transform=w?w(this.latestValues,""):"none",g;const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){const M={};return this.options.layoutId&&(M.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,M.pointerEvents=Ad(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Ta(this.latestValues)&&(M.transform=w?w({},""):"none",this.hasProjected=!1),M}const _=x.animationValues||x.latestValues;this.applyTransformsToTarget(),g.transform=_B(this.projectionDeltaWithTransform,this.treeScale,_),w&&(g.transform=w(_,g.transform));const{x:T,y:O}=this.projectionDelta;g.transformOrigin=`${T.origin*100}% ${O.origin*100}% 0`,x.animationValues?g.opacity=x===this?(d=(f=_.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:g.opacity=x===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const M in m0){if(_[M]===void 0)continue;const{correct:B,applyTo:k}=m0[M],N=g.transform==="none"?_[M]:B(_[M],x);if(k){const R=k.length;for(let z=0;z<R;z++)g[k[z]]=N}else g[M]=N}return this.options.layoutId&&(g.pointerEvents=x===this?Ad(u==null?void 0:u.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var f;return(f=u.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(a_),this.root.sharedNodes.clear()}}}function TB(t){t.updateLayout()}function IB(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,u=n.source!==t.layout.source;o==="size"?ni(x=>{const _=u?n.measuredBox[x]:n.layoutBox[x],T=Xr(_);_.min=r[x].min,_.max=_.min+T}):Ib(o,n.layoutBox,r)&&ni(x=>{const _=u?n.measuredBox[x]:n.layoutBox[x],T=Xr(r[x]);_.max=_.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[x].max=t.relativeTarget[x].min+T)});const f=Wl();Yc(f,r,n.layoutBox);const d=Wl();u?Yc(d,t.applyTransform(i,!0),n.measuredBox):Yc(d,r,n.layoutBox);const g=!_b(f);let w=!1;if(!t.resumeFrom){const x=t.getClosestProjectingParent();if(x&&!x.resumeFrom){const{snapshot:_,layout:T}=x;if(_&&T){const O=an();Zc(O,n.layoutBox,_.layoutBox);const M=an();Zc(M,r,T.layoutBox),Ab(O,M)||(w=!0),x.options.layoutRoot&&(t.relativeTarget=M,t.relativeTargetOrigin=O,t.relativeParent=x)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:f,hasLayoutChanged:g,hasRelativeTargetChanged:w})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function SB(t){Dc&&Ia.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function RB(t){t.clearSnapshot()}function a_(t){t.clearMeasurements()}function PB(t){t.isLayoutDirty=!1}function NB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function l_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function OB(t){t.resolveTargetDelta()}function DB(t){t.calcProjection()}function MB(t){t.resetSkewAndRotation()}function kB(t){t.removeLeadSnapshot()}function u_(t,e,n){t.translate=Kt(e.translate,0,n),t.scale=Kt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function c_(t,e,n,r){t.min=Kt(e.min,n.min,r),t.max=Kt(e.max,n.max,r)}function LB(t,e,n,r){c_(t.x,e.x,n.x,r),c_(t.y,e.y,n.y,r)}function FB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const BB={duration:.45,ease:[.4,0,.1,1]},h_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),f_=h_("applewebkit/")&&!h_("chrome/")?Math.round:Kr;function d_(t){t.min=f_(t.min),t.max=f_(t.max)}function VB(t){d_(t.x),d_(t.y)}function Ib(t,e,n){return t==="position"||t==="preserve-aspect"&&!zF(i_(e),i_(n),.2)}function UB(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const jB=Tb({attachResizeListener:(t,e)=>Oh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tp={current:void 0},Sb=Tb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Tp.current){const t=new jB({});t.mount(window),t.setOptions({layoutScroll:!0}),Tp.current=t}return Tp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),zB={pan:{Feature:iB},drag:{Feature:rB,ProjectionNode:Sb,MeasureLayout:vb}};function p_(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Ft.postRender(()=>o(e,hf(e)))}class WB extends ra{mount(){const{current:e}=this.node;e&&(this.unmount=z7(e,n=>(p_(this.node,n,"Start"),r=>p_(this.node,r,"End"))))}unmount(){}}class HB extends ra{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cf(Oh(this.node.current,"focus",()=>this.onFocus()),Oh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function g_(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Ft.postRender(()=>o(e,hf(e)))}class GB extends ra{mount(){const{current:e}=this.node;e&&(this.unmount=K7(e,n=>(g_(this.node,n,"Start"),(r,{success:i})=>g_(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const cm=new WeakMap,Ip=new WeakMap,KB=t=>{const e=cm.get(t.target);e&&e(t)},qB=t=>{t.forEach(KB)};function XB({root:t,...e}){const n=t||document;Ip.has(n)||Ip.set(n,{});const r=Ip.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(qB,{root:t,...e})),r[i]}function $B(t,e,n){const r=XB(e);return cm.set(t,n),r.observe(t),()=>{cm.delete(t),r.unobserve(t)}}const QB={some:0,all:1};class YB extends ra{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:QB[i]},f=d=>{const{isIntersecting:g}=d;if(this.isInView===g||(this.isInView=g,o&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:w,onViewportLeave:x}=this.node.getProps(),_=g?w:x;_&&_(d)};return $B(this.node.current,u,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ZB(e,n))&&this.startObserver()}unmount(){}}function ZB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const JB={inView:{Feature:YB},tap:{Feature:GB},focus:{Feature:HB},hover:{Feature:WB}},eV={layout:{ProjectionNode:Sb,MeasureLayout:vb}},hm={current:null},bb={current:!1};function tV(){if(bb.current=!0,!!O2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>hm.current=t.matches;t.addListener(e),e()}else hm.current=!1}const nV=[...J3,Zn,Jo],rV=t=>nV.find(Z3(t)),m_=new WeakMap;function iV(t,e,n){for(const r in e){const i=e[r],o=n[r];if(nr(i))t.addValue(r,i);else if(nr(o))t.addValue(r,Ph(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const u=t.getValue(r);u.liveStyle===!0?u.jump(i):u.hasAnimated||u.set(i)}else{const u=t.getStaticValue(r);t.addValue(r,Ph(u!==void 0?u:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const y_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:u},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=rs.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,Ft.render(this.render,!1,!0))};const{latestValues:d,renderState:g,onUpdate:w}=u;this.onUpdate=w,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=g,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=f,this.blockInitialAnimation=!!o,this.isControllingVariants=p1(n),this.isVariantNode=a3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:x,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const T in _){const O=_[T];d[T]!==void 0&&nr(O)&&O.set(d[T],!1)}}mount(e){this.current=e,m_.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),bb.current||tV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){m_.delete(this.current),this.projection&&this.projection.unmount(),Zo(this.notifyUpdate),Zo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=dl.has(e),i=n.on("change",f=>{this.latestValues[e]=f,this.props.onUpdate&&Ft.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Mu){const n=Mu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):an()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<y_.length;r++){const i=y_[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,u=e[o];u&&(this.propEventSubscriptions[i]=this.on(i,u))}this.prevMotionValues=iV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ph(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Q3(i)||j3(i))?i=parseFloat(i):!rV(i)&&Jo.test(n)&&(i=q3(e,n)),this.setBaseTarget(e,nr(i)?i.get():i)),nr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const u=V2(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(i=u[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!nr(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new J2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Rb extends sV{constructor(){super(...arguments),this.KeyframeResolver=eb}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function oV(t){return window.getComputedStyle(t)}class aV extends Rb{constructor(){super(...arguments),this.type="html",this.renderInstance=m3}readValueFromInstance(e,n){if(dl.has(n)){const r=iw(n);return r&&r.default||0}else{const r=oV(e),i=(d3(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return yb(e,n)}build(e,n,r){z2(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return K2(e,n,r)}}class lV extends Rb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=an}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(dl.has(n)){const r=iw(n);return r&&r.default||0}return n=y3.has(n)?n:L2(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return x3(e,n,r)}build(e,n,r){W2(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){w3(e,n,r,i)}mount(e){this.isSVGTag=G2(e.tagName),super.mount(e)}}const uV=(t,e)=>B2(t)?new lV(e):new aV(e,{allowProjection:t!==Y.Fragment}),cV=k7({...DF,...JB,...zB,...eV},uV),_0=Q9(cV);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pb=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=Y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:u,...f},d)=>Y.createElement("svg",{ref:d,...fV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Pb("lucide",i),...f},[...u.map(([g,w])=>Y.createElement(g,w)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=(t,e)=>{const n=Y.forwardRef(({className:r,...i},o)=>Y.createElement(dV,{ref:o,iconNode:e,className:Pb(`lucide-${hV(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=Ju("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gV=Ju("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=Ju("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=Ju("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=Ju("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=Ju("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Lu=ln.forwardRef(({className:t,variant:e="primary",isLoading:n=!1,children:r,...i},o)=>{const u={primary:"bg-primary text-white hover:bg-primary/90",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300"};return ae.jsx(_0.button,{ref:o,className:b2("w-full flex items-center justify-center font-bold py-3 px-4 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-accent disabled:opacity-50 disabled:cursor-not-allowed",u[e],t),whileTap:{scale:.97},disabled:n||i.disabled,...i,children:n?ae.jsx(Nb,{className:"animate-spin"}):r})}),uw=()=>ae.jsx("div",{className:"flex justify-center items-center py-10",children:ae.jsx(Nb,{className:"animate-spin text-primary",size:48})}),vV=({value:t})=>{const e=Math.max(0,Math.min(100,t));return ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:ae.jsx(_0.div,{className:"bg-success h-4 rounded-full",initial:{width:0},animate:{width:`${e}%`},transition:{duration:.5,ease:"easeInOut"}})})},xV={},w_=t=>{let e;const n=new Set,r=(w,x)=>{const _=typeof w=="function"?w(e):w;if(!Object.is(_,e)){const T=e;e=x??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(O=>O(e,T))}},i=()=>e,d={setState:r,getState:i,getInitialState:()=>g,subscribe:w=>(n.add(w),()=>n.delete(w)),destroy:()=>{(xV?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},g=e=t(r,i,d);return d},EV=t=>t?w_(t):w_;var Ob={exports:{}},Db={},Mb={exports:{}},kb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fu=Y;function _V(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var AV=typeof Object.is=="function"?Object.is:_V,CV=Fu.useState,TV=Fu.useEffect,IV=Fu.useLayoutEffect,SV=Fu.useDebugValue;function bV(t,e){var n=e(),r=CV({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return IV(function(){i.value=n,i.getSnapshot=e,Sp(i)&&o({inst:i})},[t,n,e]),TV(function(){return Sp(i)&&o({inst:i}),t(function(){Sp(i)&&o({inst:i})})},[t]),SV(n),n}function Sp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!AV(t,n)}catch{return!0}}function RV(t,e){return e()}var PV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?RV:bV;kb.useSyncExternalStore=Fu.useSyncExternalStore!==void 0?Fu.useSyncExternalStore:PV;Mb.exports=kb;var NV=Mb.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y1=Y,OV=NV;function DV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var MV=typeof Object.is=="function"?Object.is:DV,kV=OV.useSyncExternalStore,LV=y1.useRef,FV=y1.useEffect,BV=y1.useMemo,VV=y1.useDebugValue;Db.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=LV(null);if(o.current===null){var u={hasValue:!1,value:null};o.current=u}else u=o.current;o=BV(function(){function d(T){if(!g){if(g=!0,w=T,T=r(T),i!==void 0&&u.hasValue){var O=u.value;if(i(O,T))return x=O}return x=T}if(O=x,MV(w,T))return O;var M=r(T);return i!==void 0&&i(O,M)?(w=T,O):(w=T,x=M)}var g=!1,w,x,_=n===void 0?null:n;return[function(){return d(e())},_===null?void 0:function(){return d(_())}]},[e,n,r,i]);var f=kV(t,o[0],o[1]);return FV(function(){u.hasValue=!0,u.value=f},[f]),VV(f),f};Ob.exports=Db;var UV=Ob.exports;const jV=Nm(UV),Lb={},{useDebugValue:zV}=ln,{useSyncExternalStoreWithSelector:WV}=jV;let v_=!1;const HV=t=>t;function GV(t,e=HV,n){(Lb?"production":void 0)!=="production"&&n&&!v_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),v_=!0);const r=WV(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return zV(r),r}const x_=t=>{(Lb?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?EV(t):t,n=(r,i)=>GV(e,r,i);return Object.assign(n,e),n},KV=t=>t?x_(t):x_,Fb=KV(t=>({isOpen:!1,openScanner:()=>t({isOpen:!0}),closeScanner:()=>t({isOpen:!1})})),qV=({profile:t,progress:e})=>{const n=Fb(o=>o.openScanner),r=e.scannedCount/e.requiredScans*100,i=e.scannedCount>=e.requiredScans;return ae.jsxs(ou,{className:"space-y-6",children:[ae.jsxs("h2",{className:"text-2xl font-bold text-center",children:["Welcome, ",t.name,"!"]}),i?ae.jsx("div",{className:"text-center text-success font-semibold text-lg",children:"Congratulations! You've collected all your stamps!"}):ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("p",{className:"text-center text-gray-600",children:["You've scanned ",e.scannedCount," of ",e.requiredScans," stands."]}),ae.jsx(vV,{value:r}),ae.jsxs(Lu,{onClick:n,className:"w-full",children:[ae.jsx(yV,{className:"mr-2"})," Scan Another Stand"]})]})]})};function Bb(){const[t,e]=Y.useState(null),[n,r]=Y.useState(!0);return Y.useEffect(()=>{const i=oI(af,o=>{e(o),r(!1)});return()=>i()},[]),{user:t,loading:n}}var ec=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},XV={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},vo,Pm,H_,$V=(H_=class{constructor(){Re(this,vo,XV);Re(this,Pm,!1)}setTimeoutProvider(t){we(this,vo,t)}setTimeout(t,e){return q(this,vo).setTimeout(t,e)}clearTimeout(t){q(this,vo).clearTimeout(t)}setInterval(t,e){return q(this,vo).setInterval(t,e)}clearInterval(t){q(this,vo).clearInterval(t)}},vo=new WeakMap,Pm=new WeakMap,H_),Da=new $V;function QV(t){setTimeout(t,0)}var sl=typeof window>"u"||"Deno"in globalThis;function hr(){}function YV(t,e){return typeof t=="function"?t(e):t}function fm(t){return typeof t=="number"&&t>=0&&t!==1/0}function Vb(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ho(t,e){return typeof t=="function"?t(e):t}function ii(t,e){return typeof t=="function"?t(e):t}function E_(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:u,stale:f}=t;if(u){if(r){if(e.queryHash!==cw(u,e.options))return!1}else if(!Dh(e.queryKey,u))return!1}if(n!=="all"){const d=e.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof f=="boolean"&&e.isStale()!==f||i&&i!==e.state.fetchStatus||o&&!o(e))}function __(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(ol(e.options.mutationKey)!==ol(o))return!1}else if(!Dh(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function cw(t,e){return((e==null?void 0:e.queryKeyHashFn)||ol)(t)}function ol(t){return JSON.stringify(t,(e,n)=>dm(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Dh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Dh(t[n],e[n])):!1}var ZV=Object.prototype.hasOwnProperty;function Ub(t,e){if(t===e)return t;const n=A_(t)&&A_(e);if(!n&&!(dm(t)&&dm(e)))return e;const i=(n?t:Object.keys(t)).length,o=n?e:Object.keys(e),u=o.length,f=n?new Array(u):{};let d=0;for(let g=0;g<u;g++){const w=n?g:o[g],x=t[w],_=e[w];if(x===_){f[w]=x,(n?g<i:ZV.call(t,w))&&d++;continue}if(x===null||_===null||typeof x!="object"||typeof _!="object"){f[w]=_;continue}const T=Ub(x,_);f[w]=T,T===x&&d++}return i===u&&d===i?t:f}function A0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function A_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function dm(t){if(!C_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!C_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function C_(t){return Object.prototype.toString.call(t)==="[object Object]"}function JV(t){return new Promise(e=>{Da.setTimeout(e,t)})}function pm(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Ub(t,e):e}function eU(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function tU(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var hw=Symbol();function jb(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===hw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function zb(t,e){return typeof t=="function"?t(...e):!!t}var Ma,xo,au,G_,nU=(G_=class extends ec{constructor(){super();Re(this,Ma);Re(this,xo);Re(this,au);we(this,au,e=>{if(!sl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){q(this,xo)||this.setEventListener(q(this,au))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,xo))==null||e.call(this),we(this,xo,void 0))}setEventListener(e){var n;we(this,au,e),(n=q(this,xo))==null||n.call(this),we(this,xo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){q(this,Ma)!==e&&(we(this,Ma,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof q(this,Ma)=="boolean"?q(this,Ma):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ma=new WeakMap,xo=new WeakMap,au=new WeakMap,G_),fw=new nU;function gm(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var rU=QV;function iU(){let t=[],e=0,n=f=>{f()},r=f=>{f()},i=rU;const o=f=>{e?t.push(f):i(()=>{n(f)})},u=()=>{const f=t;t=[],f.length&&i(()=>{r(()=>{f.forEach(d=>{n(d)})})})};return{batch:f=>{let d;e++;try{d=f()}finally{e--,e||u()}return d},batchCalls:f=>(...d)=>{o(()=>{f(...d)})},schedule:o,setNotifyFunction:f=>{n=f},setBatchNotifyFunction:f=>{r=f},setScheduler:f=>{i=f}}}var Tn=iU(),lu,Eo,uu,K_,sU=(K_=class extends ec{constructor(){super();Re(this,lu,!0);Re(this,Eo);Re(this,uu);we(this,uu,e=>{if(!sl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){q(this,Eo)||this.setEventListener(q(this,uu))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,Eo))==null||e.call(this),we(this,Eo,void 0))}setEventListener(e){var n;we(this,uu,e),(n=q(this,Eo))==null||n.call(this),we(this,Eo,e(this.setOnline.bind(this)))}setOnline(e){q(this,lu)!==e&&(we(this,lu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return q(this,lu)}},lu=new WeakMap,Eo=new WeakMap,uu=new WeakMap,K_),C0=new sU;function oU(t){return Math.min(1e3*2**t,3e4)}function Wb(t){return(t??"online")==="online"?C0.isOnline():!0}var mm=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Hb(t){let e=!1,n=0,r;const i=gm(),o=()=>i.status!=="pending",u=M=>{var B;if(!o()){const k=new mm(M);_(k),(B=t.onCancel)==null||B.call(t,k)}},f=()=>{e=!0},d=()=>{e=!1},g=()=>fw.isFocused()&&(t.networkMode==="always"||C0.isOnline())&&t.canRun(),w=()=>Wb(t.networkMode)&&t.canRun(),x=M=>{o()||(r==null||r(),i.resolve(M))},_=M=>{o()||(r==null||r(),i.reject(M))},T=()=>new Promise(M=>{var B;r=k=>{(o()||g())&&M(k)},(B=t.onPause)==null||B.call(t)}).then(()=>{var M;r=void 0,o()||(M=t.onContinue)==null||M.call(t)}),O=()=>{if(o())return;let M;const B=n===0?t.initialPromise:void 0;try{M=B??t.fn()}catch(k){M=Promise.reject(k)}Promise.resolve(M).then(x).catch(k=>{var Z;if(o())return;const N=t.retry??(sl?0:3),R=t.retryDelay??oU,z=typeof R=="function"?R(n,k):R,Q=N===!0||typeof N=="number"&&n<N||typeof N=="function"&&N(n,k);if(e||!Q){_(k);return}n++,(Z=t.onFail)==null||Z.call(t,n,k),JV(z).then(()=>g()?void 0:T()).then(()=>{e?_(k):O()})})};return{promise:i,status:()=>i.status,cancel:u,continue:()=>(r==null||r(),i),cancelRetry:f,continueRetry:d,canStart:w,start:()=>(w()?O():T().then(O),i)}}var ka,q_,Gb=(q_=class{constructor(){Re(this,ka)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fm(this.gcTime)&&we(this,ka,Da.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(sl?1/0:5*60*1e3))}clearGcTimeout(){q(this,ka)&&(Da.clearTimeout(q(this,ka)),we(this,ka,void 0))}},ka=new WeakMap,q_),La,cu,ri,Fa,On,kh,Ba,xi,gs,X_,aU=(X_=class extends Gb{constructor(e){super();Re(this,xi);Re(this,La);Re(this,cu);Re(this,ri);Re(this,Fa);Re(this,On);Re(this,kh);Re(this,Ba);we(this,Ba,!1),we(this,kh,e.defaultOptions),this.setOptions(e.options),this.observers=[],we(this,Fa,e.client),we(this,ri,q(this,Fa).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,we(this,La,T_(this.options)),this.state=e.state??q(this,La),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=q(this,On))==null?void 0:e.promise}setOptions(e){if(this.options={...q(this,kh),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=T_(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),we(this,La,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,ri).remove(this)}setData(e,n){const r=pm(this.state.data,e,this.options);return Ge(this,xi,gs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ge(this,xi,gs).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=q(this,On))==null?void 0:r.promise;return(i=q(this,On))==null||i.cancel(e),n?n.then(hr).catch(hr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,La))}isActive(){return this.observers.some(e=>ii(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Ho(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Vb(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=q(this,On))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=q(this,On))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),q(this,ri).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(q(this,On)&&(q(this,Ba)?q(this,On).cancel({revert:!0}):q(this,On).cancelRetry()),this.scheduleGc()),q(this,ri).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ge(this,xi,gs).call(this,{type:"invalidate"})}async fetch(e,n){var d,g,w,x,_,T,O,M,B,k,N,R;if(this.state.fetchStatus!=="idle"&&((d=q(this,On))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(q(this,On))return q(this,On).continueRetry(),q(this,On).promise}if(e&&this.setOptions(e),!this.options.queryFn){const z=this.observers.find(Q=>Q.options.queryFn);z&&this.setOptions(z.options)}const r=new AbortController,i=z=>{Object.defineProperty(z,"signal",{enumerable:!0,get:()=>(we(this,Ba,!0),r.signal)})},o=()=>{const z=jb(this.options,n),Z=(()=>{const L={client:q(this,Fa),queryKey:this.queryKey,meta:this.meta};return i(L),L})();return we(this,Ba,!1),this.options.persister?this.options.persister(z,Z,this):z(Z)},f=(()=>{const z={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:q(this,Fa),state:this.state,fetchFn:o};return i(z),z})();(g=this.options.behavior)==null||g.onFetch(f,this),we(this,cu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((w=f.fetchOptions)==null?void 0:w.meta))&&Ge(this,xi,gs).call(this,{type:"fetch",meta:(x=f.fetchOptions)==null?void 0:x.meta}),we(this,On,Hb({initialPromise:n==null?void 0:n.initialPromise,fn:f.fetchFn,onCancel:z=>{z instanceof mm&&z.revert&&this.setState({...q(this,cu),fetchStatus:"idle"}),r.abort()},onFail:(z,Q)=>{Ge(this,xi,gs).call(this,{type:"failed",failureCount:z,error:Q})},onPause:()=>{Ge(this,xi,gs).call(this,{type:"pause"})},onContinue:()=>{Ge(this,xi,gs).call(this,{type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0}));try{const z=await q(this,On).start();if(z===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(z),(T=(_=q(this,ri).config).onSuccess)==null||T.call(_,z,this),(M=(O=q(this,ri).config).onSettled)==null||M.call(O,z,this.state.error,this),z}catch(z){if(z instanceof mm){if(z.silent)return q(this,On).promise;if(z.revert){if(this.state.data===void 0)throw z;return this.state.data}}throw Ge(this,xi,gs).call(this,{type:"error",error:z}),(k=(B=q(this,ri).config).onError)==null||k.call(B,z,this),(R=(N=q(this,ri).config).onSettled)==null||R.call(N,this.state.data,z,this),z}finally{this.scheduleGc()}}},La=new WeakMap,cu=new WeakMap,ri=new WeakMap,Fa=new WeakMap,On=new WeakMap,kh=new WeakMap,Ba=new WeakMap,xi=new WeakSet,gs=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Kb(r.data,this.options),fetchMeta:e.meta??null};case"success":const i={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return we(this,cu,e.manual?i:void 0),i;case"error":const o=e.error;return{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),q(this,ri).notify({query:this,type:"updated",action:e})})},X_);function Kb(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Wb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function T_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var _r,tt,Lh,lr,Va,hu,vs,_o,Fh,fu,du,Ua,ja,Ao,pu,pt,Mc,ym,wm,vm,xm,Em,_m,Am,qb,$_,lU=($_=class extends ec{constructor(e,n){super();Re(this,pt);Re(this,_r);Re(this,tt);Re(this,Lh);Re(this,lr);Re(this,Va);Re(this,hu);Re(this,vs);Re(this,_o);Re(this,Fh);Re(this,fu);Re(this,du);Re(this,Ua);Re(this,ja);Re(this,Ao);Re(this,pu,new Set);this.options=n,we(this,_r,e),we(this,_o,null),we(this,vs,gm()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,tt).addObserver(this),I_(q(this,tt),this.options)?Ge(this,pt,Mc).call(this):this.updateResult(),Ge(this,pt,xm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Cm(q(this,tt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Cm(q(this,tt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ge(this,pt,Em).call(this),Ge(this,pt,_m).call(this),q(this,tt).removeObserver(this)}setOptions(e){const n=this.options,r=q(this,tt);if(this.options=q(this,_r).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ii(this.options.enabled,q(this,tt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ge(this,pt,Am).call(this),q(this,tt).setOptions(this.options),n._defaulted&&!A0(this.options,n)&&q(this,_r).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,tt),observer:this});const i=this.hasListeners();i&&S_(q(this,tt),r,this.options,n)&&Ge(this,pt,Mc).call(this),this.updateResult(),i&&(q(this,tt)!==r||ii(this.options.enabled,q(this,tt))!==ii(n.enabled,q(this,tt))||Ho(this.options.staleTime,q(this,tt))!==Ho(n.staleTime,q(this,tt)))&&Ge(this,pt,ym).call(this);const o=Ge(this,pt,wm).call(this);i&&(q(this,tt)!==r||ii(this.options.enabled,q(this,tt))!==ii(n.enabled,q(this,tt))||o!==q(this,Ao))&&Ge(this,pt,vm).call(this,o)}getOptimisticResult(e){const n=q(this,_r).getQueryCache().build(q(this,_r),e),r=this.createResult(n,e);return cU(this,r)&&(we(this,lr,r),we(this,hu,this.options),we(this,Va,q(this,tt).state)),r}getCurrentResult(){return q(this,lr)}trackResult(e,n){return new Proxy(e,{get:(r,i)=>(this.trackProp(i),n==null||n(i),i==="promise"&&!this.options.experimental_prefetchInRender&&q(this,vs).status==="pending"&&q(this,vs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,i))})}trackProp(e){q(this,pu).add(e)}getCurrentQuery(){return q(this,tt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=q(this,_r).defaultQueryOptions(e),r=q(this,_r).getQueryCache().build(q(this,_r),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ge(this,pt,Mc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,lr)))}createResult(e,n){var F;const r=q(this,tt),i=this.options,o=q(this,lr),u=q(this,Va),f=q(this,hu),g=e!==r?e.state:q(this,Lh),{state:w}=e;let x={...w},_=!1,T;if(n._optimisticResults){const j=this.hasListeners(),K=!j&&I_(e,n),G=j&&S_(e,r,n,i);(K||G)&&(x={...x,...Kb(w.data,e.options)}),n._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:O,errorUpdatedAt:M,status:B}=x;T=x.data;let k=!1;if(n.placeholderData!==void 0&&T===void 0&&B==="pending"){let j;o!=null&&o.isPlaceholderData&&n.placeholderData===(f==null?void 0:f.placeholderData)?(j=o.data,k=!0):j=typeof n.placeholderData=="function"?n.placeholderData((F=q(this,du))==null?void 0:F.state.data,q(this,du)):n.placeholderData,j!==void 0&&(B="success",T=pm(o==null?void 0:o.data,j,n),_=!0)}if(n.select&&T!==void 0&&!k)if(o&&T===(u==null?void 0:u.data)&&n.select===q(this,Fh))T=q(this,fu);else try{we(this,Fh,n.select),T=n.select(T),T=pm(o==null?void 0:o.data,T,n),we(this,fu,T),we(this,_o,null)}catch(j){we(this,_o,j)}q(this,_o)&&(O=q(this,_o),T=q(this,fu),M=Date.now(),B="error");const N=x.fetchStatus==="fetching",R=B==="pending",z=B==="error",Q=R&&N,Z=T!==void 0,P={status:B,fetchStatus:x.fetchStatus,isPending:R,isSuccess:B==="success",isError:z,isInitialLoading:Q,isLoading:Q,data:T,dataUpdatedAt:x.dataUpdatedAt,error:O,errorUpdatedAt:M,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>g.dataUpdateCount||x.errorUpdateCount>g.errorUpdateCount,isFetching:N,isRefetching:N&&!R,isLoadingError:z&&!Z,isPaused:x.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:z&&Z,isStale:dw(e,n),refetch:this.refetch,promise:q(this,vs),isEnabled:ii(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=H=>{P.status==="error"?H.reject(P.error):P.data!==void 0&&H.resolve(P.data)},K=()=>{const H=we(this,vs,P.promise=gm());j(H)},G=q(this,vs);switch(G.status){case"pending":e.queryHash===r.queryHash&&j(G);break;case"fulfilled":(P.status==="error"||P.data!==G.value)&&K();break;case"rejected":(P.status!=="error"||P.error!==G.reason)&&K();break}}return P}updateResult(){const e=q(this,lr),n=this.createResult(q(this,tt),this.options);if(we(this,Va,q(this,tt).state),we(this,hu,this.options),q(this,Va).data!==void 0&&we(this,du,q(this,tt)),A0(n,e))return;we(this,lr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,o=typeof i=="function"?i():i;if(o==="all"||!o&&!q(this,pu).size)return!0;const u=new Set(o??q(this,pu));return this.options.throwOnError&&u.add("error"),Object.keys(q(this,lr)).some(f=>{const d=f;return q(this,lr)[d]!==e[d]&&u.has(d)})};Ge(this,pt,qb).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ge(this,pt,xm).call(this)}},_r=new WeakMap,tt=new WeakMap,Lh=new WeakMap,lr=new WeakMap,Va=new WeakMap,hu=new WeakMap,vs=new WeakMap,_o=new WeakMap,Fh=new WeakMap,fu=new WeakMap,du=new WeakMap,Ua=new WeakMap,ja=new WeakMap,Ao=new WeakMap,pu=new WeakMap,pt=new WeakSet,Mc=function(e){Ge(this,pt,Am).call(this);let n=q(this,tt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(hr)),n},ym=function(){Ge(this,pt,Em).call(this);const e=Ho(this.options.staleTime,q(this,tt));if(sl||q(this,lr).isStale||!fm(e))return;const r=Vb(q(this,lr).dataUpdatedAt,e)+1;we(this,Ua,Da.setTimeout(()=>{q(this,lr).isStale||this.updateResult()},r))},wm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,tt)):this.options.refetchInterval)??!1},vm=function(e){Ge(this,pt,_m).call(this),we(this,Ao,e),!(sl||ii(this.options.enabled,q(this,tt))===!1||!fm(q(this,Ao))||q(this,Ao)===0)&&we(this,ja,Da.setInterval(()=>{(this.options.refetchIntervalInBackground||fw.isFocused())&&Ge(this,pt,Mc).call(this)},q(this,Ao)))},xm=function(){Ge(this,pt,ym).call(this),Ge(this,pt,vm).call(this,Ge(this,pt,wm).call(this))},Em=function(){q(this,Ua)&&(Da.clearTimeout(q(this,Ua)),we(this,Ua,void 0))},_m=function(){q(this,ja)&&(Da.clearInterval(q(this,ja)),we(this,ja,void 0))},Am=function(){const e=q(this,_r).getQueryCache().build(q(this,_r),this.options);if(e===q(this,tt))return;const n=q(this,tt);we(this,tt,e),we(this,Lh,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},qb=function(e){Tn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(q(this,lr))}),q(this,_r).getQueryCache().notify({query:q(this,tt),type:"observerResultsUpdated"})})},$_);function uU(t,e){return ii(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function I_(t,e){return uU(t,e)||t.state.data!==void 0&&Cm(t,e,e.refetchOnMount)}function Cm(t,e,n){if(ii(e.enabled,t)!==!1&&Ho(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&dw(t,e)}return!1}function S_(t,e,n,r){return(t!==e||ii(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&dw(t,n)}function dw(t,e){return ii(e.enabled,t)!==!1&&t.isStaleByTime(Ho(e.staleTime,t))}function cU(t,e){return!A0(t.getCurrentResult(),e)}function b_(t){return{onFetch:(e,n)=>{var w,x,_,T,O;const r=e.options,i=(_=(x=(w=e.fetchOptions)==null?void 0:w.meta)==null?void 0:x.fetchMore)==null?void 0:_.direction,o=((T=e.state.data)==null?void 0:T.pages)||[],u=((O=e.state.data)==null?void 0:O.pageParams)||[];let f={pages:[],pageParams:[]},d=0;const g=async()=>{let M=!1;const B=R=>{Object.defineProperty(R,"signal",{enumerable:!0,get:()=>(e.signal.aborted?M=!0:e.signal.addEventListener("abort",()=>{M=!0}),e.signal)})},k=jb(e.options,e.fetchOptions),N=async(R,z,Q)=>{if(M)return Promise.reject();if(z==null&&R.pages.length)return Promise.resolve(R);const L=(()=>{const K={client:e.client,queryKey:e.queryKey,pageParam:z,direction:Q?"backward":"forward",meta:e.options.meta};return B(K),K})(),P=await k(L),{maxPages:F}=e.options,j=Q?tU:eU;return{pages:j(R.pages,P,F),pageParams:j(R.pageParams,z,F)}};if(i&&o.length){const R=i==="backward",z=R?hU:R_,Q={pages:o,pageParams:u},Z=z(r,Q);f=await N(Q,Z,R)}else{const R=t??o.length;do{const z=d===0?u[0]??r.initialPageParam:R_(r,f);if(d>0&&z==null)break;f=await N(f,z),d++}while(d<R)}return f};e.options.persister?e.fetchFn=()=>{var M,B;return(B=(M=e.options).persister)==null?void 0:B.call(M,g,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=g}}}function R_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function hU(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Bh,zi,ur,za,Wi,lo,Q_,fU=(Q_=class extends Gb{constructor(e){super();Re(this,Wi);Re(this,Bh);Re(this,zi);Re(this,ur);Re(this,za);we(this,Bh,e.client),this.mutationId=e.mutationId,we(this,ur,e.mutationCache),we(this,zi,[]),this.state=e.state||Xb(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){q(this,zi).includes(e)||(q(this,zi).push(e),this.clearGcTimeout(),q(this,ur).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){we(this,zi,q(this,zi).filter(n=>n!==e)),this.scheduleGc(),q(this,ur).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){q(this,zi).length||(this.state.status==="pending"?this.scheduleGc():q(this,ur).remove(this))}continue(){var e;return((e=q(this,za))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var u,f,d,g,w,x,_,T,O,M,B,k,N,R,z,Q,Z,L,P,F;const n=()=>{Ge(this,Wi,lo).call(this,{type:"continue"})},r={client:q(this,Bh),meta:this.options.meta,mutationKey:this.options.mutationKey};we(this,za,Hb({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(j,K)=>{Ge(this,Wi,lo).call(this,{type:"failed",failureCount:j,error:K})},onPause:()=>{Ge(this,Wi,lo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,ur).canRun(this)}));const i=this.state.status==="pending",o=!q(this,za).canStart();try{if(i)n();else{Ge(this,Wi,lo).call(this,{type:"pending",variables:e,isPaused:o}),await((f=(u=q(this,ur).config).onMutate)==null?void 0:f.call(u,e,this,r));const K=await((g=(d=this.options).onMutate)==null?void 0:g.call(d,e,r));K!==this.state.context&&Ge(this,Wi,lo).call(this,{type:"pending",context:K,variables:e,isPaused:o})}const j=await q(this,za).start();return await((x=(w=q(this,ur).config).onSuccess)==null?void 0:x.call(w,j,e,this.state.context,this,r)),await((T=(_=this.options).onSuccess)==null?void 0:T.call(_,j,e,this.state.context,r)),await((M=(O=q(this,ur).config).onSettled)==null?void 0:M.call(O,j,null,this.state.variables,this.state.context,this,r)),await((k=(B=this.options).onSettled)==null?void 0:k.call(B,j,null,e,this.state.context,r)),Ge(this,Wi,lo).call(this,{type:"success",data:j}),j}catch(j){try{throw await((R=(N=q(this,ur).config).onError)==null?void 0:R.call(N,j,e,this.state.context,this,r)),await((Q=(z=this.options).onError)==null?void 0:Q.call(z,j,e,this.state.context,r)),await((L=(Z=q(this,ur).config).onSettled)==null?void 0:L.call(Z,void 0,j,this.state.variables,this.state.context,this,r)),await((F=(P=this.options).onSettled)==null?void 0:F.call(P,void 0,j,e,this.state.context,r)),j}finally{Ge(this,Wi,lo).call(this,{type:"error",error:j})}}finally{q(this,ur).runNext(this)}}},Bh=new WeakMap,zi=new WeakMap,ur=new WeakMap,za=new WeakMap,Wi=new WeakSet,lo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Tn.batch(()=>{q(this,zi).forEach(r=>{r.onMutationUpdate(e)}),q(this,ur).notify({mutation:this,type:"updated",action:e})})},Q_);function Xb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xs,Ei,Vh,Y_,dU=(Y_=class extends ec{constructor(e={}){super();Re(this,xs);Re(this,Ei);Re(this,Vh);this.config=e,we(this,xs,new Set),we(this,Ei,new Map),we(this,Vh,0)}build(e,n,r){const i=new fU({client:e,mutationCache:this,mutationId:++If(this,Vh)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){q(this,xs).add(e);const n=Jf(e);if(typeof n=="string"){const r=q(this,Ei).get(n);r?r.push(e):q(this,Ei).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(q(this,xs).delete(e)){const n=Jf(e);if(typeof n=="string"){const r=q(this,Ei).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&q(this,Ei).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Jf(e);if(typeof n=="string"){const r=q(this,Ei).get(n),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Jf(e);if(typeof n=="string"){const i=(r=q(this,Ei).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tn.batch(()=>{q(this,xs).forEach(e=>{this.notify({type:"removed",mutation:e})}),q(this,xs).clear(),q(this,Ei).clear()})}getAll(){return Array.from(q(this,xs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>__(n,r))}findAll(e={}){return this.getAll().filter(n=>__(e,n))}notify(e){Tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Tn.batch(()=>Promise.all(e.map(n=>n.continue().catch(hr))))}},xs=new WeakMap,Ei=new WeakMap,Vh=new WeakMap,Y_);function Jf(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Es,Co,Ar,_s,Ds,Id,Tm,Z_,pU=(Z_=class extends ec{constructor(n,r){super();Re(this,Ds);Re(this,Es);Re(this,Co);Re(this,Ar);Re(this,_s);we(this,Es,n),this.setOptions(r),this.bindMethods(),Ge(this,Ds,Id).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=q(this,Es).defaultMutationOptions(n),A0(this.options,r)||q(this,Es).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,Ar),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&ol(r.mutationKey)!==ol(this.options.mutationKey)?this.reset():((i=q(this,Ar))==null?void 0:i.state.status)==="pending"&&q(this,Ar).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=q(this,Ar))==null||n.removeObserver(this)}onMutationUpdate(n){Ge(this,Ds,Id).call(this),Ge(this,Ds,Tm).call(this,n)}getCurrentResult(){return q(this,Co)}reset(){var n;(n=q(this,Ar))==null||n.removeObserver(this),we(this,Ar,void 0),Ge(this,Ds,Id).call(this),Ge(this,Ds,Tm).call(this)}mutate(n,r){var i;return we(this,_s,r),(i=q(this,Ar))==null||i.removeObserver(this),we(this,Ar,q(this,Es).getMutationCache().build(q(this,Es),this.options)),q(this,Ar).addObserver(this),q(this,Ar).execute(n)}},Es=new WeakMap,Co=new WeakMap,Ar=new WeakMap,_s=new WeakMap,Ds=new WeakSet,Id=function(){var r;const n=((r=q(this,Ar))==null?void 0:r.state)??Xb();we(this,Co,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Tm=function(n){Tn.batch(()=>{var r,i,o,u,f,d,g,w;if(q(this,_s)&&this.hasListeners()){const x=q(this,Co).variables,_=q(this,Co).context,T={client:q(this,Es),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((i=(r=q(this,_s)).onSuccess)==null||i.call(r,n.data,x,_,T),(u=(o=q(this,_s)).onSettled)==null||u.call(o,n.data,null,x,_,T)):(n==null?void 0:n.type)==="error"&&((d=(f=q(this,_s)).onError)==null||d.call(f,n.error,x,_,T),(w=(g=q(this,_s)).onSettled)==null||w.call(g,void 0,n.error,x,_,T))}this.listeners.forEach(x=>{x(q(this,Co))})})},Z_),Hi,J_,gU=(J_=class extends ec{constructor(e={}){super();Re(this,Hi);this.config=e,we(this,Hi,new Map)}build(e,n,r){const i=n.queryKey,o=n.queryHash??cw(i,n);let u=this.get(o);return u||(u=new aU({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(u)),u}add(e){q(this,Hi).has(e.queryHash)||(q(this,Hi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=q(this,Hi).get(e.queryHash);n&&(e.destroy(),n===e&&q(this,Hi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Tn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return q(this,Hi).get(e)}getAll(){return[...q(this,Hi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>E_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>E_(e,r)):n}notify(e){Tn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hi=new WeakMap,J_),Jt,To,Io,gu,mu,So,yu,wu,eA,mU=(eA=class{constructor(t={}){Re(this,Jt);Re(this,To);Re(this,Io);Re(this,gu);Re(this,mu);Re(this,So);Re(this,yu);Re(this,wu);we(this,Jt,t.queryCache||new gU),we(this,To,t.mutationCache||new dU),we(this,Io,t.defaultOptions||{}),we(this,gu,new Map),we(this,mu,new Map),we(this,So,0)}mount(){If(this,So)._++,q(this,So)===1&&(we(this,yu,fw.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,Jt).onFocus())})),we(this,wu,C0.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,Jt).onOnline())})))}unmount(){var t,e;If(this,So)._--,q(this,So)===0&&((t=q(this,yu))==null||t.call(this),we(this,yu,void 0),(e=q(this,wu))==null||e.call(this),we(this,wu,void 0))}isFetching(t){return q(this,Jt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return q(this,To).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,Jt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=q(this,Jt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ho(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return q(this,Jt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=q(this,Jt).get(r.queryHash),o=i==null?void 0:i.state.data,u=YV(e,o);if(u!==void 0)return q(this,Jt).build(this,r).setData(u,{...n,manual:!0})}setQueriesData(t,e,n){return Tn.batch(()=>q(this,Jt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,Jt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=q(this,Jt);Tn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=q(this,Jt);return Tn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Tn.batch(()=>q(this,Jt).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(hr).catch(hr)}invalidateQueries(t,e={}){return Tn.batch(()=>(q(this,Jt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Tn.batch(()=>q(this,Jt).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(hr)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(hr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=q(this,Jt).build(this,e);return n.isStaleByTime(Ho(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hr).catch(hr)}fetchInfiniteQuery(t){return t.behavior=b_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hr).catch(hr)}ensureInfiniteQueryData(t){return t.behavior=b_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return C0.isOnline()?q(this,To).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,Jt)}getMutationCache(){return q(this,To)}getDefaultOptions(){return q(this,Io)}setDefaultOptions(t){we(this,Io,t)}setQueryDefaults(t,e){q(this,gu).set(ol(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...q(this,gu).values()],n={};return e.forEach(r=>{Dh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){q(this,mu).set(ol(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...q(this,mu).values()],n={};return e.forEach(r=>{Dh(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...q(this,Io).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=cw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===hw&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...q(this,Io).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){q(this,Jt).clear(),q(this,To).clear()}},Jt=new WeakMap,To=new WeakMap,Io=new WeakMap,gu=new WeakMap,mu=new WeakMap,So=new WeakMap,yu=new WeakMap,wu=new WeakMap,eA),$b=Y.createContext(void 0),ff=t=>{const e=Y.useContext($b);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},yU=({client:t,children:e})=>(Y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),ae.jsx($b.Provider,{value:t,children:e})),Qb=Y.createContext(!1),wU=()=>Y.useContext(Qb);Qb.Provider;function vU(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var xU=Y.createContext(vU()),EU=()=>Y.useContext(xU),_U=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},AU=t=>{Y.useEffect(()=>{t.clearReset()},[t])},CU=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||zb(n,[t.error,r])),TU=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},IU=(t,e)=>t.isLoading&&t.isFetching&&!e,SU=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,P_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function bU(t,e,n){var x,_,T,O,M;const r=wU(),i=EU(),o=ff(),u=o.defaultQueryOptions(t);(_=(x=o.getDefaultOptions().queries)==null?void 0:x._experimental_beforeQuery)==null||_.call(x,u),u._optimisticResults=r?"isRestoring":"optimistic",TU(u),_U(u,i),AU(i);const f=!o.getQueryCache().get(u.queryHash),[d]=Y.useState(()=>new e(o,u)),g=d.getOptimisticResult(u),w=!r&&t.subscribed!==!1;if(Y.useSyncExternalStore(Y.useCallback(B=>{const k=w?d.subscribe(Tn.batchCalls(B)):hr;return d.updateResult(),k},[d,w]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),Y.useEffect(()=>{d.setOptions(u)},[u,d]),SU(u,g))throw P_(u,d,i);if(CU({result:g,errorResetBoundary:i,throwOnError:u.throwOnError,query:o.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw g.error;if((O=(T=o.getDefaultOptions().queries)==null?void 0:T._experimental_afterQuery)==null||O.call(T,u,g),u.experimental_prefetchInRender&&!sl&&IU(g,r)){const B=f?P_(u,d,i):(M=o.getQueryCache().get(u.queryHash))==null?void 0:M.promise;B==null||B.catch(hr).finally(()=>{d.updateResult()})}return u.notifyOnChangeProps?g:d.trackResult(g)}function Yb(t,e){return bU(t,lU)}function T0(t,e){const n=ff(),[r]=Y.useState(()=>new pU(n,t));Y.useEffect(()=>{r.setOptions(t)},[r,t]);const i=Y.useSyncExternalStore(Y.useCallback(u=>r.subscribe(Tn.batchCalls(u)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=Y.useCallback((u,f)=>{r.mutate(u,f).catch(hr)},[r]);if(i.error&&zb(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}const pw="fic-2025",RU=async t=>{if(!t)return{profile:null,progress:null};const e=il(Ps,"users",t.uid),n=await Sh(e);if(!n.exists())return{profile:null,progress:null};const r=n.data(),i=il(Ps,"events",pw),o=await Sh(i),u=o.exists()?o.data().requiredScans:0;console.log("getUserData: requiredScans",u);const f=f2(Ps,"users",t.uid,"scans"),g=(await k5(f)).data().count;return{profile:r,progress:{scannedCount:g,requiredScans:u}}},PU=async({user:t,name:e,email:n})=>{const r=il(Ps,"users",t.uid),i={name:e,email:n,createdAt:Xt.now(),eventId:pw};await GS(r,i)},NU=async({userId:t,standId:e})=>{const n=il(Ps,`events/${pw}/stands`,e);if(!(await Sh(n)).exists())throw new Error("Invalid stand QR code.");const i=il(Ps,`users/${t}/scans`,e);if((await Sh(i)).exists())throw new Error("You've already scanned this stand!");await GS(i,{scannedAt:Xt.now()})};let OU={data:""},DU=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"});return window.__nonce__&&e.setAttribute("nonce",window.__nonce__),e.firstChild}return t||OU},MU=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kU=/\/\*[^]*?\*\/|  +/g,N_=/\n+/g,wo=(t,e)=>{let n="",r="",i="";for(let o in t){let u=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+u+";":r+=o[1]=="f"?wo(u,o):o+"{"+wo(u,o[1]=="k"?"":e)+"}":typeof u=="object"?r+=wo(u,e?e.replace(/([^,])+/g,f=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,f):f?f+" "+d:d)):o):u!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=wo.p?wo.p(o,u):o+":"+u+";")}return n+(e&&i?e+"{"+i+"}":i)+r},ps={},Zb=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Zb(t[n]);return e}return t},LU=(t,e,n,r,i)=>{let o=Zb(t),u=ps[o]||(ps[o]=(d=>{let g=0,w=11;for(;g<d.length;)w=101*w+d.charCodeAt(g++)>>>0;return"go"+w})(o));if(!ps[u]){let d=o!==t?t:(g=>{let w,x,_=[{}];for(;w=MU.exec(g.replace(kU,""));)w[4]?_.shift():w[3]?(x=w[3].replace(N_," ").trim(),_.unshift(_[0][x]=_[0][x]||{})):_[0][w[1]]=w[2].replace(N_," ").trim();return _[0]})(t);ps[u]=wo(i?{["@keyframes "+u]:d}:d,n?"":"."+u)}let f=n&&ps.g?ps.g:null;return n&&(ps.g=ps[u]),((d,g,w,x)=>{x?g.data=g.data.replace(x,d):g.data.indexOf(d)===-1&&(g.data=w?d+g.data:g.data+d)})(ps[u],e,r,f),u},FU=(t,e,n)=>t.reduce((r,i,o)=>{let u=e[o];if(u&&u.call){let f=u(n),d=f&&f.props&&f.props.className||/^go/.test(f)&&f;u=d?"."+d:f&&typeof f=="object"?f.props?"":wo(f,""):f===!1?"":f}return r+i+(u??"")},"");function w1(t){let e=this||{},n=t.call?t(e.p):t;return LU(n.unshift?n.raw?FU(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,DU(e.target),e.g,e.o,e.k)}let Jb,Im,Sm;w1.bind({g:1});let Hs=w1.bind({k:1});function BU(t,e,n,r){wo.p=e,Jb=t,Im=n,Sm=r}function ia(t,e){let n=this||{};return function(){let r=arguments;function i(o,u){let f=Object.assign({},o),d=f.className||i.className;n.p=Object.assign({theme:Im&&Im()},f),n.o=/ *go\d+/.test(d),f.className=w1.apply(n,r)+(d?" "+d:"");let g=t;return t[0]&&(g=f.as||t,delete f.as),Sm&&g[0]&&Sm(f),Jb(g,f)}return i}}var VU=t=>typeof t=="function",I0=(t,e)=>VU(t)?t(e):t,UU=(()=>{let t=0;return()=>(++t).toString()})(),eR=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),jU=20,gw="default",tR=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(u=>u.id===e.toast.id?{...u,...e.toast}:u)};case 2:let{toast:r}=e;return tR(t,{type:t.toasts.find(u=>u.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(u=>u.id===i||i===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(u=>u.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let o=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+o}))}}},Sd=[],nR={toasts:[],pausedAt:void 0,settings:{toastLimit:jU}},qi={},rR=(t,e=gw)=>{qi[e]=tR(qi[e]||nR,t),Sd.forEach(([n,r])=>{n===e&&r(qi[e])})},iR=t=>Object.keys(qi).forEach(e=>rR(t,e)),zU=t=>Object.keys(qi).find(e=>qi[e].toasts.some(n=>n.id===t)),v1=(t=gw)=>e=>{rR(e,t)},WU={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},HU=(t={},e=gw)=>{let[n,r]=Y.useState(qi[e]||nR),i=Y.useRef(qi[e]);Y.useEffect(()=>(i.current!==qi[e]&&r(qi[e]),Sd.push([e,r]),()=>{let u=Sd.findIndex(([f])=>f===e);u>-1&&Sd.splice(u,1)}),[e]);let o=n.toasts.map(u=>{var f,d,g;return{...t,...t[u.type],...u,removeDelay:u.removeDelay||((f=t[u.type])==null?void 0:f.removeDelay)||(t==null?void 0:t.removeDelay),duration:u.duration||((d=t[u.type])==null?void 0:d.duration)||(t==null?void 0:t.duration)||WU[u.type],style:{...t.style,...(g=t[u.type])==null?void 0:g.style,...u.style}}});return{...n,toasts:o}},GU=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||UU()}),df=t=>(e,n)=>{let r=GU(e,t,n);return v1(r.toasterId||zU(r.id))({type:2,toast:r}),r.id},In=(t,e)=>df("blank")(t,e);In.error=df("error");In.success=df("success");In.loading=df("loading");In.custom=df("custom");In.dismiss=(t,e)=>{let n={type:3,toastId:t};e?v1(e)(n):iR(n)};In.dismissAll=t=>In.dismiss(void 0,t);In.remove=(t,e)=>{let n={type:4,toastId:t};e?v1(e)(n):iR(n)};In.removeAll=t=>In.remove(void 0,t);In.promise=(t,e,n)=>{let r=In.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let o=e.success?I0(e.success,i):void 0;return o?In.success(o,{id:r,...n,...n==null?void 0:n.success}):In.dismiss(r),i}).catch(i=>{let o=e.error?I0(e.error,i):void 0;o?In.error(o,{id:r,...n,...n==null?void 0:n.error}):In.dismiss(r)}),t};var KU=1e3,qU=(t,e="default")=>{let{toasts:n,pausedAt:r}=HU(t,e),i=Y.useRef(new Map).current,o=Y.useCallback((x,_=KU)=>{if(i.has(x))return;let T=setTimeout(()=>{i.delete(x),u({type:4,toastId:x})},_);i.set(x,T)},[]);Y.useEffect(()=>{if(r)return;let x=Date.now(),_=n.map(T=>{if(T.duration===1/0)return;let O=(T.duration||0)+T.pauseDuration-(x-T.createdAt);if(O<0){T.visible&&In.dismiss(T.id);return}return setTimeout(()=>In.dismiss(T.id,e),O)});return()=>{_.forEach(T=>T&&clearTimeout(T))}},[n,r,e]);let u=Y.useCallback(v1(e),[e]),f=Y.useCallback(()=>{u({type:5,time:Date.now()})},[u]),d=Y.useCallback((x,_)=>{u({type:1,toast:{id:x,height:_}})},[u]),g=Y.useCallback(()=>{r&&u({type:6,time:Date.now()})},[r,u]),w=Y.useCallback((x,_)=>{let{reverseOrder:T=!1,gutter:O=8,defaultPosition:M}=_||{},B=n.filter(R=>(R.position||M)===(x.position||M)&&R.height),k=B.findIndex(R=>R.id===x.id),N=B.filter((R,z)=>z<k&&R.visible).length;return B.filter(R=>R.visible).slice(...T?[N+1]:[0,N]).reduce((R,z)=>R+(z.height||0)+O,0)},[n]);return Y.useEffect(()=>{n.forEach(x=>{if(x.dismissed)o(x.id,x.removeDelay);else{let _=i.get(x.id);_&&(clearTimeout(_),i.delete(x.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:d,startPause:f,endPause:g,calculateOffset:w}}},XU=Hs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,$U=Hs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,QU=Hs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,YU=ia("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${XU} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${$U} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${QU} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ZU=Hs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,JU=ia("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${ZU} 1s linear infinite;
`,ej=Hs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,tj=Hs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,nj=ia("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ej} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${tj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,rj=ia("div")`
  position: absolute;
`,ij=ia("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,sj=Hs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oj=ia("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${sj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,aj=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?Y.createElement(oj,null,e):e:n==="blank"?null:Y.createElement(ij,null,Y.createElement(JU,{...r}),n!=="loading"&&Y.createElement(rj,null,n==="error"?Y.createElement(YU,{...r}):Y.createElement(nj,{...r})))},lj=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,uj=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,cj="0%{opacity:0;} 100%{opacity:1;}",hj="0%{opacity:1;} 100%{opacity:0;}",fj=ia("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,dj=ia("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,pj=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=eR()?[cj,hj]:[lj(n),uj(n)];return{animation:e?`${Hs(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Hs(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},gj=Y.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?pj(t.position||e||"top-center",t.visible):{opacity:0},o=Y.createElement(aj,{toast:t}),u=Y.createElement(dj,{...t.ariaProps},I0(t.message,t));return Y.createElement(fj,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:o,message:u}):Y.createElement(Y.Fragment,null,o,u))});BU(Y.createElement);var mj=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let o=Y.useCallback(u=>{if(u){let f=()=>{let d=u.getBoundingClientRect().height;r(t,d)};f(),new MutationObserver(f).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return Y.createElement("div",{ref:o,className:e,style:n},i)},yj=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:eR()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},wj=w1`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ed=16,vj=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:o,containerStyle:u,containerClassName:f})=>{let{toasts:d,handlers:g}=qU(n,o);return Y.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:ed,left:ed,right:ed,bottom:ed,pointerEvents:"none",...u},className:f,onMouseEnter:g.startPause,onMouseLeave:g.endPause},d.map(w=>{let x=w.position||e,_=g.calculateOffset(w,{reverseOrder:t,gutter:r,defaultPosition:e}),T=yj(x,_);return Y.createElement(mj,{id:w.id,key:w.id,onHeightUpdate:g.updateHeight,className:w.visible?wj:"",style:T},w.type==="custom"?I0(w.message,w):i?i(w):Y.createElement(gj,{toast:w,position:x}))}))},Wr=In,Ee;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ee||(Ee={}));var O_=new Map([[Ee.QR_CODE,"QR_CODE"],[Ee.AZTEC,"AZTEC"],[Ee.CODABAR,"CODABAR"],[Ee.CODE_39,"CODE_39"],[Ee.CODE_93,"CODE_93"],[Ee.CODE_128,"CODE_128"],[Ee.DATA_MATRIX,"DATA_MATRIX"],[Ee.MAXICODE,"MAXICODE"],[Ee.ITF,"ITF"],[Ee.EAN_13,"EAN_13"],[Ee.EAN_8,"EAN_8"],[Ee.PDF_417,"PDF_417"],[Ee.RSS_14,"RSS_14"],[Ee.RSS_EXPANDED,"RSS_EXPANDED"],[Ee.UPC_A,"UPC_A"],[Ee.UPC_E,"UPC_E"],[Ee.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),D_;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(D_||(D_={}));function xj(t){return Object.values(Ee).includes(t)}var S0;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(S0||(S0={}));var Ej=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[S0.SCAN_TYPE_CAMERA,S0.SCAN_TYPE_FILE],t}(),sR=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!O_.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,O_.get(e))},t}(),M_=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),bm;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(bm||(bm={}));var _j=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:bm.UNKWOWN_ERROR}},t}(),Aj=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ms(t){return typeof t>"u"||t===null}var Kl=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),oR=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),u=Object.keys(e),f=0,d=u;f<d.length;f++){var g=d[f];if(o.has(g))return n.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t}(),Rm={exports:{}};(function(t,e){(function(n,r){r(e)})(cc,function(n){function r(S){return S==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,s){S.__proto__=s}||function(S,s){for(var a in s)s.hasOwnProperty(a)&&(S[a]=s[a])};function o(S,s){i(S,s);function a(){this.constructor=S}S.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function u(S,s){var a=Object.setPrototypeOf;a?a(S,s):S.__proto__=s}function f(S,s){s===void 0&&(s=S.constructor);var a=Error.captureStackTrace;a&&a(S,s)}var d=function(S){o(s,S);function s(a){var l=this.constructor,c=S.call(this,a)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1}),u(c,l.prototype),f(c),c}return s}(Error);class g extends d{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}g.kind="Exception";class w extends g{}w.kind="ArgumentException";class x extends g{}x.kind="IllegalArgumentException";class _{constructor(s){if(this.binarizer=s,s===null)throw new x("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,a){return this.binarizer.getBlackRow(s,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,a,l,c){const h=this.binarizer.getLuminanceSource().crop(s,a,l,c);return new _(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends g{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class O{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(s,a,l,c,h){for(;h--;)l[c++]=s[a++]}static currentTimeMillis(){return Date.now()}}class B extends g{}B.kind="IndexOutOfBoundsException";class k extends B{constructor(s=void 0,a=void 0){super(a),this.index=s,this.message=a}}k.kind="ArrayIndexOutOfBoundsException";class N{static fill(s,a){for(let l=0,c=s.length;l<c;l++)s[l]=a}static fillWithin(s,a,l,c){N.rangeCheck(s.length,a,l);for(let h=a;h<l;h++)s[h]=c}static rangeCheck(s,a,l){if(a>l)throw new x("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new k(a);if(l>s)throw new k(l)}static asList(...s){return s}static create(s,a,l){return Array.from({length:s}).map(h=>Array.from({length:a}).fill(l))}static createInt32Array(s,a,l){return Array.from({length:s}).map(h=>Int32Array.from({length:a}).fill(l))}static equals(s,a){if(!s||!a||!s.length||!a.length||s.length!==a.length)return!1;for(let l=0,c=s.length;l<c;l++)if(s[l]!==a[l])return!1;return!0}static hashCode(s){if(s===null)return 0;let a=1;for(const l of s)a=31*a+l;return a}static fillUint8Array(s,a){for(let l=0;l!==s.length;l++)s[l]=a}static copyOf(s,a){return s.slice(0,a)}static copyOfUint8Array(s,a){if(s.length<=a){const l=new Uint8Array(a);return l.set(s),l}return s.slice(0,a)}static copyOfRange(s,a,l){const c=l-a,h=new Int32Array(c);return M.arraycopy(s,a,h,0,c),h}static binarySearch(s,a,l){l===void 0&&(l=N.numberComparator);let c=0,h=s.length-1;for(;c<=h;){const p=h+c>>1,m=l(a,s[p]);if(m>0)c=p+1;else if(m<0)h=p-1;else return p}return-c-1}static numberComparator(s,a){return s-a}}class R{static numberOfTrailingZeros(s){let a;if(s===0)return 32;let l=31;return a=s<<16,a!==0&&(l-=16,s=a),a=s<<8,a!==0&&(l-=8,s=a),a=s<<4,a!==0&&(l-=4,s=a),a=s<<2,a!==0&&(l-=2,s=a),l-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let a=1;return s>>>16||(a+=16,s<<=16),s>>>24||(a+=8,s<<=8),s>>>28||(a+=4,s<<=4),s>>>30||(a+=2,s<<=2),a-=s>>>31,a}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,a){return Math.trunc(s/a)}static parseInt(s,a=void 0){return parseInt(s,a)}}R.MIN_VALUE_32_BITS=-2147483648,R.MAX_VALUE=Number.MAX_SAFE_INTEGER;class z{constructor(s,a){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,a==null?this.bits=z.makeArray(s):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const a=z.makeArray(s);M.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const a=this.size;if(s>=a)return a;const l=this.bits;let c=Math.floor(s/32),h=l[c];h&=~((1<<(s&31))-1);const p=l.length;for(;h===0;){if(++c===p)return a;h=l[c]}const m=c*32+R.numberOfTrailingZeros(h);return m>a?a:m}getNextUnset(s){const a=this.size;if(s>=a)return a;const l=this.bits;let c=Math.floor(s/32),h=~l[c];h&=~((1<<(s&31))-1);const p=l.length;for(;h===0;){if(++c===p)return a;h=~l[c]}const m=c*32+R.numberOfTrailingZeros(h);return m>a?a:m}setBulk(s,a){this.bits[Math.floor(s/32)]=a}setRange(s,a){if(a<s||s<0||a>this.size)throw new x;if(a===s)return;a--;const l=Math.floor(s/32),c=Math.floor(a/32),h=this.bits;for(let p=l;p<=c;p++){const m=p>l?0:s&31,E=(2<<(p<c?31:a&31))-(1<<m);h[p]|=E}}clear(){const s=this.bits.length,a=this.bits;for(let l=0;l<s;l++)a[l]=0}isRange(s,a,l){if(a<s||s<0||a>this.size)throw new x;if(a===s)return!0;a--;const c=Math.floor(s/32),h=Math.floor(a/32),p=this.bits;for(let m=c;m<=h;m++){const v=m>c?0:s&31,C=(2<<(m<h?31:a&31))-(1<<v)&4294967295;if((p[m]&C)!==(l?C:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,a){if(a<0||a>32)throw new x("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((s>>l-1&1)===1)}appendBitArray(s){const a=s.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(s.get(l))}xor(s){if(this.size!==s.size)throw new x("Sizes don't match");const a=this.bits;for(let l=0,c=a.length;l<c;l++)a[l]^=s.bits[l]}toBytes(s,a,l,c){for(let h=0;h<c;h++){let p=0;for(let m=0;m<8;m++)this.get(s)&&(p|=1<<7-m),s++;a[l+h]=p}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,c=this.bits;for(let h=0;h<l;h++){let p=c[h];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,s[a-h]=p}if(this.size!==l*32){const h=l*32-this.size;let p=s[0]>>>h;for(let m=1;m<l;m++){const v=s[m];p|=v<<32-h,s[m-1]=p,p=v>>>h}s[l-1]=p}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof z))return!1;const a=s;return this.size===a.size&&N.equals(this.bits,a.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let s="";for(let a=0,l=this.size;a<l;a++)a&7||(s+=" "),s+=this.get(a)?"X":".";return s}clone(){return new z(this.size,this.bits.slice())}}var Q;(function(S){S[S.OTHER=0]="OTHER",S[S.PURE_BARCODE=1]="PURE_BARCODE",S[S.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",S[S.TRY_HARDER=3]="TRY_HARDER",S[S.CHARACTER_SET=4]="CHARACTER_SET",S[S.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",S[S.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",S[S.ASSUME_GS1=7]="ASSUME_GS1",S[S.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",S[S.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",S[S.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Q||(Q={}));var Z=Q;class L extends g{static getFormatInstance(){return new L}}L.kind="FormatException";var P;(function(S){S[S.Cp437=0]="Cp437",S[S.ISO8859_1=1]="ISO8859_1",S[S.ISO8859_2=2]="ISO8859_2",S[S.ISO8859_3=3]="ISO8859_3",S[S.ISO8859_4=4]="ISO8859_4",S[S.ISO8859_5=5]="ISO8859_5",S[S.ISO8859_6=6]="ISO8859_6",S[S.ISO8859_7=7]="ISO8859_7",S[S.ISO8859_8=8]="ISO8859_8",S[S.ISO8859_9=9]="ISO8859_9",S[S.ISO8859_10=10]="ISO8859_10",S[S.ISO8859_11=11]="ISO8859_11",S[S.ISO8859_13=12]="ISO8859_13",S[S.ISO8859_14=13]="ISO8859_14",S[S.ISO8859_15=14]="ISO8859_15",S[S.ISO8859_16=15]="ISO8859_16",S[S.SJIS=16]="SJIS",S[S.Cp1250=17]="Cp1250",S[S.Cp1251=18]="Cp1251",S[S.Cp1252=19]="Cp1252",S[S.Cp1256=20]="Cp1256",S[S.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",S[S.UTF8=22]="UTF8",S[S.ASCII=23]="ASCII",S[S.Big5=24]="Big5",S[S.GB18030=25]="GB18030",S[S.EUC_KR=26]="EUC_KR"})(P||(P={}));class F{constructor(s,a,l,...c){this.valueIdentifier=s,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=c,F.VALUE_IDENTIFIER_TO_ECI.set(s,this),F.NAME_TO_ECI.set(l,this);const h=this.values;for(let p=0,m=h.length;p!==m;p++){const v=h[p];F.VALUES_TO_ECI.set(v,this)}for(const p of c)F.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new L("incorect value");const a=F.VALUES_TO_ECI.get(s);if(a===void 0)throw new L("incorect value");return a}static getCharacterSetECIByName(s){const a=F.NAME_TO_ECI.get(s);if(a===void 0)throw new L("incorect value");return a}equals(s){if(!(s instanceof F))return!1;const a=s;return this.getName()===a.getName()}}F.VALUE_IDENTIFIER_TO_ECI=new Map,F.VALUES_TO_ECI=new Map,F.NAME_TO_ECI=new Map,F.Cp437=new F(P.Cp437,Int32Array.from([0,2]),"Cp437"),F.ISO8859_1=new F(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),F.ISO8859_2=new F(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),F.ISO8859_3=new F(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),F.ISO8859_4=new F(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),F.ISO8859_5=new F(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),F.ISO8859_6=new F(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),F.ISO8859_7=new F(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),F.ISO8859_8=new F(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),F.ISO8859_9=new F(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),F.ISO8859_10=new F(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),F.ISO8859_11=new F(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),F.ISO8859_13=new F(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),F.ISO8859_14=new F(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),F.ISO8859_15=new F(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),F.ISO8859_16=new F(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),F.SJIS=new F(P.SJIS,20,"SJIS","Shift_JIS"),F.Cp1250=new F(P.Cp1250,21,"Cp1250","windows-1250"),F.Cp1251=new F(P.Cp1251,22,"Cp1251","windows-1251"),F.Cp1252=new F(P.Cp1252,23,"Cp1252","windows-1252"),F.Cp1256=new F(P.Cp1256,24,"Cp1256","windows-1256"),F.UnicodeBigUnmarked=new F(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),F.UTF8=new F(P.UTF8,26,"UTF8","UTF-8"),F.ASCII=new F(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),F.Big5=new F(P.Big5,28,"Big5"),F.GB18030=new F(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),F.EUC_KR=new F(P.EUC_KR,30,"EUC_KR","EUC-KR");class j extends g{}j.kind="UnsupportedOperationException";class K{static decode(s,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(s,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(s,l):new TextDecoder(l).decode(s)}static shouldDecodeOnFallback(s){return!K.isBrowser()&&s==="ISO-8859-1"}static encode(s,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(s,l):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof F?s:F.getCharacterSetECIByName(s)}static decodeFallback(s,a){const l=this.encodingCharacterSet(a);if(K.isDecodeFallbackSupported(l)){let c="";for(let h=0,p=s.length;h<p;h++){let m=s[h].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(l.equals(F.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new j(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(F.UTF8)||s.equals(F.ISO8859_1)||s.equals(F.ASCII)}static encodeFallback(s){const l=btoa(unescape(encodeURIComponent(s))).split(""),c=[];for(let h=0;h<l.length;h++)c.push(l[h].charCodeAt(0));return new Uint8Array(c)}}class G{static castAsNonUtf8Char(s,a=null){const l=a?a.getName():this.ISO88591;return K.decode(new Uint8Array([s]),l)}static guessEncoding(s,a){if(a!=null&&a.get(Z.CHARACTER_SET)!==void 0)return a.get(Z.CHARACTER_SET).toString();const l=s.length;let c=!0,h=!0,p=!0,m=0,v=0,E=0,C=0,b=0,D=0,W=0,X=0,$=0,te=0,ie=0;const fe=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let pe=0;pe<l&&(c||h||p);pe++){const ue=s[pe]&255;p&&(m>0?ue&128?m--:p=!1:ue&128&&(ue&64?(m++,ue&32?(m++,ue&16?(m++,ue&8?p=!1:C++):E++):v++):p=!1)),c&&(ue>127&&ue<160?c=!1:ue>159&&(ue<192||ue===215||ue===247)&&ie++),h&&(b>0?ue<64||ue===127||ue>252?h=!1:b--:ue===128||ue===160||ue>239?h=!1:ue>160&&ue<224?(D++,X=0,W++,W>$&&($=W)):ue>127?(b++,W=0,X++,X>te&&(te=X)):(W=0,X=0))}return p&&m>0&&(p=!1),h&&b>0&&(h=!1),p&&(fe||v+E+C>0)?G.UTF8:h&&(G.ASSUME_SHIFT_JIS||$>=3||te>=3)?G.SHIFT_JIS:c&&h?$===2&&D===2||ie*10>=l?G.SHIFT_JIS:G.ISO88591:c?G.ISO88591:h?G.SHIFT_JIS:p?G.UTF8:G.PLATFORM_DEFAULT_ENCODING}static format(s,...a){let l=-1;function c(p,m,v,E,C,b){if(p==="%%")return"%";if(a[++l]===void 0)return;p=E?parseInt(E.substr(1)):void 0;let D=C?parseInt(C.substr(1)):void 0,W;switch(b){case"s":W=a[l];break;case"c":W=a[l][0];break;case"f":W=parseFloat(a[l]).toFixed(p);break;case"p":W=parseFloat(a[l]).toPrecision(p);break;case"e":W=parseFloat(a[l]).toExponential(p);break;case"x":W=parseInt(a[l]).toString(D||16);break;case"d":W=parseFloat(parseInt(a[l],D||10).toPrecision(p)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(D);let X=parseInt(v),$=v&&v[0]+""=="0"?"0":" ";for(;W.length<X;)W=m!==void 0?W+$:$+W;return W}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,c)}static getBytes(s,a){return K.encode(s,a)}static getCharCode(s,a=0){return s.charCodeAt(a)}static getCharAt(s){return String.fromCharCode(s)}}G.SHIFT_JIS=F.SJIS.getName(),G.GB2312="GB2312",G.ISO88591=F.ISO8859_1.getName(),G.EUC_JP="EUC_JP",G.UTF8=F.UTF8.getName(),G.PLATFORM_DEFAULT_ENCODING=G.UTF8,G.ASSUME_SHIFT_JIS=!1;class H{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=G.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,a,l){for(let c=a;a<a+l;c++)this.append(s[c]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+1)}substring(s,a){return this.value.substring(s,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+a.length)}}class We{constructor(s,a,l,c){if(this.width=s,this.height=a,this.rowSize=l,this.bits=c,a==null&&(a=s),this.height=a,s<1||a<1)throw new x("Both dimensions must be greater than 0");l==null&&(l=Math.floor((s+31)/32)),this.rowSize=l,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const a=s.length,l=s[0].length,c=new We(l,a);for(let h=0;h<a;h++){const p=s[h];for(let m=0;m<l;m++)p[m]&&c.set(m,h)}return c}static parseFromString(s,a,l){if(s===null)throw new x("stringRepresentation cannot be null");const c=new Array(s.length);let h=0,p=0,m=-1,v=0,E=0;for(;E<s.length;)if(s.charAt(E)===`
`||s.charAt(E)==="\r"){if(h>p){if(m===-1)m=h-p;else if(h-p!==m)throw new x("row lengths do not match");p=h,v++}E++}else if(s.substring(E,E+a.length)===a)E+=a.length,c[h]=!0,h++;else if(s.substring(E,E+l.length)===l)E+=l.length,c[h]=!1,h++;else throw new x("illegal character encountered: "+s.substring(E));if(h>p){if(m===-1)m=h-p;else if(h-p!==m)throw new x("row lengths do not match");v++}const C=new We(m,v);for(let b=0;b<h;b++)c[b]&&C.set(Math.floor(b%m),Math.floor(b/m));return C}get(s,a){const l=a*this.rowSize+Math.floor(s/32);return(this.bits[l]>>>(s&31)&1)!==0}set(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]|=1<<(s&31)&4294967295}unset(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]&=~(1<<(s&31)&4294967295)}flip(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new x("input matrix dimensions do not match");const a=new z(Math.floor(this.width/32)+1),l=this.rowSize,c=this.bits;for(let h=0,p=this.height;h<p;h++){const m=h*l,v=s.getRow(h,a).getBitArray();for(let E=0;E<l;E++)c[m+E]^=v[E]}}clear(){const s=this.bits,a=s.length;for(let l=0;l<a;l++)s[l]=0}setRegion(s,a,l,c){if(a<0||s<0)throw new x("Left and top must be nonnegative");if(c<1||l<1)throw new x("Height and width must be at least 1");const h=s+l,p=a+c;if(p>this.height||h>this.width)throw new x("The region must fit inside the matrix");const m=this.rowSize,v=this.bits;for(let E=a;E<p;E++){const C=E*m;for(let b=s;b<h;b++)v[C+Math.floor(b/32)]|=1<<(b&31)&4294967295}}getRow(s,a){a==null||a.getSize()<this.width?a=new z(this.width):a.clear();const l=this.rowSize,c=this.bits,h=s*l;for(let p=0;p<l;p++)a.setBulk(p*32,c[h+p]);return a}setRow(s,a){M.arraycopy(a.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),a=this.getHeight();let l=new z(s),c=new z(s);for(let h=0,p=Math.floor((a+1)/2);h<p;h++)l=this.getRow(h,l),c=this.getRow(a-1-h,c),l.reverse(),c.reverse(),this.setRow(h,c),this.setRow(a-1-h,l)}getEnclosingRectangle(){const s=this.width,a=this.height,l=this.rowSize,c=this.bits;let h=s,p=a,m=-1,v=-1;for(let E=0;E<a;E++)for(let C=0;C<l;C++){const b=c[E*l+C];if(b!==0){if(E<p&&(p=E),E>v&&(v=E),C*32<h){let D=0;for(;!(b<<31-D&4294967295);)D++;C*32+D<h&&(h=C*32+D)}if(C*32+31>m){let D=31;for(;!(b>>>D);)D--;C*32+D>m&&(m=C*32+D)}}}return m<h||v<p?null:Int32Array.from([h,p,m-h+1,v-p+1])}getTopLeftOnBit(){const s=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const c=l/s;let h=l%s*32;const p=a[l];let m=0;for(;!(p<<31-m&4294967295);)m++;return h+=m,Int32Array.from([h,c])}getBottomRightOnBit(){const s=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const c=Math.floor(l/s);let h=Math.floor(l%s)*32;const p=a[l];let m=31;for(;!(p>>>m);)m--;return h+=m,Int32Array.from([h,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof We))return!1;const a=s;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&N.equals(this.bits,a.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+N.hashCode(this.bits),s}toString(s="X ",a="  ",l=`
`){return this.buildToString(s,a,l)}buildToString(s,a,l){let c=new H;for(let h=0,p=this.height;h<p;h++){for(let m=0,v=this.width;m<v;m++)c.append(this.get(m,h)?s:a);c.append(l)}return c.toString()}clone(){return new We(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends g{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class ct extends O{constructor(s){super(s),this.luminances=ct.EMPTY,this.buckets=new Int32Array(ct.LUMINANCE_BUCKETS)}getBlackRow(s,a){const l=this.getLuminanceSource(),c=l.getWidth();a==null||a.getSize()<c?a=new z(c):a.clear(),this.initArrays(c);const h=l.getRow(s,this.luminances),p=this.buckets;for(let v=0;v<c;v++)p[(h[v]&255)>>ct.LUMINANCE_SHIFT]++;const m=ct.estimateBlackPoint(p);if(c<3)for(let v=0;v<c;v++)(h[v]&255)<m&&a.set(v);else{let v=h[0]&255,E=h[1]&255;for(let C=1;C<c-1;C++){const b=h[C+1]&255;(E*4-v-b)/2<m&&a.set(C),v=E,E=b}}return a}getBlackMatrix(){const s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight(),c=new We(a,l);this.initArrays(a);const h=this.buckets;for(let v=1;v<5;v++){const E=Math.floor(l*v/5),C=s.getRow(E,this.luminances),b=Math.floor(a*4/5);for(let D=Math.floor(a/5);D<b;D++){const W=C[D]&255;h[W>>ct.LUMINANCE_SHIFT]++}}const p=ct.estimateBlackPoint(h),m=s.getMatrix();for(let v=0;v<l;v++){const E=v*a;for(let C=0;C<a;C++)(m[E+C]&255)<p&&c.set(C,v)}return c}createBinarizer(s){return new ct(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const a=this.buckets;for(let l=0;l<ct.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(s){const a=s.length;let l=0,c=0,h=0;for(let C=0;C<a;C++)s[C]>h&&(c=C,h=s[C]),s[C]>l&&(l=s[C]);let p=0,m=0;for(let C=0;C<a;C++){const b=C-c,D=s[C]*b*b;D>m&&(p=C,m=D)}if(c>p){const C=c;c=p,p=C}if(p-c<=a/16)throw new se;let v=p-1,E=-1;for(let C=p-1;C>c;C--){const b=C-c,D=b*b*(p-C)*(l-s[C]);D>E&&(v=C,E=D)}return v<<ct.LUMINANCE_SHIFT}}ct.LUMINANCE_BITS=5,ct.LUMINANCE_SHIFT=8-ct.LUMINANCE_BITS,ct.LUMINANCE_BUCKETS=1<<ct.LUMINANCE_BITS,ct.EMPTY=Uint8ClampedArray.from([0]);class ve extends ct{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight();if(a>=ve.MINIMUM_DIMENSION&&l>=ve.MINIMUM_DIMENSION){const c=s.getMatrix();let h=a>>ve.BLOCK_SIZE_POWER;a&ve.BLOCK_SIZE_MASK&&h++;let p=l>>ve.BLOCK_SIZE_POWER;l&ve.BLOCK_SIZE_MASK&&p++;const m=ve.calculateBlackPoints(c,h,p,a,l),v=new We(a,l);ve.calculateThresholdForBlock(c,h,p,a,l,m,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new ve(s)}static calculateThresholdForBlock(s,a,l,c,h,p,m){const v=h-ve.BLOCK_SIZE,E=c-ve.BLOCK_SIZE;for(let C=0;C<l;C++){let b=C<<ve.BLOCK_SIZE_POWER;b>v&&(b=v);const D=ve.cap(C,2,l-3);for(let W=0;W<a;W++){let X=W<<ve.BLOCK_SIZE_POWER;X>E&&(X=E);const $=ve.cap(W,2,a-3);let te=0;for(let fe=-2;fe<=2;fe++){const pe=p[D+fe];te+=pe[$-2]+pe[$-1]+pe[$]+pe[$+1]+pe[$+2]}const ie=te/25;ve.thresholdBlock(s,X,b,ie,c,m)}}}static cap(s,a,l){return s<a?a:s>l?l:s}static thresholdBlock(s,a,l,c,h,p){for(let m=0,v=l*h+a;m<ve.BLOCK_SIZE;m++,v+=h)for(let E=0;E<ve.BLOCK_SIZE;E++)(s[v+E]&255)<=c&&p.set(a+E,l+m)}static calculateBlackPoints(s,a,l,c,h){const p=h-ve.BLOCK_SIZE,m=c-ve.BLOCK_SIZE,v=new Array(l);for(let E=0;E<l;E++){v[E]=new Int32Array(a);let C=E<<ve.BLOCK_SIZE_POWER;C>p&&(C=p);for(let b=0;b<a;b++){let D=b<<ve.BLOCK_SIZE_POWER;D>m&&(D=m);let W=0,X=255,$=0;for(let ie=0,fe=C*c+D;ie<ve.BLOCK_SIZE;ie++,fe+=c){for(let pe=0;pe<ve.BLOCK_SIZE;pe++){const ue=s[fe+pe]&255;W+=ue,ue<X&&(X=ue),ue>$&&($=ue)}if($-X>ve.MIN_DYNAMIC_RANGE)for(ie++,fe+=c;ie<ve.BLOCK_SIZE;ie++,fe+=c)for(let pe=0;pe<ve.BLOCK_SIZE;pe++)W+=s[fe+pe]&255}let te=W>>ve.BLOCK_SIZE_POWER*2;if($-X<=ve.MIN_DYNAMIC_RANGE&&(te=X/2,E>0&&b>0)){const ie=(v[E-1][b]+2*v[E][b-1]+v[E-1][b-1])/4;X<ie&&(te=ie)}v[E][b]=te}}return v}}ve.BLOCK_SIZE_POWER=3,ve.BLOCK_SIZE=1<<ve.BLOCK_SIZE_POWER,ve.BLOCK_SIZE_MASK=ve.BLOCK_SIZE-1,ve.MINIMUM_DIMENSION=ve.BLOCK_SIZE*5,ve.MIN_DYNAMIC_RANGE=24;class de{constructor(s,a){this.width=s,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,a,l,c){throw new j("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new j("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new j("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let a=new H;for(let l=0;l<this.height;l++){const c=this.getRow(l,s);for(let h=0;h<this.width;h++){const p=c[h]&255;let m;p<64?m="#":p<128?m="+":p<192?m=".":m=" ",a.append(m)}a.append(`
`)}return a.toString()}}class Ce extends de{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,a){const l=this.delegate.getRow(s,a),c=this.getWidth();for(let h=0;h<c;h++)l[h]=255-(l[h]&255);return l}getMatrix(){const s=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let c=0;c<a;c++)l[c]=255-(s[c]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(s,a,l,c){return new Ce(this.delegate.crop(s,a,l,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ce(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ce(this.delegate.rotateCounterClockwise45())}}class be extends de{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=be.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const a=s.getContext("2d").getImageData(0,0,s.width,s.height);return be.toGrayscaleBuffer(a.data,s.width,s.height)}static toGrayscaleBuffer(s,a,l){const c=new Uint8ClampedArray(a*l);for(let h=0,p=0,m=s.length;h<m;h+=4,p++){let v;if(s[h+3]===0)v=255;else{const C=s[h],b=s[h+1],D=s[h+2];v=306*C+601*b+117*D+512>>10}c[p]=v}return c}getRow(s,a){if(s<0||s>=this.getHeight())throw new x("Requested row is outside the image: "+s);const l=this.getWidth(),c=s*l;return a===null?a=this.buffer.slice(c,c+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(c,c+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,a,l,c){return super.crop(s,a,l,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const a=this.getTempCanvasElement(),l=a.getContext("2d"),c=s*be.DEGREE_TO_RADIANS,h=this.canvas.width,p=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*h+Math.abs(Math.sin(c))*p),v=Math.ceil(Math.abs(Math.sin(c))*h+Math.abs(Math.cos(c))*p);return a.width=m,a.height=v,l.translate(m/2,v/2),l.rotate(c),l.drawImage(this.canvas,h/-2,p/-2),this.buffer=be.makeBufferFromCanvasImageData(a),this}invert(){return new Ce(this)}}be.DEGREE_TO_RADIANS=Math.PI/180;class $e{constructor(s,a,l){this.deviceId=s,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var je=(globalThis||cc||self||window||void 0)&&(globalThis||cc||self||window||void 0).__awaiter||function(S,s,a,l){function c(h){return h instanceof a?h:new a(function(p){p(h)})}return new(a||(a=Promise))(function(h,p){function m(C){try{E(l.next(C))}catch(b){p(b)}}function v(C){try{E(l.throw(C))}catch(b){p(b)}}function E(C){C.done?h(C.value):c(C.value).then(m,v)}E((l=l.apply(S,s||[])).next())})};class mt{constructor(s,a=500,l){this.reader=s,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return je(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of s){const c=l.kind==="video"?"videoinput":l.kind;if(c!=="videoinput")continue;const h=l.deviceId||l.id,p=l.label||`Video device ${a.length+1}`,m=l.groupId,v={deviceId:h,label:p,kind:c,groupId:m};a.push(v)}return a})}getVideoInputDevices(){return je(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new $e(a.deviceId,a.label))})}findDeviceById(s){return je(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===s):null})}decodeFromInputVideoDevice(s,a){return je(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,a)})}decodeOnceFromVideoDevice(s,a){return je(this,void 0,void 0,function*(){this.reset();let l;s?l={deviceId:{exact:s}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeOnceFromConstraints(c,a)})}decodeOnceFromConstraints(s,a){return je(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(s,a){return je(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(s,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(s,a,l){return je(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,a,l)})}decodeFromVideoDevice(s,a,l){return je(this,void 0,void 0,function*(){let c;s?c={deviceId:{exact:s}}:c={facingMode:"environment"};const h={video:c};return yield this.decodeFromConstraints(h,a,l)})}decodeFromConstraints(s,a,l){return je(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(c,a,l)})}decodeFromStream(s,a,l){return je(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(s,a);return yield this.decodeContinuously(c,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,a){return je(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,s),this.videoElement=l,this.stream=s,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(s){return new Promise((a,l)=>this.playVideoOnLoad(s,()=>a()))}playVideoOnLoad(s,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",a),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return je(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,a){const l=document.getElementById(s);if(!l)throw new w(`element with id '${s}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new w(`element with id '${s}' must be an ${a} element`);return l}decodeFromImage(s,a){if(!s&&!a)throw new w("either imageElement with a src set or an url must be provided");return a&&!s?this.decodeFromImageUrl(a):this.decodeFromImageElement(s)}decodeFromVideo(s,a){if(!s&&!a)throw new w("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,a,l){if(s===void 0&&a===void 0)throw new w("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(s,l)}decodeFromImageElement(s){if(!s)throw new w("An image element must be provided.");this.reset();const a=this.prepareImageElement(s);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(s){const a=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(s,a){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(s){if(!s)throw new w("A video element must be provided.");this.reset();const a=this.prepareVideoElement(s);return this.videoElement=a,a}decodeFromImageUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=s,l}decodeFromVideoUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=s,l}decodeFromVideoUrlContinuously(s,a){if(!s)throw new w("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(l,a);return l.src=s,c}_decodeOnLoadImage(s){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(a,l),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return je(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,a){return je(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,a)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let a;return typeof s>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(a=s),a}prepareVideoElement(s){let a;return!s&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(a=s),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(s,a=!0,l=!0){this._stopAsyncDecode=!1;const c=(h,p)=>{if(this._stopAsyncDecode){p(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(s);h(m)}catch(m){const v=a&&m instanceof se,C=(m instanceof T||m instanceof L)&&l;if(v||C)return setTimeout(c,this._timeBetweenDecodingAttempts,h,p);p(m)}};return new Promise((h,p)=>c(h,p))}decodeContinuously(s,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(s);a(c,null),setTimeout(l,this.timeBetweenScansMillis)}catch(c){a(null,c);const h=c instanceof T||c instanceof L,p=c instanceof se;(h||p)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(s){const a=this.createBinaryBitmap(s);return this.decodeBitmap(a)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,a,l){a||(a={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(s,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const a=this.getCaptureCanvas(s),l=new be(a),c=new ve(l);return new _(c)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const a=this.createCaptureCanvas(s);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,c;return typeof s<"u"&&(s instanceof HTMLVideoElement?(l=s.videoWidth,c=s.videoHeight):s instanceof HTMLImageElement&&(l=s.naturalWidth||s.width,c=s.naturalHeight||s.height)),a.style.width=l+"px",a.style.height=c+"px",a.width=l,a.height=c,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,a){try{s.srcObject=a}catch{s.src=URL.createObjectURL(a)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class St{constructor(s,a,l=a==null?0:8*a.length,c,h,p=M.currentTimeMillis()){this.text=s,this.rawBytes=a,this.numBits=l,this.resultPoints=c,this.format=h,this.timestamp=p,this.text=s,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=c,this.format=h,this.resultMetadata=null,p==null?this.timestamp=M.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,a)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const a=this.resultPoints;if(a===null)this.resultPoints=s;else if(s!==null&&s.length>0){const l=new Array(a.length+s.length);M.arraycopy(a,0,l,0,a.length),M.arraycopy(s,0,l,a.length,s.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Pr;(function(S){S[S.AZTEC=0]="AZTEC",S[S.CODABAR=1]="CODABAR",S[S.CODE_39=2]="CODE_39",S[S.CODE_93=3]="CODE_93",S[S.CODE_128=4]="CODE_128",S[S.DATA_MATRIX=5]="DATA_MATRIX",S[S.EAN_8=6]="EAN_8",S[S.EAN_13=7]="EAN_13",S[S.ITF=8]="ITF",S[S.MAXICODE=9]="MAXICODE",S[S.PDF_417=10]="PDF_417",S[S.QR_CODE=11]="QR_CODE",S[S.RSS_14=12]="RSS_14",S[S.RSS_EXPANDED=13]="RSS_EXPANDED",S[S.UPC_A=14]="UPC_A",S[S.UPC_E=15]="UPC_E",S[S.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Pr||(Pr={}));var Se=Pr,Nr;(function(S){S[S.OTHER=0]="OTHER",S[S.ORIENTATION=1]="ORIENTATION",S[S.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",S[S.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",S[S.ISSUE_NUMBER=4]="ISSUE_NUMBER",S[S.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",S[S.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",S[S.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",S[S.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",S[S.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",S[S.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Nr||(Nr={}));var hn=Nr;class sa{constructor(s,a,l,c,h=-1,p=-1){this.rawBytes=s,this.text=a,this.byteSegments=l,this.ecLevel=c,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=p,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Pi{exp(s){return this.expTable[s]}log(s){if(s===0)throw new x;return this.logTable[s]}static addOrSubtract(s,a){return s^a}}class yn{constructor(s,a){if(a.length===0)throw new x;this.field=s;const l=a.length;if(l>1&&a[0]===0){let c=1;for(;c<l&&a[c]===0;)c++;c===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-c),M.arraycopy(a,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(s===1){l=0;for(let p=0,m=a.length;p!==m;p++){const v=a[p];l=Pi.addOrSubtract(l,v)}return l}l=a[0];const c=a.length,h=this.field;for(let p=1;p<c;p++)l=Pi.addOrSubtract(h.multiply(s,l),a[p]);return l}addOrSubtract(s){if(!this.field.equals(s.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){const p=a;a=l,l=p}let c=new Int32Array(l.length);const h=l.length-a.length;M.arraycopy(l,0,c,0,h);for(let p=h;p<l.length;p++)c[p]=Pi.addOrSubtract(a[p-h],l[p]);return new yn(this.field,c)}multiply(s){if(!this.field.equals(s.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,c=s.coefficients,h=c.length,p=new Int32Array(l+h-1),m=this.field;for(let v=0;v<l;v++){const E=a[v];for(let C=0;C<h;C++)p[v+C]=Pi.addOrSubtract(p[v+C],m.multiply(E,c[C]))}return new yn(m,p)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const a=this.coefficients.length,l=this.field,c=new Int32Array(a),h=this.coefficients;for(let p=0;p<a;p++)c[p]=l.multiply(h[p],s);return new yn(l,c)}multiplyByMonomial(s,a){if(s<0)throw new x;if(a===0)return this.field.getZero();const l=this.coefficients,c=l.length,h=new Int32Array(c+s),p=this.field;for(let m=0;m<c;m++)h[m]=p.multiply(l[m],a);return new yn(p,h)}divide(s){if(!this.field.equals(s.field))throw new x("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new x("Divide by 0");const a=this.field;let l=a.getZero(),c=this;const h=s.getCoefficient(s.getDegree()),p=a.inverse(h);for(;c.getDegree()>=s.getDegree()&&!c.isZero();){const m=c.getDegree()-s.getDegree(),v=a.multiply(c.getCoefficient(c.getDegree()),p),E=s.multiplyByMonomial(m,v),C=a.buildMonomial(m,v);l=l.addOrSubtract(C),c=c.addOrSubtract(E)}return[l,c]}toString(){let s="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(s+=" - ",l=-l):s.length>0&&(s+=" + "),a===0||l!==1){const c=this.field.log(l);c===0?s+="1":c===1?s+="a":(s+="a^",s+=c)}a!==0&&(a===1?s+="x":(s+="x^",s+=a))}}return s}}class Ks extends g{}Ks.kind="ArithmeticException";class et extends Pi{constructor(s,a,l){super(),this.primitive=s,this.size=a,this.generatorBase=l;const c=new Int32Array(a);let h=1;for(let m=0;m<a;m++)c[m]=h,h*=2,h>=a&&(h^=s,h&=a-1);this.expTable=c;const p=new Int32Array(a);for(let m=0;m<a-1;m++)p[c[m]]=m;this.logTable=p,this.zero=new yn(this,Int32Array.from([0])),this.one=new yn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new x;if(a===0)return this.zero;const l=new Int32Array(s+1);return l[0]=a,new yn(this,l)}inverse(s){if(s===0)throw new Ks;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+R.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}et.AZTEC_DATA_12=new et(4201,4096,1),et.AZTEC_DATA_10=new et(1033,1024,1),et.AZTEC_DATA_6=new et(67,64,1),et.AZTEC_PARAM=new et(19,16,1),et.QR_CODE_FIELD_256=new et(285,256,0),et.DATA_MATRIX_FIELD_256=new et(301,256,1),et.AZTEC_DATA_8=et.DATA_MATRIX_FIELD_256,et.MAXICODE_FIELD_64=et.AZTEC_DATA_6;class Ni extends g{}Ni.kind="ReedSolomonException";class gr extends g{}gr.kind="IllegalStateException";class qs{constructor(s){this.field=s}decode(s,a){const l=this.field,c=new yn(l,s),h=new Int32Array(a);let p=!0;for(let W=0;W<a;W++){const X=c.evaluateAt(l.exp(W+l.getGeneratorBase()));h[h.length-1-W]=X,X!==0&&(p=!1)}if(p)return;const m=new yn(l,h),v=this.runEuclideanAlgorithm(l.buildMonomial(a,1),m,a),E=v[0],C=v[1],b=this.findErrorLocations(E),D=this.findErrorMagnitudes(C,b);for(let W=0;W<b.length;W++){const X=s.length-1-l.log(b[W]);if(X<0)throw new Ni("Bad error location");s[X]=et.addOrSubtract(s[X],D[W])}}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){const W=s;s=a,a=W}const c=this.field;let h=s,p=a,m=c.getZero(),v=c.getOne();for(;p.getDegree()>=(l/2|0);){let W=h,X=m;if(h=p,m=v,h.isZero())throw new Ni("r_{i-1} was zero");p=W;let $=c.getZero();const te=h.getCoefficient(h.getDegree()),ie=c.inverse(te);for(;p.getDegree()>=h.getDegree()&&!p.isZero();){const fe=p.getDegree()-h.getDegree(),pe=c.multiply(p.getCoefficient(p.getDegree()),ie);$=$.addOrSubtract(c.buildMonomial(fe,pe)),p=p.addOrSubtract(h.multiplyByMonomial(fe,pe))}if(v=$.multiply(m).addOrSubtract(X),p.getDegree()>=h.getDegree())throw new gr("Division algorithm failed to reduce polynomial?")}const E=v.getCoefficient(0);if(E===0)throw new Ni("sigmaTilde(0) was zero");const C=c.inverse(E),b=v.multiplyScalar(C),D=p.multiplyScalar(C);return[b,D]}findErrorLocations(s){const a=s.getDegree();if(a===1)return Int32Array.from([s.getCoefficient(1)]);const l=new Int32Array(a);let c=0;const h=this.field;for(let p=1;p<h.getSize()&&c<a;p++)s.evaluateAt(p)===0&&(l[c]=h.inverse(p),c++);if(c!==a)throw new Ni("Error locator degree does not match number of roots");return l}findErrorMagnitudes(s,a){const l=a.length,c=new Int32Array(l),h=this.field;for(let p=0;p<l;p++){const m=h.inverse(a[p]);let v=1;for(let E=0;E<l;E++)if(p!==E){const C=h.multiply(a[E],m),b=C&1?C&-2:C|1;v=h.multiply(v,b)}c[p]=h.multiply(s.evaluateAt(m),h.inverse(v)),h.getGeneratorBase()!==0&&(c[p]=h.multiply(c[p],m))}return c}}var wn;(function(S){S[S.UPPER=0]="UPPER",S[S.LOWER=1]="LOWER",S[S.MIXED=2]="MIXED",S[S.DIGIT=3]="DIGIT",S[S.PUNCT=4]="PUNCT",S[S.BINARY=5]="BINARY"})(wn||(wn={}));class xt{decode(s){this.ddata=s;let a=s.getBits(),l=this.extractBits(a),c=this.correctBits(l),h=xt.convertBoolArrayToByteArray(c),p=xt.getEncodedData(c),m=new sa(h,p,null,null);return m.setNumBits(c.length),m}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let a=s.length,l=wn.UPPER,c=wn.UPPER,h="",p=0;for(;p<a;)if(c===wn.BINARY){if(a-p<5)break;let m=xt.readCode(s,p,5);if(p+=5,m===0){if(a-p<11)break;m=xt.readCode(s,p,11)+31,p+=11}for(let v=0;v<m;v++){if(a-p<8){p=a;break}const E=xt.readCode(s,p,8);h+=G.castAsNonUtf8Char(E),p+=8}c=l}else{let m=c===wn.DIGIT?4:5;if(a-p<m)break;let v=xt.readCode(s,p,m);p+=m;let E=xt.getCharacter(c,v);E.startsWith("CTRL_")?(l=c,c=xt.getTable(E.charAt(5)),E.charAt(6)==="L"&&(l=c)):(h+=E,c=l)}return h}static getTable(s){switch(s){case"L":return wn.LOWER;case"P":return wn.PUNCT;case"M":return wn.MIXED;case"D":return wn.DIGIT;case"B":return wn.BINARY;case"U":default:return wn.UPPER}}static getCharacter(s,a){switch(s){case wn.UPPER:return xt.UPPER_TABLE[a];case wn.LOWER:return xt.LOWER_TABLE[a];case wn.MIXED:return xt.MIXED_TABLE[a];case wn.PUNCT:return xt.PUNCT_TABLE[a];case wn.DIGIT:return xt.DIGIT_TABLE[a];default:throw new gr("Bad table")}}correctBits(s){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=et.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=et.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=et.AZTEC_DATA_10):(l=12,a=et.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),h=s.length/l;if(h<c)throw new L;let p=s.length%l,m=new Int32Array(h);for(let D=0;D<h;D++,p+=l)m[D]=xt.readCode(s,p,l);try{new qs(a).decode(m,h-c)}catch(D){throw new L(D)}let v=(1<<l)-1,E=0;for(let D=0;D<c;D++){let W=m[D];if(W===0||W===v)throw new L;(W===1||W===v-1)&&E++}let C=new Array(c*l-E),b=0;for(let D=0;D<c;D++){let W=m[D];if(W===1||W===v-1)C.fill(W>1,b,b+l-1),b+=l-1;else for(let X=l-1;X>=0;--X)C[b++]=(W&1<<X)!==0}return C}extractBits(s){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),c=(a?11:14)+l*4,h=new Int32Array(c),p=new Array(this.totalBitsInLayer(l,a));if(a)for(let m=0;m<h.length;m++)h[m]=m;else{let m=c+1+2*R.truncDivision(R.truncDivision(c,2)-1,15),v=c/2,E=R.truncDivision(m,2);for(let C=0;C<v;C++){let b=C+R.truncDivision(C,15);h[v-C-1]=E-b-1,h[v+C]=E+b+1}}for(let m=0,v=0;m<l;m++){let E=(l-m)*4+(a?9:12),C=m*2,b=c-1-C;for(let D=0;D<E;D++){let W=D*2;for(let X=0;X<2;X++)p[v+W+X]=s.get(h[C+X],h[C+D]),p[v+2*E+W+X]=s.get(h[C+D],h[b-X]),p[v+4*E+W+X]=s.get(h[b-X],h[b-D]),p[v+6*E+W+X]=s.get(h[b-D],h[C+X])}v+=E*8}return p}static readCode(s,a,l){let c=0;for(let h=a;h<a+l;h++)c<<=1,s[h]&&(c|=1);return c}static readByte(s,a){let l=s.length-a;return l>=8?xt.readCode(s,a,8):xt.readCode(s,a,l)<<8-l}static convertBoolArrayToByteArray(s){let a=new Uint8Array((s.length+7)/8);for(let l=0;l<a.length;l++)a[l]=xt.readByte(s,8*l);return a}totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}xt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],xt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],xt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],xt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],xt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Qe{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,a,l,c){const h=s-l,p=a-c;return Math.sqrt(h*h+p*p)}static sum(s){let a=0;for(let l=0,c=s.length;l!==c;l++){const h=s[l];a+=h}return a}}class Xs{static floatToIntBits(s){return s}}Xs.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Te{constructor(s,a){this.x=s,this.y=a}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Te){const a=s;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Xs.floatToIntBits(this.x)+Xs.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const a=this.distance(s[0],s[1]),l=this.distance(s[1],s[2]),c=this.distance(s[0],s[2]);let h,p,m;if(l>=a&&l>=c?(p=s[0],h=s[1],m=s[2]):c>=l&&c>=a?(p=s[1],h=s[0],m=s[2]):(p=s[2],h=s[0],m=s[1]),this.crossProductZ(h,p,m)<0){const v=h;h=m,m=v}s[0]=h,s[1]=p,s[2]=m}static distance(s,a){return Qe.distance(s.x,s.y,a.x,a.y)}static crossProductZ(s,a,l){const c=a.x,h=a.y;return(l.x-c)*(s.y-h)-(l.y-h)*(s.x-c)}}class pl{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class gl extends pl{constructor(s,a,l,c,h){super(s,a),this.compact=l,this.nbDatablocks=c,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Or{constructor(s,a,l,c){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),a==null&&(a=Or.INIT_SIZE),l==null&&(l=s.getWidth()/2|0),c==null&&(c=s.getHeight()/2|0);const h=a/2|0;if(this.leftInit=l-h,this.rightInit=l+h,this.upInit=c-h,this.downInit=c+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let s=this.leftInit,a=this.rightInit,l=this.upInit,c=this.downInit,h=!1,p=!0,m=!1,v=!1,E=!1,C=!1,b=!1;const D=this.width,W=this.height;for(;p;){p=!1;let X=!0;for(;(X||!v)&&a<D;)X=this.containsBlackPoint(l,c,a,!1),X?(a++,p=!0,v=!0):v||a++;if(a>=D){h=!0;break}let $=!0;for(;($||!E)&&c<W;)$=this.containsBlackPoint(s,a,c,!0),$?(c++,p=!0,E=!0):E||c++;if(c>=W){h=!0;break}let te=!0;for(;(te||!C)&&s>=0;)te=this.containsBlackPoint(l,c,s,!1),te?(s--,p=!0,C=!0):C||s--;if(s<0){h=!0;break}let ie=!0;for(;(ie||!b)&&l>=0;)ie=this.containsBlackPoint(s,a,l,!0),ie?(l--,p=!0,b=!0):b||l--;if(l<0){h=!0;break}p&&(m=!0)}if(!h&&m){const X=a-s;let $=null;for(let pe=1;$===null&&pe<X;pe++)$=this.getBlackPointOnSegment(s,c-pe,s+pe,c);if($==null)throw new se;let te=null;for(let pe=1;te===null&&pe<X;pe++)te=this.getBlackPointOnSegment(s,l+pe,s+pe,l);if(te==null)throw new se;let ie=null;for(let pe=1;ie===null&&pe<X;pe++)ie=this.getBlackPointOnSegment(a,l+pe,a-pe,l);if(ie==null)throw new se;let fe=null;for(let pe=1;fe===null&&pe<X;pe++)fe=this.getBlackPointOnSegment(a,c-pe,a-pe,c);if(fe==null)throw new se;return this.centerEdges(fe,$,ie,te)}else throw new se}getBlackPointOnSegment(s,a,l,c){const h=Qe.round(Qe.distance(s,a,l,c)),p=(l-s)/h,m=(c-a)/h,v=this.image;for(let E=0;E<h;E++){const C=Qe.round(s+E*p),b=Qe.round(a+E*m);if(v.get(C,b))return new Te(C,b)}return null}centerEdges(s,a,l,c){const h=s.getX(),p=s.getY(),m=a.getX(),v=a.getY(),E=l.getX(),C=l.getY(),b=c.getX(),D=c.getY(),W=Or.CORR;return h<this.width/2?[new Te(b-W,D+W),new Te(m+W,v+W),new Te(E-W,C-W),new Te(h+W,p-W)]:[new Te(b+W,D+W),new Te(m+W,v-W),new Te(E-W,C+W),new Te(h-W,p-W)]}containsBlackPoint(s,a,l,c){const h=this.image;if(c){for(let p=s;p<=a;p++)if(h.get(p,l))return!0}else for(let p=s;p<=a;p++)if(h.get(l,p))return!0;return!1}}Or.INIT_SIZE=10,Or.CORR=1;class ml{static checkAndNudgePoints(s,a){const l=s.getWidth(),c=s.getHeight();let h=!0;for(let p=0;p<a.length&&h;p+=2){const m=Math.floor(a[p]),v=Math.floor(a[p+1]);if(m<-1||m>l||v<-1||v>c)throw new se;h=!1,m===-1?(a[p]=0,h=!0):m===l&&(a[p]=l-1,h=!0),v===-1?(a[p+1]=0,h=!0):v===c&&(a[p+1]=c-1,h=!0)}h=!0;for(let p=a.length-2;p>=0&&h;p-=2){const m=Math.floor(a[p]),v=Math.floor(a[p+1]);if(m<-1||m>l||v<-1||v>c)throw new se;h=!1,m===-1?(a[p]=0,h=!0):m===l&&(a[p]=l-1,h=!0),v===-1?(a[p+1]=0,h=!0):v===c&&(a[p+1]=c-1,h=!0)}}}class Et{constructor(s,a,l,c,h,p,m,v,E){this.a11=s,this.a21=a,this.a31=l,this.a12=c,this.a22=h,this.a32=p,this.a13=m,this.a23=v,this.a33=E}static quadrilateralToQuadrilateral(s,a,l,c,h,p,m,v,E,C,b,D,W,X,$,te){const ie=Et.quadrilateralToSquare(s,a,l,c,h,p,m,v);return Et.squareToQuadrilateral(E,C,b,D,W,X,$,te).times(ie)}transformPoints(s){const a=s.length,l=this.a11,c=this.a12,h=this.a13,p=this.a21,m=this.a22,v=this.a23,E=this.a31,C=this.a32,b=this.a33;for(let D=0;D<a;D+=2){const W=s[D],X=s[D+1],$=h*W+v*X+b;s[D]=(l*W+p*X+E)/$,s[D+1]=(c*W+m*X+C)/$}}transformPointsWithValues(s,a){const l=this.a11,c=this.a12,h=this.a13,p=this.a21,m=this.a22,v=this.a23,E=this.a31,C=this.a32,b=this.a33,D=s.length;for(let W=0;W<D;W++){const X=s[W],$=a[W],te=h*X+v*$+b;s[W]=(l*X+p*$+E)/te,a[W]=(c*X+m*$+C)/te}}static squareToQuadrilateral(s,a,l,c,h,p,m,v){const E=s-l+h-m,C=a-c+p-v;if(E===0&&C===0)return new Et(l-s,h-l,s,c-a,p-c,a,0,0,1);{const b=l-h,D=m-h,W=c-p,X=v-p,$=b*X-D*W,te=(E*X-D*C)/$,ie=(b*C-E*W)/$;return new Et(l-s+te*l,m-s+ie*m,s,c-a+te*c,v-a+ie*v,a,te,ie,1)}}static quadrilateralToSquare(s,a,l,c,h,p,m,v){return Et.squareToQuadrilateral(s,a,l,c,h,p,m,v).buildAdjoint()}buildAdjoint(){return new Et(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Et(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class bn extends ml{sampleGrid(s,a,l,c,h,p,m,v,E,C,b,D,W,X,$,te,ie,fe,pe){const ue=Et.quadrilateralToQuadrilateral(c,h,p,m,v,E,C,b,D,W,X,$,te,ie,fe,pe);return this.sampleGridWithTransform(s,a,l,ue)}sampleGridWithTransform(s,a,l,c){if(a<=0||l<=0)throw new se;const h=new We(a,l),p=new Float32Array(2*a);for(let m=0;m<l;m++){const v=p.length,E=m+.5;for(let C=0;C<v;C+=2)p[C]=C/2+.5,p[C+1]=E;c.transformPoints(p),ml.checkAndNudgePoints(s,p);try{for(let C=0;C<v;C+=2)s.get(Math.floor(p[C]),Math.floor(p[C+1]))&&h.set(C/2,m)}catch{throw new se}}return h}}class Dr{static setGridSampler(s){Dr.gridSampler=s}static getInstance(){return Dr.gridSampler}}Dr.gridSampler=new bn;class Rn{constructor(s,a){this.x=s,this.y=a}toResultPoint(){return new Te(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class tc{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(s){let p=l[0];l[0]=l[2],l[2]=p}this.extractParameters(l);let c=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),h=this.getMatrixCornerPoints(l);return new gl(c,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new se;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(s[0],s[1],a),this.sampleLine(s[1],s[2],a),this.sampleLine(s[2],s[3],a),this.sampleLine(s[3],s[0],a)]);this.shift=this.getRotation(l,a);let c=0;for(let p=0;p<4;p++){let m=l[(this.shift+p)%4];this.compact?(c<<=7,c+=m>>1&127):(c<<=10,c+=(m>>2&992)+(m>>1&31))}let h=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(s,a){let l=0;s.forEach((c,h,p)=>{let m=(c>>a-2<<1)+(c&1);l=(l<<3)+m}),l=((l&1)<<11)+(l>>1);for(let c=0;c<4;c++)if(R.bitCount(l^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new se}getCorrectedParameterData(s,a){let l,c;a?(l=7,c=2):(l=10,c=4);let h=l-c,p=new Int32Array(l);for(let v=l-1;v>=0;--v)p[v]=s&15,s>>=4;try{new qs(et.AZTEC_PARAM).decode(p,h)}catch{throw new se}let m=0;for(let v=0;v<c;v++)m=(m<<4)+p[v];return m}getBullsEyeCorners(s){let a=s,l=s,c=s,h=s,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let b=this.getFirstDifferent(a,p,1,-1),D=this.getFirstDifferent(l,p,1,1),W=this.getFirstDifferent(c,p,-1,1),X=this.getFirstDifferent(h,p,-1,-1);if(this.nbCenterLayers>2){let $=this.distancePoint(X,b)*this.nbCenterLayers/(this.distancePoint(h,a)*(this.nbCenterLayers+2));if($<.75||$>1.25||!this.isWhiteOrBlackRectangle(b,D,W,X))break}a=b,l=D,c=W,h=X,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let m=new Te(a.getX()+.5,a.getY()-.5),v=new Te(l.getX()+.5,l.getY()+.5),E=new Te(c.getX()-.5,c.getY()+.5),C=new Te(h.getX()-.5,h.getY()-.5);return this.expandSquare([m,v,E,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,a,l,c;try{let m=new Or(this.image).detect();s=m[0],a=m[1],l=m[2],c=m[3]}catch{let v=this.image.getWidth()/2,E=this.image.getHeight()/2;s=this.getFirstDifferent(new Rn(v+7,E-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Rn(v+7,E+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Rn(v-7,E+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Rn(v-7,E-7),!1,-1,-1).toResultPoint()}let h=Qe.round((s.getX()+c.getX()+a.getX()+l.getX())/4),p=Qe.round((s.getY()+c.getY()+a.getY()+l.getY())/4);try{let m=new Or(this.image,15,h,p).detect();s=m[0],a=m[1],l=m[2],c=m[3]}catch{s=this.getFirstDifferent(new Rn(h+7,p-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Rn(h+7,p+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Rn(h-7,p+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Rn(h-7,p-7),!1,-1,-1).toResultPoint()}return h=Qe.round((s.getX()+c.getX()+a.getX()+l.getX())/4),p=Qe.round((s.getY()+c.getY()+a.getY()+l.getY())/4),new Rn(h,p)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,a,l,c,h){let p=Dr.getInstance(),m=this.getDimension(),v=m/2-this.nbCenterLayers,E=m/2+this.nbCenterLayers;return p.sampleGrid(s,m,m,v,v,E,v,E,E,v,E,a.getX(),a.getY(),l.getX(),l.getY(),c.getX(),c.getY(),h.getX(),h.getY())}sampleLine(s,a,l){let c=0,h=this.distanceResultPoint(s,a),p=h/l,m=s.getX(),v=s.getY(),E=p*(a.getX()-s.getX())/h,C=p*(a.getY()-s.getY())/h;for(let b=0;b<l;b++)this.image.get(Qe.round(m+b*E),Qe.round(v+b*C))&&(c|=1<<l-b-1);return c}isWhiteOrBlackRectangle(s,a,l,c){let h=3;s=new Rn(s.getX()-h,s.getY()+h),a=new Rn(a.getX()-h,a.getY()-h),l=new Rn(l.getX()+h,l.getY()-h),c=new Rn(c.getX()+h,c.getY()+h);let p=this.getColor(c,s);if(p===0)return!1;let m=this.getColor(s,a);return m!==p||(m=this.getColor(a,l),m!==p)?!1:(m=this.getColor(l,c),m===p)}getColor(s,a){let l=this.distancePoint(s,a),c=(a.getX()-s.getX())/l,h=(a.getY()-s.getY())/l,p=0,m=s.getX(),v=s.getY(),E=this.image.get(s.getX(),s.getY()),C=Math.ceil(l);for(let D=0;D<C;D++)m+=c,v+=h,this.image.get(Qe.round(m),Qe.round(v))!==E&&p++;let b=p/l;return b>.1&&b<.9?0:b<=.1===E?1:-1}getFirstDifferent(s,a,l,c){let h=s.getX()+l,p=s.getY()+c;for(;this.isValid(h,p)&&this.image.get(h,p)===a;)h+=l,p+=c;for(h-=l,p-=c;this.isValid(h,p)&&this.image.get(h,p)===a;)h+=l;for(h-=l;this.isValid(h,p)&&this.image.get(h,p)===a;)p+=c;return p-=c,new Rn(h,p)}expandSquare(s,a,l){let c=l/(2*a),h=s[0].getX()-s[2].getX(),p=s[0].getY()-s[2].getY(),m=(s[0].getX()+s[2].getX())/2,v=(s[0].getY()+s[2].getY())/2,E=new Te(m+c*h,v+c*p),C=new Te(m-c*h,v-c*p);h=s[1].getX()-s[3].getX(),p=s[1].getY()-s[3].getY(),m=(s[1].getX()+s[3].getX())/2,v=(s[1].getY()+s[3].getY())/2;let b=new Te(m+c*h,v+c*p),D=new Te(m-c*h,v-c*p);return[E,b,C,D]}isValid(s,a){return s>=0&&s<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(s){let a=Qe.round(s.getX()),l=Qe.round(s.getY());return this.isValid(a,l)}distancePoint(s,a){return Qe.distance(s.getX(),s.getY(),a.getX(),a.getY())}distanceResultPoint(s,a){return Qe.distance(s.getX(),s.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(R.truncDivision(this.nbLayers-4,8)+1)+15}}class yl{decode(s,a=null){let l=null,c=new tc(s.getBlackMatrix()),h=null,p=null;try{let C=c.detectMirror(!1);h=C.getPoints(),this.reportFoundResultPoints(a,h),p=new xt().decode(C)}catch(C){l=C}if(p==null)try{let C=c.detectMirror(!0);h=C.getPoints(),this.reportFoundResultPoints(a,h),p=new xt().decode(C)}catch(C){throw l??C}let m=new St(p.getText(),p.getRawBytes(),p.getNumBits(),h,Se.AZTEC,M.currentTimeMillis()),v=p.getByteSegments();v!=null&&m.putMetadata(hn.BYTE_SEGMENTS,v);let E=p.getECLevel();return E!=null&&m.putMetadata(hn.ERROR_CORRECTION_LEVEL,E),m}reportFoundResultPoints(s,a){if(s!=null){let l=s.get(Z.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((c,h,p)=>{l.foundPossibleResultPoint(c)})}}reset(){}}class oa extends mt{constructor(s=500){super(new yl,s)}}class jt{decode(s,a){try{return this.doDecode(s,a)}catch{if(a&&a.get(Z.TRY_HARDER)===!0&&s.isRotateSupported()){const h=s.rotateCounterClockwise(),p=this.doDecode(h,a),m=p.getResultMetadata();let v=270;m!==null&&m.get(hn.ORIENTATION)===!0&&(v=v+m.get(hn.ORIENTATION)%360),p.putMetadata(hn.ORIENTATION,v);const E=p.getResultPoints();if(E!==null){const C=h.getHeight();for(let b=0;b<E.length;b++)E[b]=new Te(C-E[b].getY()-1,E[b].getX())}return p}else throw new se}}reset(){}doDecode(s,a){const l=s.getWidth(),c=s.getHeight();let h=new z(l);const p=a&&a.get(Z.TRY_HARDER)===!0,m=Math.max(1,c>>(p?8:5));let v;p?v=c:v=15;const E=Math.trunc(c/2);for(let C=0;C<v;C++){const b=Math.trunc((C+1)/2),D=(C&1)===0,W=E+m*(D?b:-b);if(W<0||W>=c)break;try{h=s.getBlackRow(W,h)}catch{continue}for(let X=0;X<2;X++){if(X===1&&(h.reverse(),a&&a.get(Z.NEED_RESULT_POINT_CALLBACK)===!0)){const $=new Map;a.forEach((te,ie)=>$.set(ie,te)),$.delete(Z.NEED_RESULT_POINT_CALLBACK),a=$}try{const $=this.decodeRow(W,h,a);if(X===1){$.putMetadata(hn.ORIENTATION,180);const te=$.getResultPoints();te!==null&&(te[0]=new Te(l-te[0].getX()-1,te[0].getY()),te[1]=new Te(l-te[1].getX()-1,te[1].getY()))}return $}catch{}}}throw new se}static recordPattern(s,a,l){const c=l.length;for(let E=0;E<c;E++)l[E]=0;const h=s.getSize();if(a>=h)throw new se;let p=!s.get(a),m=0,v=a;for(;v<h;){if(s.get(v)!==p)l[m]++;else{if(++m===c)break;l[m]=1,p=!p}v++}if(!(m===c||m===c-1&&v===h))throw new se}static recordPatternInReverse(s,a,l){let c=l.length,h=s.get(a);for(;a>0&&c>=0;)s.get(--a)!==h&&(c--,h=!h);if(c>=0)throw new se;jt.recordPattern(s,a+1,l)}static patternMatchVariance(s,a,l){const c=s.length;let h=0,p=0;for(let E=0;E<c;E++)h+=s[E],p+=a[E];if(h<p)return Number.POSITIVE_INFINITY;const m=h/p;l*=m;let v=0;for(let E=0;E<c;E++){const C=s[E],b=a[E]*m,D=C>b?C-b:b-C;if(D>l)return Number.POSITIVE_INFINITY;v+=D}return v/h}}class me extends jt{static findStartPattern(s){const a=s.getSize(),l=s.getNextSet(0);let c=0,h=Int32Array.from([0,0,0,0,0,0]),p=l,m=!1;const v=6;for(let E=l;E<a;E++)if(s.get(E)!==m)h[c]++;else{if(c===v-1){let C=me.MAX_AVG_VARIANCE,b=-1;for(let D=me.CODE_START_A;D<=me.CODE_START_C;D++){const W=jt.patternMatchVariance(h,me.CODE_PATTERNS[D],me.MAX_INDIVIDUAL_VARIANCE);W<C&&(C=W,b=D)}if(b>=0&&s.isRange(Math.max(0,p-(E-p)/2),p,!1))return Int32Array.from([p,E,b]);p+=h[0]+h[1],h=h.slice(2,h.length-1),h[c-1]=0,h[c]=0,c--}else c++;h[c]=1,m=!m}throw new se}static decodeCode(s,a,l){jt.recordPattern(s,l,a);let c=me.MAX_AVG_VARIANCE,h=-1;for(let p=0;p<me.CODE_PATTERNS.length;p++){const m=me.CODE_PATTERNS[p],v=this.patternMatchVariance(a,m,me.MAX_INDIVIDUAL_VARIANCE);v<c&&(c=v,h=p)}if(h>=0)return h;throw new se}decodeRow(s,a,l){const c=l&&l.get(Z.ASSUME_GS1)===!0,h=me.findStartPattern(a),p=h[2];let m=0;const v=new Uint8Array(20);v[m++]=p;let E;switch(p){case me.CODE_START_A:E=me.CODE_CODE_A;break;case me.CODE_START_B:E=me.CODE_CODE_B;break;case me.CODE_START_C:E=me.CODE_CODE_C;break;default:throw new L}let C=!1,b=!1,D="",W=h[0],X=h[1];const $=Int32Array.from([0,0,0,0,0,0]);let te=0,ie=0,fe=p,pe=0,ue=!0,Ze=!1,ze=!1;for(;!C;){const Tl=b;switch(b=!1,te=ie,ie=me.decodeCode(a,$,X),v[m++]=ie,ie!==me.CODE_STOP&&(ue=!0),ie!==me.CODE_STOP&&(pe++,fe+=pe*ie),W=X,X+=$.reduce((_R,AR)=>_R+AR,0),ie){case me.CODE_START_A:case me.CODE_START_B:case me.CODE_START_C:throw new L}switch(E){case me.CODE_CODE_A:if(ie<64)ze===Ze?D+=String.fromCharCode(32+ie):D+=String.fromCharCode(32+ie+128),ze=!1;else if(ie<96)ze===Ze?D+=String.fromCharCode(ie-64):D+=String.fromCharCode(ie+64),ze=!1;else switch(ie!==me.CODE_STOP&&(ue=!1),ie){case me.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case me.CODE_FNC_2:case me.CODE_FNC_3:break;case me.CODE_FNC_4_A:!Ze&&ze?(Ze=!0,ze=!1):Ze&&ze?(Ze=!1,ze=!1):ze=!0;break;case me.CODE_SHIFT:b=!0,E=me.CODE_CODE_B;break;case me.CODE_CODE_B:E=me.CODE_CODE_B;break;case me.CODE_CODE_C:E=me.CODE_CODE_C;break;case me.CODE_STOP:C=!0;break}break;case me.CODE_CODE_B:if(ie<96)ze===Ze?D+=String.fromCharCode(32+ie):D+=String.fromCharCode(32+ie+128),ze=!1;else switch(ie!==me.CODE_STOP&&(ue=!1),ie){case me.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case me.CODE_FNC_2:case me.CODE_FNC_3:break;case me.CODE_FNC_4_B:!Ze&&ze?(Ze=!0,ze=!1):Ze&&ze?(Ze=!1,ze=!1):ze=!0;break;case me.CODE_SHIFT:b=!0,E=me.CODE_CODE_A;break;case me.CODE_CODE_A:E=me.CODE_CODE_A;break;case me.CODE_CODE_C:E=me.CODE_CODE_C;break;case me.CODE_STOP:C=!0;break}break;case me.CODE_CODE_C:if(ie<100)ie<10&&(D+="0"),D+=ie;else switch(ie!==me.CODE_STOP&&(ue=!1),ie){case me.CODE_FNC_1:c&&(D.length===0?D+="]C1":D+="");break;case me.CODE_CODE_A:E=me.CODE_CODE_A;break;case me.CODE_CODE_B:E=me.CODE_CODE_B;break;case me.CODE_STOP:C=!0;break}break}Tl&&(E=E===me.CODE_CODE_A?me.CODE_CODE_B:me.CODE_CODE_A)}const xr=X-W;if(X=a.getNextUnset(X),!a.isRange(X,Math.min(a.getSize(),X+(X-W)/2),!1))throw new se;if(fe-=pe*te,fe%103!==te)throw new T;const mi=D.length;if(mi===0)throw new se;mi>0&&ue&&(E===me.CODE_CODE_C?D=D.substring(0,mi-2):D=D.substring(0,mi-1));const Er=(h[1]+h[0])/2,Ct=W+xr/2,Bn=v.length,Ur=new Uint8Array(Bn);for(let Tl=0;Tl<Bn;Tl++)Ur[Tl]=v[Tl];const Cl=[new Te(Er,s),new Te(Ct,s)];return new St(D,Ur,0,Cl,Se.CODE_128,new Date().getTime())}}me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],me.MAX_AVG_VARIANCE=.25,me.MAX_INDIVIDUAL_VARIANCE=.7,me.CODE_SHIFT=98,me.CODE_CODE_C=99,me.CODE_CODE_B=100,me.CODE_CODE_A=101,me.CODE_FNC_1=102,me.CODE_FNC_2=97,me.CODE_FNC_3=96,me.CODE_FNC_4_A=101,me.CODE_FNC_4_B=100,me.CODE_START_A=103,me.CODE_START_B=104,me.CODE_START_C=105,me.CODE_STOP=106;class zt extends jt{constructor(s=!1,a=!1){super(),this.usingCheckDigit=s,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,a,l){let c=this.counters;c.fill(0),this.decodeRowResult="";let h=zt.findAsteriskPattern(a,c),p=a.getNextSet(h[1]),m=a.getSize(),v,E;do{zt.recordPattern(a,p,c);let $=zt.toNarrowWidePattern(c);if($<0)throw new se;v=zt.patternToChar($),this.decodeRowResult+=v,E=p;for(let te of c)p+=te;p=a.getNextSet(p)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let $ of c)C+=$;let b=p-E-C;if(p!==m&&b*2<C)throw new se;if(this.usingCheckDigit){let $=this.decodeRowResult.length-1,te=0;for(let ie=0;ie<$;ie++)te+=zt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ie));if(this.decodeRowResult.charAt($)!==zt.ALPHABET_STRING.charAt(te%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new se;let D;this.extendedMode?D=zt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let W=(h[1]+h[0])/2,X=E+C/2;return new St(D,null,0,[new Te(W,s),new Te(X,s)],Se.CODE_39,new Date().getTime())}static findAsteriskPattern(s,a){let l=s.getSize(),c=s.getNextSet(0),h=0,p=c,m=!1,v=a.length;for(let E=c;E<l;E++)if(s.get(E)!==m)a[h]++;else{if(h===v-1){if(this.toNarrowWidePattern(a)===zt.ASTERISK_ENCODING&&s.isRange(Math.max(0,p-Math.floor((E-p)/2)),p,!1))return[p,E];p+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,m=!m}throw new se}static toNarrowWidePattern(s){let a=s.length,l=0,c;do{let h=2147483647;for(let v of s)v<h&&v>l&&(h=v);l=h,c=0;let p=0,m=0;for(let v=0;v<a;v++){let E=s[v];E>l&&(m|=1<<a-1-v,c++,p+=E)}if(c===3){for(let v=0;v<a&&c>0;v++){let E=s[v];if(E>l&&(c--,E*2>=p))return-1}return m}}while(c>3);return-1}static patternToChar(s){for(let a=0;a<zt.CHARACTER_ENCODINGS.length;a++)if(zt.CHARACTER_ENCODINGS[a]===s)return zt.ALPHABET_STRING.charAt(a);if(s===zt.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(s){let a=s.length,l="";for(let c=0;c<a;c++){let h=s.charAt(c);if(h==="+"||h==="$"||h==="%"||h==="/"){let p=s.charAt(c+1),m="\0";switch(h){case"+":if(p>="A"&&p<="Z")m=String.fromCharCode(p.charCodeAt(0)+32);else throw new L;break;case"$":if(p>="A"&&p<="Z")m=String.fromCharCode(p.charCodeAt(0)-64);else throw new L;break;case"%":if(p>="A"&&p<="E")m=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")m=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")m=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")m=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")m="\0";else if(p==="V")m="@";else if(p==="W")m="`";else if(p==="X"||p==="Y"||p==="Z")m="";else throw new L;break;case"/":if(p>="A"&&p<="O")m=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")m=":";else throw new L;break}l+=m,c++}else l+=h}return l}}zt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",zt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],zt.ASTERISK_ENCODING=148;class yt extends jt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,a,l){let c=this.decodeStart(a),h=this.decodeEnd(a),p=new H;yt.decodeMiddle(a,c[1],h[0],p);let m=p.toString(),v=null;l!=null&&(v=l.get(Z.ALLOWED_LENGTHS)),v==null&&(v=yt.DEFAULT_ALLOWED_LENGTHS);let E=m.length,C=!1,b=0;for(let X of v){if(E===X){C=!0;break}X>b&&(b=X)}if(!C&&E>b&&(C=!0),!C)throw new L;const D=[new Te(c[1],s),new Te(h[0],s)];return new St(m,null,0,D,Se.ITF,new Date().getTime())}static decodeMiddle(s,a,l,c){let h=new Int32Array(10),p=new Int32Array(5),m=new Int32Array(5);for(h.fill(0),p.fill(0),m.fill(0);a<l;){jt.recordPattern(s,a,h);for(let E=0;E<5;E++){let C=2*E;p[E]=h[C],m[E]=h[C+1]}let v=yt.decodeDigit(p);c.append(v.toString()),v=this.decodeDigit(m),c.append(v.toString()),h.forEach(function(E){a+=E})}}decodeStart(s){let a=yt.skipWhiteSpace(s),l=yt.findGuardPattern(s,a,yt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(s,l[0]),l}validateQuietZone(s,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let c=a-1;l>0&&c>=0&&!s.get(c);c--)l--;if(l!==0)throw new se}static skipWhiteSpace(s){const a=s.getSize(),l=s.getNextSet(0);if(l===a)throw new se;return l}decodeEnd(s){s.reverse();try{let a=yt.skipWhiteSpace(s),l;try{l=yt.findGuardPattern(s,a,yt.END_PATTERN_REVERSED[0])}catch(h){h instanceof se&&(l=yt.findGuardPattern(s,a,yt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,l[0]);let c=l[0];return l[0]=s.getSize()-l[1],l[1]=s.getSize()-c,l}finally{s.reverse()}}static findGuardPattern(s,a,l){let c=l.length,h=new Int32Array(c),p=s.getSize(),m=!1,v=0,E=a;h.fill(0);for(let C=a;C<p;C++)if(s.get(C)!==m)h[v]++;else{if(v===c-1){if(jt.patternMatchVariance(h,l,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return[E,C];E+=h[0]+h[1],M.arraycopy(h,2,h,0,v-1),h[v-1]=0,h[v]=0,v--}else v++;h[v]=1,m=!m}throw new se}static decodeDigit(s){let a=yt.MAX_AVG_VARIANCE,l=-1,c=yt.PATTERNS.length;for(let h=0;h<c;h++){let p=yt.PATTERNS[h],m=jt.patternMatchVariance(s,p,yt.MAX_INDIVIDUAL_VARIANCE);m<a?(a=m,l=h):m===a&&(l=-1)}if(l>=0)return l%10;throw new se}}yt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],yt.MAX_AVG_VARIANCE=.38,yt.MAX_INDIVIDUAL_VARIANCE=.5,yt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],yt.START_PATTERN=Int32Array.from([1,1,1,1]),yt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Bt extends jt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let a=!1,l,c=0,h=Int32Array.from([0,0,0]);for(;!a;){h=Int32Array.from([0,0,0]),l=Bt.findGuardPattern(s,c,!1,this.START_END_PATTERN,h);let p=l[0];c=l[1];let m=p-(c-p);m>=0&&(a=s.isRange(m,p,!1))}return l}static checkChecksum(s){return Bt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return Bt.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let c=a-1;c>=0;c-=2){let h=s.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new L;l+=h}l*=3;for(let c=a-2;c>=0;c-=2){let h=s.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new L;l+=h}return(1e3-l)%10}static decodeEnd(s,a){return Bt.findGuardPattern(s,a,!1,Bt.START_END_PATTERN,new Int32Array(Bt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,a,l,c){return this.findGuardPattern(s,a,l,c,new Int32Array(c.length))}static findGuardPattern(s,a,l,c,h){let p=s.getSize();a=l?s.getNextUnset(a):s.getNextSet(a);let m=0,v=a,E=c.length,C=l;for(let b=a;b<p;b++)if(s.get(b)!==C)h[m]++;else{if(m===E-1){if(jt.patternMatchVariance(h,c,Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE)return Int32Array.from([v,b]);v+=h[0]+h[1];let D=h.slice(2,h.length-1);for(let W=0;W<m-1;W++)h[W]=D[W];h[m-1]=0,h[m]=0,m--}else m++;h[m]=1,C=!C}throw new se}static decodeDigit(s,a,l,c){this.recordPattern(s,l,a);let h=this.MAX_AVG_VARIANCE,p=-1,m=c.length;for(let v=0;v<m;v++){let E=c[v],C=jt.patternMatchVariance(a,E,Bt.MAX_INDIVIDUAL_VARIANCE);C<h&&(h=C,p=v)}if(p>=0)return p;throw new se}}Bt.MAX_AVG_VARIANCE=.48,Bt.MAX_INDIVIDUAL_VARIANCE=.7,Bt.START_END_PATTERN=Int32Array.from([1,1,1]),Bt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Bt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Bt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class as{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(a,l,c),p=c.toString(),m=as.parseExtensionString(p),v=[new Te((l[0]+l[1])/2,s),new Te(h,s)],E=new St(p,null,0,v,Se.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&E.putAllMetadata(m),E}decodeMiddle(s,a,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=s.getSize(),p=a[1],m=0;for(let E=0;E<5&&p<h;E++){let C=Bt.decodeDigit(s,c,p,Bt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let b of c)p+=b;C>=10&&(m|=1<<4-E),E!==4&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(l.length!==5)throw new se;let v=this.determineCheckDigit(m);if(as.extensionChecksum(l.toString())!==v)throw new se;return p}static extensionChecksum(s){let a=s.length,l=0;for(let c=a-2;c>=0;c-=2)l+=s.charAt(c).charCodeAt(0)-48;l*=3;for(let c=a-1;c>=0;c-=2)l+=s.charAt(c).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(s){for(let a=0;a<10;a++)if(s===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new se}static parseExtensionString(s){if(s.length!==5)return null;let a=as.parseExtension5String(s);return a==null?null:new Map([[hn.SUGGESTED_PRICE,a]])}static parseExtension5String(s){let a;switch(s.charAt(0)){case"0":a="£";break;case"5":a="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(s.substring(1)),c=(l/100).toString(),h=l%100,p=h<10?"0"+h:h.toString();return a+c+"."+p}}class wl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let c=this.decodeRowStringBuffer,h=this.decodeMiddle(a,l,c),p=c.toString(),m=wl.parseExtensionString(p),v=[new Te((l[0]+l[1])/2,s),new Te(h,s)],E=new St(p,null,0,v,Se.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&E.putAllMetadata(m),E}decodeMiddle(s,a,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=s.getSize(),p=a[1],m=0;for(let v=0;v<2&&p<h;v++){let E=Bt.decodeDigit(s,c,p,Bt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let C of c)p+=C;E>=10&&(m|=1<<1-v),v!==1&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(l.length!==2)throw new se;if(parseInt(l.toString())%4!==m)throw new se;return p}static parseExtensionString(s){return s.length!==2?null:new Map([[hn.ISSUE_NUMBER,parseInt(s)]])}}class nc{static decodeRow(s,a,l){let c=Bt.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new as().decodeRow(s,a,c)}catch{return new wl().decodeRow(s,a,c)}}}nc.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class qe extends Bt{constructor(){super(),this.decodeRowStringBuffer="",qe.L_AND_G_PATTERNS=qe.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let a=qe.L_PATTERNS[s-10],l=new Int32Array(a.length);for(let c=0;c<a.length;c++)l[c]=a[a.length-c-1];qe.L_AND_G_PATTERNS[s]=l}}decodeRow(s,a,l){let c=qe.findStartGuardPattern(a),h=l==null?null:l.get(Z.NEED_RESULT_POINT_CALLBACK);if(h!=null){const ue=new Te((c[0]+c[1])/2,s);h.foundPossibleResultPoint(ue)}let p=this.decodeMiddle(a,c,this.decodeRowStringBuffer),m=p.rowOffset,v=p.resultString;if(h!=null){const ue=new Te(m,s);h.foundPossibleResultPoint(ue)}let E=this.decodeEnd(a,m);if(h!=null){const ue=new Te((E[0]+E[1])/2,s);h.foundPossibleResultPoint(ue)}let C=E[1],b=C+(C-E[0]);if(b>=a.getSize()||!a.isRange(C,b,!1))throw new se;let D=v.toString();if(D.length<8)throw new L;if(!qe.checkChecksum(D))throw new T;let W=(c[1]+c[0])/2,X=(E[1]+E[0])/2,$=this.getBarcodeFormat(),te=[new Te(W,s),new Te(X,s)],ie=new St(D,null,0,te,$,new Date().getTime()),fe=0;try{let ue=nc.decodeRow(s,a,E[1]);ie.putMetadata(hn.UPC_EAN_EXTENSION,ue.getText()),ie.putAllMetadata(ue.getResultMetadata()),ie.addResultPoints(ue.getResultPoints()),fe=ue.getText().length}catch{}let pe=l==null?null:l.get(Z.ALLOWED_EAN_EXTENSIONS);if(pe!=null){let ue=!1;for(let Ze in pe)if(fe.toString()===Ze){ue=!0;break}if(!ue)throw new se}return ie}decodeEnd(s,a){return qe.findGuardPattern(s,a,!1,qe.START_END_PATTERN,new Int32Array(qe.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return qe.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return qe.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let c=a-1;c>=0;c-=2){let h=s.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new L;l+=h}l*=3;for(let c=a-2;c>=0;c-=2){let h=s.charAt(c).charCodeAt(0)-48;if(h<0||h>9)throw new L;l+=h}return(1e3-l)%10}}class fi extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=s.getSize(),p=a[1],m=0;for(let E=0;E<6&&p<h;E++){let C=qe.decodeDigit(s,c,p,qe.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let b of c)p+=b;C>=10&&(m|=1<<5-E)}l=fi.determineFirstDigit(l,m),p=qe.findGuardPattern(s,p,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&p<h;E++){let C=qe.decodeDigit(s,c,p,qe.L_PATTERNS);l+=String.fromCharCode(48+C);for(let b of c)p+=b}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return Se.EAN_13}static determineFirstDigit(s,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return s=String.fromCharCode(48+l)+s,s;throw new se}}fi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class vl extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=s.getSize(),p=a[1];for(let v=0;v<4&&p<h;v++){let E=qe.decodeDigit(s,c,p,qe.L_PATTERNS);l+=String.fromCharCode(48+E);for(let C of c)p+=C}p=qe.findGuardPattern(s,p,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&p<h;v++){let E=qe.decodeDigit(s,c,p,qe.L_PATTERNS);l+=String.fromCharCode(48+E);for(let C of c)p+=C}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return Se.EAN_8}}class Oi extends qe{constructor(){super(...arguments),this.ean13Reader=new fi}getBarcodeFormat(){return Se.UPC_A}decode(s,a){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,a,l))}decodeMiddle(s,a,l){return this.ean13Reader.decodeMiddle(s,a,l)}maybeReturnResult(s){let a=s.getText();if(a.charAt(0)==="0"){let l=new St(a.substring(1),null,null,s.getResultPoints(),Se.UPC_A);return s.getResultMetadata()!=null&&l.putAllMetadata(s.getResultMetadata()),l}else throw new se}reset(){this.ean13Reader.reset()}}class mr extends qe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,a,l){const c=this.decodeMiddleCounters.map(E=>E);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const h=s.getSize();let p=a[1],m=0;for(let E=0;E<6&&p<h;E++){const C=mr.decodeDigit(s,c,p,mr.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let b of c)p+=b;C>=10&&(m|=1<<5-E)}let v=mr.determineNumSysAndCheckDigit(l,m);return{rowOffset:p,resultString:v}}decodeEnd(s,a){return mr.findGuardPatternWithoutCounters(s,a,!0,mr.MIDDLE_END_PATTERN)}checkChecksum(s){return qe.checkChecksum(mr.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,a){for(let l=0;l<=1;l++)for(let c=0;c<10;c++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c]){let h=String.fromCharCode(48+l),p=String.fromCharCode(48+c);return h+s+p}throw se.getNotFoundInstance()}getBarcodeFormat(){return Se.UPC_E}static convertUPCEtoUPCA(s){const a=s.slice(1,7).split("").map(h=>h.charCodeAt(0)),l=new H;l.append(s.charAt(0));let c=a[5];switch(c){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(c),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(c);break}return s.length>=8&&l.append(s.charAt(7)),l.toString()}}mr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),mr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class $s extends jt{constructor(s){super();let a=s==null?null:s.get(Z.POSSIBLE_FORMATS),l=[];r(a)?(l.push(new fi),l.push(new Oi),l.push(new vl),l.push(new mr)):(a.indexOf(Se.EAN_13)>-1&&l.push(new fi),a.indexOf(Se.UPC_A)>-1&&l.push(new Oi),a.indexOf(Se.EAN_8)>-1&&l.push(new vl),a.indexOf(Se.UPC_E)>-1&&l.push(new mr)),this.readers=l}decodeRow(s,a,l){for(let c of this.readers)try{const h=c.decodeRow(s,a,l),p=h.getBarcodeFormat()===Se.EAN_13&&h.getText().charAt(0)==="0",m=l==null?null:l.get(Z.POSSIBLE_FORMATS),v=m==null||m.includes(Se.UPC_A);if(p&&v){const E=h.getRawBytes(),C=new St(h.getText().substring(1),E,E?E.length:null,h.getResultPoints(),Se.UPC_A);return C.putAllMetadata(h.getResultMetadata()),C}return h}catch{}throw new se}reset(){for(let s of this.readers)s.reset()}}class vn extends jt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,a){for(let l=0;l<a.length;l++)if(jt.patternMatchVariance(s,a[l],vn.MAX_INDIVIDUAL_VARIANCE)<vn.MAX_AVG_VARIANCE)return l;throw new se}static count(s){return Qe.sum(new Int32Array(s))}static increment(s,a){let l=0,c=a[0];for(let h=1;h<s.length;h++)a[h]>c&&(c=a[h],l=h);s[l]++}static decrement(s,a){let l=0,c=a[0];for(let h=1;h<s.length;h++)a[h]<c&&(c=a[h],l=h);s[l]--}static isFinderPattern(s){let a=s[0]+s[1],l=a+s[2]+s[3],c=a/l;if(c>=vn.MIN_FINDER_PATTERN_RATIO&&c<=vn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let m of s)m>p&&(p=m),m<h&&(h=m);return p<10*h}return!1}}vn.MAX_AVG_VARIANCE=.2,vn.MAX_INDIVIDUAL_VARIANCE=.45,vn.MIN_FINDER_PATTERN_RATIO=9.5/12,vn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Yr{constructor(s,a){this.value=s,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Yr))return!1;const a=s;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class aa{constructor(s,a,l,c,h){this.value=s,this.startEnd=a,this.value=s,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Te(l,h)),this.resultPoints.push(new Te(c,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof aa))return!1;const a=s;return this.value===a.value}hashCode(){return this.value}}class Tt{constructor(){}static getRSSvalue(s,a,l){let c=0;for(let v of s)c+=v;let h=0,p=0,m=s.length;for(let v=0;v<m-1;v++){let E;for(E=1,p|=1<<v;E<s[v];E++,p&=~(1<<v)){let C=Tt.combins(c-E-1,m-v-2);if(l&&p===0&&c-E-(m-v-1)>=m-v-1&&(C-=Tt.combins(c-E-(m-v),m-v-2)),m-v-1>1){let b=0;for(let D=c-E-(m-v-2);D>a;D--)b+=Tt.combins(c-E-D-1,m-v-3);C-=b*(m-1-v)}else c-E>a&&C--;h+=C}c-=E}return h}static combins(s,a){let l,c;s-a>a?(c=a,l=s-a):(c=s-a,l=a);let h=1,p=1;for(let m=s;m>l;m--)h*=m,p<=c&&(h/=p,p++);for(;p<=c;)h/=p,p++;return h}}class pf{static buildBitArray(s){let a=s.length*2-1;s[s.length-1].getRightChar()==null&&(a-=1);let l=12*a,c=new z(l),h=0,m=s[0].getRightChar().getValue();for(let v=11;v>=0;--v)m&1<<v&&c.set(h),h++;for(let v=1;v<s.length;++v){let E=s[v],C=E.getLeftChar().getValue();for(let b=11;b>=0;--b)C&1<<b&&c.set(h),h++;if(E.getRightChar()!=null){let b=E.getRightChar().getValue();for(let D=11;D>=0;--D)b&1<<D&&c.set(h),h++}}return c}}class Mr{constructor(s,a){a?this.decodedInformation=null:(this.finished=s,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ls{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Xn extends ls{constructor(s,a){super(s),this.value=a}getValue(){return this.value}isFNC1(){return this.value===Xn.FNC1}}Xn.FNC1="$";class us extends ls{constructor(s,a,l){super(s),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xn extends ls{constructor(s,a,l){if(super(s),a<0||a>10||l<0||l>10)throw new L;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xn.FNC1}isSecondDigitFNC1(){return this.secondDigit===xn.FNC1}isAnyFNC1(){return this.firstDigit===xn.FNC1||this.secondDigit===xn.FNC1}}xn.FNC1=10;class xe{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new se;let a=s.substring(0,2);for(let h of xe.TWO_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(2,h[2],s):xe.processFixedAI(2,h[1],s);if(s.length<3)throw new se;let l=s.substring(0,3);for(let h of xe.THREE_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(3,h[2],s):xe.processFixedAI(3,h[1],s);for(let h of xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,h[2],s):xe.processFixedAI(4,h[1],s);if(s.length<4)throw new se;let c=s.substring(0,4);for(let h of xe.FOUR_DIGIT_DATA_LENGTH)if(h[0]===c)return h[1]===xe.VARIABLE_LENGTH?xe.processVariableAI(4,h[2],s):xe.processFixedAI(4,h[1],s);throw new se}static processFixedAI(s,a,l){if(l.length<s)throw new se;let c=l.substring(0,s);if(l.length<s+a)throw new se;let h=l.substring(s,s+a),p=l.substring(s+a),m="("+c+")"+h,v=xe.parseFieldsInGeneralPurpose(p);return v==null?m:m+v}static processVariableAI(s,a,l){let c=l.substring(0,s),h;l.length<s+a?h=l.length:h=s+a;let p=l.substring(s,h),m=l.substring(h),v="("+c+")"+p,E=xe.parseFieldsInGeneralPurpose(m);return E==null?v:v+E}}xe.VARIABLE_LENGTH=[],xe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",xe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",xe.VARIABLE_LENGTH,20],["22",xe.VARIABLE_LENGTH,29],["30",xe.VARIABLE_LENGTH,8],["37",xe.VARIABLE_LENGTH,8],["90",xe.VARIABLE_LENGTH,30],["91",xe.VARIABLE_LENGTH,30],["92",xe.VARIABLE_LENGTH,30],["93",xe.VARIABLE_LENGTH,30],["94",xe.VARIABLE_LENGTH,30],["95",xe.VARIABLE_LENGTH,30],["96",xe.VARIABLE_LENGTH,30],["97",xe.VARIABLE_LENGTH,3],["98",xe.VARIABLE_LENGTH,30],["99",xe.VARIABLE_LENGTH,30]],xe.THREE_DIGIT_DATA_LENGTH=[["240",xe.VARIABLE_LENGTH,30],["241",xe.VARIABLE_LENGTH,30],["242",xe.VARIABLE_LENGTH,6],["250",xe.VARIABLE_LENGTH,30],["251",xe.VARIABLE_LENGTH,30],["253",xe.VARIABLE_LENGTH,17],["254",xe.VARIABLE_LENGTH,20],["400",xe.VARIABLE_LENGTH,30],["401",xe.VARIABLE_LENGTH,30],["402",17],["403",xe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",xe.VARIABLE_LENGTH,20],["421",xe.VARIABLE_LENGTH,15],["422",3],["423",xe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",xe.VARIABLE_LENGTH,15],["391",xe.VARIABLE_LENGTH,18],["392",xe.VARIABLE_LENGTH,15],["393",xe.VARIABLE_LENGTH,18],["703",xe.VARIABLE_LENGTH,30]],xe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",xe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",xe.VARIABLE_LENGTH,20],["8003",xe.VARIABLE_LENGTH,30],["8004",xe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",xe.VARIABLE_LENGTH,30],["8008",xe.VARIABLE_LENGTH,12],["8018",18],["8020",xe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",xe.VARIABLE_LENGTH,70],["8200",xe.VARIABLE_LENGTH,70]];class Qs{constructor(s){this.buffer=new H,this.information=s}decodeAllCodes(s,a){let l=a,c=null;do{let h=this.decodeGeneralPurposeField(l,c),p=xe.parseFieldsInGeneralPurpose(h.getNewString());if(p!=null&&s.append(p),h.isRemaining()?c=""+h.getRemainingValue():c=null,l===h.getNewPosition())break;l=h.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let a=s;a<s+3;++a)if(this.information.get(a))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(s,4);return h===0?new xn(this.information.getSize(),xn.FNC1,xn.FNC1):new xn(this.information.getSize(),h-1,xn.FNC1)}let a=this.extractNumericValueFromBitArray(s,7),l=(a-8)/11,c=(a-8)%11;return new xn(s+7,l,c)}extractNumericValueFromBitArray(s,a){return Qs.extractNumericValueFromBitArray(this.information,s,a)}static extractNumericValueFromBitArray(s,a,l){let c=0;for(let h=0;h<l;++h)s.get(a+h)&&(c|=1<<l-h-1);return c}decodeGeneralPurposeField(s,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(s);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new us(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new us(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),s=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),s=a.isFinished()):(a=this.parseNumericBlock(),s=a.isFinished()),!(l!==this.current.getPosition())&&!s)break}while(!s);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let a;return s.isSecondDigitFNC1()?a=new us(this.current.getPosition(),this.buffer.toString()):a=new us(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Mr(!0,a)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let a=new us(this.current.getPosition(),this.buffer.toString());return new Mr(!0,a)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Mr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new us(this.current.getPosition(),this.buffer.toString());return new Mr(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Mr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new us(this.current.getPosition(),this.buffer.toString());return new Mr(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Mr(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<116)return!0;if(s+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(s,8);return c>=232&&c<253}decodeIsoIec646(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Xn(s+5,Xn.FNC1);if(a>=5&&a<15)return new Xn(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<90)return new Xn(s+7,""+(l+1));if(l>=90&&l<116)return new Xn(s+7,""+(l+7));let c=this.extractNumericValueFromBitArray(s,8),h;switch(c){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new L}return new Xn(s+8,h)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,6);return l>=16&&l<63}decodeAlphanumeric(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Xn(s+5,Xn.FNC1);if(a>=5&&a<15)return new Xn(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,6);if(l>=32&&l<58)return new Xn(s+6,""+(l+33));let c;switch(l){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new gr("Decoding invalid alphanumeric value: "+l)}return new Xn(s+6,c)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<5&&a+s<this.information.getSize();++a)if(a===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+a))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let a=s;a<s+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<4&&a+s<this.information.getSize();++a)if(this.information.get(s+a))return!1;return!0}}class Ys{constructor(s){this.information=s,this.generalDecoder=new Qs(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ln extends Ys{constructor(s){super(s)}encodeCompressedGtin(s,a){s.append("(01)");let l=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,a,l)}encodeCompressedGtinWithoutAI(s,a,l){for(let c=0;c<4;++c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*c,10);h/100===0&&s.append("0"),h/10===0&&s.append("0"),s.append(h)}Ln.appendCheckDigit(s,l)}static appendCheckDigit(s,a){let l=0;for(let c=0;c<13;c++){let h=s.charAt(c+a).charCodeAt(0)-48;l+=c&1?h:3*h}l=10-l%10,l===10&&(l=0),s.append(l)}}Ln.GTIN_SIZE=40;class Di extends Ln{constructor(s){super(s)}parseInformation(){let s=new H;s.append("(01)");let a=s.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Di.HEADER_SIZE,4);return s.append(l),this.encodeCompressedGtinWithoutAI(s,Di.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(s,Di.HEADER_SIZE+44)}}Di.HEADER_SIZE=4;class cs extends Ys{constructor(s){super(s)}parseInformation(){let s=new H;return this.getGeneralDecoder().decodeAllCodes(s,cs.HEADER_SIZE)}}cs.HEADER_SIZE=5;class kr extends Ln{constructor(s){super(s)}encodeCompressedWeight(s,a,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(s,c);let h=this.checkWeight(c),p=1e5;for(let m=0;m<5;++m)h/p===0&&s.append("0"),p/=10;s.append(h)}}class Lr extends kr{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Lr.HEADER_SIZE+kr.GTIN_SIZE+Lr.WEIGHT_SIZE)throw new se;let s=new H;return this.encodeCompressedGtin(s,Lr.HEADER_SIZE),this.encodeCompressedWeight(s,Lr.HEADER_SIZE+kr.GTIN_SIZE,Lr.WEIGHT_SIZE),s.toString()}}Lr.HEADER_SIZE=5,Lr.WEIGHT_SIZE=15;class gf extends Lr{constructor(s){super(s)}addWeightCode(s,a){s.append("(3103)")}checkWeight(s){return s}}class rc extends Lr{constructor(s){super(s)}addWeightCode(s,a){a<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class yr extends Ln{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<yr.HEADER_SIZE+Ln.GTIN_SIZE)throw new se;let s=new H;this.encodeCompressedGtin(s,yr.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(yr.HEADER_SIZE+Ln.GTIN_SIZE,yr.LAST_DIGIT_SIZE);s.append("(392"),s.append(a),s.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(yr.HEADER_SIZE+Ln.GTIN_SIZE+yr.LAST_DIGIT_SIZE,null);return s.append(l.getNewString()),s.toString()}}yr.HEADER_SIZE=8,yr.LAST_DIGIT_SIZE=2;class Pn extends Ln{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Pn.HEADER_SIZE+Ln.GTIN_SIZE)throw new se;let s=new H;this.encodeCompressedGtin(s,Pn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Pn.HEADER_SIZE+Ln.GTIN_SIZE,Pn.LAST_DIGIT_SIZE);s.append("(393"),s.append(a),s.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Pn.HEADER_SIZE+Ln.GTIN_SIZE+Pn.LAST_DIGIT_SIZE,Pn.FIRST_THREE_DIGITS_SIZE);l/100==0&&s.append("0"),l/10==0&&s.append("0"),s.append(l);let c=this.getGeneralDecoder().decodeGeneralPurposeField(Pn.HEADER_SIZE+Ln.GTIN_SIZE+Pn.LAST_DIGIT_SIZE+Pn.FIRST_THREE_DIGITS_SIZE,null);return s.append(c.getNewString()),s.toString()}}Pn.HEADER_SIZE=8,Pn.LAST_DIGIT_SIZE=2,Pn.FIRST_THREE_DIGITS_SIZE=10;class At extends kr{constructor(s,a,l){super(s),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=At.HEADER_SIZE+At.GTIN_SIZE+At.WEIGHT_SIZE+At.DATE_SIZE)throw new se;let s=new H;return this.encodeCompressedGtin(s,At.HEADER_SIZE),this.encodeCompressedWeight(s,At.HEADER_SIZE+At.GTIN_SIZE,At.WEIGHT_SIZE),this.encodeCompressedDate(s,At.HEADER_SIZE+At.GTIN_SIZE+At.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,At.DATE_SIZE);if(l==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let c=l%32;l/=32;let h=l%12+1;l/=12;let p=l;p/10==0&&s.append("0"),s.append(p),h/10==0&&s.append("0"),s.append(h),c/10==0&&s.append("0"),s.append(c)}addWeightCode(s,a){s.append("("),s.append(this.firstAIdigits),s.append(a/1e5),s.append(")")}checkWeight(s){return s%1e5}}At.HEADER_SIZE=8,At.WEIGHT_SIZE=20,At.DATE_SIZE=16;function mf(S){try{if(S.get(1))return new Di(S);if(!S.get(2))return new cs(S);switch(Qs.extractNumericValueFromBitArray(S,1,4)){case 4:return new gf(S);case 5:return new rc(S)}switch(Qs.extractNumericValueFromBitArray(S,1,5)){case 12:return new yr(S);case 13:return new Pn(S)}switch(Qs.extractNumericValueFromBitArray(S,1,7)){case 56:return new At(S,"310","11");case 57:return new At(S,"320","11");case 58:return new At(S,"310","13");case 59:return new At(S,"320","13");case 60:return new At(S,"310","15");case 61:return new At(S,"320","15");case 62:return new At(S,"310","17");case 63:return new At(S,"320","17")}}catch(s){throw console.log(s),new gr("unknown decoder: "+S)}}class Fr{constructor(s,a,l,c){this.leftchar=s,this.rightchar=a,this.finderpattern=l,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,a){return s instanceof Fr?Fr.equalsOrNull(s.leftchar,a.leftchar)&&Fr.equalsOrNull(s.rightchar,a.rightchar)&&Fr.equalsOrNull(s.finderpattern,a.finderpattern):!1}static equalsOrNull(s,a){return s===null?a===null:Fr.equals(s,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class xl{constructor(s,a,l){this.pairs=s,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,a){return s instanceof xl?this.checkEqualitity(s,a)&&s.wasReversed===a.wasReversed:!1}checkEqualitity(s,a){if(!s||!a)return;let l;return s.forEach((c,h)=>{a.forEach(p=>{c.getLeftChar().getValue()===p.getLeftChar().getValue()&&c.getRightChar().getValue()===p.getRightChar().getValue()&&c.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(l=!0)})}),l}}class oe extends vn{constructor(s){super(...arguments),this.pairs=new Array(oe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,a,l){this.pairs.length=0,this.startFromEven=!1;try{return oe.constructResult(this.decodeRow2pairs(s,a))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,oe.constructResult(this.decodeRow2pairs(s,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,s))}catch(h){if(h instanceof se){if(!this.pairs.length)throw new se;l=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(s,!1),c){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new se}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return s&&(this.rows=this.rows.reverse()),a}checkRows(s,a){for(let l=a;l<this.rows.length;l++){let c=this.rows[l];this.pairs.length=0;for(let p of s)this.pairs.push(p.getPairs());if(this.pairs.push(c.getPairs()),!oe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(s);h.push(c);try{return this.checkRows(h,l+1)}catch(p){this.verbose&&console.log(p)}}throw new se}static isValidSequence(s){for(let a of oe.FINDER_PATTERN_SEQUENCES){if(s.length>a.length)continue;let l=!0;for(let c=0;c<s.length;c++)if(s[c].getFinderPattern().getValue()!=a[c]){l=!1;break}if(l)return!0}return!1}storeRow(s,a){let l=0,c=!1,h=!1;for(;l<this.rows.length;){let p=this.rows[l];if(p.getRowNumber()>s){h=p.isEquivalent(this.pairs);break}c=p.isEquivalent(this.pairs),l++}h||c||oe.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new xl(this.pairs,s,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,a){for(let l of a)if(l.getPairs().length!==s.length){for(let c of l.getPairs())for(let h of s)if(Fr.equals(c,h))break}}static isPartialRow(s,a){for(let l of a){let c=!0;for(let h of s){let p=!1;for(let m of l.getPairs())if(h.equals(m)){p=!0;break}if(!p){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(s){let a=pf.buildBitArray(s),c=mf(a).parseInformation(),h=s[0].getFinderPattern().getResultPoints(),p=s[s.length-1].getFinderPattern().getResultPoints(),m=[h[0],h[1],p[0],p[1]];return new St(c,null,null,m,Se.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),a=s.getLeftChar(),l=s.getRightChar();if(l==null)return!1;let c=l.getChecksumPortion(),h=2;for(let m=1;m<this.pairs.size();++m){let v=this.pairs.get(m);c+=v.getLeftChar().getChecksumPortion(),h++;let E=v.getRightChar();E!=null&&(c+=E.getChecksumPortion(),h++)}return c%=211,211*(h-4)+c==a.getValue()}static getNextSecondBar(s,a){let l;return s.get(a)?(l=s.getNextUnset(a),l=s.getNextSet(l)):(l=s.getNextSet(a),l=s.getNextUnset(l)),l}retrieveNextPair(s,a,l){let c=a.length%2==0;this.startFromEven&&(c=!c);let h,p=!0,m=-1;do this.findNextPair(s,a,m),h=this.parseFoundFinderPattern(s,l,c),h==null?m=oe.getNextSecondBar(s,this.startEnd[0]):p=!1;while(p);let v=this.decodeDataCharacter(s,h,c,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new se;let E;try{E=this.decodeDataCharacter(s,h,c,!1)}catch(C){E=null,this.verbose&&console.log(C)}return new Fr(v,E,h,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,a,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let h=s.getSize(),p;l>=0?p=l:this.isEmptyPair(a)?p=0:p=a[a.length-1].getFinderPattern().getStartEnd()[1];let m=a.length%2!=0;this.startFromEven&&(m=!m);let v=!1;for(;p<h&&(v=!s.get(p),!!v);)p++;let E=0,C=p;for(let b=p;b<h;b++)if(s.get(b)!=v)c[E]++;else{if(E==3){if(m&&oe.reverseCounters(c),oe.isFinderPattern(c)){this.startEnd[0]=C,this.startEnd[1]=b;return}m&&oe.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,E--}else E++;c[E]=1,v=!v}throw new se}static reverseCounters(s){let a=s.length;for(let l=0;l<a/2;++l){let c=s[l];s[l]=s[a-l-1],s[a-l-1]=c}}parseFoundFinderPattern(s,a,l){let c,h,p;if(l){let E=this.startEnd[0]-1;for(;E>=0&&!s.get(E);)E--;E++,c=this.startEnd[0]-E,h=E,p=this.startEnd[1]}else h=this.startEnd[0],p=s.getNextUnset(this.startEnd[1]+1),c=p-this.startEnd[1];let m=this.getDecodeFinderCounters();M.arraycopy(m,0,m,1,m.length-1),m[0]=c;let v;try{v=this.parseFinderValue(m,oe.FINDER_PATTERNS)}catch{return null}return new aa(v,[h,p],h,p,a)}decodeDataCharacter(s,a,l,c){let h=this.getDataCharacterCounters();for(let Ct=0;Ct<h.length;Ct++)h[Ct]=0;if(c)oe.recordPatternInReverse(s,a.getStartEnd()[0],h);else{oe.recordPattern(s,a.getStartEnd()[1],h);for(let Ct=0,Bn=h.length-1;Ct<Bn;Ct++,Bn--){let Ur=h[Ct];h[Ct]=h[Bn],h[Bn]=Ur}}let p=17,m=Qe.sum(new Int32Array(h))/p,v=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(m-v)/v>.3)throw new se;let E=this.getOddCounts(),C=this.getEvenCounts(),b=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let Ct=0;Ct<h.length;Ct++){let Bn=1*h[Ct]/m,Ur=Bn+.5;if(Ur<1){if(Bn<.3)throw new se;Ur=1}else if(Ur>8){if(Bn>8.7)throw new se;Ur=8}let Cl=Ct/2;Ct&1?(C[Cl]=Ur,D[Cl]=Bn-Ur):(E[Cl]=Ur,b[Cl]=Bn-Ur)}this.adjustOddEvenCounts(p);let W=4*a.getValue()+(l?0:2)+(c?0:1)-1,X=0,$=0;for(let Ct=E.length-1;Ct>=0;Ct--){if(oe.isNotA1left(a,l,c)){let Bn=oe.WEIGHTS[W][2*Ct];$+=E[Ct]*Bn}X+=E[Ct]}let te=0;for(let Ct=C.length-1;Ct>=0;Ct--)if(oe.isNotA1left(a,l,c)){let Bn=oe.WEIGHTS[W][2*Ct+1];te+=C[Ct]*Bn}let ie=$+te;if(X&1||X>13||X<4)throw new se;let fe=(13-X)/2,pe=oe.SYMBOL_WIDEST[fe],ue=9-pe,Ze=Tt.getRSSvalue(E,pe,!0),ze=Tt.getRSSvalue(C,ue,!1),xr=oe.EVEN_TOTAL_SUBSET[fe],mi=oe.GSUM[fe],Er=Ze*xr+ze+mi;return new Yr(Er,ie)}static isNotA1left(s,a,l){return!(s.getValue()==0&&a&&l)}adjustOddEvenCounts(s){let a=Qe.sum(new Int32Array(this.getOddCounts())),l=Qe.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1;a>13?h=!0:a<4&&(c=!0);let p=!1,m=!1;l>13?m=!0:l<4&&(p=!0);let v=a+l-s,E=(a&1)==1,C=(l&1)==0;if(v==1)if(E){if(C)throw new se;h=!0}else{if(!C)throw new se;m=!0}else if(v==-1)if(E){if(C)throw new se;c=!0}else{if(!C)throw new se;p=!0}else if(v==0){if(E){if(!C)throw new se;a<l?(c=!0,m=!0):(h=!0,p=!0)}else if(C)throw new se}else throw new se;if(c){if(h)throw new se;oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(m)throw new se;oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}oe.SYMBOL_WIDEST=[7,5,4,3,1],oe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],oe.GSUM=[0,348,1388,2948,3988],oe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],oe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],oe.FINDER_PAT_A=0,oe.FINDER_PAT_B=1,oe.FINDER_PAT_C=2,oe.FINDER_PAT_D=3,oe.FINDER_PAT_E=4,oe.FINDER_PAT_F=5,oe.FINDER_PATTERN_SEQUENCES=[[oe.FINDER_PAT_A,oe.FINDER_PAT_A],[oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B],[oe.FINDER_PAT_A,oe.FINDER_PAT_C,oe.FINDER_PAT_B,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_C],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F]],oe.MAX_PAIRS=11;class la extends Yr{constructor(s,a,l){super(s,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ht extends vn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,a,l){const c=this.decodePair(a,!1,s,l);ht.addOrTally(this.possibleLeftPairs,c),a.reverse();let h=this.decodePair(a,!0,s,l);ht.addOrTally(this.possibleRightPairs,h),a.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&ht.checkChecksum(p,m))return ht.constructResult(p,m)}throw new se}static addOrTally(s,a){if(a==null)return;let l=!1;for(let c of s)if(c.getValue()===a.getValue()){c.incrementCount(),l=!0;break}l||s.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,a){let l=4537077*s.getValue()+a.getValue(),c=new String(l).toString(),h=new H;for(let E=13-c.length;E>0;E--)h.append("0");h.append(c);let p=0;for(let E=0;E<13;E++){let C=h.charAt(E).charCodeAt(0)-48;p+=E&1?C:3*C}p=10-p%10,p===10&&(p=0),h.append(p.toString());let m=s.getFinderPattern().getResultPoints(),v=a.getFinderPattern().getResultPoints();return new St(h.toString(),null,0,[m[0],m[1],v[0],v[1]],Se.RSS_14,new Date().getTime())}static checkChecksum(s,a){let l=(s.getChecksumPortion()+16*a.getChecksumPortion())%79,c=9*s.getFinderPattern().getValue()+a.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c}decodePair(s,a,l,c){try{let h=this.findFinderPattern(s,a),p=this.parseFoundFinderPattern(s,l,a,h),m=c==null?null:c.get(Z.NEED_RESULT_POINT_CALLBACK);if(m!=null){let C=(h[0]+h[1])/2;a&&(C=s.getSize()-1-C),m.foundPossibleResultPoint(new Te(C,l))}let v=this.decodeDataCharacter(s,p,!0),E=this.decodeDataCharacter(s,p,!1);return new la(1597*v.getValue()+E.getValue(),v.getChecksumPortion()+4*E.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(s,a,l){let c=this.getDataCharacterCounters();for(let te=0;te<c.length;te++)c[te]=0;if(l)jt.recordPatternInReverse(s,a.getStartEnd()[0],c);else{jt.recordPattern(s,a.getStartEnd()[1]+1,c);for(let te=0,ie=c.length-1;te<ie;te++,ie--){let fe=c[te];c[te]=c[ie],c[ie]=fe}}let h=l?16:15,p=Qe.sum(new Int32Array(c))/h,m=this.getOddCounts(),v=this.getEvenCounts(),E=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let te=0;te<c.length;te++){let ie=c[te]/p,fe=Math.floor(ie+.5);fe<1?fe=1:fe>8&&(fe=8);let pe=Math.floor(te/2);te&1?(v[pe]=fe,C[pe]=ie-fe):(m[pe]=fe,E[pe]=ie-fe)}this.adjustOddEvenCounts(l,h);let b=0,D=0;for(let te=m.length-1;te>=0;te--)D*=9,D+=m[te],b+=m[te];let W=0,X=0;for(let te=v.length-1;te>=0;te--)W*=9,W+=v[te],X+=v[te];let $=D+3*W;if(l){if(b&1||b>12||b<4)throw new se;let te=(12-b)/2,ie=ht.OUTSIDE_ODD_WIDEST[te],fe=9-ie,pe=Tt.getRSSvalue(m,ie,!1),ue=Tt.getRSSvalue(v,fe,!0),Ze=ht.OUTSIDE_EVEN_TOTAL_SUBSET[te],ze=ht.OUTSIDE_GSUM[te];return new Yr(pe*Ze+ue+ze,$)}else{if(X&1||X>10||X<4)throw new se;let te=(10-X)/2,ie=ht.INSIDE_ODD_WIDEST[te],fe=9-ie,pe=Tt.getRSSvalue(m,ie,!0),ue=Tt.getRSSvalue(v,fe,!1),Ze=ht.INSIDE_ODD_TOTAL_SUBSET[te],ze=ht.INSIDE_GSUM[te];return new Yr(ue*Ze+pe+ze,$)}}findFinderPattern(s,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=s.getSize(),h=!1,p=0;for(;p<c&&(h=!s.get(p),a!==h);)p++;let m=0,v=p;for(let E=p;E<c;E++)if(s.get(E)!==h)l[m]++;else{if(m===3){if(vn.isFinderPattern(l))return[v,E];v+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,m--}else m++;l[m]=1,h=!h}throw new se}parseFoundFinderPattern(s,a,l,c){let h=s.get(c[0]),p=c[0]-1;for(;p>=0&&h!==s.get(p);)p--;p++;const m=c[0]-p,v=this.getDecodeFinderCounters(),E=new Int32Array(v.length);M.arraycopy(v,0,E,1,v.length-1),E[0]=m;const C=this.parseFinderValue(E,ht.FINDER_PATTERNS);let b=p,D=c[1];return l&&(b=s.getSize()-1-b,D=s.getSize()-1-D),new aa(C,[p,c[1]],b,D,a)}adjustOddEvenCounts(s,a){let l=Qe.sum(new Int32Array(this.getOddCounts())),c=Qe.sum(new Int32Array(this.getEvenCounts())),h=!1,p=!1,m=!1,v=!1;s?(l>12?p=!0:l<4&&(h=!0),c>12?v=!0:c<4&&(m=!0)):(l>11?p=!0:l<5&&(h=!0),c>10?v=!0:c<4&&(m=!0));let E=l+c-a,C=(l&1)===(s?1:0),b=(c&1)===1;if(E===1)if(C){if(b)throw new se;p=!0}else{if(!b)throw new se;v=!0}else if(E===-1)if(C){if(b)throw new se;h=!0}else{if(!b)throw new se;m=!0}else if(E===0){if(C){if(!b)throw new se;l<c?(h=!0,v=!0):(p=!0,m=!0)}else if(b)throw new se}else throw new se;if(h){if(p)throw new se;vn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&vn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(v)throw new se;vn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&vn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ht.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ht.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ht.OUTSIDE_GSUM=[0,161,961,2015,2715],ht.INSIDE_GSUM=[0,336,1036,1516],ht.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ht.INSIDE_ODD_WIDEST=[2,4,6,8],ht.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Mi extends jt{constructor(s,a){super(),this.readers=[],this.verbose=a===!0;const l=s?s.get(Z.POSSIBLE_FORMATS):null,c=s&&s.get(Z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Se.EAN_13)||l.includes(Se.UPC_A)||l.includes(Se.EAN_8)||l.includes(Se.UPC_E))&&this.readers.push(new $s(s)),l.includes(Se.CODE_39)&&this.readers.push(new zt(c)),l.includes(Se.CODE_128)&&this.readers.push(new me),l.includes(Se.ITF)&&this.readers.push(new yt),l.includes(Se.RSS_14)&&this.readers.push(new ht),l.includes(Se.RSS_EXPANDED)&&this.readers.push(new oe(this.verbose))):(this.readers.push(new $s(s)),this.readers.push(new zt),this.readers.push(new $s(s)),this.readers.push(new me),this.readers.push(new yt),this.readers.push(new ht),this.readers.push(new oe(this.verbose)))}decodeRow(s,a,l){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(s,a,l)}catch{}throw new se}reset(){this.readers.forEach(s=>s.reset())}}class x1 extends mt{constructor(s=500,a){super(new Mi(a),s,a)}}class ot{constructor(s,a,l){this.ecCodewords=s,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class rt{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ke{constructor(s,a,l,c,h,p){this.versionNumber=s,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=h,this.ecBlocks=p;let m=0;const v=p.getECCodewords(),E=p.getECBlocks();for(let C of E)m+=C.getCount()*(C.getDataCodewords()+v);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,a){if(s&1||a&1)throw new L;for(let l of Ke.VERSIONS)if(l.symbolSizeRows===s&&l.symbolSizeColumns===a)return l;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new Ke(1,10,10,8,8,new ot(5,new rt(1,3))),new Ke(2,12,12,10,10,new ot(7,new rt(1,5))),new Ke(3,14,14,12,12,new ot(10,new rt(1,8))),new Ke(4,16,16,14,14,new ot(12,new rt(1,12))),new Ke(5,18,18,16,16,new ot(14,new rt(1,18))),new Ke(6,20,20,18,18,new ot(18,new rt(1,22))),new Ke(7,22,22,20,20,new ot(20,new rt(1,30))),new Ke(8,24,24,22,22,new ot(24,new rt(1,36))),new Ke(9,26,26,24,24,new ot(28,new rt(1,44))),new Ke(10,32,32,14,14,new ot(36,new rt(1,62))),new Ke(11,36,36,16,16,new ot(42,new rt(1,86))),new Ke(12,40,40,18,18,new ot(48,new rt(1,114))),new Ke(13,44,44,20,20,new ot(56,new rt(1,144))),new Ke(14,48,48,22,22,new ot(68,new rt(1,174))),new Ke(15,52,52,24,24,new ot(42,new rt(2,102))),new Ke(16,64,64,14,14,new ot(56,new rt(2,140))),new Ke(17,72,72,16,16,new ot(36,new rt(4,92))),new Ke(18,80,80,18,18,new ot(48,new rt(4,114))),new Ke(19,88,88,20,20,new ot(56,new rt(4,144))),new Ke(20,96,96,22,22,new ot(68,new rt(4,174))),new Ke(21,104,104,24,24,new ot(56,new rt(6,136))),new Ke(22,120,120,18,18,new ot(68,new rt(6,175))),new Ke(23,132,132,20,20,new ot(62,new rt(8,163))),new Ke(24,144,144,22,22,new ot(62,new rt(8,156),new rt(2,155))),new Ke(25,8,18,6,16,new ot(7,new rt(1,5))),new Ke(26,8,32,6,14,new ot(11,new rt(1,10))),new Ke(27,12,26,10,24,new ot(14,new rt(1,16))),new Ke(28,12,36,10,16,new ot(18,new rt(1,22))),new Ke(29,16,36,14,16,new ot(24,new rt(1,32))),new Ke(30,16,48,14,22,new ot(28,new rt(1,49)))]}}Ke.VERSIONS=Ke.buildVersions();class ua{constructor(s){const a=s.getHeight();if(a<8||a>144||a&1)throw new L;this.version=ua.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new We(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const a=s.getHeight(),l=s.getWidth();return Ke.getVersionForDimensions(a,l)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,c=0;const h=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let m=!1,v=!1,E=!1,C=!1;do if(l===h&&c===0&&!m)s[a++]=this.readCorner1(h,p)&255,l-=2,c+=2,m=!0;else if(l===h-2&&c===0&&p&3&&!v)s[a++]=this.readCorner2(h,p)&255,l-=2,c+=2,v=!0;else if(l===h+4&&c===2&&!(p&7)&&!E)s[a++]=this.readCorner3(h,p)&255,l-=2,c+=2,E=!0;else if(l===h-2&&c===0&&(p&7)===4&&!C)s[a++]=this.readCorner4(h,p)&255,l-=2,c+=2,C=!0;else{do l<h&&c>=0&&!this.readMappingMatrix.get(c,l)&&(s[a++]=this.readUtah(l,c,h,p)&255),l-=2,c+=2;while(l>=0&&c<p);l+=1,c+=3;do l>=0&&c<p&&!this.readMappingMatrix.get(c,l)&&(s[a++]=this.readUtah(l,c,h,p)&255),l+=2,c-=2;while(l<h&&c>=0);l+=3,c+=1}while(l<h||c<p);if(a!==this.version.getTotalCodewords())throw new L;return s}readModule(s,a,l,c){return s<0&&(s+=l,a+=4-(l+4&7)),a<0&&(a+=c,s+=4-(c+4&7)),this.readMappingMatrix.set(a,s),this.mappingBitMatrix.get(a,s)}readUtah(s,a,l,c){let h=0;return this.readModule(s-2,a-2,l,c)&&(h|=1),h<<=1,this.readModule(s-2,a-1,l,c)&&(h|=1),h<<=1,this.readModule(s-1,a-2,l,c)&&(h|=1),h<<=1,this.readModule(s-1,a-1,l,c)&&(h|=1),h<<=1,this.readModule(s-1,a,l,c)&&(h|=1),h<<=1,this.readModule(s,a-2,l,c)&&(h|=1),h<<=1,this.readModule(s,a-1,l,c)&&(h|=1),h<<=1,this.readModule(s,a,l,c)&&(h|=1),h}readCorner1(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,1,s,a)&&(l|=1),l<<=1,this.readModule(s-1,2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}readCorner2(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-4,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner3(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-3,s,a)&&(l|=1),l<<=1,this.readModule(1,a-2,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner4(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}extractDataRegion(s){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(s.getHeight()!==a)throw new x("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),p=a/c|0,m=l/h|0,v=p*c,E=m*h,C=new We(E,v);for(let b=0;b<p;++b){const D=b*c;for(let W=0;W<m;++W){const X=W*h;for(let $=0;$<c;++$){const te=b*(c+2)+1+$,ie=D+$;for(let fe=0;fe<h;++fe){const pe=W*(h+2)+1+fe;if(s.get(pe,te)){const ue=X+fe;C.set(ue,ie)}}}}}return C}}class ca{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a){const l=a.getECBlocks();let c=0;const h=l.getECBlocks();for(let $ of h)c+=$.getCount();const p=new Array(c);let m=0;for(let $ of h)for(let te=0;te<$.getCount();te++){const ie=$.getDataCodewords(),fe=l.getECCodewords()+ie;p[m++]=new ca(ie,new Uint8Array(fe))}const E=p[0].codewords.length-l.getECCodewords(),C=E-1;let b=0;for(let $=0;$<C;$++)for(let te=0;te<m;te++)p[te].codewords[$]=s[b++];const D=a.getVersionNumber()===24,W=D?8:m;for(let $=0;$<W;$++)p[$].codewords[E-1]=s[b++];const X=p[0].codewords.length;for(let $=E;$<X;$++)for(let te=0;te<m;te++){const ie=D?(te+8)%m:te,fe=D&&ie>7?$-1:$;p[ie].codewords[fe]=s[b++]}if(b!==s.length)throw new x;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class El{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new x(""+s);let a=0,l=this.bitOffset,c=this.byteOffset;const h=this.bytes;if(l>0){const p=8-l,m=s<p?s:p,v=p-m,E=255>>8-m<<v;a=(h[c]&E)>>v,s-=m,l+=m,l===8&&(l=0,c++)}if(s>0){for(;s>=8;)a=a<<8|h[c]&255,c++,s-=8;if(s>0){const p=8-s,m=255>>p<<p;a=a<<s|(h[c]&m)>>p,l+=s}}return this.bitOffset=l,this.byteOffset=c,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Yt;(function(S){S[S.PAD_ENCODE=0]="PAD_ENCODE",S[S.ASCII_ENCODE=1]="ASCII_ENCODE",S[S.C40_ENCODE=2]="C40_ENCODE",S[S.TEXT_ENCODE=3]="TEXT_ENCODE",S[S.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",S[S.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",S[S.BASE256_ENCODE=6]="BASE256_ENCODE"})(Yt||(Yt={}));class ki{static decode(s){const a=new El(s),l=new H,c=new H,h=new Array;let p=Yt.ASCII_ENCODE;do if(p===Yt.ASCII_ENCODE)p=this.decodeAsciiSegment(a,l,c);else{switch(p){case Yt.C40_ENCODE:this.decodeC40Segment(a,l);break;case Yt.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case Yt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case Yt.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case Yt.BASE256_ENCODE:this.decodeBase256Segment(a,l,h);break;default:throw new L}p=Yt.ASCII_ENCODE}while(p!==Yt.PAD_ENCODE&&a.available()>0);return c.length()>0&&l.append(c.toString()),new sa(s,l.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(s,a,l){let c=!1;do{let h=s.readBits(8);if(h===0)throw new L;if(h<=128)return c&&(h+=128),a.append(String.fromCharCode(h-1)),Yt.ASCII_ENCODE;if(h===129)return Yt.PAD_ENCODE;if(h<=229){const p=h-130;p<10&&a.append("0"),a.append(""+p)}else switch(h){case 230:return Yt.C40_ENCODE;case 231:return Yt.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return Yt.ANSIX12_ENCODE;case 239:return Yt.TEXT_ENCODE;case 240:return Yt.EDIFACT_ENCODE;case 241:break;default:if(h!==254||s.available()!==0)throw new L;break}}while(s.available()>0);return Yt.ASCII_ENCODE}static decodeC40Segment(s,a){let l=!1;const c=[];let h=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),c);for(let m=0;m<3;m++){const v=c[m];switch(h){case 0:if(v<3)h=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[v];l?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):a.append(E)}else throw new L;break;case 1:l?(a.append(String.fromCharCode(v+128)),l=!1):a.append(String.fromCharCode(v)),h=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[v];l?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):a.append(E)}else switch(v){case 27:a.append("");break;case 30:l=!0;break;default:throw new L}h=0;break;case 3:l?(a.append(String.fromCharCode(v+224)),l=!1):a.append(String.fromCharCode(v+96)),h=0;break;default:throw new L}}}while(s.available()>0)}static decodeTextSegment(s,a){let l=!1,c=[],h=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),c);for(let m=0;m<3;m++){const v=c[m];switch(h){case 0:if(v<3)h=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[v];l?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):a.append(E)}else throw new L;break;case 1:l?(a.append(String.fromCharCode(v+128)),l=!1):a.append(String.fromCharCode(v)),h=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[v];l?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):a.append(E)}else switch(v){case 27:a.append("");break;case 30:l=!0;break;default:throw new L}h=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[v];l?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):a.append(E),h=0}else throw new L;break;default:throw new L}}}while(s.available()>0)}static decodeAnsiX12Segment(s,a){const l=[];do{if(s.available()===8)return;const c=s.readBits(8);if(c===254)return;this.parseTwoBytes(c,s.readBits(8),l);for(let h=0;h<3;h++){const p=l[h];switch(p){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(p<14)a.append(String.fromCharCode(p+44));else if(p<40)a.append(String.fromCharCode(p+51));else throw new L;break}}}while(s.available()>0)}static parseTwoBytes(s,a,l){let c=(s<<8)+a-1,h=Math.floor(c/1600);l[0]=h,c-=h*1600,h=Math.floor(c/40),l[1]=h,l[2]=c-h*40}static decodeEdifactSegment(s,a){do{if(s.available()<=16)return;for(let l=0;l<4;l++){let c=s.readBits(6);if(c===31){const h=8-s.getBitOffset();h!==8&&s.readBits(h);return}c&32||(c|=64),a.append(String.fromCharCode(c))}}while(s.available()>0)}static decodeBase256Segment(s,a,l){let c=1+s.getByteOffset();const h=this.unrandomize255State(s.readBits(8),c++);let p;if(h===0?p=s.available()/8|0:h<250?p=h:p=250*(h-249)+this.unrandomize255State(s.readBits(8),c++),p<0)throw new L;const m=new Uint8Array(p);for(let v=0;v<p;v++){if(s.available()<8)throw new L;m[v]=this.unrandomize255State(s.readBits(8),c++)}l.push(m);try{a.append(K.decode(m,G.ISO88591))}catch(v){throw new gr("Platform does not support required encoding: "+v.message)}}static unrandomize255State(s,a){const l=149*a%255+1,c=s-l;return c>=0?c:c+256}}ki.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ki.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ki.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ki.TEXT_SHIFT2_SET_CHARS=ki.C40_SHIFT2_SET_CHARS,ki.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class E1{constructor(){this.rsDecoder=new qs(et.DATA_MATRIX_FIELD_256)}decode(s){const a=new ua(s),l=a.getVersion(),c=a.readCodewords(),h=ca.getDataBlocks(c,l);let p=0;for(let E of h)p+=E.getNumDataCodewords();const m=new Uint8Array(p),v=h.length;for(let E=0;E<v;E++){const C=h[E],b=C.getCodewords(),D=C.getNumDataCodewords();this.correctErrors(b,D);for(let W=0;W<D;W++)m[W*v+E]=b[W]}return ki.decode(m)}correctErrors(s,a){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new T}for(let c=0;c<a;c++)s[c]=l[c]}}class Vt{constructor(s){this.image=s,this.rectangleDetector=new Or(this.image)}detect(){const s=this.rectangleDetector.detect();let a=this.detectSolid1(s);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new se;a=this.shiftToModuleCenter(a);const l=a[0],c=a[1],h=a[2],p=a[3];let m=this.transitionsBetween(l,p)+1,v=this.transitionsBetween(h,p)+1;(m&1)===1&&(m+=1),(v&1)===1&&(v+=1),4*m<7*v&&4*v<7*m&&(m=v=Math.max(m,v));let E=Vt.sampleGrid(this.image,l,c,h,p,m,v);return new pl(E,[l,c,h,p])}static shiftPoint(s,a,l){let c=(a.getX()-s.getX())/(l+1),h=(a.getY()-s.getY())/(l+1);return new Te(s.getX()+c,s.getY()+h)}static moveAway(s,a,l){let c=s.getX(),h=s.getY();return c<a?c-=1:c+=1,h<l?h-=1:h+=1,new Te(c,h)}detectSolid1(s){let a=s[0],l=s[1],c=s[3],h=s[2],p=this.transitionsBetween(a,l),m=this.transitionsBetween(l,c),v=this.transitionsBetween(c,h),E=this.transitionsBetween(h,a),C=p,b=[h,a,l,c];return C>m&&(C=m,b[0]=a,b[1]=l,b[2]=c,b[3]=h),C>v&&(C=v,b[0]=l,b[1]=c,b[2]=h,b[3]=a),C>E&&(b[0]=c,b[1]=h,b[2]=a,b[3]=l),b}detectSolid2(s){let a=s[0],l=s[1],c=s[2],h=s[3],p=this.transitionsBetween(a,h),m=Vt.shiftPoint(l,c,(p+1)*4),v=Vt.shiftPoint(c,l,(p+1)*4),E=this.transitionsBetween(m,a),C=this.transitionsBetween(v,h);return E<C?(s[0]=a,s[1]=l,s[2]=c,s[3]=h):(s[0]=l,s[1]=c,s[2]=h,s[3]=a),s}correctTopRight(s){let a=s[0],l=s[1],c=s[2],h=s[3],p=this.transitionsBetween(a,h),m=this.transitionsBetween(l,h),v=Vt.shiftPoint(a,l,(m+1)*4),E=Vt.shiftPoint(c,l,(p+1)*4);p=this.transitionsBetween(v,h),m=this.transitionsBetween(E,h);let C=new Te(h.getX()+(c.getX()-l.getX())/(p+1),h.getY()+(c.getY()-l.getY())/(p+1)),b=new Te(h.getX()+(a.getX()-l.getX())/(m+1),h.getY()+(a.getY()-l.getY())/(m+1));if(!this.isValid(C))return this.isValid(b)?b:null;if(!this.isValid(b))return C;let D=this.transitionsBetween(v,C)+this.transitionsBetween(E,C),W=this.transitionsBetween(v,b)+this.transitionsBetween(E,b);return D>W?C:b}shiftToModuleCenter(s){let a=s[0],l=s[1],c=s[2],h=s[3],p=this.transitionsBetween(a,h)+1,m=this.transitionsBetween(c,h)+1,v=Vt.shiftPoint(a,l,m*4),E=Vt.shiftPoint(c,l,p*4);p=this.transitionsBetween(v,h)+1,m=this.transitionsBetween(E,h)+1,(p&1)===1&&(p+=1),(m&1)===1&&(m+=1);let C=(a.getX()+l.getX()+c.getX()+h.getX())/4,b=(a.getY()+l.getY()+c.getY()+h.getY())/4;a=Vt.moveAway(a,C,b),l=Vt.moveAway(l,C,b),c=Vt.moveAway(c,C,b),h=Vt.moveAway(h,C,b);let D,W;return v=Vt.shiftPoint(a,l,m*4),v=Vt.shiftPoint(v,h,p*4),D=Vt.shiftPoint(l,a,m*4),D=Vt.shiftPoint(D,c,p*4),E=Vt.shiftPoint(c,h,m*4),E=Vt.shiftPoint(E,l,p*4),W=Vt.shiftPoint(h,c,m*4),W=Vt.shiftPoint(W,a,p*4),[v,D,E,W]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,a,l,c,h,p,m){return Dr.getInstance().sampleGrid(s,p,m,.5,.5,p-.5,.5,p-.5,m-.5,.5,m-.5,a.getX(),a.getY(),h.getX(),h.getY(),c.getX(),c.getY(),l.getX(),l.getY())}transitionsBetween(s,a){let l=Math.trunc(s.getX()),c=Math.trunc(s.getY()),h=Math.trunc(a.getX()),p=Math.trunc(a.getY()),m=Math.abs(p-c)>Math.abs(h-l);if(m){let $=l;l=c,c=$,$=h,h=p,p=$}let v=Math.abs(h-l),E=Math.abs(p-c),C=-v/2,b=c<p?1:-1,D=l<h?1:-1,W=0,X=this.image.get(m?c:l,m?l:c);for(let $=l,te=c;$!==h;$+=D){let ie=this.image.get(m?te:$,m?$:te);if(ie!==X&&(W++,X=ie),C+=E,C>0){if(te===p)break;te+=b,C-=v}}return W}}class di{constructor(){this.decoder=new E1}decode(s,a=null){let l,c;if(a!=null&&a.has(Z.PURE_BARCODE)){const E=di.extractPureBits(s.getBlackMatrix());l=this.decoder.decode(E),c=di.NO_POINTS}else{const E=new Vt(s.getBlackMatrix()).detect();l=this.decoder.decode(E.getBits()),c=E.getPoints()}const h=l.getRawBytes(),p=new St(l.getText(),h,8*h.length,c,Se.DATA_MATRIX,M.currentTimeMillis()),m=l.getByteSegments();m!=null&&p.putMetadata(hn.BYTE_SEGMENTS,m);const v=l.getECLevel();return v!=null&&p.putMetadata(hn.ERROR_CORRECTION_LEVEL,v),p}reset(){}static extractPureBits(s){const a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a==null||l==null)throw new se;const c=this.moduleSize(a,s);let h=a[1];const p=l[1];let m=a[0];const E=(l[0]-m+1)/c,C=(p-h+1)/c;if(E<=0||C<=0)throw new se;const b=c/2;h+=b,m+=b;const D=new We(E,C);for(let W=0;W<C;W++){const X=h+W*c;for(let $=0;$<E;$++)s.get(m+$*c,X)&&D.set($,W)}return D}static moduleSize(s,a){const l=a.getWidth();let c=s[0];const h=s[1];for(;c<l&&a.get(c,h);)c++;if(c===l)throw new se;const p=c-s[0];if(p===0)throw new se;return p}}di.NO_POINTS=[];class _1 extends mt{constructor(s=500){super(new di,s)}}var wr;(function(S){S[S.L=0]="L",S[S.M=1]="M",S[S.Q=2]="Q",S[S.H=3]="H"})(wr||(wr={}));class Ye{constructor(s,a,l){this.value=s,this.stringValue=a,this.bits=l,Ye.FOR_BITS.set(l,this),Ye.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Ye.L;case"M":return Ye.M;case"Q":return Ye.Q;case"H":return Ye.H;default:throw new w(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Ye))return!1;const a=s;return this.value===a.value}static forBits(s){if(s<0||s>=Ye.FOR_BITS.size)throw new x;return Ye.FOR_BITS.get(s)}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.L=new Ye(wr.L,"L",1),Ye.M=new Ye(wr.M,"M",0),Ye.Q=new Ye(wr.Q,"Q",3),Ye.H=new Ye(wr.H,"H",2);class rn{constructor(s){this.errorCorrectionLevel=Ye.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,a){return R.bitCount(s^a)}static decodeFormatInformation(s,a){const l=rn.doDecodeFormatInformation(s,a);return l!==null?l:rn.doDecodeFormatInformation(s^rn.FORMAT_INFO_MASK_QR,a^rn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,a){let l=Number.MAX_SAFE_INTEGER,c=0;for(const h of rn.FORMAT_INFO_DECODE_LOOKUP){const p=h[0];if(p===s||p===a)return new rn(h[1]);let m=rn.numBitsDiffering(s,p);m<l&&(c=h[1],l=m),s!==a&&(m=rn.numBitsDiffering(a,p),m<l&&(c=h[1],l=m))}return l<=3?new rn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof rn))return!1;const a=s;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}rn.FORMAT_INFO_MASK_QR=21522,rn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ee{constructor(s,...a){this.ecCodewordsPerBlock=s,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const a=this.ecBlocks;for(const l of a)s+=l.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class U{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ye{constructor(s,a,...l){this.versionNumber=s,this.alignmentPatternCenters=a,this.ecBlocks=l;let c=0;const h=l[0].getECCodewordsPerBlock(),p=l[0].getECBlocks();for(const m of p)c+=m.getCount()*(m.getDataCodewords()+h);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new L;try{return this.getVersionForNumber((s-17)/4)}catch{throw new L}}static getVersionForNumber(s){if(s<1||s>40)throw new x;return ye.VERSIONS[s-1]}static decodeVersionInformation(s){let a=Number.MAX_SAFE_INTEGER,l=0;for(let c=0;c<ye.VERSION_DECODE_INFO.length;c++){const h=ye.VERSION_DECODE_INFO[c];if(h===s)return ye.getVersionForNumber(c+7);const p=rn.numBitsDiffering(s,h);p<a&&(l=c+7,a=p)}return a<=3?ye.getVersionForNumber(l):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),a=new We(s);a.setRegion(0,0,9,9),a.setRegion(s-8,0,8,9),a.setRegion(0,s-8,9,8);const l=this.alignmentPatternCenters.length;for(let c=0;c<l;c++){const h=this.alignmentPatternCenters[c]-2;for(let p=0;p<l;p++)c===0&&(p===0||p===l-1)||c===l-1&&p===0||a.setRegion(this.alignmentPatternCenters[p]-2,h,5,5)}return a.setRegion(6,9,1,s-17),a.setRegion(9,6,s-17,1),this.versionNumber>6&&(a.setRegion(s-11,0,3,6),a.setRegion(0,s-11,6,3)),a}toString(){return""+this.versionNumber}}ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ye.VERSIONS=[new ye(1,new Int32Array(0),new ee(7,new U(1,19)),new ee(10,new U(1,16)),new ee(13,new U(1,13)),new ee(17,new U(1,9))),new ye(2,Int32Array.from([6,18]),new ee(10,new U(1,34)),new ee(16,new U(1,28)),new ee(22,new U(1,22)),new ee(28,new U(1,16))),new ye(3,Int32Array.from([6,22]),new ee(15,new U(1,55)),new ee(26,new U(1,44)),new ee(18,new U(2,17)),new ee(22,new U(2,13))),new ye(4,Int32Array.from([6,26]),new ee(20,new U(1,80)),new ee(18,new U(2,32)),new ee(26,new U(2,24)),new ee(16,new U(4,9))),new ye(5,Int32Array.from([6,30]),new ee(26,new U(1,108)),new ee(24,new U(2,43)),new ee(18,new U(2,15),new U(2,16)),new ee(22,new U(2,11),new U(2,12))),new ye(6,Int32Array.from([6,34]),new ee(18,new U(2,68)),new ee(16,new U(4,27)),new ee(24,new U(4,19)),new ee(28,new U(4,15))),new ye(7,Int32Array.from([6,22,38]),new ee(20,new U(2,78)),new ee(18,new U(4,31)),new ee(18,new U(2,14),new U(4,15)),new ee(26,new U(4,13),new U(1,14))),new ye(8,Int32Array.from([6,24,42]),new ee(24,new U(2,97)),new ee(22,new U(2,38),new U(2,39)),new ee(22,new U(4,18),new U(2,19)),new ee(26,new U(4,14),new U(2,15))),new ye(9,Int32Array.from([6,26,46]),new ee(30,new U(2,116)),new ee(22,new U(3,36),new U(2,37)),new ee(20,new U(4,16),new U(4,17)),new ee(24,new U(4,12),new U(4,13))),new ye(10,Int32Array.from([6,28,50]),new ee(18,new U(2,68),new U(2,69)),new ee(26,new U(4,43),new U(1,44)),new ee(24,new U(6,19),new U(2,20)),new ee(28,new U(6,15),new U(2,16))),new ye(11,Int32Array.from([6,30,54]),new ee(20,new U(4,81)),new ee(30,new U(1,50),new U(4,51)),new ee(28,new U(4,22),new U(4,23)),new ee(24,new U(3,12),new U(8,13))),new ye(12,Int32Array.from([6,32,58]),new ee(24,new U(2,92),new U(2,93)),new ee(22,new U(6,36),new U(2,37)),new ee(26,new U(4,20),new U(6,21)),new ee(28,new U(7,14),new U(4,15))),new ye(13,Int32Array.from([6,34,62]),new ee(26,new U(4,107)),new ee(22,new U(8,37),new U(1,38)),new ee(24,new U(8,20),new U(4,21)),new ee(22,new U(12,11),new U(4,12))),new ye(14,Int32Array.from([6,26,46,66]),new ee(30,new U(3,115),new U(1,116)),new ee(24,new U(4,40),new U(5,41)),new ee(20,new U(11,16),new U(5,17)),new ee(24,new U(11,12),new U(5,13))),new ye(15,Int32Array.from([6,26,48,70]),new ee(22,new U(5,87),new U(1,88)),new ee(24,new U(5,41),new U(5,42)),new ee(30,new U(5,24),new U(7,25)),new ee(24,new U(11,12),new U(7,13))),new ye(16,Int32Array.from([6,26,50,74]),new ee(24,new U(5,98),new U(1,99)),new ee(28,new U(7,45),new U(3,46)),new ee(24,new U(15,19),new U(2,20)),new ee(30,new U(3,15),new U(13,16))),new ye(17,Int32Array.from([6,30,54,78]),new ee(28,new U(1,107),new U(5,108)),new ee(28,new U(10,46),new U(1,47)),new ee(28,new U(1,22),new U(15,23)),new ee(28,new U(2,14),new U(17,15))),new ye(18,Int32Array.from([6,30,56,82]),new ee(30,new U(5,120),new U(1,121)),new ee(26,new U(9,43),new U(4,44)),new ee(28,new U(17,22),new U(1,23)),new ee(28,new U(2,14),new U(19,15))),new ye(19,Int32Array.from([6,30,58,86]),new ee(28,new U(3,113),new U(4,114)),new ee(26,new U(3,44),new U(11,45)),new ee(26,new U(17,21),new U(4,22)),new ee(26,new U(9,13),new U(16,14))),new ye(20,Int32Array.from([6,34,62,90]),new ee(28,new U(3,107),new U(5,108)),new ee(26,new U(3,41),new U(13,42)),new ee(30,new U(15,24),new U(5,25)),new ee(28,new U(15,15),new U(10,16))),new ye(21,Int32Array.from([6,28,50,72,94]),new ee(28,new U(4,116),new U(4,117)),new ee(26,new U(17,42)),new ee(28,new U(17,22),new U(6,23)),new ee(30,new U(19,16),new U(6,17))),new ye(22,Int32Array.from([6,26,50,74,98]),new ee(28,new U(2,111),new U(7,112)),new ee(28,new U(17,46)),new ee(30,new U(7,24),new U(16,25)),new ee(24,new U(34,13))),new ye(23,Int32Array.from([6,30,54,78,102]),new ee(30,new U(4,121),new U(5,122)),new ee(28,new U(4,47),new U(14,48)),new ee(30,new U(11,24),new U(14,25)),new ee(30,new U(16,15),new U(14,16))),new ye(24,Int32Array.from([6,28,54,80,106]),new ee(30,new U(6,117),new U(4,118)),new ee(28,new U(6,45),new U(14,46)),new ee(30,new U(11,24),new U(16,25)),new ee(30,new U(30,16),new U(2,17))),new ye(25,Int32Array.from([6,32,58,84,110]),new ee(26,new U(8,106),new U(4,107)),new ee(28,new U(8,47),new U(13,48)),new ee(30,new U(7,24),new U(22,25)),new ee(30,new U(22,15),new U(13,16))),new ye(26,Int32Array.from([6,30,58,86,114]),new ee(28,new U(10,114),new U(2,115)),new ee(28,new U(19,46),new U(4,47)),new ee(28,new U(28,22),new U(6,23)),new ee(30,new U(33,16),new U(4,17))),new ye(27,Int32Array.from([6,34,62,90,118]),new ee(30,new U(8,122),new U(4,123)),new ee(28,new U(22,45),new U(3,46)),new ee(30,new U(8,23),new U(26,24)),new ee(30,new U(12,15),new U(28,16))),new ye(28,Int32Array.from([6,26,50,74,98,122]),new ee(30,new U(3,117),new U(10,118)),new ee(28,new U(3,45),new U(23,46)),new ee(30,new U(4,24),new U(31,25)),new ee(30,new U(11,15),new U(31,16))),new ye(29,Int32Array.from([6,30,54,78,102,126]),new ee(30,new U(7,116),new U(7,117)),new ee(28,new U(21,45),new U(7,46)),new ee(30,new U(1,23),new U(37,24)),new ee(30,new U(19,15),new U(26,16))),new ye(30,Int32Array.from([6,26,52,78,104,130]),new ee(30,new U(5,115),new U(10,116)),new ee(28,new U(19,47),new U(10,48)),new ee(30,new U(15,24),new U(25,25)),new ee(30,new U(23,15),new U(25,16))),new ye(31,Int32Array.from([6,30,56,82,108,134]),new ee(30,new U(13,115),new U(3,116)),new ee(28,new U(2,46),new U(29,47)),new ee(30,new U(42,24),new U(1,25)),new ee(30,new U(23,15),new U(28,16))),new ye(32,Int32Array.from([6,34,60,86,112,138]),new ee(30,new U(17,115)),new ee(28,new U(10,46),new U(23,47)),new ee(30,new U(10,24),new U(35,25)),new ee(30,new U(19,15),new U(35,16))),new ye(33,Int32Array.from([6,30,58,86,114,142]),new ee(30,new U(17,115),new U(1,116)),new ee(28,new U(14,46),new U(21,47)),new ee(30,new U(29,24),new U(19,25)),new ee(30,new U(11,15),new U(46,16))),new ye(34,Int32Array.from([6,34,62,90,118,146]),new ee(30,new U(13,115),new U(6,116)),new ee(28,new U(14,46),new U(23,47)),new ee(30,new U(44,24),new U(7,25)),new ee(30,new U(59,16),new U(1,17))),new ye(35,Int32Array.from([6,30,54,78,102,126,150]),new ee(30,new U(12,121),new U(7,122)),new ee(28,new U(12,47),new U(26,48)),new ee(30,new U(39,24),new U(14,25)),new ee(30,new U(22,15),new U(41,16))),new ye(36,Int32Array.from([6,24,50,76,102,128,154]),new ee(30,new U(6,121),new U(14,122)),new ee(28,new U(6,47),new U(34,48)),new ee(30,new U(46,24),new U(10,25)),new ee(30,new U(2,15),new U(64,16))),new ye(37,Int32Array.from([6,28,54,80,106,132,158]),new ee(30,new U(17,122),new U(4,123)),new ee(28,new U(29,46),new U(14,47)),new ee(30,new U(49,24),new U(10,25)),new ee(30,new U(24,15),new U(46,16))),new ye(38,Int32Array.from([6,32,58,84,110,136,162]),new ee(30,new U(4,122),new U(18,123)),new ee(28,new U(13,46),new U(32,47)),new ee(30,new U(48,24),new U(14,25)),new ee(30,new U(42,15),new U(32,16))),new ye(39,Int32Array.from([6,26,54,82,110,138,166]),new ee(30,new U(20,117),new U(4,118)),new ee(28,new U(40,47),new U(7,48)),new ee(30,new U(43,24),new U(22,25)),new ee(30,new U(10,15),new U(67,16))),new ye(40,Int32Array.from([6,30,58,86,114,142,170]),new ee(30,new U(19,118),new U(6,119)),new ee(28,new U(18,47),new U(31,48)),new ee(30,new U(34,24),new U(34,25)),new ee(30,new U(20,15),new U(61,16)))];var Wt;(function(S){S[S.DATA_MASK_000=0]="DATA_MASK_000",S[S.DATA_MASK_001=1]="DATA_MASK_001",S[S.DATA_MASK_010=2]="DATA_MASK_010",S[S.DATA_MASK_011=3]="DATA_MASK_011",S[S.DATA_MASK_100=4]="DATA_MASK_100",S[S.DATA_MASK_101=5]="DATA_MASK_101",S[S.DATA_MASK_110=6]="DATA_MASK_110",S[S.DATA_MASK_111=7]="DATA_MASK_111"})(Wt||(Wt={}));class Nn{constructor(s,a){this.value=s,this.isMasked=a}unmaskBitMatrix(s,a){for(let l=0;l<a;l++)for(let c=0;c<a;c++)this.isMasked(l,c)&&s.flip(c,l)}}Nn.values=new Map([[Wt.DATA_MASK_000,new Nn(Wt.DATA_MASK_000,(S,s)=>(S+s&1)===0)],[Wt.DATA_MASK_001,new Nn(Wt.DATA_MASK_001,(S,s)=>(S&1)===0)],[Wt.DATA_MASK_010,new Nn(Wt.DATA_MASK_010,(S,s)=>s%3===0)],[Wt.DATA_MASK_011,new Nn(Wt.DATA_MASK_011,(S,s)=>(S+s)%3===0)],[Wt.DATA_MASK_100,new Nn(Wt.DATA_MASK_100,(S,s)=>(Math.floor(S/2)+Math.floor(s/3)&1)===0)],[Wt.DATA_MASK_101,new Nn(Wt.DATA_MASK_101,(S,s)=>S*s%6===0)],[Wt.DATA_MASK_110,new Nn(Wt.DATA_MASK_110,(S,s)=>S*s%6<3)],[Wt.DATA_MASK_111,new Nn(Wt.DATA_MASK_111,(S,s)=>(S+s+S*s%3&1)===0)]]);class ha{constructor(s){const a=s.getHeight();if(a<21||(a&3)!==1)throw new L;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let h=0;h<6;h++)s=this.copyBit(h,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let h=5;h>=0;h--)s=this.copyBit(8,h,s);const a=this.bitMatrix.getHeight();let l=0;const c=a-7;for(let h=a-1;h>=c;h--)l=this.copyBit(8,h,l);for(let h=a-8;h<a;h++)l=this.copyBit(h,8,l);if(this.parsedFormatInfo=rn.decodeFormatInformation(s,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),a=Math.floor((s-17)/4);if(a<=6)return ye.getVersionForNumber(a);let l=0;const c=s-11;for(let p=5;p>=0;p--)for(let m=s-9;m>=c;m--)l=this.copyBit(m,p,l);let h=ye.decodeVersionInformation(l);if(h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;l=0;for(let p=5;p>=0;p--)for(let m=s-9;m>=c;m--)l=this.copyBit(p,m,l);if(h=ye.decodeVersionInformation(l),h!==null&&h.getDimensionForVersion()===s)return this.parsedVersion=h,h;throw new L}copyBit(s,a,l){return(this.isMirror?this.bitMatrix.get(a,s):this.bitMatrix.get(s,a))?l<<1|1:l<<1}readCodewords(){const s=this.readFormatInformation(),a=this.readVersion(),l=Nn.values.get(s.getDataMask()),c=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,c);const h=a.buildFunctionPattern();let p=!0;const m=new Uint8Array(a.getTotalCodewords());let v=0,E=0,C=0;for(let b=c-1;b>0;b-=2){b===6&&b--;for(let D=0;D<c;D++){const W=p?c-1-D:D;for(let X=0;X<2;X++)h.get(b-X,W)||(C++,E<<=1,this.bitMatrix.get(b-X,W)&&(E|=1),C===8&&(m[v++]=E,C=0,E=0))}p=!p}if(v!==a.getTotalCodewords())throw new L;return m}remask(){if(this.parsedFormatInfo===null)return;const s=Nn.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let a=0,l=s.getWidth();a<l;a++)for(let c=a+1,h=s.getHeight();c<h;c++)s.get(a,c)!==s.get(c,a)&&(s.flip(c,a),s.flip(a,c))}}class ic{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a,l){if(s.length!==a.getTotalCodewords())throw new x;const c=a.getECBlocksForLevel(l);let h=0;const p=c.getECBlocks();for(const X of p)h+=X.getCount();const m=new Array(h);let v=0;for(const X of p)for(let $=0;$<X.getCount();$++){const te=X.getDataCodewords(),ie=c.getECCodewordsPerBlock()+te;m[v++]=new ic(te,new Uint8Array(ie))}const E=m[0].codewords.length;let C=m.length-1;for(;C>=0&&m[C].codewords.length!==E;)C--;C++;const b=E-c.getECCodewordsPerBlock();let D=0;for(let X=0;X<b;X++)for(let $=0;$<v;$++)m[$].codewords[X]=s[D++];for(let X=C;X<v;X++)m[X].codewords[b]=s[D++];const W=m[0].codewords.length;for(let X=b;X<W;X++)for(let $=0;$<v;$++){const te=$<C?X:X+1;m[$].codewords[te]=s[D++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var sr;(function(S){S[S.TERMINATOR=0]="TERMINATOR",S[S.NUMERIC=1]="NUMERIC",S[S.ALPHANUMERIC=2]="ALPHANUMERIC",S[S.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",S[S.BYTE=4]="BYTE",S[S.ECI=5]="ECI",S[S.KANJI=6]="KANJI",S[S.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",S[S.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",S[S.HANZI=9]="HANZI"})(sr||(sr={}));class Pe{constructor(s,a,l,c){this.value=s,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=c,Pe.FOR_BITS.set(c,this),Pe.FOR_VALUE.set(s,this)}static forBits(s){const a=Pe.FOR_BITS.get(s);if(a===void 0)throw new x;return a}getCharacterCountBits(s){const a=s.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Pe))return!1;const a=s;return this.value===a.value}toString(){return this.stringValue}}Pe.FOR_BITS=new Map,Pe.FOR_VALUE=new Map,Pe.TERMINATOR=new Pe(sr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Pe.NUMERIC=new Pe(sr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Pe.ALPHANUMERIC=new Pe(sr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Pe.STRUCTURED_APPEND=new Pe(sr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Pe.BYTE=new Pe(sr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Pe.ECI=new Pe(sr.ECI,"ECI",Int32Array.from([0,0,0]),7),Pe.KANJI=new Pe(sr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Pe.FNC1_FIRST_POSITION=new Pe(sr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Pe.FNC1_SECOND_POSITION=new Pe(sr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Pe.HANZI=new Pe(sr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class bt{static decode(s,a,l,c){const h=new El(s);let p=new H;const m=new Array;let v=-1,E=-1;try{let C=null,b=!1,D;do{if(h.available()<4)D=Pe.TERMINATOR;else{const W=h.readBits(4);D=Pe.forBits(W)}switch(D){case Pe.TERMINATOR:break;case Pe.FNC1_FIRST_POSITION:case Pe.FNC1_SECOND_POSITION:b=!0;break;case Pe.STRUCTURED_APPEND:if(h.available()<16)throw new L;v=h.readBits(8),E=h.readBits(8);break;case Pe.ECI:const W=bt.parseECIValue(h);if(C=F.getCharacterSetECIByValue(W),C===null)throw new L;break;case Pe.HANZI:const X=h.readBits(4),$=h.readBits(D.getCharacterCountBits(a));X===bt.GB2312_SUBSET&&bt.decodeHanziSegment(h,p,$);break;default:const te=h.readBits(D.getCharacterCountBits(a));switch(D){case Pe.NUMERIC:bt.decodeNumericSegment(h,p,te);break;case Pe.ALPHANUMERIC:bt.decodeAlphanumericSegment(h,p,te,b);break;case Pe.BYTE:bt.decodeByteSegment(h,p,te,C,m,c);break;case Pe.KANJI:bt.decodeKanjiSegment(h,p,te);break;default:throw new L}break}}while(D!==Pe.TERMINATOR)}catch{throw new L}return new sa(s,p.toString(),m.length===0?null:m,l===null?null:l.toString(),v,E)}static decodeHanziSegment(s,a,l){if(l*13>s.available())throw new L;const c=new Uint8Array(2*l);let h=0;for(;l>0;){const p=s.readBits(13);let m=p/96<<8&4294967295|p%96;m<959?m+=41377:m+=42657,c[h]=m>>8&255,c[h+1]=m&255,h+=2,l--}try{a.append(K.decode(c,G.GB2312))}catch(p){throw new L(p)}}static decodeKanjiSegment(s,a,l){if(l*13>s.available())throw new L;const c=new Uint8Array(2*l);let h=0;for(;l>0;){const p=s.readBits(13);let m=p/192<<8&4294967295|p%192;m<7936?m+=33088:m+=49472,c[h]=m>>8,c[h+1]=m,h+=2,l--}try{a.append(K.decode(c,G.SHIFT_JIS))}catch(p){throw new L(p)}}static decodeByteSegment(s,a,l,c,h,p){if(8*l>s.available())throw new L;const m=new Uint8Array(l);for(let E=0;E<l;E++)m[E]=s.readBits(8);let v;c===null?v=G.guessEncoding(m,p):v=c.getName();try{a.append(K.decode(m,v))}catch(E){throw new L(E)}h.push(m)}static toAlphaNumericChar(s){if(s>=bt.ALPHANUMERIC_CHARS.length)throw new L;return bt.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,a,l,c){const h=a.length();for(;l>1;){if(s.available()<11)throw new L;const p=s.readBits(11);a.append(bt.toAlphaNumericChar(Math.floor(p/45))),a.append(bt.toAlphaNumericChar(p%45)),l-=2}if(l===1){if(s.available()<6)throw new L;a.append(bt.toAlphaNumericChar(s.readBits(6)))}if(c)for(let p=h;p<a.length();p++)a.charAt(p)==="%"&&(p<a.length()-1&&a.charAt(p+1)==="%"?a.deleteCharAt(p+1):a.setCharAt(p,""))}static decodeNumericSegment(s,a,l){for(;l>=3;){if(s.available()<10)throw new L;const c=s.readBits(10);if(c>=1e3)throw new L;a.append(bt.toAlphaNumericChar(Math.floor(c/100))),a.append(bt.toAlphaNumericChar(Math.floor(c/10)%10)),a.append(bt.toAlphaNumericChar(c%10)),l-=3}if(l===2){if(s.available()<7)throw new L;const c=s.readBits(7);if(c>=100)throw new L;a.append(bt.toAlphaNumericChar(Math.floor(c/10))),a.append(bt.toAlphaNumericChar(c%10))}else if(l===1){if(s.available()<4)throw new L;const c=s.readBits(4);if(c>=10)throw new L;a.append(bt.toAlphaNumericChar(c))}}static parseECIValue(s){const a=s.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const l=s.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=s.readBits(16);return(a&31)<<16&4294967295|l}throw new L}}bt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",bt.GB2312_SUBSET=1;class yf{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const a=s[0];s[0]=s[2],s[2]=a}}class A1{constructor(){this.rsDecoder=new qs(et.QR_CODE_FIELD_256)}decodeBooleanArray(s,a){return this.decodeBitMatrix(We.parseFromBooleanArray(s),a)}decodeBitMatrix(s,a){const l=new ha(s);let c=null;try{return this.decodeBitMatrixParser(l,a)}catch(h){c=h}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const h=this.decodeBitMatrixParser(l,a);return h.setOther(new yf(!0)),h}catch(h){throw c!==null?c:h}}decodeBitMatrixParser(s,a){const l=s.readVersion(),c=s.readFormatInformation().getErrorCorrectionLevel(),h=s.readCodewords(),p=ic.getDataBlocks(h,l,c);let m=0;for(const C of p)m+=C.getNumDataCodewords();const v=new Uint8Array(m);let E=0;for(const C of p){const b=C.getCodewords(),D=C.getNumDataCodewords();this.correctErrors(b,D);for(let W=0;W<D;W++)v[E++]=b[W]}return bt.decode(v,l,c,a)}correctErrors(s,a){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new T}for(let c=0;c<a;c++)s[c]=l[c]}}class hs extends Te{constructor(s,a,l){super(s,a),this.estimatedModuleSize=l}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){const c=Math.abs(s-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){const c=(this.getX()+a)/2,h=(this.getY()+s)/2,p=(this.estimatedModuleSize+l)/2;return new hs(c,h,p)}}class Br{constructor(s,a,l,c,h,p,m){this.image=s,this.startX=a,this.startY=l,this.width=c,this.height=h,this.moduleSize=p,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,a=this.height,l=this.width,c=s+l,h=this.startY+a/2,p=new Int32Array(3),m=this.image;for(let v=0;v<a;v++){const E=h+(v&1?-Math.floor((v+1)/2):Math.floor((v+1)/2));p[0]=0,p[1]=0,p[2]=0;let C=s;for(;C<c&&!m.get(C,E);)C++;let b=0;for(;C<c;){if(m.get(C,E))if(b===1)p[1]++;else if(b===2){if(this.foundPatternCross(p)){const D=this.handlePossibleCenter(p,E,C);if(D!==null)return D}p[0]=p[2],p[1]=1,p[2]=0,b=1}else p[++b]++;else b===1&&b++,p[b]++;C++}if(this.foundPatternCross(p)){const D=this.handlePossibleCenter(p,E,c);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(s,a){return a-s[2]-s[1]/2}foundPatternCross(s){const a=this.moduleSize,l=a/2;for(let c=0;c<3;c++)if(Math.abs(a-s[c])>=l)return!1;return!0}crossCheckVertical(s,a,l,c){const h=this.image,p=h.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let v=s;for(;v>=0&&h.get(a,v)&&m[1]<=l;)m[1]++,v--;if(v<0||m[1]>l)return NaN;for(;v>=0&&!h.get(a,v)&&m[0]<=l;)m[0]++,v--;if(m[0]>l)return NaN;for(v=s+1;v<p&&h.get(a,v)&&m[1]<=l;)m[1]++,v++;if(v===p||m[1]>l)return NaN;for(;v<p&&!h.get(a,v)&&m[2]<=l;)m[2]++,v++;if(m[2]>l)return NaN;const E=m[0]+m[1]+m[2];return 5*Math.abs(E-c)>=2*c?NaN:this.foundPatternCross(m)?Br.centerFromEnd(m,v):NaN}handlePossibleCenter(s,a,l){const c=s[0]+s[1]+s[2],h=Br.centerFromEnd(s,l),p=this.crossCheckVertical(a,h,2*s[1],c);if(!isNaN(p)){const m=(s[0]+s[1]+s[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(m,p,h))return E.combineEstimate(p,h,m);const v=new hs(h,p,m);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class _l extends Te{constructor(s,a,l,c){super(s,a),this.estimatedModuleSize=l,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){const c=Math.abs(s-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){const c=this.count+1,h=(this.count*this.getX()+a)/c,p=(this.count*this.getY()+s)/c,m=(this.count*this.estimatedModuleSize+l)/c;return new _l(h,p,m,c)}}class wf{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class sn{constructor(s,a){this.image=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const a=s!=null&&s.get(Z.TRY_HARDER)!==void 0,l=s!=null&&s.get(Z.PURE_BARCODE)!==void 0,c=this.image,h=c.getHeight(),p=c.getWidth();let m=Math.floor(3*h/(4*sn.MAX_MODULES));(m<sn.MIN_SKIP||a)&&(m=sn.MIN_SKIP);let v=!1;const E=new Int32Array(5);for(let b=m-1;b<h&&!v;b+=m){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let D=0;for(let W=0;W<p;W++)if(c.get(W,b))(D&1)===1&&D++,E[D]++;else if(D&1)E[D]++;else if(D===4)if(sn.foundPatternCross(E)){if(this.handlePossibleCenter(E,b,W,l)===!0)if(m=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const $=this.findRowSkip();$>E[2]&&(b+=$-E[2]-m,W=p-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;continue}D=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;else E[++D]++;sn.foundPatternCross(E)&&this.handlePossibleCenter(E,b,p,l)===!0&&(m=E[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return Te.orderBestPatterns(C),new wf(C)}static centerFromEnd(s,a){return a-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let a=0;for(let h=0;h<5;h++){const p=s[h];if(p===0)return!1;a+=p}if(a<7)return!1;const l=a/7,c=l/2;return Math.abs(l-s[0])<c&&Math.abs(l-s[1])<c&&Math.abs(3*l-s[2])<3*c&&Math.abs(l-s[3])<c&&Math.abs(l-s[4])<c}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,a,l,c){const h=this.getCrossCheckStateCount();let p=0;const m=this.image;for(;s>=p&&a>=p&&m.get(a-p,s-p);)h[2]++,p++;if(s<p||a<p)return!1;for(;s>=p&&a>=p&&!m.get(a-p,s-p)&&h[1]<=l;)h[1]++,p++;if(s<p||a<p||h[1]>l)return!1;for(;s>=p&&a>=p&&m.get(a-p,s-p)&&h[0]<=l;)h[0]++,p++;if(h[0]>l)return!1;const v=m.getHeight(),E=m.getWidth();for(p=1;s+p<v&&a+p<E&&m.get(a+p,s+p);)h[2]++,p++;if(s+p>=v||a+p>=E)return!1;for(;s+p<v&&a+p<E&&!m.get(a+p,s+p)&&h[3]<l;)h[3]++,p++;if(s+p>=v||a+p>=E||h[3]>=l)return!1;for(;s+p<v&&a+p<E&&m.get(a+p,s+p)&&h[4]<l;)h[4]++,p++;if(h[4]>=l)return!1;const C=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(C-c)<2*c&&sn.foundPatternCross(h)}crossCheckVertical(s,a,l,c){const h=this.image,p=h.getHeight(),m=this.getCrossCheckStateCount();let v=s;for(;v>=0&&h.get(a,v);)m[2]++,v--;if(v<0)return NaN;for(;v>=0&&!h.get(a,v)&&m[1]<=l;)m[1]++,v--;if(v<0||m[1]>l)return NaN;for(;v>=0&&h.get(a,v)&&m[0]<=l;)m[0]++,v--;if(m[0]>l)return NaN;for(v=s+1;v<p&&h.get(a,v);)m[2]++,v++;if(v===p)return NaN;for(;v<p&&!h.get(a,v)&&m[3]<l;)m[3]++,v++;if(v===p||m[3]>=l)return NaN;for(;v<p&&h.get(a,v)&&m[4]<l;)m[4]++,v++;if(m[4]>=l)return NaN;const E=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(E-c)>=2*c?NaN:sn.foundPatternCross(m)?sn.centerFromEnd(m,v):NaN}crossCheckHorizontal(s,a,l,c){const h=this.image,p=h.getWidth(),m=this.getCrossCheckStateCount();let v=s;for(;v>=0&&h.get(v,a);)m[2]++,v--;if(v<0)return NaN;for(;v>=0&&!h.get(v,a)&&m[1]<=l;)m[1]++,v--;if(v<0||m[1]>l)return NaN;for(;v>=0&&h.get(v,a)&&m[0]<=l;)m[0]++,v--;if(m[0]>l)return NaN;for(v=s+1;v<p&&h.get(v,a);)m[2]++,v++;if(v===p)return NaN;for(;v<p&&!h.get(v,a)&&m[3]<l;)m[3]++,v++;if(v===p||m[3]>=l)return NaN;for(;v<p&&h.get(v,a)&&m[4]<l;)m[4]++,v++;if(m[4]>=l)return NaN;const E=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(E-c)>=c?NaN:sn.foundPatternCross(m)?sn.centerFromEnd(m,v):NaN}handlePossibleCenter(s,a,l,c){const h=s[0]+s[1]+s[2]+s[3]+s[4];let p=sn.centerFromEnd(s,l),m=this.crossCheckVertical(a,Math.floor(p),s[2],h);if(!isNaN(m)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(m),s[2],h),!isNaN(p)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(p),s[2],h)))){const v=h/7;let E=!1;const C=this.possibleCenters;for(let b=0,D=C.length;b<D;b++){const W=C[b];if(W.aboutEquals(v,m,p)){C[b]=W.combineEstimate(m,p,v),E=!0;break}}if(!E){const b=new _l(p,m,v);C.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=sn.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,a=0;const l=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=sn.CENTER_QUORUM&&(s++,a+=p.getEstimatedModuleSize());if(s<3)return!1;const c=a/l;let h=0;for(const p of this.possibleCenters)h+=Math.abs(p.getEstimatedModuleSize()-c);return h<=.05*a}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new se;const a=this.possibleCenters;let l;if(s>3){let c=0,h=0;for(const v of this.possibleCenters){const E=v.getEstimatedModuleSize();c+=E,h+=E*E}l=c/s;let p=Math.sqrt(h/s-l*l);a.sort((v,E)=>{const C=Math.abs(E.getEstimatedModuleSize()-l),b=Math.abs(v.getEstimatedModuleSize()-l);return C<b?-1:C>b?1:0});const m=Math.max(.2*l,p);for(let v=0;v<a.length&&a.length>3;v++){const E=a[v];Math.abs(E.getEstimatedModuleSize()-l)>m&&(a.splice(v,1),v--)}}if(a.length>3){let c=0;for(const h of a)c+=h.getEstimatedModuleSize();l=c/a.length,a.sort((h,p)=>{if(p.getCount()===h.getCount()){const m=Math.abs(p.getEstimatedModuleSize()-l),v=Math.abs(h.getEstimatedModuleSize()-l);return m<v?1:m>v?-1:0}else return p.getCount()-h.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}sn.CENTER_QUORUM=2,sn.MIN_SKIP=3,sn.MAX_MODULES=57;class Zr{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(Z.NEED_RESULT_POINT_CALLBACK);const l=new sn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(l)}processFinderPatternInfo(s){const a=s.getTopLeft(),l=s.getTopRight(),c=s.getBottomLeft(),h=this.calculateModuleSize(a,l,c);if(h<1)throw new se("No pattern found in proccess finder.");const p=Zr.computeDimension(a,l,c,h),m=ye.getProvisionalVersionForDimension(p),v=m.getDimensionForVersion()-7;let E=null;if(m.getAlignmentPatternCenters().length>0){const W=l.getX()-a.getX()+c.getX(),X=l.getY()-a.getY()+c.getY(),$=1-3/v,te=Math.floor(a.getX()+$*(W-a.getX())),ie=Math.floor(a.getY()+$*(X-a.getY()));for(let fe=4;fe<=16;fe<<=1)try{E=this.findAlignmentInRegion(h,te,ie,fe);break}catch(pe){if(!(pe instanceof se))throw pe}}const C=Zr.createTransform(a,l,c,E,p),b=Zr.sampleGrid(this.image,C,p);let D;return E===null?D=[c,a,l]:D=[c,a,l,E],new pl(b,D)}static createTransform(s,a,l,c,h){const p=h-3.5;let m,v,E,C;return c!==null?(m=c.getX(),v=c.getY(),E=p-3,C=E):(m=a.getX()-s.getX()+l.getX(),v=a.getY()-s.getY()+l.getY(),E=p,C=p),Et.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,E,C,3.5,p,s.getX(),s.getY(),a.getX(),a.getY(),m,v,l.getX(),l.getY())}static sampleGrid(s,a,l){return Dr.getInstance().sampleGridWithTransform(s,l,l,a)}static computeDimension(s,a,l,c){const h=Qe.round(Te.distance(s,a)/c),p=Qe.round(Te.distance(s,l)/c);let m=Math.floor((h+p)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new se("Dimensions could be not found.")}return m}calculateModuleSize(s,a,l){return(this.calculateModuleSizeOneWay(s,a)+this.calculateModuleSizeOneWay(s,l))/2}calculateModuleSizeOneWay(s,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(l)?c/7:isNaN(c)?l/7:(l+c)/14}sizeOfBlackWhiteBlackRunBothWays(s,a,l,c){let h=this.sizeOfBlackWhiteBlackRun(s,a,l,c),p=1,m=s-(l-s);m<0?(p=s/(s-m),m=0):m>=this.image.getWidth()&&(p=(this.image.getWidth()-1-s)/(m-s),m=this.image.getWidth()-1);let v=Math.floor(a-(c-a)*p);return p=1,v<0?(p=a/(a-v),v=0):v>=this.image.getHeight()&&(p=(this.image.getHeight()-1-a)/(v-a),v=this.image.getHeight()-1),m=Math.floor(s+(m-s)*p),h+=this.sizeOfBlackWhiteBlackRun(s,a,m,v),h-1}sizeOfBlackWhiteBlackRun(s,a,l,c){const h=Math.abs(c-a)>Math.abs(l-s);if(h){let W=s;s=a,a=W,W=l,l=c,c=W}const p=Math.abs(l-s),m=Math.abs(c-a);let v=-p/2;const E=s<l?1:-1,C=a<c?1:-1;let b=0;const D=l+E;for(let W=s,X=a;W!==D;W+=E){const $=h?X:W,te=h?W:X;if(b===1===this.image.get($,te)){if(b===2)return Qe.distance(W,X,s,a);b++}if(v+=m,v>0){if(X===c)break;X+=C,v-=p}}return b===2?Qe.distance(l+E,c,s,a):NaN}findAlignmentInRegion(s,a,l,c){const h=Math.floor(c*s),p=Math.max(0,a-h),m=Math.min(this.image.getWidth()-1,a+h);if(m-p<s*3)throw new se("Alignment top exceeds estimated module size.");const v=Math.max(0,l-h),E=Math.min(this.image.getHeight()-1,l+h);if(E-v<s*3)throw new se("Alignment bottom exceeds estimated module size.");return new Br(this.image,p,v,m-p,E-v,s,this.resultPointCallback).find()}}class Li{constructor(){this.decoder=new A1}getDecoder(){return this.decoder}decode(s,a){let l,c;if(a!=null&&a.get(Z.PURE_BARCODE)!==void 0){const v=Li.extractPureBits(s.getBlackMatrix());l=this.decoder.decodeBitMatrix(v,a),c=Li.NO_POINTS}else{const v=new Zr(s.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(v.getBits(),a),c=v.getPoints()}l.getOther()instanceof yf&&l.getOther().applyMirroredCorrection(c);const h=new St(l.getText(),l.getRawBytes(),void 0,c,Se.QR_CODE,void 0),p=l.getByteSegments();p!==null&&h.putMetadata(hn.BYTE_SEGMENTS,p);const m=l.getECLevel();return m!==null&&h.putMetadata(hn.ERROR_CORRECTION_LEVEL,m),l.hasStructuredAppend()&&(h.putMetadata(hn.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),h.putMetadata(hn.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),h}reset(){}static extractPureBits(s){const a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a===null||l===null)throw new se;const c=this.moduleSize(a,s);let h=a[1],p=l[1],m=a[0],v=l[0];if(m>=v||h>=p)throw new se;if(p-h!==v-m&&(v=m+(p-h),v>=s.getWidth()))throw new se;const E=Math.round((v-m+1)/c),C=Math.round((p-h+1)/c);if(E<=0||C<=0)throw new se;if(C!==E)throw new se;const b=Math.floor(c/2);h+=b,m+=b;const D=m+Math.floor((E-1)*c)-v;if(D>0){if(D>b)throw new se;m-=D}const W=h+Math.floor((C-1)*c)-p;if(W>0){if(W>b)throw new se;h-=W}const X=new We(E,C);for(let $=0;$<C;$++){const te=h+Math.floor($*c);for(let ie=0;ie<E;ie++)s.get(m+Math.floor(ie*c),te)&&X.set(ie,$)}return X}static moduleSize(s,a){const l=a.getHeight(),c=a.getWidth();let h=s[0],p=s[1],m=!0,v=0;for(;h<c&&p<l;){if(m!==a.get(h,p)){if(++v===5)break;m=!m}h++,p++}if(h===c||p===l)throw new se;return(h-s[0])/7}}Li.NO_POINTS=new Array;class De{PDF417Common(){}static getBitCountSum(s){return Qe.sum(s)}static toIntArray(s){if(s==null||!s.length)return De.EMPTY_INT_ARRAY;const a=new Int32Array(s.length);let l=0;for(const c of s)a[l++]=c;return a}static getCodeword(s){const a=N.binarySearch(De.SYMBOL_TABLE,s&262143);return a<0?-1:(De.CODEWORD_TABLE[a]-1)%De.NUMBER_OF_CODEWORDS}}De.NUMBER_OF_CODEWORDS=929,De.MAX_CODEWORDS_IN_BARCODE=De.NUMBER_OF_CODEWORDS-1,De.MIN_ROWS_IN_BARCODE=3,De.MAX_ROWS_IN_BARCODE=90,De.MODULES_IN_CODEWORD=17,De.MODULES_IN_STOP_PATTERN=18,De.BARS_IN_MODULE=8,De.EMPTY_INT_ARRAY=new Int32Array([]),De.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),De.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class C1{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class ke{static detectMultiple(s,a,l){let c=s.getBlackMatrix(),h=ke.detect(l,c);return h.length||(c=c.clone(),c.rotate180(),h=ke.detect(l,c)),new C1(c,h)}static detect(s,a){const l=new Array;let c=0,h=0,p=!1;for(;c<a.getHeight();){const m=ke.findVertices(a,c,h);if(m[0]==null&&m[3]==null){if(!p)break;p=!1,h=0;for(const v of l)v[1]!=null&&(c=Math.trunc(Math.max(c,v[1].getY()))),v[3]!=null&&(c=Math.max(c,Math.trunc(v[3].getY())));c+=ke.ROW_STEP;continue}if(p=!0,l.push(m),!s)break;m[2]!=null?(h=Math.trunc(m[2].getX()),c=Math.trunc(m[2].getY())):(h=Math.trunc(m[4].getX()),c=Math.trunc(m[4].getY()))}return l}static findVertices(s,a,l){const c=s.getHeight(),h=s.getWidth(),p=new Array(8);return ke.copyToResult(p,ke.findRowsWithPattern(s,c,h,a,l,ke.START_PATTERN),ke.INDEXES_START_PATTERN),p[4]!=null&&(l=Math.trunc(p[4].getX()),a=Math.trunc(p[4].getY())),ke.copyToResult(p,ke.findRowsWithPattern(s,c,h,a,l,ke.STOP_PATTERN),ke.INDEXES_STOP_PATTERN),p}static copyToResult(s,a,l){for(let c=0;c<l.length;c++)s[l[c]]=a[c]}static findRowsWithPattern(s,a,l,c,h,p){const m=new Array(4);let v=!1;const E=new Int32Array(p.length);for(;c<a;c+=ke.ROW_STEP){let b=ke.findGuardPattern(s,h,c,l,!1,p,E);if(b!=null){for(;c>0;){const D=ke.findGuardPattern(s,h,--c,l,!1,p,E);if(D!=null)b=D;else{c++;break}}m[0]=new Te(b[0],c),m[1]=new Te(b[1],c),v=!0;break}}let C=c+1;if(v){let b=0,D=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;C<a;C++){const W=ke.findGuardPattern(s,D[0],C,l,!1,p,E);if(W!=null&&Math.abs(D[0]-W[0])<ke.MAX_PATTERN_DRIFT&&Math.abs(D[1]-W[1])<ke.MAX_PATTERN_DRIFT)D=W,b=0;else{if(b>ke.SKIPPED_ROW_COUNT_MAX)break;b++}}C-=b+1,m[2]=new Te(D[0],C),m[3]=new Te(D[1],C)}return C-c<ke.BARCODE_MIN_HEIGHT&&N.fill(m,null),m}static findGuardPattern(s,a,l,c,h,p,m){N.fillWithin(m,0,m.length,0);let v=a,E=0;for(;s.get(v,l)&&v>0&&E++<ke.MAX_PIXEL_DRIFT;)v--;let C=v,b=0,D=p.length;for(let W=h;C<c;C++)if(s.get(C,l)!==W)m[b]++;else{if(b===D-1){if(ke.patternMatchVariance(m,p,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE)return new Int32Array([v,C]);v+=m[0]+m[1],M.arraycopy(m,2,m,0,b-1),m[b-1]=0,m[b]=0,b--}else b++;m[b]=1,W=!W}return b===D-1&&ke.patternMatchVariance(m,p,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE?new Int32Array([v,C-1]):null}static patternMatchVariance(s,a,l){let c=s.length,h=0,p=0;for(let E=0;E<c;E++)h+=s[E],p+=a[E];if(h<p)return 1/0;let m=h/p;l*=m;let v=0;for(let E=0;E<c;E++){let C=s[E],b=a[E]*m,D=C>b?C-b:b-C;if(D>l)return 1/0;v+=D}return v/h}}ke.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ke.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ke.MAX_AVG_VARIANCE=.42,ke.MAX_INDIVIDUAL_VARIANCE=.8,ke.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ke.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ke.MAX_PIXEL_DRIFT=3,ke.MAX_PATTERN_DRIFT=5,ke.SKIPPED_ROW_COUNT_MAX=25,ke.ROW_STEP=5,ke.BARCODE_MIN_HEIGHT=10;class En{constructor(s,a){if(a.length===0)throw new x;this.field=s;let l=a.length;if(l>1&&a[0]===0){let c=1;for(;c<l&&a[c]===0;)c++;c===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-c),M.arraycopy(a,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let c=0;for(let h of this.coefficients)c=this.field.add(c,h);return c}let a=this.coefficients[0],l=this.coefficients.length;for(let c=1;c<l;c++)a=this.field.add(this.field.multiply(s,a),this.coefficients[c]);return a}add(s){if(!this.field.equals(s.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let p=a;a=l,l=p}let c=new Int32Array(l.length),h=l.length-a.length;M.arraycopy(l,0,c,0,h);for(let p=h;p<l.length;p++)c[p]=this.field.add(a[p-h],l[p]);return new En(this.field,c)}subtract(s){if(!this.field.equals(s.field))throw new x("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof En?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new En(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,c=s.coefficients,h=c.length,p=new Int32Array(l+h-1);for(let m=0;m<l;m++){let v=a[m];for(let E=0;E<h;E++)p[m+E]=this.field.add(p[m+E],this.field.multiply(v,c[E]))}return new En(this.field,p)}negative(){let s=this.coefficients.length,a=new Int32Array(s);for(let l=0;l<s;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new En(this.field,a)}multiplyScalar(s){if(s===0)return new En(this.field,new Int32Array([0]));if(s===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let c=0;c<a;c++)l[c]=this.field.multiply(this.coefficients[c],s);return new En(this.field,l)}multiplyByMonomial(s,a){if(s<0)throw new x;if(a===0)return new En(this.field,new Int32Array([0]));let l=this.coefficients.length,c=new Int32Array(l+s);for(let h=0;h<l;h++)c[h]=this.field.multiply(this.coefficients[h],a);return new En(this.field,c)}toString(){let s=new H;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(s.append(" - "),l=-l):s.length()>0&&s.append(" + "),(a===0||l!==1)&&s.append(l),a!==0&&(a===1?s.append("x"):(s.append("x^"),s.append(a))))}return s.toString()}}class T1{add(s,a){return(s+a)%this.modulus}subtract(s,a){return(this.modulus+s-a)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new x;return this.logTable[s]}inverse(s){if(s===0)throw new Ks;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Zs extends T1{constructor(s,a){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let l=1;for(let c=0;c<s;c++)this.expTable[c]=l,l=l*a%s;for(let c=0;c<s-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new En(this,new Int32Array([0])),this.one=new En(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new x;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new En(this,l)}}Zs.PDF417_GF=new Zs(De.NUMBER_OF_CODEWORDS,3);class fa{constructor(){this.field=Zs.PDF417_GF}decode(s,a,l){let c=new En(this.field,s),h=new Int32Array(a),p=!1;for(let X=a;X>0;X--){let $=c.evaluateAt(this.field.exp(X));h[a-X]=$,$!==0&&(p=!0)}if(!p)return 0;let m=this.field.getOne();if(l!=null)for(const X of l){let $=this.field.exp(s.length-1-X),te=new En(this.field,new Int32Array([this.field.subtract(0,$),1]));m=m.multiply(te)}let v=new En(this.field,h),E=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),v,a),C=E[0],b=E[1],D=this.findErrorLocations(C),W=this.findErrorMagnitudes(b,C,D);for(let X=0;X<D.length;X++){let $=s.length-1-this.field.log(D[X]);if($<0)throw T.getChecksumInstance();s[$]=this.field.subtract(s[$],W[X])}return D.length}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let D=s;s=a,a=D}let c=s,h=a,p=this.field.getZero(),m=this.field.getOne();for(;h.getDegree()>=Math.round(l/2);){let D=c,W=p;if(c=h,p=m,c.isZero())throw T.getChecksumInstance();h=D;let X=this.field.getZero(),$=c.getCoefficient(c.getDegree()),te=this.field.inverse($);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){let ie=h.getDegree()-c.getDegree(),fe=this.field.multiply(h.getCoefficient(h.getDegree()),te);X=X.add(this.field.buildMonomial(ie,fe)),h=h.subtract(c.multiplyByMonomial(ie,fe))}m=X.multiply(p).subtract(W).negative()}let v=m.getCoefficient(0);if(v===0)throw T.getChecksumInstance();let E=this.field.inverse(v),C=m.multiply(E),b=h.multiply(E);return[C,b]}findErrorLocations(s){let a=s.getDegree(),l=new Int32Array(a),c=0;for(let h=1;h<this.field.getSize()&&c<a;h++)s.evaluateAt(h)===0&&(l[c]=this.field.inverse(h),c++);if(c!==a)throw T.getChecksumInstance();return l}findErrorMagnitudes(s,a,l){let c=a.getDegree(),h=new Int32Array(c);for(let E=1;E<=c;E++)h[c-E]=this.field.multiply(E,a.getCoefficient(E));let p=new En(this.field,h),m=l.length,v=new Int32Array(m);for(let E=0;E<m;E++){let C=this.field.inverse(l[E]),b=this.field.subtract(0,s.evaluateAt(C)),D=this.field.inverse(p.evaluateAt(C));v[E]=this.field.multiply(b,D)}return v}}class Fi{constructor(s,a,l,c,h){s instanceof Fi?this.constructor_2(s):this.constructor_1(s,a,l,c,h)}constructor_1(s,a,l,c,h){const p=a==null||l==null,m=c==null||h==null;if(p&&m)throw new se;p?(a=new Te(0,c.getY()),l=new Te(0,h.getY())):m&&(c=new Te(s.getWidth()-1,a.getY()),h=new Te(s.getWidth()-1,l.getY())),this.image=s,this.topLeft=a,this.bottomLeft=l,this.topRight=c,this.bottomRight=h,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(c.getX(),h.getX())),this.minY=Math.trunc(Math.min(a.getY(),c.getY())),this.maxY=Math.trunc(Math.max(l.getY(),h.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,a){return s==null?a:a==null?s:new Fi(s.image,s.topLeft,s.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(s,a,l){let c=this.topLeft,h=this.bottomLeft,p=this.topRight,m=this.bottomRight;if(s>0){let v=l?this.topLeft:this.topRight,E=Math.trunc(v.getY()-s);E<0&&(E=0);let C=new Te(v.getX(),E);l?c=C:p=C}if(a>0){let v=l?this.bottomLeft:this.bottomRight,E=Math.trunc(v.getY()+a);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let C=new Te(v.getX(),E);l?h=C:m=C}return new Fi(this.image,c,h,p,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class da{constructor(s,a,l,c){this.columnCount=s,this.errorCorrectionLevel=c,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class pi{constructor(){this.buffer=""}static form(s,a){let l=-1;function c(p,m,v,E,C,b){if(p==="%%")return"%";if(a[++l]===void 0)return;p=E?parseInt(E.substr(1)):void 0;let D=C?parseInt(C.substr(1)):void 0,W;switch(b){case"s":W=a[l];break;case"c":W=a[l][0];break;case"f":W=parseFloat(a[l]).toFixed(p);break;case"p":W=parseFloat(a[l]).toPrecision(p);break;case"e":W=parseFloat(a[l]).toExponential(p);break;case"x":W=parseInt(a[l]).toString(D||16);break;case"d":W=parseFloat(parseInt(a[l],D||10).toPrecision(p)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(D);let X=parseInt(v),$=v&&v[0]+""=="0"?"0":" ";for(;W.length<X;)W=m!==void 0?W+$:$+W;return W}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(h,c)}format(s,...a){this.buffer+=pi.form(s,a)}toString(){return this.buffer}}class Js{constructor(s){this.boundingBox=new Fi(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let a=this.getCodeword(s);if(a!=null)return a;for(let l=1;l<Js.MAX_NEARBY_DISTANCE;l++){let c=this.imageRowToCodewordIndex(s)-l;if(c>=0&&(a=this.codewords[c],a!=null)||(c=this.imageRowToCodewordIndex(s)+l,c<this.codewords.length&&(a=this.codewords[c],a!=null)))return a}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,a){this.codewords[this.imageRowToCodewordIndex(s)]=a}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new pi;let a=0;for(const l of this.codewords){if(l==null){s.format("%3d:    |   %n",a++);continue}s.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return s.toString()}}Js.MAX_NEARBY_DISTANCE=5;class fs{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let a=this.values.get(s);a==null&&(a=0),a++,this.values.set(s,a)}getValue(){let s=-1,a=new Array;for(const[l,c]of this.values.entries()){const h={getKey:()=>l,getValue:()=>c};h.getValue()>s?(s=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===s&&a.push(h.getKey())}return De.toIntArray(a)}getConfidence(s){return this.values.get(s)}}class Rt extends Js{constructor(s,a){super(s),this._isLeft=a}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,s);let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),v=-1,E=1,C=0;for(let b=p;b<m;b++){if(a[b]==null)continue;let D=a[b],W=D.getRowNumber()-v;if(W===0)C++;else if(W===1)E=Math.max(E,C),C=1,v=D.getRowNumber();else if(W<0||D.getRowNumber()>=s.getRowCount()||W>b)a[b]=null;else{let X;E>2?X=(E-2)*W:X=W;let $=X>=b;for(let te=1;te<=X&&!$;te++)$=a[b-te]!=null;$?a[b]=null:(v=D.getRowNumber(),C=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let a=new Int32Array(s.getRowCount());for(let l of this.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=a.length)continue;a[c]++}return a}adjustIncompleteIndicatorColumnRowNumbers(s){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),c=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),v=-1;for(let E=h;E<p;E++){if(m[E]==null)continue;let C=m[E];C.setRowNumberAsRowIndicatorColumn();let b=C.getRowNumber()-v;b===0||(b===1?v=C.getRowNumber():C.getRowNumber()>=s.getRowCount()?m[E]=null:v=C.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),a=new fs,l=new fs,c=new fs,h=new fs;for(let m of s){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let v=m.getValue()%30,E=m.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:l.setValue(v*3+1);break;case 1:h.setValue(v/3),c.setValue(v%3);break;case 2:a.setValue(v+1);break}}if(a.getValue().length===0||l.getValue().length===0||c.getValue().length===0||h.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<De.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>De.MAX_ROWS_IN_BARCODE)return null;let p=new da(a.getValue()[0],l.getValue()[0],c.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(s,p),p}removeIncorrectCodewords(s,a){for(let l=0;l<s.length;l++){let c=s[l];if(s[l]==null)continue;let h=c.getValue()%30,p=c.getRowNumber();if(p>a.getRowCount()){s[l]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:h*3+1!==a.getRowCountUpperPart()&&(s[l]=null);break;case 1:(Math.trunc(h/3)!==a.getErrorCorrectionLevel()||h%3!==a.getRowCountLowerPart())&&(s[l]=null);break;case 2:h+1!==a.getColumnCount()&&(s[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class pa{constructor(s,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=De.MAX_CODEWORDS_IN_BARCODE,a;do a=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let c=0;c<l.length;c++)l[c]!=null&&(l[c].hasValidRowNumber()||this.adjustRowNumbers(a,c,l))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++)if(s[l]!=null&&a[l]!=null&&s[l].getRowNumber()===a[l].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let h=this.detectionResultColumns[c].getCodewords()[l];h!=null&&(h.setRowNumber(s[l].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let c=a[l].getRowNumber(),h=0;for(let p=this.barcodeColumnCount+1;p>0&&h<this.ADJUST_ROW_NUMBER_SKIP;p--){let m=this.detectionResultColumns[p].getCodewords()[l];m!=null&&(h=pa.adjustRowNumberIfValid(c,h,m),m.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let c=a[l].getRowNumber(),h=0;for(let p=1;p<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;p++){let m=this.detectionResultColumns[p].getCodewords()[l];m!=null&&(h=pa.adjustRowNumberIfValid(c,h,m),m.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(s)?(l.setRowNumber(s),a=0):++a),a}adjustRowNumbers(s,a,l){if(!this.detectionResultColumns[s-1])return;let c=l[a],h=this.detectionResultColumns[s-1].getCodewords(),p=h;this.detectionResultColumns[s+1]!=null&&(p=this.detectionResultColumns[s+1].getCodewords());let m=new Array(14);m[2]=h[a],m[3]=p[a],a>0&&(m[0]=l[a-1],m[4]=h[a-1],m[5]=p[a-1]),a>1&&(m[8]=l[a-2],m[10]=h[a-2],m[11]=p[a-2]),a<l.length-1&&(m[1]=l[a+1],m[6]=h[a+1],m[7]=p[a+1]),a<l.length-2&&(m[9]=l[a+2],m[12]=h[a+2],m[13]=p[a+2]);for(let v of m)if(pa.adjustRowNumber(c,v))return}static adjustRowNumber(s,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===s.getBucket()?(s.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,a){this.detectionResultColumns[s]=a}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new pi;for(let l=0;l<s.getCodewords().length;l++){a.format("CW %3d:",l);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){a.format("    |   ");continue}let h=this.detectionResultColumns[c].getCodewords()[l];if(h==null){a.format("    |   ");continue}a.format(" %3d|%3d",h.getRowNumber(),h.getValue())}a.format("%n")}return a.toString()}}class ga{constructor(s,a,l,c){this.rowNumber=ga.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==ga.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}ga.BARCODE_ROW_UNKNOWN=-1;class Fn{static initialize(){for(let s=0;s<De.SYMBOL_TABLE.length;s++){let a=De.SYMBOL_TABLE[s],l=a&1;for(let c=0;c<De.BARS_IN_MODULE;c++){let h=0;for(;(a&1)===l;)h+=1,a>>=1;l=a&1,Fn.RATIOS_TABLE[s]||(Fn.RATIOS_TABLE[s]=new Array(De.BARS_IN_MODULE)),Fn.RATIOS_TABLE[s][De.BARS_IN_MODULE-c-1]=Math.fround(h/De.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let a=Fn.getDecodedCodewordValue(Fn.sampleBitCounts(s));return a!==-1?a:Fn.getClosestDecodedValue(s)}static sampleBitCounts(s){let a=Qe.sum(s),l=new Int32Array(De.BARS_IN_MODULE),c=0,h=0;for(let p=0;p<De.MODULES_IN_CODEWORD;p++){let m=a/(2*De.MODULES_IN_CODEWORD)+p*a/De.MODULES_IN_CODEWORD;h+s[c]<=m&&(h+=s[c],c++),l[c]++}return l}static getDecodedCodewordValue(s){let a=Fn.getBitValue(s);return De.getCodeword(a)===-1?-1:a}static getBitValue(s){let a=0;for(let l=0;l<s.length;l++)for(let c=0;c<s[l];c++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(s){let a=Qe.sum(s),l=new Array(De.BARS_IN_MODULE);if(a>1)for(let p=0;p<l.length;p++)l[p]=Math.fround(s[p]/a);let c=Xs.MAX_VALUE,h=-1;this.bSymbolTableReady||Fn.initialize();for(let p=0;p<Fn.RATIOS_TABLE.length;p++){let m=0,v=Fn.RATIOS_TABLE[p];for(let E=0;E<De.BARS_IN_MODULE;E++){let C=Math.fround(v[E]-l[E]);if(m+=Math.fround(C*C),m>=c)break}m<c&&(c=m,h=De.SYMBOL_TABLE[p])}return h}}Fn.bSymbolTableReady=!1,Fn.RATIOS_TABLE=new Array(De.SYMBOL_TABLE.length).map(S=>new Array(De.BARS_IN_MODULE));class sc{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class oc{static parseLong(s,a=void 0){return parseInt(s,a)}}class ma extends g{}ma.kind="NullPointerException";class vf{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,a,l){if(s==null)throw new ma;if(a<0||a>s.length||l<0||a+l>s.length||a+l<0)throw new B;if(l===0)return;for(let c=0;c<l;c++)this.write(s[a+c])}flush(){}close(){}}class gi extends g{}class xf extends vf{constructor(s=32){if(super(),this.count=0,s<0)throw new x("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let l=this.buf.length<<1;if(l-s<0&&(l=s),l<0){if(s<0)throw new gi;l=R.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,l)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,a,l){if(a<0||a>s.length||l<0||a+l-s.length>0)throw new B;this.ensureCapacity(this.count+l),M.arraycopy(s,a,this.buf,this.count,l),this.count+=l}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var ft;(function(S){S[S.ALPHA=0]="ALPHA",S[S.LOWER=1]="LOWER",S[S.MIXED=2]="MIXED",S[S.PUNCT=3]="PUNCT",S[S.ALPHA_SHIFT=4]="ALPHA_SHIFT",S[S.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ft||(ft={}));function eo(){if(typeof window<"u")return window.BigInt||null;if(typeof cc<"u")return cc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ya;function Jr(S){if(typeof ya>"u"&&(ya=eo()),ya===null)throw new Error("BigInt is not supported!");return ya(S)}function Al(){let S=[];S[0]=Jr(1);let s=Jr(900);S[1]=s;for(let a=2;a<16;a++)S[a]=S[a-1]*s;return S}class ne{static decode(s,a){let l=new H(""),c=F.ISO8859_1;l.enableDecoding(c);let h=1,p=s[h++],m=new sc;for(;h<s[0];){switch(p){case ne.TEXT_COMPACTION_MODE_LATCH:h=ne.textCompaction(s,h,l);break;case ne.BYTE_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:h=ne.byteCompaction(p,s,c,h,l);break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h++]);break;case ne.NUMERIC_COMPACTION_MODE_LATCH:h=ne.numericCompaction(s,h,l);break;case ne.ECI_CHARSET:F.getCharacterSetECIByValue(s[h++]);break;case ne.ECI_GENERAL_PURPOSE:h+=2;break;case ne.ECI_USER_DEFINED:h++;break;case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=ne.decodeMacroBlock(s,h,m);break;case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:throw new L;default:h--,h=ne.textCompaction(s,h,l);break}if(h<s.length)p=s[h++];else throw L.getFormatInstance()}if(l.length()===0)throw L.getFormatInstance();let v=new sa(null,l.toString(),null,a);return v.setOther(m),v}static decodeMacroBlock(s,a,l){if(a+ne.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw L.getFormatInstance();let c=new Int32Array(ne.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<ne.NUMBER_OF_SEQUENCE_CODEWORDS;m++,a++)c[m]=s[a];l.setSegmentIndex(R.parseInt(ne.decodeBase900toBase10(c,ne.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new H;a=ne.textCompaction(s,a,h),l.setFileId(h.toString());let p=-1;for(s[a]===ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=a+1);a<s[0];)switch(s[a]){case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,s[a]){case ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new H;a=ne.textCompaction(s,a+1,m),l.setFileName(m.toString());break;case ne.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new H;a=ne.textCompaction(s,a+1,v),l.setSender(v.toString());break;case ne.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new H;a=ne.textCompaction(s,a+1,E),l.setAddressee(E.toString());break;case ne.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new H;a=ne.numericCompaction(s,a+1,C),l.setSegmentCount(R.parseInt(C.toString()));break;case ne.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let b=new H;a=ne.numericCompaction(s,a+1,b),l.setTimestamp(oc.parseLong(b.toString()));break;case ne.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new H;a=ne.numericCompaction(s,a+1,D),l.setChecksum(R.parseInt(D.toString()));break;case ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let W=new H;a=ne.numericCompaction(s,a+1,W),l.setFileSize(oc.parseLong(W.toString()));break;default:throw L.getFormatInstance()}break;case ne.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(p!==-1){let m=a-p;l.isLastSegment()&&m--,l.setOptionalData(N.copyOfRange(s,p,p+m))}return a}static textCompaction(s,a,l){let c=new Int32Array((s[0]-a)*2),h=new Int32Array((s[0]-a)*2),p=0,m=!1;for(;a<s[0]&&!m;){let v=s[a++];if(v<ne.TEXT_COMPACTION_MODE_LATCH)c[p]=v/30,c[p+1]=v%30,p+=2;else switch(v){case ne.TEXT_COMPACTION_MODE_LATCH:c[p++]=ne.TEXT_COMPACTION_MODE_LATCH;break;case ne.BYTE_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.NUMERIC_COMPACTION_MODE_LATCH:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:a--,m=!0;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[p]=ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=s[a++],h[p]=v,p++;break}}return ne.decodeTextCompaction(c,h,p,l),a}static decodeTextCompaction(s,a,l,c){let h=ft.ALPHA,p=ft.ALPHA,m=0;for(;m<l;){let v=s[m],E="";switch(h){case ft.ALPHA:if(v<26)E=String.fromCharCode(65+v);else switch(v){case 26:E=" ";break;case ne.LL:h=ft.LOWER;break;case ne.ML:h=ft.MIXED;break;case ne.PS:p=h,h=ft.PUNCT_SHIFT;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case ne.TEXT_COMPACTION_MODE_LATCH:h=ft.ALPHA;break}break;case ft.LOWER:if(v<26)E=String.fromCharCode(97+v);else switch(v){case 26:E=" ";break;case ne.AS:p=h,h=ft.ALPHA_SHIFT;break;case ne.ML:h=ft.MIXED;break;case ne.PS:p=h,h=ft.PUNCT_SHIFT;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case ne.TEXT_COMPACTION_MODE_LATCH:h=ft.ALPHA;break}break;case ft.MIXED:if(v<ne.PL)E=ne.MIXED_CHARS[v];else switch(v){case ne.PL:h=ft.PUNCT;break;case 26:E=" ";break;case ne.LL:h=ft.LOWER;break;case ne.AL:h=ft.ALPHA;break;case ne.PS:p=h,h=ft.PUNCT_SHIFT;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case ne.TEXT_COMPACTION_MODE_LATCH:h=ft.ALPHA;break}break;case ft.PUNCT:if(v<ne.PAL)E=ne.PUNCT_CHARS[v];else switch(v){case ne.PAL:h=ft.ALPHA;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case ne.TEXT_COMPACTION_MODE_LATCH:h=ft.ALPHA;break}break;case ft.ALPHA_SHIFT:if(h=p,v<26)E=String.fromCharCode(65+v);else switch(v){case 26:E=" ";break;case ne.TEXT_COMPACTION_MODE_LATCH:h=ft.ALPHA;break}break;case ft.PUNCT_SHIFT:if(h=p,v<ne.PAL)E=ne.PUNCT_CHARS[v];else switch(v){case ne.PAL:h=ft.ALPHA;break;case ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case ne.TEXT_COMPACTION_MODE_LATCH:h=ft.ALPHA;break}break}E!==""&&c.append(E),m++}}static byteCompaction(s,a,l,c,h){let p=new xf,m=0,v=0,E=!1;switch(s){case ne.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),b=a[c++];for(;c<a[0]&&!E;)switch(C[m++]=b,v=900*v+b,b=a[c++],b){case ne.TEXT_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH:case ne.NUMERIC_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:c--,E=!0;break;default:if(m%5===0&&m>0){for(let D=0;D<6;++D)p.write(Number(Jr(v)>>Jr(8*(5-D))));v=0,m=0}break}c===a[0]&&b<ne.TEXT_COMPACTION_MODE_LATCH&&(C[m++]=b);for(let D=0;D<m;D++)p.write(C[D]);break;case ne.BYTE_COMPACTION_MODE_LATCH_6:for(;c<a[0]&&!E;){let D=a[c++];if(D<ne.TEXT_COMPACTION_MODE_LATCH)m++,v=900*v+D;else switch(D){case ne.TEXT_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH:case ne.NUMERIC_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:c--,E=!0;break}if(m%5===0&&m>0){for(let W=0;W<6;++W)p.write(Number(Jr(v)>>Jr(8*(5-W))));v=0,m=0}}break}return h.append(K.decode(p.toByteArray(),l)),c}static numericCompaction(s,a,l){let c=0,h=!1,p=new Int32Array(ne.MAX_NUMERIC_CODEWORDS);for(;a<s[0]&&!h;){let m=s[a++];if(a===s[0]&&(h=!0),m<ne.TEXT_COMPACTION_MODE_LATCH)p[c]=m,c++;else switch(m){case ne.TEXT_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH:case ne.BYTE_COMPACTION_MODE_LATCH_6:case ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ne.MACRO_PDF417_TERMINATOR:a--,h=!0;break}(c%ne.MAX_NUMERIC_CODEWORDS===0||m===ne.NUMERIC_COMPACTION_MODE_LATCH||h)&&c>0&&(l.append(ne.decodeBase900toBase10(p,c)),c=0)}return a}static decodeBase900toBase10(s,a){let l=Jr(0);for(let h=0;h<a;h++)l+=ne.EXP900[a-h-1]*Jr(s[h]);let c=l.toString();if(c.charAt(0)!=="1")throw new L;return c.substring(1)}}ne.TEXT_COMPACTION_MODE_LATCH=900,ne.BYTE_COMPACTION_MODE_LATCH=901,ne.NUMERIC_COMPACTION_MODE_LATCH=902,ne.BYTE_COMPACTION_MODE_LATCH_6=924,ne.ECI_USER_DEFINED=925,ne.ECI_GENERAL_PURPOSE=926,ne.ECI_CHARSET=927,ne.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ne.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ne.MACRO_PDF417_TERMINATOR=922,ne.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ne.MAX_NUMERIC_CODEWORDS=15,ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ne.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ne.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ne.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ne.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ne.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ne.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ne.PL=25,ne.LL=27,ne.AS=27,ne.ML=28,ne.AL=28,ne.PS=29,ne.PAL=29,ne.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ne.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ne.EXP900=eo()?Al():[],ne.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ve{constructor(){}static decode(s,a,l,c,h,p,m){let v=new Fi(s,a,l,c,h),E=null,C=null,b;for(let X=!0;;X=!1){if(a!=null&&(E=Ve.getRowIndicatorColumn(s,v,a,!0,p,m)),c!=null&&(C=Ve.getRowIndicatorColumn(s,v,c,!1,p,m)),b=Ve.merge(E,C),b==null)throw se.getNotFoundInstance();let $=b.getBoundingBox();if(X&&$!=null&&($.getMinY()<v.getMinY()||$.getMaxY()>v.getMaxY()))v=$;else break}b.setBoundingBox(v);let D=b.getBarcodeColumnCount()+1;b.setDetectionResultColumn(0,E),b.setDetectionResultColumn(D,C);let W=E!=null;for(let X=1;X<=D;X++){let $=W?X:D-X;if(b.getDetectionResultColumn($)!==void 0)continue;let te;$===0||$===D?te=new Rt(v,$===0):te=new Js(v),b.setDetectionResultColumn($,te);let ie=-1,fe=ie;for(let pe=v.getMinY();pe<=v.getMaxY();pe++){if(ie=Ve.getStartColumn(b,$,pe,W),ie<0||ie>v.getMaxX()){if(fe===-1)continue;ie=fe}let ue=Ve.detectCodeword(s,v.getMinX(),v.getMaxX(),W,ie,pe,p,m);ue!=null&&(te.setCodeword(pe,ue),fe=ie,p=Math.min(p,ue.getWidth()),m=Math.max(m,ue.getWidth()))}}return Ve.createDecoderResult(b)}static merge(s,a){if(s==null&&a==null)return null;let l=Ve.getBarcodeMetadata(s,a);if(l==null)return null;let c=Fi.merge(Ve.adjustBoundingBox(s),Ve.adjustBoundingBox(a));return new pa(l,c)}static adjustBoundingBox(s){if(s==null)return null;let a=s.getRowHeights();if(a==null)return null;let l=Ve.getMax(a),c=0;for(let m of a)if(c+=l-m,m>0)break;let h=s.getCodewords();for(let m=0;c>0&&h[m]==null;m++)c--;let p=0;for(let m=a.length-1;m>=0&&(p+=l-a[m],!(a[m]>0));m--);for(let m=h.length-1;p>0&&h[m]==null;m--)p--;return s.getBoundingBox().addMissingRows(c,p,s.isLeft())}static getMax(s){let a=-1;for(let l of s)a=Math.max(a,l);return a}static getBarcodeMetadata(s,a){let l;if(s==null||(l=s.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let c;return a==null||(c=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==c.getColumnCount()&&l.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&l.getRowCount()!==c.getRowCount()?null:l}static getRowIndicatorColumn(s,a,l,c,h,p){let m=new Rt(a,c);for(let v=0;v<2;v++){let E=v===0?1:-1,C=Math.trunc(Math.trunc(l.getX()));for(let b=Math.trunc(Math.trunc(l.getY()));b<=a.getMaxY()&&b>=a.getMinY();b+=E){let D=Ve.detectCodeword(s,0,s.getWidth(),c,C,b,h,p);D!=null&&(m.setCodeword(b,D),c?C=D.getStartX():C=D.getEndX())}}return m}static adjustCodewordCount(s,a){let l=a[0][1],c=l.getValue(),h=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-Ve.getNumberOfECCodeWords(s.getBarcodeECLevel());if(c.length===0){if(h<1||h>De.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();l.setValue(h)}else c[0]!==h&&l.setValue(h)}static createDecoderResult(s){let a=Ve.createBarcodeMatrix(s);Ve.adjustCodewordCount(s,a);let l=new Array,c=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),h=[],p=new Array;for(let v=0;v<s.getBarcodeRowCount();v++)for(let E=0;E<s.getBarcodeColumnCount();E++){let C=a[v][E+1].getValue(),b=v*s.getBarcodeColumnCount()+E;C.length===0?l.push(b):C.length===1?c[b]=C[0]:(p.push(b),h.push(C))}let m=new Array(h.length);for(let v=0;v<m.length;v++)m[v]=h[v];return Ve.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),c,De.toIntArray(l),De.toIntArray(p),m)}static createDecoderResultFromAmbiguousValues(s,a,l,c,h){let p=new Int32Array(c.length),m=100;for(;m-- >0;){for(let v=0;v<p.length;v++)a[c[v]]=h[v][p[v]];try{return Ve.decodeCodewords(a,s,l)}catch(v){if(!(v instanceof T))throw v}if(p.length===0)throw T.getChecksumInstance();for(let v=0;v<p.length;v++)if(p[v]<h[v].length-1){p[v]++;break}else if(p[v]=0,v===p.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(s){let a=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let c=0;c<a.length;c++)for(let h=0;h<a[c].length;h++)a[c][h]=new fs;let l=0;for(let c of s.getDetectionResultColumns()){if(c!=null){for(let h of c.getCodewords())if(h!=null){let p=h.getRowNumber();if(p>=0){if(p>=a.length)continue;a[p][l].setValue(h.getValue())}}}l++}return a}static isValidBarcodeColumn(s,a){return a>=0&&a<=s.getBarcodeColumnCount()+1}static getStartColumn(s,a,l,c){let h=c?1:-1,p=null;if(Ve.isValidBarcodeColumn(s,a-h)&&(p=s.getDetectionResultColumn(a-h).getCodeword(l)),p!=null)return c?p.getEndX():p.getStartX();if(p=s.getDetectionResultColumn(a).getCodewordNearby(l),p!=null)return c?p.getStartX():p.getEndX();if(Ve.isValidBarcodeColumn(s,a-h)&&(p=s.getDetectionResultColumn(a-h).getCodewordNearby(l)),p!=null)return c?p.getEndX():p.getStartX();let m=0;for(;Ve.isValidBarcodeColumn(s,a-h);){a-=h;for(let v of s.getDetectionResultColumn(a).getCodewords())if(v!=null)return(c?v.getEndX():v.getStartX())+h*m*(v.getEndX()-v.getStartX());m++}return c?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,a,l,c,h,p,m,v){h=Ve.adjustCodewordStartColumn(s,a,l,c,h,p);let E=Ve.getModuleBitCount(s,a,l,c,h,p);if(E==null)return null;let C,b=Qe.sum(E);if(c)C=h+b;else{for(let X=0;X<E.length/2;X++){let $=E[X];E[X]=E[E.length-1-X],E[E.length-1-X]=$}C=h,h=C-b}if(!Ve.checkCodewordSkew(b,m,v))return null;let D=Fn.getDecodedValue(E),W=De.getCodeword(D);return W===-1?null:new ga(h,C,Ve.getCodewordBucketNumber(D),W)}static getModuleBitCount(s,a,l,c,h,p){let m=h,v=new Int32Array(8),E=0,C=c?1:-1,b=c;for(;(c?m<l:m>=a)&&E<v.length;)s.get(m,p)===b?(v[E]++,m+=C):(E++,b=!b);return E===v.length||m===(c?l:a)&&E===v.length-1?v:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,a,l,c,h,p){let m=h,v=c?-1:1;for(let E=0;E<2;E++){for(;(c?m>=a:m<l)&&c===s.get(m,p);){if(Math.abs(h-m)>Ve.CODEWORD_SKEW_SIZE)return h;m+=v}v=-v,c=!c}return m}static checkCodewordSkew(s,a,l){return a-Ve.CODEWORD_SKEW_SIZE<=s&&s<=l+Ve.CODEWORD_SKEW_SIZE}static decodeCodewords(s,a,l){if(s.length===0)throw L.getFormatInstance();let c=1<<a+1,h=Ve.correctErrors(s,l,c);Ve.verifyCodewordCount(s,c);let p=ne.decode(s,""+a);return p.setErrorsCorrected(h),p.setErasures(l.length),p}static correctErrors(s,a,l){if(a!=null&&a.length>l/2+Ve.MAX_ERRORS||l<0||l>Ve.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return Ve.errorCorrection.decode(s,l,a)}static verifyCodewordCount(s,a){if(s.length<4)throw L.getFormatInstance();let l=s[0];if(l>s.length)throw L.getFormatInstance();if(l===0)if(a<s.length)s[0]=s.length-a;else throw L.getFormatInstance()}static getBitCountForCodeword(s){let a=new Int32Array(8),l=0,c=a.length-1;for(;!((s&1)!==l&&(l=s&1,c--,c<0));)a[c]++,s>>=1;return a}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return Ve.getCodewordBucketNumber(Ve.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let a=new pi;for(let l=0;l<s.length;l++){a.format("Row %2d: ",l);for(let c=0;c<s[l].length;c++){let h=s[l][c];h.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}a.format("%n")}return a.toString()}}Ve.CODEWORD_SKEW_SIZE=2,Ve.MAX_ERRORS=3,Ve.MAX_EC_CODEWORDS=512,Ve.errorCorrection=new fa;class _n{decode(s,a=null){let l=_n.decode(s,a,!1);if(l==null||l.length===0||l[0]==null)throw se.getNotFoundInstance();return l[0]}decodeMultiple(s,a=null){try{return _n.decode(s,a,!0)}catch(l){throw l instanceof L||l instanceof T?se.getNotFoundInstance():l}}static decode(s,a,l){const c=new Array,h=ke.detectMultiple(s,a,l);for(const p of h.getPoints()){const m=Ve.decode(h.getBits(),p[4],p[5],p[6],p[7],_n.getMinCodewordWidth(p),_n.getMaxCodewordWidth(p)),v=new St(m.getText(),m.getRawBytes(),void 0,p,Se.PDF_417);v.putMetadata(hn.ERROR_CORRECTION_LEVEL,m.getECLevel());const E=m.getOther();E!=null&&v.putMetadata(hn.PDF417_EXTRA_METADATA,E),c.push(v)}return c.map(p=>p)}static getMaxWidth(s,a){return s==null||a==null?0:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMinWidth(s,a){return s==null||a==null?R.MAX_VALUE:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(_n.getMaxWidth(s[0],s[4]),_n.getMaxWidth(s[6],s[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.max(_n.getMaxWidth(s[1],s[5]),_n.getMaxWidth(s[7],s[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(_n.getMinWidth(s[0],s[4]),_n.getMinWidth(s[6],s[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.min(_n.getMinWidth(s[1],s[5]),_n.getMinWidth(s[7],s[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}reset(){}}class wa extends g{}wa.kind="ReaderException";class to{constructor(s,a){this.verbose=s===!0,a&&this.setHints(a)}decode(s,a){return a&&this.setHints(a),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const a=!r(s)&&s.get(Z.TRY_HARDER)===!0,l=r(s)?null:s.get(Z.POSSIBLE_FORMATS),c=new Array;if(!r(l)){const h=l.some(p=>p===Se.UPC_A||p===Se.UPC_E||p===Se.EAN_13||p===Se.EAN_8||p===Se.CODABAR||p===Se.CODE_39||p===Se.CODE_93||p===Se.CODE_128||p===Se.ITF||p===Se.RSS_14||p===Se.RSS_EXPANDED);h&&!a&&c.push(new Mi(s,this.verbose)),l.includes(Se.QR_CODE)&&c.push(new Li),l.includes(Se.DATA_MATRIX)&&c.push(new di),l.includes(Se.AZTEC)&&c.push(new yl),l.includes(Se.PDF_417)&&c.push(new _n),h&&a&&c.push(new Mi(s,this.verbose))}c.length===0&&(a||c.push(new Mi(s,this.verbose)),c.push(new Li),c.push(new di),c.push(new yl),c.push(new _n),a&&c.push(new Mi(s,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new wa("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(s,this.hints)}catch(l){if(l instanceof wa)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class Ef extends mt{constructor(s=null,a=500){const l=new to;l.setHints(s),super(l,a)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class _f extends mt{constructor(s=500){super(new _n,s)}}class ac extends mt{constructor(s=500){super(new Li,s)}}var va;(function(S){S[S.ERROR_CORRECTION=0]="ERROR_CORRECTION",S[S.CHARACTER_SET=1]="CHARACTER_SET",S[S.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",S[S.MIN_SIZE=3]="MIN_SIZE",S[S.MAX_SIZE=4]="MAX_SIZE",S[S.MARGIN=5]="MARGIN",S[S.PDF417_COMPACT=6]="PDF417_COMPACT",S[S.PDF417_COMPACTION=7]="PDF417_COMPACTION",S[S.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",S[S.AZTEC_LAYERS=9]="AZTEC_LAYERS",S[S.QR_VERSION=10]="QR_VERSION"})(va||(va={}));var Zt=va;class no{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new yn(s,Int32Array.from([1])))}buildGenerator(s){const a=this.cachedGenerators;if(s>=a.length){let l=a[a.length-1];const c=this.field;for(let h=a.length;h<=s;h++){const p=l.multiply(new yn(c,Int32Array.from([1,c.exp(h-1+c.getGeneratorBase())])));a.push(p),l=p}}return a[s]}encode(s,a){if(a===0)throw new x("No error correction bytes");const l=s.length-a;if(l<=0)throw new x("No data bytes provided");const c=this.buildGenerator(a),h=new Int32Array(l);M.arraycopy(s,0,h,0,l);let p=new yn(this.field,h);p=p.multiplyByMonomial(a,1);const v=p.divide(c)[1].getCoefficients(),E=a-v.length;for(let C=0;C<E;C++)s[l+C]=0;M.arraycopy(v,0,s,l+E,v.length)}}class Pt{constructor(){}static applyMaskPenaltyRule1(s){return Pt.applyMaskPenaltyRule1Internal(s,!0)+Pt.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let a=0;const l=s.getArray(),c=s.getWidth(),h=s.getHeight();for(let p=0;p<h-1;p++){const m=l[p];for(let v=0;v<c-1;v++){const E=m[v];E===m[v+1]&&E===l[p+1][v]&&E===l[p+1][v+1]&&a++}}return Pt.N2*a}static applyMaskPenaltyRule3(s){let a=0;const l=s.getArray(),c=s.getWidth(),h=s.getHeight();for(let p=0;p<h;p++)for(let m=0;m<c;m++){const v=l[p];m+6<c&&v[m]===1&&v[m+1]===0&&v[m+2]===1&&v[m+3]===1&&v[m+4]===1&&v[m+5]===0&&v[m+6]===1&&(Pt.isWhiteHorizontal(v,m-4,m)||Pt.isWhiteHorizontal(v,m+7,m+11))&&a++,p+6<h&&l[p][m]===1&&l[p+1][m]===0&&l[p+2][m]===1&&l[p+3][m]===1&&l[p+4][m]===1&&l[p+5][m]===0&&l[p+6][m]===1&&(Pt.isWhiteVertical(l,m,p-4,p)||Pt.isWhiteVertical(l,m,p+7,p+11))&&a++}return a*Pt.N3}static isWhiteHorizontal(s,a,l){a=Math.max(a,0),l=Math.min(l,s.length);for(let c=a;c<l;c++)if(s[c]===1)return!1;return!0}static isWhiteVertical(s,a,l,c){l=Math.max(l,0),c=Math.min(c,s.length);for(let h=l;h<c;h++)if(s[h][a]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let a=0;const l=s.getArray(),c=s.getWidth(),h=s.getHeight();for(let v=0;v<h;v++){const E=l[v];for(let C=0;C<c;C++)E[C]===1&&a++}const p=s.getHeight()*s.getWidth();return Math.floor(Math.abs(a*2-p)*10/p)*Pt.N4}static getDataMaskBit(s,a,l){let c,h;switch(s){case 0:c=l+a&1;break;case 1:c=l&1;break;case 2:c=a%3;break;case 3:c=(l+a)%3;break;case 4:c=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:h=l*a,c=(h&1)+h%3;break;case 6:h=l*a,c=(h&1)+h%3&1;break;case 7:h=l*a,c=h%3+(l+a&1)&1;break;default:throw new x("Invalid mask pattern: "+s)}return c===0}static applyMaskPenaltyRule1Internal(s,a){let l=0;const c=a?s.getHeight():s.getWidth(),h=a?s.getWidth():s.getHeight(),p=s.getArray();for(let m=0;m<c;m++){let v=0,E=-1;for(let C=0;C<h;C++){const b=a?p[m][C]:p[C][m];b===E?v++:(v>=5&&(l+=Pt.N1+(v-5)),v=1,E=b)}v>=5&&(l+=Pt.N1+(v-5))}return l}}Pt.N1=3,Pt.N2=3,Pt.N3=40,Pt.N4=10;class xa{constructor(s,a){this.width=s,this.height=a;const l=new Array(a);for(let c=0;c!==a;c++)l[c]=new Uint8Array(s);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(s,a){return this.bytes[a][s]}getArray(){return this.bytes}setNumber(s,a,l){this.bytes[a][s]=l}setBoolean(s,a,l){this.bytes[a][s]=l?1:0}clear(s){for(const a of this.bytes)N.fill(a,s)}equals(s){if(!(s instanceof xa))return!1;const a=s;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,c=this.height;l<c;++l){const h=this.bytes[l],p=a.bytes[l];for(let m=0,v=this.width;m<v;++m)if(h[m]!==p[m])return!1}return!0}toString(){const s=new H;for(let a=0,l=this.height;a<l;++a){const c=this.bytes[a];for(let h=0,p=this.width;h<p;++h)switch(c[h]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class or{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new H;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<or.NUM_MASK_PATTERNS}}or.NUM_MASK_PATTERNS=8;class dt extends g{}dt.kind="WriterException";class Ne{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,a,l,c,h){Ne.clearMatrix(h),Ne.embedBasicPatterns(l,h),Ne.embedTypeInfo(a,c,h),Ne.maybeEmbedVersionInfo(l,h),Ne.embedDataBits(s,c,h)}static embedBasicPatterns(s,a){Ne.embedPositionDetectionPatternsAndSeparators(a),Ne.embedDarkDotAtLeftBottomCorner(a),Ne.maybeEmbedPositionAdjustmentPatterns(s,a),Ne.embedTimingPatterns(a)}static embedTypeInfo(s,a,l){const c=new z;Ne.makeTypeInfoBits(s,a,c);for(let h=0,p=c.getSize();h<p;++h){const m=c.get(c.getSize()-1-h),v=Ne.TYPE_INFO_COORDINATES[h],E=v[0],C=v[1];if(l.setBoolean(E,C,m),h<8){const b=l.getWidth()-h-1;l.setBoolean(b,8,m)}else{const D=l.getHeight()-7+(h-8);l.setBoolean(8,D,m)}}}static maybeEmbedVersionInfo(s,a){if(s.getVersionNumber()<7)return;const l=new z;Ne.makeVersionInfoBits(s,l);let c=6*3-1;for(let h=0;h<6;++h)for(let p=0;p<3;++p){const m=l.get(c);c--,a.setBoolean(h,a.getHeight()-11+p,m),a.setBoolean(a.getHeight()-11+p,h,m)}}static embedDataBits(s,a,l){let c=0,h=-1,p=l.getWidth()-1,m=l.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);m>=0&&m<l.getHeight();){for(let v=0;v<2;++v){const E=p-v;if(!Ne.isEmpty(l.get(E,m)))continue;let C;c<s.getSize()?(C=s.get(c),++c):C=!1,a!==255&&Pt.getDataMaskBit(a,E,m)&&(C=!C),l.setBoolean(E,m,C)}m+=h}h=-h,m+=h,p-=2}if(c!==s.getSize())throw new dt("Not all bits consumed: "+c+"/"+s.getSize())}static findMSBSet(s){return 32-R.numberOfLeadingZeros(s)}static calculateBCHCode(s,a){if(a===0)throw new x("0 polynomial");const l=Ne.findMSBSet(a);for(s<<=l-1;Ne.findMSBSet(s)>=l;)s^=a<<Ne.findMSBSet(s)-l;return s}static makeTypeInfoBits(s,a,l){if(!or.isValidMaskPattern(a))throw new dt("Invalid mask pattern");const c=s.getBits()<<3|a;l.appendBits(c,5);const h=Ne.calculateBCHCode(c,Ne.TYPE_INFO_POLY);l.appendBits(h,10);const p=new z;if(p.appendBits(Ne.TYPE_INFO_MASK_PATTERN,15),l.xor(p),l.getSize()!==15)throw new dt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(s,a){a.appendBits(s.getVersionNumber(),6);const l=Ne.calculateBCHCode(s.getVersionNumber(),Ne.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new dt("should not happen but we got: "+a.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let a=8;a<s.getWidth()-8;++a){const l=(a+1)%2;Ne.isEmpty(s.get(a,6))&&s.setNumber(a,6,l),Ne.isEmpty(s.get(6,a))&&s.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new dt;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,a,l){for(let c=0;c<8;++c){if(!Ne.isEmpty(l.get(s+c,a)))throw new dt;l.setNumber(s+c,a,0)}}static embedVerticalSeparationPattern(s,a,l){for(let c=0;c<7;++c){if(!Ne.isEmpty(l.get(s,a+c)))throw new dt;l.setNumber(s,a+c,0)}}static embedPositionAdjustmentPattern(s,a,l){for(let c=0;c<5;++c){const h=Ne.POSITION_ADJUSTMENT_PATTERN[c];for(let p=0;p<5;++p)l.setNumber(s+p,a+c,h[p])}}static embedPositionDetectionPattern(s,a,l){for(let c=0;c<7;++c){const h=Ne.POSITION_DETECTION_PATTERN[c];for(let p=0;p<7;++p)l.setNumber(s+p,a+c,h[p])}}static embedPositionDetectionPatternsAndSeparators(s){const a=Ne.POSITION_DETECTION_PATTERN[0].length;Ne.embedPositionDetectionPattern(0,0,s),Ne.embedPositionDetectionPattern(s.getWidth()-a,0,s),Ne.embedPositionDetectionPattern(0,s.getWidth()-a,s);const l=8;Ne.embedHorizontalSeparationPattern(0,l-1,s),Ne.embedHorizontalSeparationPattern(s.getWidth()-l,l-1,s),Ne.embedHorizontalSeparationPattern(0,s.getWidth()-l,s);const c=7;Ne.embedVerticalSeparationPattern(c,0,s),Ne.embedVerticalSeparationPattern(s.getHeight()-c-1,0,s),Ne.embedVerticalSeparationPattern(c,s.getHeight()-c,s)}static maybeEmbedPositionAdjustmentPatterns(s,a){if(s.getVersionNumber()<2)return;const l=s.getVersionNumber()-1,c=Ne.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let h=0,p=c.length;h!==p;h++){const m=c[h];if(m>=0)for(let v=0;v!==p;v++){const E=c[v];E>=0&&Ne.isEmpty(a.get(E,m))&&Ne.embedPositionAdjustmentPattern(E-2,m-2,a)}}}}Ne.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ne.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ne.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ne.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ne.VERSION_INFO_POLY=7973,Ne.TYPE_INFO_POLY=1335,Ne.TYPE_INFO_MASK_PATTERN=21522;class Af{constructor(s,a){this.dataBytes=s,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class _t{constructor(){}static calculateMaskPenalty(s){return Pt.applyMaskPenaltyRule1(s)+Pt.applyMaskPenaltyRule2(s)+Pt.applyMaskPenaltyRule3(s)+Pt.applyMaskPenaltyRule4(s)}static encode(s,a,l=null){let c=_t.DEFAULT_BYTE_MODE_ENCODING;const h=l!==null&&l.get(Zt.CHARACTER_SET)!==void 0;h&&(c=l.get(Zt.CHARACTER_SET).toString());const p=this.chooseMode(s,c),m=new z;if(p===Pe.BYTE&&(h||_t.DEFAULT_BYTE_MODE_ENCODING!==c)){const pe=F.getCharacterSetECIByName(c);pe!==void 0&&this.appendECI(pe,m)}this.appendModeInfo(p,m);const v=new z;this.appendBytes(s,p,v,c);let E;if(l!==null&&l.get(Zt.QR_VERSION)!==void 0){const pe=Number.parseInt(l.get(Zt.QR_VERSION).toString(),10);E=ye.getVersionForNumber(pe);const ue=this.calculateBitsNeeded(p,m,v,E);if(!this.willFit(ue,E,a))throw new dt("Data too big for requested version")}else E=this.recommendVersion(a,p,m,v);const C=new z;C.appendBitArray(m);const b=p===Pe.BYTE?v.getSizeInBytes():s.length;this.appendLengthInfo(b,E,p,C),C.appendBitArray(v);const D=E.getECBlocksForLevel(a),W=E.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(W,C);const X=this.interleaveWithECBytes(C,E.getTotalCodewords(),W,D.getNumBlocks()),$=new or;$.setECLevel(a),$.setMode(p),$.setVersion(E);const te=E.getDimensionForVersion(),ie=new xa(te,te),fe=this.chooseMaskPattern(X,a,E,ie);return $.setMaskPattern(fe),Ne.buildMatrix(X,a,E,fe,ie),$.setMatrix(ie),$}static recommendVersion(s,a,l,c){const h=this.calculateBitsNeeded(a,l,c,ye.getVersionForNumber(1)),p=this.chooseVersion(h,s),m=this.calculateBitsNeeded(a,l,c,p);return this.chooseVersion(m,s)}static calculateBitsNeeded(s,a,l,c){return a.getSize()+s.getCharacterCountBits(c)+l.getSize()}static getAlphanumericCode(s){return s<_t.ALPHANUMERIC_TABLE.length?_t.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,a=null){if(F.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(s))return Pe.KANJI;let l=!1,c=!1;for(let h=0,p=s.length;h<p;++h){const m=s.charAt(h);if(_t.isDigit(m))l=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)c=!0;else return Pe.BYTE}return c?Pe.ALPHANUMERIC:l?Pe.NUMERIC:Pe.BYTE}static isOnlyDoubleByteKanji(s){let a;try{a=K.encode(s,F.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let c=0;c<l;c+=2){const h=a[c]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(s,a,l,c){let h=Number.MAX_SAFE_INTEGER,p=-1;for(let m=0;m<or.NUM_MASK_PATTERNS;m++){Ne.buildMatrix(s,a,l,m,c);let v=this.calculateMaskPenalty(c);v<h&&(h=v,p=m)}return p}static chooseVersion(s,a){for(let l=1;l<=40;l++){const c=ye.getVersionForNumber(l);if(_t.willFit(s,c,a))return c}throw new dt("Data too big")}static willFit(s,a,l){const c=a.getTotalCodewords(),p=a.getECBlocksForLevel(l).getTotalECCodewords(),m=c-p,v=(s+7)/8;return m>=v}static terminateBits(s,a){const l=s*8;if(a.getSize()>l)throw new dt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let p=0;p<4&&a.getSize()<l;++p)a.appendBit(!1);const c=a.getSize()&7;if(c>0)for(let p=c;p<8;p++)a.appendBit(!1);const h=s-a.getSizeInBytes();for(let p=0;p<h;++p)a.appendBits(p&1?17:236,8);if(a.getSize()!==l)throw new dt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,a,l,c,h,p){if(c>=l)throw new dt("Block ID too large");const m=s%l,v=l-m,E=Math.floor(s/l),C=E+1,b=Math.floor(a/l),D=b+1,W=E-b,X=C-D;if(W!==X)throw new dt("EC bytes mismatch");if(l!==v+m)throw new dt("RS blocks mismatch");if(s!==(b+W)*v+(D+X)*m)throw new dt("Total bytes mismatch");c<v?(h[0]=b,p[0]=W):(h[0]=D,p[0]=X)}static interleaveWithECBytes(s,a,l,c){if(s.getSizeInBytes()!==l)throw new dt("Number of bits and data bytes does not match");let h=0,p=0,m=0;const v=new Array;for(let C=0;C<c;++C){const b=new Int32Array(1),D=new Int32Array(1);_t.getNumDataBytesAndNumECBytesForBlockID(a,l,c,C,b,D);const W=b[0],X=new Uint8Array(W);s.toBytes(8*h,X,0,W);const $=_t.generateECBytes(X,D[0]);v.push(new Af(X,$)),p=Math.max(p,W),m=Math.max(m,$.length),h+=b[0]}if(l!==h)throw new dt("Data bytes does not match offset");const E=new z;for(let C=0;C<p;++C)for(const b of v){const D=b.getDataBytes();C<D.length&&E.appendBits(D[C],8)}for(let C=0;C<m;++C)for(const b of v){const D=b.getErrorCorrectionBytes();C<D.length&&E.appendBits(D[C],8)}if(a!==E.getSizeInBytes())throw new dt("Interleaving error: "+a+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(s,a){const l=s.length,c=new Int32Array(l+a);for(let p=0;p<l;p++)c[p]=s[p]&255;new no(et.QR_CODE_FIELD_256).encode(c,a);const h=new Uint8Array(a);for(let p=0;p<a;p++)h[p]=c[l+p];return h}static appendModeInfo(s,a){a.appendBits(s.getBits(),4)}static appendLengthInfo(s,a,l,c){const h=l.getCharacterCountBits(a);if(s>=1<<h)throw new dt(s+" is bigger than "+((1<<h)-1));c.appendBits(s,h)}static appendBytes(s,a,l,c){switch(a){case Pe.NUMERIC:_t.appendNumericBytes(s,l);break;case Pe.ALPHANUMERIC:_t.appendAlphanumericBytes(s,l);break;case Pe.BYTE:_t.append8BitBytes(s,l,c);break;case Pe.KANJI:_t.appendKanjiBytes(s,l);break;default:throw new dt("Invalid mode: "+a)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const a=_t.getDigit(s);return a>=0&&a<=9}static appendNumericBytes(s,a){const l=s.length;let c=0;for(;c<l;){const h=_t.getDigit(s.charAt(c));if(c+2<l){const p=_t.getDigit(s.charAt(c+1)),m=_t.getDigit(s.charAt(c+2));a.appendBits(h*100+p*10+m,10),c+=3}else if(c+1<l){const p=_t.getDigit(s.charAt(c+1));a.appendBits(h*10+p,7),c+=2}else a.appendBits(h,4),c++}}static appendAlphanumericBytes(s,a){const l=s.length;let c=0;for(;c<l;){const h=_t.getAlphanumericCode(s.charCodeAt(c));if(h===-1)throw new dt;if(c+1<l){const p=_t.getAlphanumericCode(s.charCodeAt(c+1));if(p===-1)throw new dt;a.appendBits(h*45+p,11),c+=2}else a.appendBits(h,6),c++}}static append8BitBytes(s,a,l){let c;try{c=K.encode(s,l)}catch(h){throw new dt(h)}for(let h=0,p=c.length;h!==p;h++){const m=c[h];a.appendBits(m,8)}}static appendKanjiBytes(s,a){let l;try{l=K.encode(s,F.SJIS)}catch(h){throw new dt(h)}const c=l.length;for(let h=0;h<c;h+=2){const p=l[h]&255,m=l[h+1]&255,v=p<<8&4294967295|m;let E=-1;if(v>=33088&&v<=40956?E=v-33088:v>=57408&&v<=60351&&(E=v-49472),E===-1)throw new dt("Invalid byte sequence");const C=(E>>8)*192+(E&255);a.appendBits(C,13)}}static appendECI(s,a){a.appendBits(Pe.ECI.getBits(),4),a.appendBits(s.getValue(),8)}}_t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),_t.DEFAULT_BYTE_MODE_ENCODING=F.UTF8.getName();class ei{write(s,a,l,c=null){if(s.length===0)throw new x("Found empty contents");if(a<0||l<0)throw new x("Requested dimensions are too small: "+a+"x"+l);let h=Ye.L,p=ei.QUIET_ZONE_SIZE;c!==null&&(c.get(Zt.ERROR_CORRECTION)!==void 0&&(h=Ye.fromString(c.get(Zt.ERROR_CORRECTION).toString())),c.get(Zt.MARGIN)!==void 0&&(p=Number.parseInt(c.get(Zt.MARGIN).toString(),10)));const m=_t.encode(s,h,c);return this.renderResult(m,a,l,p)}writeToDom(s,a,l,c,h=null){typeof s=="string"&&(s=document.querySelector(s));const p=this.write(a,l,c,h);s&&s.appendChild(p)}renderResult(s,a,l,c){const h=s.getMatrix();if(h===null)throw new gr;const p=h.getWidth(),m=h.getHeight(),v=p+c*2,E=m+c*2,C=Math.max(a,v),b=Math.max(l,E),D=Math.min(Math.floor(C/v),Math.floor(b/E)),W=Math.floor((C-p*D)/2),X=Math.floor((b-m*D)/2),$=this.createSVGElement(C,b);for(let te=0,ie=X;te<m;te++,ie+=D)for(let fe=0,pe=W;fe<p;fe++,pe+=D)if(h.get(fe,te)===1){const ue=this.createSvgRectElement(pe,ie,D,D);$.appendChild(ue)}return $}createSVGElement(s,a){const l=document.createElementNS(ei.SVG_NS,"svg");return l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(s,a,l,c){const h=document.createElementNS(ei.SVG_NS,"rect");return h.setAttributeNS(null,"x",s.toString()),h.setAttributeNS(null,"y",a.toString()),h.setAttributeNS(null,"height",l.toString()),h.setAttributeNS(null,"width",c.toString()),h.setAttributeNS(null,"fill","#000000"),h}}ei.QUIET_ZONE_SIZE=4,ei.SVG_NS="http://www.w3.org/2000/svg";class fn{encode(s,a,l,c,h){if(s.length===0)throw new x("Found empty contents");if(a!==Se.QR_CODE)throw new x("Can only encode QR_CODE, but got "+a);if(l<0||c<0)throw new x(`Requested dimensions are too small: ${l}x${c}`);let p=Ye.L,m=fn.QUIET_ZONE_SIZE;h!==null&&(h.get(Zt.ERROR_CORRECTION)!==void 0&&(p=Ye.fromString(h.get(Zt.ERROR_CORRECTION).toString())),h.get(Zt.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Zt.MARGIN).toString(),10)));const v=_t.encode(s,p,h);return fn.renderResult(v,l,c,m)}static renderResult(s,a,l,c){const h=s.getMatrix();if(h===null)throw new gr;const p=h.getWidth(),m=h.getHeight(),v=p+c*2,E=m+c*2,C=Math.max(a,v),b=Math.max(l,E),D=Math.min(Math.floor(C/v),Math.floor(b/E)),W=Math.floor((C-p*D)/2),X=Math.floor((b-m*D)/2),$=new We(C,b);for(let te=0,ie=X;te<m;te++,ie+=D)for(let fe=0,pe=W;fe<p;fe++,pe+=D)h.get(fe,te)===1&&$.setRegion(pe,ie,D,D);return $}}fn.QUIET_ZONE_SIZE=4;class Cf{encode(s,a,l,c,h){let p;switch(a){case Se.QR_CODE:p=new fn;break;default:throw new x("No encoder available for format "+a)}return p.encode(s,a,l,c,h)}}class Vr extends de{constructor(s,a,l,c,h,p,m,v){if(super(p,m),this.yuvData=s,this.dataWidth=a,this.dataHeight=l,this.left=c,this.top=h,c+p>a||h+m>l)throw new x("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(p,m)}getRow(s,a){if(s<0||s>=this.getHeight())throw new x("Requested row is outside the image: "+s);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const c=(s+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,c,a,0,l),a}getMatrix(){const s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=s*a,c=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return M.arraycopy(this.yuvData,h,c,0,l),c;for(let p=0;p<a;p++){const m=p*s;M.arraycopy(this.yuvData,h,c,m,s),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(s,a,l,c){return new Vr(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+a,l,c,!1)}renderThumbnail(){const s=this.getWidth()/Vr.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Vr.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(s*a),c=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let p=0;p<a;p++){const m=p*s;for(let v=0;v<s;v++){const E=c[h+v*Vr.THUMBNAIL_SCALE_FACTOR]&255;l[m+v]=4278190080|E*65793}h+=this.dataWidth*Vr.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Vr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Vr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,a){const l=this.yuvData;for(let c=0,h=this.top*this.dataWidth+this.left;c<a;c++,h+=this.dataWidth){const p=h+s/2;for(let m=h,v=h+s-1;m<p;m++,v--){const E=l[m];l[m]=l[v],l[v]=E}}}invert(){return new Ce(this)}}Vr.THUMBNAIL_SCALE_FACTOR=2;class Bi extends de{constructor(s,a,l,c,h,p,m){if(super(a,l),this.dataWidth=c,this.dataHeight=h,this.left=p,this.top=m,s.BYTES_PER_ELEMENT===4){const v=a*l,E=new Uint8ClampedArray(v);for(let C=0;C<v;C++){const b=s[C],D=b>>16&255,W=b>>7&510,X=b&255;E[C]=(D+W+X)/4&255}this.luminances=E}else this.luminances=s;if(c===void 0&&(this.dataWidth=a),h===void 0&&(this.dataHeight=l),p===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new x("Crop rectangle does not fit within image data.")}getRow(s,a){if(s<0||s>=this.getHeight())throw new x("Requested row is outside the image: "+s);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const c=(s+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,c,a,0,l),a}getMatrix(){const s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=s*a,c=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return M.arraycopy(this.luminances,h,c,0,l),c;for(let p=0;p<a;p++){const m=p*s;M.arraycopy(this.luminances,h,c,m,s),h+=this.dataWidth}return c}isCropSupported(){return!0}crop(s,a,l,c){return new Bi(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+s,this.top+a)}invert(){return new Ce(this)}}class y extends F{static forName(s){return this.getCharacterSetECIByName(s)}}class A{}A.ISO_8859_1=F.ISO8859_1;class I{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class V{static singletonList(s){return[s]}static min(s,a){return s.sort(a)[0]}}class J{constructor(s){this.previous=s}getPrevious(){return this.previous}}class re extends J{constructor(s,a,l){super(s),this.value=a,this.bitCount=l}appendTo(s,a){s.appendBits(this.value,this.bitCount)}add(s,a){return new re(this,s,a)}addBinaryShift(s,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new re(this,s,a)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+R.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class ge extends re{constructor(s,a,l){super(s,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(s,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):l===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(s,a){return new ge(this,s,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function wt(S,s,a){return new ge(S,s,a)}function Ht(S,s,a){return new re(S,s,a)}const it=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Nt=0,on=1,An=2,vr=3,ar=4,lc=new re(null,0,0),I1=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xR(S){for(let s of S)N.fill(s,-1);return S[Nt][ar]=0,S[on][ar]=0,S[on][Nt]=28,S[vr][ar]=0,S[An][ar]=0,S[An][Nt]=15,S}const xw=xR(N.createInt32Array(6,6));class Vi{constructor(s,a,l,c){this.token=s,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,a){let l=this.bitCount,c=this.token;if(s!==this.mode){let p=I1[this.mode][s];c=Ht(c,p&65535,p>>16),l+=p>>16}let h=s===An?4:5;return c=Ht(c,a,h),new Vi(c,s,0,l+h)}shiftAndAppend(s,a){let l=this.token,c=this.mode===An?4:5;return l=Ht(l,xw[this.mode][s],c),l=Ht(l,a,5),new Vi(l,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(s){let a=this.token,l=this.mode,c=this.bitCount;if(this.mode===ar||this.mode===An){let m=I1[l][Nt];a=Ht(a,m&65535,m>>16),c+=m>>16,l=Nt}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new Vi(a,l,this.binaryShiftByteCount+1,c+h);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(s+1)),p}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=wt(a,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new Vi(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let a=this.bitCount+(I1[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?a+=Vi.calculateBinaryShiftCost(s)-Vi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(a+=10),a<=s.bitCount}toBitArray(s){let a=[];for(let c=this.endBinaryShift(s.length).token;c!==null;c=c.getPrevious())a.unshift(c);let l=new z;for(const c of a)c.appendTo(l,s);return l}toString(){return G.format("%s bits=%d bytes=%d",it[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}Vi.INITIAL_STATE=new Vi(lc,Nt,0,0);function ER(S){const s=G.getCharCode(" "),a=G.getCharCode("."),l=G.getCharCode(",");S[Nt][s]=1;const c=G.getCharCode("Z"),h=G.getCharCode("A");for(let D=h;D<=c;D++)S[Nt][D]=D-h+2;S[on][s]=1;const p=G.getCharCode("z"),m=G.getCharCode("a");for(let D=m;D<=p;D++)S[on][D]=D-m+2;S[An][s]=1;const v=G.getCharCode("9"),E=G.getCharCode("0");for(let D=E;D<=v;D++)S[An][D]=D-E+2;S[An][l]=12,S[An][a]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<C.length;D++)S[vr][G.getCharCode(C[D])]=D;const b=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<b.length;D++)G.getCharCode(b[D])>0&&(S[ar][G.getCharCode(b[D])]=D);return S}const S1=ER(N.createInt32Array(5,256));class uc{constructor(s){this.text=s}encode(){const s=G.getCharCode(" "),a=G.getCharCode(`
`);let l=V.singletonList(Vi.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let p,m=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case G.getCharCode("\r"):p=m===a?2:0;break;case G.getCharCode("."):p=m===s?3:0;break;case G.getCharCode(","):p=m===s?4:0;break;case G.getCharCode(":"):p=m===s?5:0;break;default:p=0}p>0?(l=uc.updateStateListForPair(l,h,p),h++):l=this.updateStateListForChar(l,h)}return V.min(l,(h,p)=>h.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,a){const l=[];for(let c of s)this.updateStateForChar(c,a,l);return uc.simplifyStates(l)}updateStateForChar(s,a,l){let c=this.text[a]&255,h=S1[s.getMode()][c]>0,p=null;for(let m=0;m<=ar;m++){let v=S1[m][c];if(v>0){if(p==null&&(p=s.endBinaryShift(a)),!h||m===s.getMode()||m===An){const E=p.latchAndAppend(m,v);l.push(E)}if(!h&&xw[s.getMode()][m]>=0){const E=p.shiftAndAppend(m,v);l.push(E)}}}if(s.getBinaryShiftByteCount()>0||S1[s.getMode()][c]===0){let m=s.addBinaryShiftChar(a);l.push(m)}}static updateStateListForPair(s,a,l){const c=[];for(let h of s)this.updateStateForPair(h,a,l,c);return this.simplifyStates(c)}static updateStateForPair(s,a,l,c){let h=s.endBinaryShift(a);if(c.push(h.latchAndAppend(ar,l)),s.getMode()!==ar&&c.push(h.shiftAndAppend(ar,l)),l===3||l===4){let p=h.latchAndAppend(An,16-l).latchAndAppend(An,1);c.push(p)}if(s.getBinaryShiftByteCount()>0){let p=s.addBinaryShiftChar(a).addBinaryShiftChar(a+1);c.push(p)}}static simplifyStates(s){let a=[];for(const l of s){let c=!0;for(const h of a){if(h.isBetterThanOrEqualTo(l)){c=!1;break}l.isBetterThanOrEqualTo(h)&&(a=a.filter(p=>p!==h))}c&&a.push(l)}return a}}class at{constructor(){}static encodeBytes(s){return at.encode(s,at.DEFAULT_EC_PERCENT,at.DEFAULT_AZTEC_LAYERS)}static encode(s,a,l){let c=new uc(s).encode(),h=R.truncDivision(c.getSize()*a,100)+11,p=c.getSize()+h,m,v,E,C,b;if(l!==at.DEFAULT_AZTEC_LAYERS){if(m=l<0,v=Math.abs(l),v>(m?at.MAX_NB_BITS_COMPACT:at.MAX_NB_BITS))throw new x(G.format("Illegal value %s for layers",l));E=at.totalBitsInLayer(v,m),C=at.WORD_SIZE[v];let ue=E-E%C;if(b=at.stuffBits(c,C),b.getSize()+h>ue)throw new x("Data to large for user specified layer");if(m&&b.getSize()>C*64)throw new x("Data to large for user specified layer")}else{C=0,b=null;for(let ue=0;;ue++){if(ue>at.MAX_NB_BITS)throw new x("Data too large for an Aztec code");if(m=ue<=3,v=m?ue+1:ue,E=at.totalBitsInLayer(v,m),p>E)continue;(b==null||C!==at.WORD_SIZE[v])&&(C=at.WORD_SIZE[v],b=at.stuffBits(c,C));let Ze=E-E%C;if(!(m&&b.getSize()>C*64)&&b.getSize()+h<=Ze)break}}let D=at.generateCheckWords(b,E,C),W=b.getSize()/C,X=at.generateModeMessage(m,v,W),$=(m?11:14)+v*4,te=new Int32Array($),ie;if(m){ie=$;for(let ue=0;ue<te.length;ue++)te[ue]=ue}else{ie=$+1+2*R.truncDivision(R.truncDivision($,2)-1,15);let ue=R.truncDivision($,2),Ze=R.truncDivision(ie,2);for(let ze=0;ze<ue;ze++){let xr=ze+R.truncDivision(ze,15);te[ue-ze-1]=Ze-xr-1,te[ue+ze]=Ze+xr+1}}let fe=new We(ie);for(let ue=0,Ze=0;ue<v;ue++){let ze=(v-ue)*4+(m?9:12);for(let xr=0;xr<ze;xr++){let mi=xr*2;for(let Er=0;Er<2;Er++)D.get(Ze+mi+Er)&&fe.set(te[ue*2+Er],te[ue*2+xr]),D.get(Ze+ze*2+mi+Er)&&fe.set(te[ue*2+xr],te[$-1-ue*2-Er]),D.get(Ze+ze*4+mi+Er)&&fe.set(te[$-1-ue*2-Er],te[$-1-ue*2-xr]),D.get(Ze+ze*6+mi+Er)&&fe.set(te[$-1-ue*2-xr],te[ue*2+Er])}Ze+=ze*8}if(at.drawModeMessage(fe,m,ie,X),m)at.drawBullsEye(fe,R.truncDivision(ie,2),5);else{at.drawBullsEye(fe,R.truncDivision(ie,2),7);for(let ue=0,Ze=0;ue<R.truncDivision($,2)-1;ue+=15,Ze+=16)for(let ze=R.truncDivision(ie,2)&1;ze<ie;ze+=2)fe.set(R.truncDivision(ie,2)-Ze,ze),fe.set(R.truncDivision(ie,2)+Ze,ze),fe.set(ze,R.truncDivision(ie,2)-Ze),fe.set(ze,R.truncDivision(ie,2)+Ze)}let pe=new I;return pe.setCompact(m),pe.setSize(ie),pe.setLayers(v),pe.setCodeWords(W),pe.setMatrix(fe),pe}static drawBullsEye(s,a,l){for(let c=0;c<l;c+=2)for(let h=a-c;h<=a+c;h++)s.set(h,a-c),s.set(h,a+c),s.set(a-c,h),s.set(a+c,h);s.set(a-l,a-l),s.set(a-l+1,a-l),s.set(a-l,a-l+1),s.set(a+l,a-l),s.set(a+l,a-l+1),s.set(a+l,a+l-1)}static generateModeMessage(s,a,l){let c=new z;return s?(c.appendBits(a-1,2),c.appendBits(l-1,6),c=at.generateCheckWords(c,28,4)):(c.appendBits(a-1,5),c.appendBits(l-1,11),c=at.generateCheckWords(c,40,4)),c}static drawModeMessage(s,a,l,c){let h=R.truncDivision(l,2);if(a)for(let p=0;p<7;p++){let m=h-3+p;c.get(p)&&s.set(m,h-5),c.get(p+7)&&s.set(h+5,m),c.get(20-p)&&s.set(m,h+5),c.get(27-p)&&s.set(h-5,m)}else for(let p=0;p<10;p++){let m=h-5+p+R.truncDivision(p,5);c.get(p)&&s.set(m,h-7),c.get(p+10)&&s.set(h+7,m),c.get(29-p)&&s.set(m,h+7),c.get(39-p)&&s.set(h-7,m)}}static generateCheckWords(s,a,l){let c=s.getSize()/l,h=new no(at.getGF(l)),p=R.truncDivision(a,l),m=at.bitsToWords(s,l,p);h.encode(m,p-c);let v=a%l,E=new z;E.appendBits(0,v);for(const C of Array.from(m))E.appendBits(C,l);return E}static bitsToWords(s,a,l){let c=new Int32Array(l),h,p;for(h=0,p=s.getSize()/a;h<p;h++){let m=0;for(let v=0;v<a;v++)m|=s.get(h*a+v)?1<<a-v-1:0;c[h]=m}return c}static getGF(s){switch(s){case 4:return et.AZTEC_PARAM;case 6:return et.AZTEC_DATA_6;case 8:return et.AZTEC_DATA_8;case 10:return et.AZTEC_DATA_10;case 12:return et.AZTEC_DATA_12;default:throw new x("Unsupported word size "+s)}}static stuffBits(s,a){let l=new z,c=s.getSize(),h=(1<<a)-2;for(let p=0;p<c;p+=a){let m=0;for(let v=0;v<a;v++)(p+v>=c||s.get(p+v))&&(m|=1<<a-1-v);(m&h)===h?(l.appendBits(m&h,a),p--):m&h?l.appendBits(m,a):(l.appendBits(m|1,a),p--)}return l}static totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}at.DEFAULT_EC_PERCENT=33,at.DEFAULT_AZTEC_LAYERS=0,at.MAX_NB_BITS=32,at.MAX_NB_BITS_COMPACT=4,at.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Tf{encode(s,a,l,c){return this.encodeWithHints(s,a,l,c,null)}encodeWithHints(s,a,l,c,h){let p=A.ISO_8859_1,m=at.DEFAULT_EC_PERCENT,v=at.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(Zt.CHARACTER_SET)&&(p=y.forName(h.get(Zt.CHARACTER_SET).toString())),h.has(Zt.ERROR_CORRECTION)&&(m=R.parseInt(h.get(Zt.ERROR_CORRECTION).toString())),h.has(Zt.AZTEC_LAYERS)&&(v=R.parseInt(h.get(Zt.AZTEC_LAYERS).toString()))),Tf.encodeLayers(s,a,l,c,p,m,v)}static encodeLayers(s,a,l,c,h,p,m){if(a!==Se.AZTEC)throw new x("Can only encode AZTEC, but got "+a);let v=at.encode(G.getBytes(s,h),p,m);return Tf.renderResult(v,l,c)}static renderResult(s,a,l){let c=s.getMatrix();if(c==null)throw new gr;let h=c.getWidth(),p=c.getHeight(),m=Math.max(a,h),v=Math.max(l,p),E=Math.min(m/h,v/p),C=(m-h*E)/2,b=(v-p*E)/2,D=new We(m,v);for(let W=0,X=b;W<p;W++,X+=E)for(let $=0,te=C;$<h;$++,te+=E)c.get($,W)&&D.setRegion(te,X,E,E);return D}}n.AbstractExpandedDecoder=Ys,n.ArgumentException=w,n.ArithmeticException=Ks,n.AztecCode=I,n.AztecCodeReader=yl,n.AztecCodeWriter=Tf,n.AztecDecoder=xt,n.AztecDetector=tc,n.AztecDetectorResult=gl,n.AztecEncoder=at,n.AztecHighLevelEncoder=uc,n.AztecPoint=Rn,n.BarcodeFormat=Se,n.Binarizer=O,n.BinaryBitmap=_,n.BitArray=z,n.BitMatrix=We,n.BitSource=El,n.BrowserAztecCodeReader=oa,n.BrowserBarcodeReader=x1,n.BrowserCodeReader=mt,n.BrowserDatamatrixCodeReader=_1,n.BrowserMultiFormatReader=Ef,n.BrowserPDF417Reader=_f,n.BrowserQRCodeReader=ac,n.BrowserQRCodeSvgWriter=ei,n.CharacterSetECI=F,n.ChecksumException=T,n.Code128Reader=me,n.Code39Reader=zt,n.DataMatrixDecodedBitStreamParser=ki,n.DataMatrixReader=di,n.DecodeHintType=Z,n.DecoderResult=sa,n.DefaultGridSampler=bn,n.DetectorResult=pl,n.EAN13Reader=fi,n.EncodeHintType=Zt,n.Exception=g,n.FormatException=L,n.GenericGF=et,n.GenericGFPoly=yn,n.GlobalHistogramBinarizer=ct,n.GridSampler=ml,n.GridSamplerInstance=Dr,n.HTMLCanvasElementLuminanceSource=be,n.HybridBinarizer=ve,n.ITFReader=yt,n.IllegalArgumentException=x,n.IllegalStateException=gr,n.InvertedLuminanceSource=Ce,n.LuminanceSource=de,n.MathUtils=Qe,n.MultiFormatOneDReader=Mi,n.MultiFormatReader=to,n.MultiFormatWriter=Cf,n.NotFoundException=se,n.OneDReader=jt,n.PDF417DecodedBitStreamParser=ne,n.PDF417DecoderErrorCorrection=fa,n.PDF417Reader=_n,n.PDF417ResultMetadata=sc,n.PerspectiveTransform=Et,n.PlanarYUVLuminanceSource=Vr,n.QRCodeByteMatrix=xa,n.QRCodeDataMask=Nn,n.QRCodeDecodedBitStreamParser=bt,n.QRCodeDecoderErrorCorrectionLevel=Ye,n.QRCodeDecoderFormatInformation=rn,n.QRCodeEncoder=_t,n.QRCodeEncoderQRCode=or,n.QRCodeMaskUtil=Pt,n.QRCodeMatrixUtil=Ne,n.QRCodeMode=Pe,n.QRCodeReader=Li,n.QRCodeVersion=ye,n.QRCodeWriter=fn,n.RGBLuminanceSource=Bi,n.RSS14Reader=ht,n.RSSExpandedReader=oe,n.ReaderException=wa,n.ReedSolomonDecoder=qs,n.ReedSolomonEncoder=no,n.ReedSolomonException=Ni,n.Result=St,n.ResultMetadataType=hn,n.ResultPoint=Te,n.StringUtils=G,n.UnsupportedOperationException=j,n.VideoInputDevice=$e,n.WhiteRectangleDetector=Or,n.WriterException=dt,n.ZXingArrays=N,n.ZXingCharset=y,n.ZXingInteger=R,n.ZXingStandardCharsets=A,n.ZXingStringBuilder=H,n.ZXingStringEncoding=K,n.ZXingSystem=M,n.createAbstractExpandedDecoder=mf,Object.defineProperty(n,"__esModule",{value:!0})})})(Rm,Rm.exports);var Mt=Rm.exports;const Cj=Nm(Mt),Tj=tA({__proto__:null,default:Cj},[Mt]);var k_=function(){function t(e,n,r){if(this.formatMap=new Map([[Ee.QR_CODE,Mt.BarcodeFormat.QR_CODE],[Ee.AZTEC,Mt.BarcodeFormat.AZTEC],[Ee.CODABAR,Mt.BarcodeFormat.CODABAR],[Ee.CODE_39,Mt.BarcodeFormat.CODE_39],[Ee.CODE_93,Mt.BarcodeFormat.CODE_93],[Ee.CODE_128,Mt.BarcodeFormat.CODE_128],[Ee.DATA_MATRIX,Mt.BarcodeFormat.DATA_MATRIX],[Ee.MAXICODE,Mt.BarcodeFormat.MAXICODE],[Ee.ITF,Mt.BarcodeFormat.ITF],[Ee.EAN_13,Mt.BarcodeFormat.EAN_13],[Ee.EAN_8,Mt.BarcodeFormat.EAN_8],[Ee.PDF_417,Mt.BarcodeFormat.PDF_417],[Ee.RSS_14,Mt.BarcodeFormat.RSS_14],[Ee.RSS_EXPANDED,Mt.BarcodeFormat.RSS_EXPANDED],[Ee.UPC_A,Mt.BarcodeFormat.UPC_A],[Ee.UPC_E,Mt.BarcodeFormat.UPC_E],[Ee.UPC_EAN_EXTENSION,Mt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Tj)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set(Mt.DecodeHintType.POSSIBLE_FORMATS,i),o.set(Mt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(o){i(o)}})},t.prototype.decode=function(e){var n=new Mt.MultiFormatReader(this.verbose,this.hints),r=new Mt.HTMLCanvasElementLuminanceSource(e),i=new Mt.BinaryBitmap(new Mt.HybridBinarizer(r)),o=n.decode(i);return{text:o.text,format:sR.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),Ij=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function f(w){try{g(r.next(w))}catch(x){u(x)}}function d(w){try{g(r.throw(w))}catch(x){u(x)}}function g(w){w.done?o(w.value):i(w.value).then(f,d)}g((r=r.apply(t,e||[])).next())})},Sj=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(g){return function(w){return d([g,w])}}function d(g){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},L_=function(){function t(e,n,r){if(this.formatMap=new Map([[Ee.QR_CODE,"qr_code"],[Ee.AZTEC,"aztec"],[Ee.CODABAR,"codabar"],[Ee.CODE_39,"code_39"],[Ee.CODE_93,"code_93"],[Ee.CODE_128,"code_128"],[Ee.DATA_MATRIX,"data_matrix"],[Ee.ITF,"itf"],[Ee.EAN_13,"ean_13"],[Ee.EAN_8,"ean_8"],[Ee.PDF_417,"pdf417"],[Ee.UPC_A,"upc_a"],[Ee.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return Ij(this,void 0,void 0,function(){var n,r;return Sj(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:sR.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,o=e;i<o.length;i++){var u=o[i],f=u.boundingBox.width*u.boundingBox.height;f>r&&(r=f,n=u)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),F_=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function f(w){try{g(r.next(w))}catch(x){u(x)}}function d(w){try{g(r.throw(w))}catch(x){u(x)}}function g(w){w.done?o(w.value):i(w.value).then(f,d)}g((r=r.apply(t,e||[])).next())})},B_=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(g){return function(w){return d([g,w])}}function d(g){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},bj=function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&L_.isSupported()?(this.primaryDecoder=new L_(e,r,i),this.secondaryDecoder=new k_(e,r,i)):this.primaryDecoder=new k_(e,r,i)}return t.prototype.decodeAsync=function(e){return F_(this,void 0,void 0,function(){var n;return B_(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return F_(this,void 0,void 0,function(){var n,r;return B_(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),mw=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),b0=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function f(w){try{g(r.next(w))}catch(x){u(x)}}function d(w){try{g(r.throw(w))}catch(x){u(x)}}function g(w){w.done?o(w.value):i(w.value).then(f,d)}g((r=r.apply(t,e||[])).next())})},R0=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(g){return function(w){return d([g,w])}}function d(g){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},aR=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),Rj=function(t){mw(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(aR),Pj=function(t){mw(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(Rj),Nj=function(t){mw(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(aR),Oj=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new Pj(this.track)},t.prototype.torchFeature=function(){return new Nj(this.track)},t}(),Dj=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return b0(this,void 0,void 0,function(){var o,u;return R0(this,function(f){switch(f.label){case 0:return o=new t(e,n,i),r.aspectRatio?(u={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:f.sent(),f.label=2;case 2:return o.setupSurface(),[2,o]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return b0(this,void 0,void 0,function(){return R0(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),o=i.length,u=0;e.mediaStream.getVideoTracks().forEach(function(f){e.mediaStream.removeTrack(f),f.stop(),++u,u>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new Oj(this.getFirstTrackOrFail())},t}(),Mj=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return b0(this,void 0,void 0,function(){return R0(this,function(i){return[2,Dj.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return b0(this,void 0,void 0,function(){var n,r;return R0(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t}(),V_=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function f(w){try{g(r.next(w))}catch(x){u(x)}}function d(w){try{g(r.throw(w))}catch(x){u(x)}}function g(w){w.done?o(w.value):i(w.value).then(f,d)}g((r=r.apply(t,e||[])).next())})},U_=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(g){return function(w){return d([g,w])}}function d(g){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},kj=function(){function t(){}return t.failIfNotSupported=function(){return V_(this,void 0,void 0,function(){return U_(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return V_(this,void 0,void 0,function(){return U_(this,function(n){return[2,Mj.create(e)]})})},t}(),Lj=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function f(w){try{g(r.next(w))}catch(x){u(x)}}function d(w){try{g(r.throw(w))}catch(x){u(x)}}function g(w){w.done?o(w.value):i(w.value).then(f,d)}g((r=r.apply(t,e||[])).next())})},Fj=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(g){return function(w){return d([g,w])}}function d(g){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,g[0]&&(n=0)),n;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,i=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){n.label=g[1];break}if(g[0]===6&&n.label<o[1]){n.label=o[1],o=g;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(g);break}o[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Bj=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Kl.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Kl.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Lj(this,void 0,void 0,function(){var e,n,r,i,o,u,f;return Fj(this,function(d){switch(d.label){case 0:return e=function(g){for(var w=g.getVideoTracks(),x=0,_=w;x<_.length;x++){var T=_[x];T.enabled=!1,T.stop(),g.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=d.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=d.sent(),i=[],o=0,u=r;o<u.length;o++)f=u[o],f.kind==="videoinput"&&i.push({id:f.deviceId,label:f.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(o){for(var u=[],f=0,d=o;f<d.length;f++){var g=d[f];g.kind==="video"&&u.push({id:g.id,label:g.label})}e(u)},i=MediaStreamTrack;i.getSources(r)})},t}(),en;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(en||(en={}));var Vj=function(){function t(){this.state=en.NOT_STARTED,this.onGoingTransactionNewState=en.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===en.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=en.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===en.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=en.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==en.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case en.UNKNOWN:throw"Transition from unknown is not allowed";case en.NOT_STARTED:this.failIfNewStateIs(e,[en.PAUSED]);break;case en.SCANNING:break;case en.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),Uj=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===en.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==en.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===en.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===en.PAUSED},t}(),jj=function(){function t(){}return t.create=function(){return new Uj(new Vj)},t}(),zj=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jr=function(t){zj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Ej),Wj=function(){function t(e,n){this.logger=n,this.fps=jr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=jr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?oR.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ms(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Hj=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Aj(this.verbose),this.qrcode=new bj(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=jj.create()}return t.prototype.start=function(e,n,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;i?u=i:u=this.verbose?this.logger.log:function(){};var f=Wj.create(n,this.logger);this.clearElement();var d=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?d=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=d,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:jr.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var x=this,_=this.stateManagerProxy.startTransition(en.SCANNING);return new Promise(function(T,O){var M=g?f.videoConstraints:x.createVideoConstraints(e);if(!M){_.cancel(),O("videoConstraints should be defined");return}var B={};(!g||f.aspectRatio)&&(B.aspectRatio=f.aspectRatio);var k={onRenderSurfaceReady:function(N,R){x.setupUi(N,R,f),x.isScanning=!0,x.foreverScan(f,r,u)}};kj.failIfNotSupported().then(function(N){N.create(M).then(function(R){return R.render(o.element,B,k).then(function(z){x.renderedCamera=z,_.execute(),T(null)}).catch(function(z){_.cancel(),O(z)})}).catch(function(R){_.cancel(),O(Kl.errorGettingUserMedia(R))})}).catch(function(N){_.cancel(),O(Kl.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(en.PAUSED),this.showPausedState(),(ms(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(en.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(en.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(jr.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ms(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var u=new Image;u.onload=function(){var f=u.width,d=u.height,g=document.getElementById(r.elementId),w=g.clientWidth?g.clientWidth:jr.DEFAULT_WIDTH,x=Math.max(g.clientHeight?g.clientHeight:d,jr.FILE_SCAN_MIN_HEIGHT),_=r.computeCanvasDrawConfig(f,d,w,x);if(n){var T=r.createCanvasElement(w,x,"qr-canvas-visible");T.style.display="inline-block",g.appendChild(T);var O=T.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=w,O.canvas.height=x,O.drawImage(u,0,0,f,d,_.x,_.y,_.width,_.height)}var M=jr.FILE_SCAN_HIDDEN_CANVAS_PADDING,B=Math.max(u.width,_.width),k=Math.max(u.height,_.height),N=B+2*M,R=k+2*M,z=r.createCanvasElement(N,R);g.appendChild(z);var Q=z.getContext("2d");if(!Q)throw"Unable to get 2d context from canvas";Q.canvas.width=N,Q.canvas.height=R,Q.drawImage(u,0,0,f,d,M,M,B,k);try{r.qrcode.decodeRobustlyAsync(z).then(function(Z){i(M_.createFromQrcodeResult(Z))}).catch(o)}catch(Z){o("QR code parse error, error = ".concat(Z))}},u.onerror=o,u.onabort=o,u.onstalled=o,u.onsuspend=o,u.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Bj.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!oR.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[Ee.QR_CODE,Ee.AZTEC,Ee.CODABAR,Ee.CODE_39,Ee.CODE_93,Ee.CODE_128,Ee.DATA_MATRIX,Ee.MAXICODE,Ee.ITF,Ee.EAN_13,Ee.EAN_8,Ee.PDF_417,Ee.RSS_14,Ee.RSS_EXPANDED,Ee.UPC_A,Ee.UPC_E,Ee.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var u=o[i];xj(u)?r.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ms(e))return!0;if(!ms(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ms(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return ms(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var u=this.toQrdimensions(e,n,o),f=function(g){if(g<jr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(jr.MIN_QR_BOX_SIZE,"px.")},d=function(g){return g>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};f(u.width),f(u.height),u.width=d(u.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=ms(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,n,i);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=r.isShadedBoxEnabled()&&o.height<=n,f={x:0,y:0,width:e,height:n},d=u?this.getShadedRegionBounds(e,n,o):f,g=this.createCanvasElement(d.width,d.height),w={willReadFrequently:!0},x=g.getContext("2d",w);x.canvas.width=d.width,x.canvas.height=d.height,this.element.append(g),u&&this.possiblyInsertShadingElement(this.element,e,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=d,this.context=x,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Kl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,M_.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=Kl.codeParseError(i);return n(o,_j.createFrom(o)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),u=o.videoWidth/o.clientWidth,f=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var d=this.qrRegion.width*u,g=this.qrRegion.height*f,w=this.qrRegion.x*u,x=this.qrRegion.y*f;this.context.drawImage(o,w,x,d,g,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(T){!T&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){_()})):_()}).catch(function(T){i.logger.logError("Error happend while scanning context",T),_()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",u=function(O){if(O in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},f=Object.keys(e);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var d=Object.keys(e)[0];if(d!==n&&d!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(d===n){var g=e.facingMode;if(typeof g=="string"){if(u(g))return{facingMode:g}}else if(typeof g=="object")if(o in g){if(u(g["".concat(o)]))return{facingMode:{exact:g["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var w=typeof g;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var x=e.deviceId;if(typeof x=="string")return{deviceId:x};if(typeof x=="object"){if(o in x)return{deviceId:{exact:x["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var _=typeof x;throw"Invalid type of 'deviceId' = ".concat(_)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var o=(r-e)/2,u=(i-n)/2;return{x:o,y:u,width:e,height:n}}else{var f=e,d=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(d)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?jr.BORDER_SHADER_MATCH_COLOR:jr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,o=n,u=document.createElement("canvas");return u.style.width="".concat(i,"px"),u.style.height="".concat(o,"px"),u.style.display="none",u.id=ms(r)?"qr-canvas":r,u},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var u=(n-i.width)/2,f=(r-i.height)/2;if(o.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(jr.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var d=5,g=40;this.insertShaderBorders(o,g,d,-d,null,0,!0),this.insertShaderBorders(o,g,d,-d,null,0,!1),this.insertShaderBorders(o,g,d,null,-d,0,!0),this.insertShaderBorders(o,g,d,null,-d,0,!1),this.insertShaderBorders(o,d,g+d,-d,null,-d,!0),this.insertShaderBorders(o,d,g+d,null,-d,-d,!0),this.insertShaderBorders(o,d,g+d,-d,null,-d,!1),this.insertShaderBorders(o,d,g+d,null,-d,-d,!1),this.hasBorderShaders=!0}e.append(o)}},t.prototype.insertShaderBorders=function(e,n,r,i,o,u,f){var d=document.createElement("div");d.style.position="absolute",d.style.backgroundColor=jr.BORDER_SHADER_DEFAULT_COLOR,d.style.width="".concat(n,"px"),d.style.height="".concat(r,"px"),i!==null&&(d.style.top="".concat(i,"px")),o!==null&&(d.style.bottom="".concat(o,"px")),f?d.style.left="".concat(u,"px"):d.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(d),e.appendChild(d)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),j_;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(j_||(j_={}));const Gj=({isOpen:t,onClose:e,title:n,children:r})=>ae.jsx(z9,{children:t&&ae.jsx(_0.div,{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:ae.jsxs(_0.div,{className:"bg-white rounded-lg shadow-xl w-full max-w-md relative",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},transition:{type:"spring",stiffness:300,damping:30},onClick:i=>i.stopPropagation(),children:[ae.jsxs("header",{className:"flex items-center justify-between p-4 border-b",children:[ae.jsx("h2",{className:"text-xl font-bold",children:n}),ae.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:ae.jsx(wV,{size:24})})]}),ae.jsx("div",{className:"p-6",children:r})]})})}),z_="qr-reader-region",Kj=()=>{const{isOpen:t,closeScanner:e}=Fb(),{user:n}=Bb(),r=ff(),i=T0({mutationFn:NU,onSuccess:()=>{Wr.success("Stand scanned successfully!"),r.invalidateQueries({queryKey:["userData",n==null?void 0:n.uid]}),e()},onError:o=>{Wr.error(o.message),e()}});return Y.useEffect(()=>{if(!t)return;const o=new Hj(z_);let u=!0;const f=(g,w)=>{if(console.log(w),!n){Wr.error("You must be logged in to scan.");return}try{let x;try{x=JSON.parse(g).standId}catch{x=g}if(!x)throw new Error("Invalid QR code format.");i.mutate({userId:n.uid,standId:x})}catch(x){Wr.error("Could not read QR code."),console.error(x)}},d=(g,w)=>{g.includes("No QR code found")||console.warn(`QR Code Scan Error: ${g}`,w)};return o.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},f,d).catch(g=>{console.error("Failed to start QR scanner",g),Wr.error("Could not start camera. Please grant permission."),e()}),()=>{u&&(u=!1,o.stop().catch(g=>console.error("Failed to stop QR scanner",g)))}},[t,n,e,r,i]),ae.jsx(Gj,{isOpen:t,onClose:e,title:"Scan a Stand QR Code",children:ae.jsx("div",{id:z_,style:{width:"100%"}})})},qj=()=>{const{user:t,loading:e}=Bb(),n=ff(),[r,i]=Y.useState(""),[o,u]=Y.useState("");ln.useEffect(()=>{!e&&!t&&iO(af).catch(_=>{console.error("Anonymous sign-in failed",_),Wr.error("Could not connect to the service. Please refresh.")})},[t,e]);const{data:f,isLoading:d}=Yb({queryKey:["userData",t==null?void 0:t.uid],queryFn:()=>RU(t),enabled:!!t}),g=T0({mutationFn:PU,onSuccess:async(_,{user:T,name:O,email:M})=>{Wr.success("You're registered! Welcome to the event."),n.setQueryData(["userData",T==null?void 0:T.uid],{profile:{name:O,email:M,createdAt:Xt.now(),eventId:"fic-2025"},progress:{scannedCount:0,requiredScans:0}}),n.invalidateQueries({queryKey:["userData",T==null?void 0:T.uid]})},onError:_=>{Wr.error(`Registration failed: ${_.message}`)}}),w=_=>{_.preventDefault(),t&&g.mutate({user:t,name:r,email:o})},x=e||!!t&&d;return ae.jsxs(XS,{children:[x?ae.jsx(uw,{}):ae.jsx(ae.Fragment,{children:t&&(f!=null&&f.profile)?ae.jsx(qV,{profile:f.profile,progress:f.progress}):ae.jsxs(ou,{children:[ae.jsx("h2",{className:"text-2xl font-bold text-center mb-1",children:"Join the Challenge!"}),ae.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Enter your details to start collecting stamps."}),ae.jsxs("form",{onSubmit:w,className:"space-y-4",children:[ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),ae.jsx($g,{id:"name",type:"text",value:r,onChange:_=>i(_.target.value),placeholder:"Jane Doe",required:!0})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),ae.jsx($g,{id:"email",type:"email",value:o,onChange:_=>u(_.target.value),placeholder:"you@example.com",required:!0})]}),ae.jsx(Lu,{type:"submit",isLoading:g.isPending,children:"Start Collecting"})]})]})}),ae.jsx(Kj,{})]})};function lR(){const[t,e]=Y.useState(!1),[n,r]=Y.useState(!0);return Y.useEffect(()=>{const i=oI(af,async o=>{if(o){const u=il(Ps,"admins",o.uid),f=await Sh(u);e(f.exists())}else e(!1);r(!1)});return()=>i()},[]),{isAdmin:t,isLoading:n}}const Xj=()=>{const t=by(),{isAdmin:e}=lR();Y.useEffect(()=>{e&&t("/admin/dashboard",{replace:!0})},[e,t]);const n=async()=>{try{await PO(af,i9),t("/admin/dashboard")}catch(r){console.error("Admin login failed",r),Wr.error("Login failed. Please try again.")}};return ae.jsx(XS,{children:ae.jsxs(ou,{children:[ae.jsxs("div",{className:"text-center",children:[ae.jsx("h2",{className:"text-2xl font-bold",children:"Admin Access"}),ae.jsx("p",{className:"text-gray-600 mt-2",children:"Please sign in to manage the event."})]}),ae.jsx("div",{className:"mt-6",children:ae.jsxs(Lu,{onClick:n,children:[ae.jsx(mV,{className:"mr-2"})," Sign In with Google"]})})]})})},yw="fic-2025",$j=async()=>{const t=f2(Ps,`events/${yw}/stands`),e=I5(t,S5("createdAt","asc"));return(await O5(e)).docs.map(r=>({id:r.id,...r.data()}))},Qj=async t=>{if(!t.trim())throw new Error("Stand name cannot be empty.");const e=f2(Ps,`events/${yw}/stands`);await D5(e,{name:t.trim(),createdAt:Xt.now()})},Yj=t9(r9,"exportWinners"),Zj=async()=>{try{return(await Yj({eventId:yw})).data.csvData}catch(t){throw console.error("Error exporting winners:",t),new Error("Failed to export winners. Check function logs.")}};var Jj=Object.defineProperty,P0=Object.getOwnPropertySymbols,uR=Object.prototype.hasOwnProperty,cR=Object.prototype.propertyIsEnumerable,W_=(t,e,n)=>e in t?Jj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mh=(t,e)=>{for(var n in e||(e={}))uR.call(e,n)&&W_(t,n,e[n]);if(P0)for(var n of P0(e))cR.call(e,n)&&W_(t,n,e[n]);return t},ww=(t,e)=>{var n={};for(var r in t)uR.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&P0)for(var r of P0(t))e.indexOf(r)<0&&cR.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var al;(t=>{const e=class{constructor(d,g,w,x){if(this.version=d,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],d<e.MIN_VERSION||d>e.MAX_VERSION)throw new RangeError("Version value out of range");if(x<-1||x>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let _=[];for(let O=0;O<this.size;O++)_.push(!1);for(let O=0;O<this.size;O++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const T=this.addEccAndInterleave(w);if(this.drawCodewords(T),x==-1){let O=1e9;for(let M=0;M<8;M++){this.applyMask(M),this.drawFormatBits(M);const B=this.getPenaltyScore();B<O&&(x=M,O=B),this.applyMask(M)}}o(0<=x&&x<=7),this.mask=x,this.applyMask(x),this.drawFormatBits(x),this.isFunction=[]}static encodeText(d,g){const w=t.QrSegment.makeSegments(d);return e.encodeSegments(w,g)}static encodeBinary(d,g){const w=t.QrSegment.makeBytes(d);return e.encodeSegments([w],g)}static encodeSegments(d,g,w=1,x=40,_=-1,T=!0){if(!(e.MIN_VERSION<=w&&w<=x&&x<=e.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let O,M;for(O=w;;O++){const R=e.getNumDataCodewords(O,g)*8,z=f.getTotalBits(d,O);if(z<=R){M=z;break}if(O>=x)throw new RangeError("Data too long")}for(const R of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])T&&M<=e.getNumDataCodewords(O,R)*8&&(g=R);let B=[];for(const R of d){r(R.mode.modeBits,4,B),r(R.numChars,R.mode.numCharCountBits(O),B);for(const z of R.getData())B.push(z)}o(B.length==M);const k=e.getNumDataCodewords(O,g)*8;o(B.length<=k),r(0,Math.min(4,k-B.length),B),r(0,(8-B.length%8)%8,B),o(B.length%8==0);for(let R=236;B.length<k;R^=253)r(R,8,B);let N=[];for(;N.length*8<B.length;)N.push(0);return B.forEach((R,z)=>N[z>>>3]|=R<<7-(z&7)),new e(O,g,N,_)}getModule(d,g){return 0<=d&&d<this.size&&0<=g&&g<this.size&&this.modules[g][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let w=0;w<this.size;w++)this.setFunctionModule(6,w,w%2==0),this.setFunctionModule(w,6,w%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),g=d.length;for(let w=0;w<g;w++)for(let x=0;x<g;x++)w==0&&x==0||w==0&&x==g-1||w==g-1&&x==0||this.drawAlignmentPattern(d[w],d[x]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const g=this.errorCorrectionLevel.formatBits<<3|d;let w=g;for(let _=0;_<10;_++)w=w<<1^(w>>>9)*1335;const x=(g<<10|w)^21522;o(x>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,i(x,_));this.setFunctionModule(8,7,i(x,6)),this.setFunctionModule(8,8,i(x,7)),this.setFunctionModule(7,8,i(x,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,i(x,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,i(x,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,i(x,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let w=0;w<12;w++)d=d<<1^(d>>>11)*7973;const g=this.version<<12|d;o(g>>>18==0);for(let w=0;w<18;w++){const x=i(g,w),_=this.size-11+w%3,T=Math.floor(w/3);this.setFunctionModule(_,T,x),this.setFunctionModule(T,_,x)}}drawFinderPattern(d,g){for(let w=-4;w<=4;w++)for(let x=-4;x<=4;x++){const _=Math.max(Math.abs(x),Math.abs(w)),T=d+x,O=g+w;0<=T&&T<this.size&&0<=O&&O<this.size&&this.setFunctionModule(T,O,_!=2&&_!=4)}}drawAlignmentPattern(d,g){for(let w=-2;w<=2;w++)for(let x=-2;x<=2;x++)this.setFunctionModule(d+x,g+w,Math.max(Math.abs(x),Math.abs(w))!=1)}setFunctionModule(d,g,w){this.modules[g][d]=w,this.isFunction[g][d]=!0}addEccAndInterleave(d){const g=this.version,w=this.errorCorrectionLevel;if(d.length!=e.getNumDataCodewords(g,w))throw new RangeError("Invalid argument");const x=e.NUM_ERROR_CORRECTION_BLOCKS[w.ordinal][g],_=e.ECC_CODEWORDS_PER_BLOCK[w.ordinal][g],T=Math.floor(e.getNumRawDataModules(g)/8),O=x-T%x,M=Math.floor(T/x);let B=[];const k=e.reedSolomonComputeDivisor(_);for(let R=0,z=0;R<x;R++){let Q=d.slice(z,z+M-_+(R<O?0:1));z+=Q.length;const Z=e.reedSolomonComputeRemainder(Q,k);R<O&&Q.push(0),B.push(Q.concat(Z))}let N=[];for(let R=0;R<B[0].length;R++)B.forEach((z,Q)=>{(R!=M-_||Q>=O)&&N.push(z[R])});return o(N.length==T),N}drawCodewords(d){if(d.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let w=this.size-1;w>=1;w-=2){w==6&&(w=5);for(let x=0;x<this.size;x++)for(let _=0;_<2;_++){const T=w-_,M=(w+1&2)==0?this.size-1-x:x;!this.isFunction[M][T]&&g<d.length*8&&(this.modules[M][T]=i(d[g>>>3],7-(g&7)),g++)}}o(g==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let w=0;w<this.size;w++){let x;switch(d){case 0:x=(w+g)%2==0;break;case 1:x=g%2==0;break;case 2:x=w%3==0;break;case 3:x=(w+g)%3==0;break;case 4:x=(Math.floor(w/3)+Math.floor(g/2))%2==0;break;case 5:x=w*g%2+w*g%3==0;break;case 6:x=(w*g%2+w*g%3)%2==0;break;case 7:x=((w+g)%2+w*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][w]&&x&&(this.modules[g][w]=!this.modules[g][w])}}getPenaltyScore(){let d=0;for(let _=0;_<this.size;_++){let T=!1,O=0,M=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[_][B]==T?(O++,O==5?d+=e.PENALTY_N1:O>5&&d++):(this.finderPenaltyAddHistory(O,M),T||(d+=this.finderPenaltyCountPatterns(M)*e.PENALTY_N3),T=this.modules[_][B],O=1);d+=this.finderPenaltyTerminateAndCount(T,O,M)*e.PENALTY_N3}for(let _=0;_<this.size;_++){let T=!1,O=0,M=[0,0,0,0,0,0,0];for(let B=0;B<this.size;B++)this.modules[B][_]==T?(O++,O==5?d+=e.PENALTY_N1:O>5&&d++):(this.finderPenaltyAddHistory(O,M),T||(d+=this.finderPenaltyCountPatterns(M)*e.PENALTY_N3),T=this.modules[B][_],O=1);d+=this.finderPenaltyTerminateAndCount(T,O,M)*e.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let T=0;T<this.size-1;T++){const O=this.modules[_][T];O==this.modules[_][T+1]&&O==this.modules[_+1][T]&&O==this.modules[_+1][T+1]&&(d+=e.PENALTY_N2)}let g=0;for(const _ of this.modules)g=_.reduce((T,O)=>T+(O?1:0),g);const w=this.size*this.size,x=Math.ceil(Math.abs(g*20-w*10)/w)-1;return o(0<=x&&x<=9),d+=x*e.PENALTY_N4,o(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let w=[6];for(let x=this.size-7;w.length<d;x-=g)w.splice(1,0,x);return w}}static getNumRawDataModules(d){if(d<e.MIN_VERSION||d>e.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*d+128)*d+64;if(d>=2){const w=Math.floor(d/7)+2;g-=(25*w-10)*w-55,d>=7&&(g-=36)}return o(208<=g&&g<=29648),g}static getNumDataCodewords(d,g){return Math.floor(e.getNumRawDataModules(d)/8)-e.ECC_CODEWORDS_PER_BLOCK[g.ordinal][d]*e.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let g=[];for(let x=0;x<d-1;x++)g.push(0);g.push(1);let w=1;for(let x=0;x<d;x++){for(let _=0;_<g.length;_++)g[_]=e.reedSolomonMultiply(g[_],w),_+1<g.length&&(g[_]^=g[_+1]);w=e.reedSolomonMultiply(w,2)}return g}static reedSolomonComputeRemainder(d,g){let w=g.map(x=>0);for(const x of d){const _=x^w.shift();w.push(0),g.forEach((T,O)=>w[O]^=e.reedSolomonMultiply(T,_))}return w}static reedSolomonMultiply(d,g){if(d>>>8||g>>>8)throw new RangeError("Byte out of range");let w=0;for(let x=7;x>=0;x--)w=w<<1^(w>>>7)*285,w^=(g>>>x&1)*d;return o(w>>>8==0),w}finderPenaltyCountPatterns(d){const g=d[1];o(g<=this.size*3);const w=g>0&&d[2]==g&&d[3]==g*3&&d[4]==g&&d[5]==g;return(w&&d[0]>=g*4&&d[6]>=g?1:0)+(w&&d[6]>=g*4&&d[0]>=g?1:0)}finderPenaltyTerminateAndCount(d,g,w){return d&&(this.finderPenaltyAddHistory(g,w),g=0),g+=this.size,this.finderPenaltyAddHistory(g,w),this.finderPenaltyCountPatterns(w)}finderPenaltyAddHistory(d,g){g[0]==0&&(d+=this.size),g.pop(),g.unshift(d)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(d,g,w){if(g<0||g>31||d>>>g)throw new RangeError("Value out of range");for(let x=g-1;x>=0;x--)w.push(d>>>x&1)}function i(d,g){return(d>>>g&1)!=0}function o(d){if(!d)throw new Error("Assertion error")}const u=class{constructor(d,g,w){if(this.mode=d,this.numChars=g,this.bitData=w,g<0)throw new RangeError("Invalid argument");this.bitData=w.slice()}static makeBytes(d){let g=[];for(const w of d)r(w,8,g);return new u(u.Mode.BYTE,d.length,g)}static makeNumeric(d){if(!u.isNumeric(d))throw new RangeError("String contains non-numeric characters");let g=[];for(let w=0;w<d.length;){const x=Math.min(d.length-w,3);r(parseInt(d.substr(w,x),10),x*3+1,g),w+=x}return new u(u.Mode.NUMERIC,d.length,g)}static makeAlphanumeric(d){if(!u.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],w;for(w=0;w+2<=d.length;w+=2){let x=u.ALPHANUMERIC_CHARSET.indexOf(d.charAt(w))*45;x+=u.ALPHANUMERIC_CHARSET.indexOf(d.charAt(w+1)),r(x,11,g)}return w<d.length&&r(u.ALPHANUMERIC_CHARSET.indexOf(d.charAt(w)),6,g),new u(u.Mode.ALPHANUMERIC,d.length,g)}static makeSegments(d){return d==""?[]:u.isNumeric(d)?[u.makeNumeric(d)]:u.isAlphanumeric(d)?[u.makeAlphanumeric(d)]:[u.makeBytes(u.toUtf8ByteArray(d))]}static makeEci(d){let g=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)r(d,8,g);else if(d<16384)r(2,2,g),r(d,14,g);else if(d<1e6)r(6,3,g),r(d,21,g);else throw new RangeError("ECI assignment value out of range");return new u(u.Mode.ECI,0,g)}static isNumeric(d){return u.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return u.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,g){let w=0;for(const x of d){const _=x.mode.numCharCountBits(g);if(x.numChars>=1<<_)return 1/0;w+=4+_+x.bitData.length}return w}static toUtf8ByteArray(d){d=encodeURI(d);let g=[];for(let w=0;w<d.length;w++)d.charAt(w)!="%"?g.push(d.charCodeAt(w)):(g.push(parseInt(d.substr(w+1,2),16)),w+=2);return g}};let f=u;f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=f})(al||(al={}));(t=>{(e=>{const n=class{constructor(i,o){this.ordinal=i,this.formatBits=o}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(al||(al={}));(t=>{(e=>{const n=class{constructor(i,o){this.modeBits=i,this.numBitsCharCount=o}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(al||(al={}));var ql=al;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var hR={L:ql.QrCode.Ecc.LOW,M:ql.QrCode.Ecc.MEDIUM,Q:ql.QrCode.Ecc.QUARTILE,H:ql.QrCode.Ecc.HIGH},fR=128,dR="L",pR="#FFFFFF",gR="#000000",mR=!1,vw=4,ez=.1;function yR(t,e=0){const n=[];return t.forEach(function(r,i){let o=null;r.forEach(function(u,f){if(!u&&o!==null){n.push(`M${o+e} ${i+e}h${f-o}v1H${o+e}z`),o=null;return}if(f===r.length-1){if(!u)return;o===null?n.push(`M${f+e},${i+e} h1v1H${f+e}z`):n.push(`M${o+e},${i+e} h${f+1-o}v1H${o+e}z`);return}u&&o===null&&(o=f)})}),n.join("")}function wR(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((i,o)=>o<e.x||o>=e.x+e.w?i:!1))}function vR(t,e,n,r){if(r==null)return null;const i=n?vw:0,o=t.length+i*2,u=Math.floor(e*ez),f=o/e,d=(r.width||u)*f,g=(r.height||u)*f,w=r.x==null?t.length/2-d/2:r.x*f,x=r.y==null?t.length/2-g/2:r.y*f;let _=null;if(r.excavate){let T=Math.floor(w),O=Math.floor(x),M=Math.ceil(d+w-T),B=Math.ceil(g+x-O);_={x:T,y:O,w:M,h:B}}return{x:w,y:x,h:g,w:d,excavation:_}}var tz=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function nz(t){const e=t,{value:n,size:r=fR,level:i=dR,bgColor:o=pR,fgColor:u=gR,includeMargin:f=mR,style:d,imageSettings:g}=e,w=ww(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),x=g==null?void 0:g.src,_=ln.useRef(null),T=ln.useRef(null),[O,M]=ln.useState(!1);ln.useEffect(()=>{if(_.current!=null){const N=_.current,R=N.getContext("2d");if(!R)return;let z=ql.QrCode.encodeText(n,hR[i]).getModules();const Q=f?vw:0,Z=z.length+Q*2,L=vR(z,r,f,g),P=T.current,F=L!=null&&P!==null&&P.complete&&P.naturalHeight!==0&&P.naturalWidth!==0;F&&L.excavation!=null&&(z=wR(z,L.excavation));const j=window.devicePixelRatio||1;N.height=N.width=r*j;const K=r/Z*j;R.scale(K,K),R.fillStyle=o,R.fillRect(0,0,Z,Z),R.fillStyle=u,tz?R.fill(new Path2D(yR(z,Q))):z.forEach(function(G,H){G.forEach(function(We,se){We&&R.fillRect(se+Q,H+Q,1,1)})}),F&&R.drawImage(P,L.x+Q,L.y+Q,L.w,L.h)}}),ln.useEffect(()=>{M(!1)},[x]);const B=Mh({height:r,width:r},d);let k=null;return x!=null&&(k=ln.createElement("img",{src:x,key:x,style:{display:"none"},onLoad:()=>{M(!0)},ref:T})),ln.createElement(ln.Fragment,null,ln.createElement("canvas",Mh({style:B,height:r,width:r,ref:_},w)),k)}function rz(t){const e=t,{value:n,size:r=fR,level:i=dR,bgColor:o=pR,fgColor:u=gR,includeMargin:f=mR,imageSettings:d}=e,g=ww(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let w=ql.QrCode.encodeText(n,hR[i]).getModules();const x=f?vw:0,_=w.length+x*2,T=vR(w,r,f,d);let O=null;d!=null&&T!=null&&(T.excavation!=null&&(w=wR(w,T.excavation)),O=ln.createElement("image",{xlinkHref:d.src,height:T.h,width:T.w,x:T.x+x,y:T.y+x,preserveAspectRatio:"none"}));const M=yR(w,x);return ln.createElement("svg",Mh({height:r,width:r,viewBox:`0 0 ${_} ${_}`},g),ln.createElement("path",{fill:o,d:`M0,0 h${_}v${_}H0z`,shapeRendering:"crispEdges"}),ln.createElement("path",{fill:u,d:M,shapeRendering:"crispEdges"}),O)}var iz=t=>{const e=t,{renderAs:n}=e,r=ww(e,["renderAs"]);return n==="svg"?ln.createElement(rz,Mh({},r)):ln.createElement(nz,Mh({},r))};const sz=()=>{const[t,e]=Y.useState(""),n=ff(),{data:r,isLoading:i}=Yb({queryKey:["stands"],queryFn:$j}),o=T0({mutationFn:Qj,onSuccess:()=>{Wr.success("Stand added!"),n.invalidateQueries({queryKey:["stands"]}),e("")},onError:d=>{Wr.error(d.message)}}),u=T0({mutationFn:Zj,onSuccess:d=>{const g=new Blob([d],{type:"text/csv;charset=utf-8;"}),w=document.createElement("a"),x=URL.createObjectURL(g);w.setAttribute("href",x),w.setAttribute("download","fair_passport_winners.csv"),document.body.appendChild(w),w.click(),document.body.removeChild(w),Wr.success("Winners list downloaded!")},onError:d=>{Wr.error(d.message)}}),f=d=>{d.preventDefault(),o.mutate(t)};return ae.jsxs("div",{className:"space-y-8",children:[ae.jsxs(ou,{children:[ae.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Manage Stands"}),ae.jsxs("form",{onSubmit:f,className:"flex flex-col sm:flex-row gap-2",children:[ae.jsx($g,{type:"text",placeholder:"E.g., 'Main Stage'",value:t,onChange:d=>e(d.target.value),"aria-label":"New Stand Name"}),ae.jsxs(Lu,{type:"submit",isLoading:o.isPending,className:"sm:w-auto",children:[ae.jsx(pV,{className:"mr-2"})," Add Stand"]})]})]}),ae.jsxs(ou,{children:[ae.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Event Stands"}),i?ae.jsx(uw,{}):ae.jsx("div",{className:"space-y-4",children:r&&r.length>0?r.map(d=>ae.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-4 bg-secondary rounded-lg",children:[ae.jsx("span",{className:"font-semibold text-lg mb-4 sm:mb-0",children:d.name}),ae.jsx("div",{className:"bg-white p-2 rounded-md",children:ae.jsx(iz,{value:JSON.stringify({standId:d.id}),size:128})})]},d.id)):ae.jsx("p",{className:"text-gray-500 text-center py-4",children:"No stands added yet. Add one above to get started."})})]}),ae.jsxs(ou,{children:[ae.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Export Winners"}),ae.jsx("p",{className:"text-gray-600 mb-4",children:"Download a CSV file of all participants who have met the scan requirement."}),ae.jsxs(Lu,{onClick:()=>u.mutate(),isLoading:u.isPending,variant:"secondary",children:[ae.jsx(gV,{className:"mr-2"})," Export Winners List"]})]})]})},oz=()=>{const t=by(),e=async()=>{await cO(af),t("/admin/login")};return ae.jsxs("div",{className:"min-h-screen bg-secondary text-gray-800 flex flex-col items-center p-4",children:[ae.jsxs("header",{className:"w-full max-w-4xl mb-8 flex justify-between items-center",children:[ae.jsx("h1",{className:"text-4xl font-bold text-primary",children:"Admin Dashboard"}),ae.jsx(Lu,{onClick:e,variant:"secondary",className:"w-auto",children:"Sign Out"})]}),ae.jsx("main",{className:"w-full max-w-4xl",children:ae.jsx(sz,{})})]})},az=({children:t})=>{const{isAdmin:e,isLoading:n}=lR();return n?ae.jsx("div",{className:"min-h-screen flex items-center justify-center",children:ae.jsx(uw,{})}):e?ae.jsx(ae.Fragment,{children:t}):ae.jsx(V8,{to:"/admin/login",replace:!0})};function lz(){return ae.jsx(H8,{basename:"/7ficvinhedosorteio/",children:ae.jsxs(j8,{children:[ae.jsx(dd,{path:"/",element:ae.jsx(qj,{})}),ae.jsx(dd,{path:"/admin/login",element:ae.jsx(Xj,{})}),ae.jsx(dd,{path:"/admin/dashboard",element:ae.jsx(az,{children:ae.jsx(oz,{})})})]})})}const uz=new mU;console.log("main.tsx: Attempting to render React app");bp.createRoot(document.getElementById("root")).render(ae.jsx(ln.StrictMode,{children:ae.jsxs(yU,{client:uz,children:[ae.jsx(lz,{}),ae.jsx(vj,{position:"top-center",reverseOrder:!1})]})}));
